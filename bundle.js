!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){var n=[],r=n.slice,i=n.concat,o=n.push,s=n.indexOf,a={},u=a.toString,l=a.hasOwnProperty,c={},f=e.document,p="2.1.3",d=function(e,t){return new d.fn.init(e,t)},h=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,g=/^-ms-/,m=/-([\da-z])/gi,v=function(e,t){return t.toUpperCase()};d.fn=d.prototype={jquery:p,constructor:d,selector:"",length:0,toArray:function(){return r.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:r.call(this)},pushStack:function(e){var t=d.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return d.each(this,e,t)},map:function(e){return this.pushStack(d.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:o,sort:n.sort,splice:n.splice},d.extend=d.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||d.isFunction(s)||(s={}),a===u&&(s=this,a--);u>a;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],r=e[t],s!==r&&(l&&r&&(d.isPlainObject(r)||(i=d.isArray(r)))?(i?(i=!1,o=n&&d.isArray(n)?n:[]):o=n&&d.isPlainObject(n)?n:{},s[t]=d.extend(l,o,r)):void 0!==r&&(s[t]=r));return s},d.extend({expando:"jQuery"+(p+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===d.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!d.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"!==d.type(e)||e.nodeType||d.isWindow(e)?!1:e.constructor&&!l.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?a[u.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=d.trim(e),e&&(1===e.indexOf("use strict")?(t=f.createElement("script"),t.text=e,f.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(g,"ms-").replace(m,v)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,s=y(e);if(n){if(s){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(s){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(h,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(y(Object(e))?d.merge(n,"string"==typeof e?[e]:e):o.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:s.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,s=e.length,a=!n;s>o;o++)r=!t(e[o],o),r!==a&&i.push(e[o]);return i},map:function(e,t,n){var r,o=0,s=e.length,a=y(e),u=[];if(a)for(;s>o;o++)r=t(e[o],o,n),null!=r&&u.push(r);else for(o in e)r=t(e[o],o,n),null!=r&&u.push(r);return i.apply([],u)},guid:1,proxy:function(e,t){var n,i,o;return"string"==typeof t&&(n=e[t],t=e,e=n),d.isFunction(e)?(i=r.call(arguments,2),o=function(){return e.apply(t||this,i.concat(r.call(arguments)))},o.guid=e.guid=e.guid||d.guid++,o):void 0},now:Date.now,support:c}),d.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){a["[object "+t+"]"]=t.toLowerCase()});function y(e){var t=e.length,n=d.type(e);return"function"===n||d.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}var x=function(e){var t,n,r,i,o,s,a,u,l,c,f,p,d,h,g,m,v,y,x,w="sizzle"+1*new Date,b=e.document,T=0,C=0,k=ae(),N=ae(),E=ae(),S=function(e,t){return e===t&&(f=!0),0},D=1<<31,j={}.hasOwnProperty,A=[],L=A.pop,q=A.push,H=A.push,O=A.slice,F=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",W=M.replace("w","w#"),$="\\["+R+"*("+M+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+W+"))|)"+R+"*\\]",I=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+$+")*)|.*)\\)|)",B=new RegExp(R+"+","g"),_=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),z=new RegExp("^"+R+"*,"+R+"*"),X=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),U=new RegExp("="+R+"*([^\\]'\"]*?)"+R+"*\\]","g"),V=new RegExp(I),Y=new RegExp("^"+W+"$"),G={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+$),PSEUDO:new RegExp("^"+I),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=/'|\\/g,ne=new RegExp("\\\\([\\da-f]{1,6}"+R+"?|("+R+")|.)","ig"),re=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},ie=function(){p()};try{H.apply(A=O.call(b.childNodes),b.childNodes),A[b.childNodes.length].nodeType}catch(oe){H={apply:A.length?function(e,t){q.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(e,t,r,i){var o,a,l,c,f,h,v,y,T,C;if((t?t.ownerDocument||t:b)!==d&&p(t),t=t||d,r=r||[],c=t.nodeType,"string"!=typeof e||!e||1!==c&&9!==c&&11!==c)return r;if(!i&&g){if(11!==c&&(o=Z.exec(e)))if(l=o[1]){if(9===c){if(a=t.getElementById(l),!a||!a.parentNode)return r;if(a.id===l)return r.push(a),r}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(l))&&x(t,a)&&a.id===l)return r.push(a),r}else{if(o[2])return H.apply(r,t.getElementsByTagName(e)),r;if((l=o[3])&&n.getElementsByClassName)return H.apply(r,t.getElementsByClassName(l)),r}if(n.qsa&&(!m||!m.test(e))){if(y=v=w,T=t,C=1!==c&&e,1===c&&"object"!==t.nodeName.toLowerCase()){h=s(e),(v=t.getAttribute("id"))?y=v.replace(te,"\\$&"):t.setAttribute("id",y),y="[id='"+y+"'] ",f=h.length;while(f--)h[f]=y+ve(h[f]);T=ee.test(e)&&ge(t.parentNode)||t,C=h.join(",")}if(C)try{return H.apply(r,T.querySelectorAll(C)),r}catch(k){}finally{v||t.removeAttribute("id")}}}return u(e.replace(_,"$1"),t,r,i)}function ae(){var e=[];function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}return t}function ue(e){return e[w]=!0,e}function le(e){var t=d.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){var n=e.split("|"),i=e.length;while(i--)r.attrHandle[n[i]]=t}function fe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||D)-(~e.sourceIndex||D);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function de(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function he(e){return ue(function(t){return t=+t,ue(function(n,r){var i,o=e([],n.length,t),s=o.length;while(s--)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function ge(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}n=se.support={},o=se.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},p=se.setDocument=function(e){var t,i,s=e?e.ownerDocument||e:b;return s!==d&&9===s.nodeType&&s.documentElement?(d=s,h=s.documentElement,i=s.defaultView,i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",ie,!1):i.attachEvent&&i.attachEvent("onunload",ie)),g=!o(s),n.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=le(function(e){return e.appendChild(s.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=K.test(s.getElementsByClassName),n.getById=le(function(e){return h.appendChild(e).id=w,!s.getElementsByName||!s.getElementsByName(w).length}),n.getById?(r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&g){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(ne,re);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(ne,re);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){return g?t.getElementsByClassName(e):void 0},v=[],m=[],(n.qsa=K.test(s.querySelectorAll))&&(le(function(e){h.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+R+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+R+"*(?:value|"+P+")"),e.querySelectorAll("[id~="+w+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]")}),le(function(e){var t=s.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+R+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=K.test(y=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&le(function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),v.push("!=",I)}),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),t=K.test(h.compareDocumentPosition),x=t||K.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},S=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===s||e.ownerDocument===b&&x(b,e)?-1:t===s||t.ownerDocument===b&&x(b,t)?1:c?F(c,e)-F(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],u=[t];if(!i||!o)return e===s?-1:t===s?1:i?-1:o?1:c?F(c,e)-F(c,t):0;if(i===o)return fe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)u.unshift(n);while(a[r]===u[r])r++;return r?fe(a[r],u[r]):a[r]===b?-1:u[r]===b?1:0},s):d},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&p(e),t=t.replace(U,"='$1']"),!(!n.matchesSelector||!g||v&&v.test(t)||m&&m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return se(t,d,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!==d&&p(e),x(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==d&&p(e);var i=r.attrHandle[t.toLowerCase()],o=i&&j.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],i=0,o=0;if(f=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(S),f){while(t=e[o++])t===e[o]&&(i=r.push(o));while(i--)e.splice(r[i],1)}return c=null,e},i=se.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},r=se.selectors={cacheLength:50,createPseudo:ue,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ne,re),e[3]=(e[3]||e[4]||e[5]||"").replace(ne,re),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&V.test(n)&&(t=s(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ne,re).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=k[e+" "];return t||(t=new RegExp("(^|"+R+")"+e+"("+R+"|$)"))&&k(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=se.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(B," ")+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==s?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!u&&!a;if(m){if(o){while(g){f=t;while(f=f[g])if(a?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[s?m.firstChild:m.lastChild],s&&y){c=m[w]||(m[w]={}),l=c[e]||[],d=l[0]===T&&l[1],p=l[0]===T&&l[2],f=d&&m.childNodes[d];while(f=++d&&f&&f[g]||(p=d=0)||h.pop())if(1===f.nodeType&&++p&&f===t){c[e]=[T,d,p];break}}else if(y&&(l=(t[w]||(t[w]={}))[e])&&l[0]===T)p=l[1];else while(f=++d&&f&&f[g]||(p=d=0)||h.pop())if((a?f.nodeName.toLowerCase()===v:1===f.nodeType)&&++p&&(y&&((f[w]||(f[w]={}))[e]=[T,p]),f===t))break;return p-=i,p===r||p%r===0&&p/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ue(function(e,n){var r,o=i(e,t),s=o.length;while(s--)r=F(e,o[s]),e[r]=!(n[r]=o[s])}):function(e){return i(e,0,n)}):i}},pseudos:{not:ue(function(e){var t=[],n=[],r=a(e.replace(_,"$1"));return r[w]?ue(function(e,t,n,i){var o,s=r(e,null,i,[]),a=e.length;while(a--)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:ue(function(e){return function(t){return se(e,t).length>0}}),contains:ue(function(e){return e=e.replace(ne,re),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:ue(function(e){return Y.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(ne,re).toLowerCase(),function(t){var n;do if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,n){return[0>n?n+t:n]}),even:he(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:he(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:he(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:he(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},r.pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=de(t);function me(){}me.prototype=r.filters=r.pseudos,r.setFilters=new me,s=se.tokenize=function(e,t){var n,i,o,s,a,u,l,c=N[e+" "];if(c)return t?0:c.slice(0);a=e,u=[],l=r.preFilter;while(a){(!n||(i=z.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),u.push(o=[])),n=!1,(i=X.exec(a))&&(n=i.shift(),o.push({value:n,type:i[0].replace(_," ")}),a=a.slice(n.length));for(s in r.filter)!(i=G[s].exec(a))||l[s]&&!(i=l[s](i))||(n=i.shift(),o.push({value:n,type:s,matches:i}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):N(e,u).slice(0)};function ve(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function ye(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=C++;return t.first?function(t,n,o){while(t=t[r])if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,s){var a,u,l=[T,o];if(s){while(t=t[r])if((1===t.nodeType||i)&&e(t,n,s))return!0}else while(t=t[r])if(1===t.nodeType||i){if(u=t[w]||(t[w]={}),(a=u[r])&&a[0]===T&&a[1]===o)return l[2]=a[2];if(u[r]=l,l[2]=e(t,n,s))return!0}}}function xe(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function we(e,t,n){for(var r=0,i=t.length;i>r;r++)se(e,t[r],n);return n}function be(e,t,n,r,i){for(var o,s=[],a=0,u=e.length,l=null!=t;u>a;a++)(o=e[a])&&(!n||n(o,r,i))&&(s.push(o),l&&t.push(a));return s}function Te(e,t,n,r,i,o){return r&&!r[w]&&(r=Te(r)),i&&!i[w]&&(i=Te(i,o)),ue(function(o,s,a,u){var l,c,f,p=[],d=[],h=s.length,g=o||we(t||"*",a.nodeType?[a]:a,[]),m=!e||!o&&t?g:be(g,p,e,a,u),v=n?i||(o?e:h||r)?[]:s:m;if(n&&n(m,v,a,u),r){l=be(v,d),r(l,[],a,u),c=l.length;while(c--)(f=l[c])&&(v[d[c]]=!(m[d[c]]=f))}if(o){if(i||e){if(i){l=[],c=v.length;while(c--)(f=v[c])&&l.push(m[c]=f);i(null,v=[],l,u)}c=v.length;while(c--)(f=v[c])&&(l=i?F(o,f):p[c])>-1&&(o[l]=!(s[l]=f))}}else v=be(v===s?v.splice(h,v.length):v),i?i(null,s,v,u):H.apply(s,v)})}function Ce(e){for(var t,n,i,o=e.length,s=r.relative[e[0].type],a=s||r.relative[" "],u=s?1:0,c=ye(function(e){return e===t},a,!0),f=ye(function(e){return F(t,e)>-1},a,!0),p=[function(e,n,r){var i=!s&&(r||n!==l)||((t=n).nodeType?c(e,n,r):f(e,n,r));return t=null,i}];o>u;u++)if(n=r.relative[e[u].type])p=[ye(xe(p),n)];else{if(n=r.filter[e[u].type].apply(null,e[u].matches),n[w]){for(i=++u;o>i;i++)if(r.relative[e[i].type])break;return Te(u>1&&xe(p),u>1&&ve(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(_,"$1"),n,i>u&&Ce(e.slice(u,i)),o>i&&Ce(e=e.slice(i)),o>i&&ve(e))}p.push(n)}return xe(p)}function ke(e,t){var n=t.length>0,i=e.length>0,o=function(o,s,a,u,c){var f,p,h,g=0,m="0",v=o&&[],y=[],x=l,w=o||i&&r.find.TAG("*",c),b=T+=null==x?1:Math.random()||.1,C=w.length;for(c&&(l=s!==d&&s);m!==C&&null!=(f=w[m]);m++){if(i&&f){p=0;while(h=e[p++])if(h(f,s,a)){u.push(f);break}c&&(T=b)}n&&((f=!h&&f)&&g--,o&&v.push(f))}if(g+=m,n&&m!==g){p=0;while(h=t[p++])h(v,y,s,a);if(o){if(g>0)while(m--)v[m]||y[m]||(y[m]=L.call(u));y=be(y)}H.apply(u,y),c&&!o&&y.length>0&&g+t.length>1&&se.uniqueSort(u)}return c&&(T=b,l=x),v};return n?ue(o):o}return a=se.compile=function(e,t){var n,r=[],i=[],o=E[e+" "];if(!o){t||(t=s(e)),n=t.length;while(n--)o=Ce(t[n]),o[w]?r.push(o):i.push(o);o=E(e,ke(i,r)),o.selector=e}return o},u=se.select=function(e,t,i,o){var u,l,c,f,p,d="function"==typeof e&&e,h=!o&&s(e=d.selector||e);if(i=i||[],1===h.length){if(l=h[0]=h[0].slice(0),l.length>2&&"ID"===(c=l[0]).type&&n.getById&&9===t.nodeType&&g&&r.relative[l[1].type]){if(t=(r.find.ID(c.matches[0].replace(ne,re),t)||[])[0],!t)return i;d&&(t=t.parentNode),e=e.slice(l.shift().value.length)}u=G.needsContext.test(e)?0:l.length;while(u--){if(c=l[u],r.relative[f=c.type])break;if((p=r.find[f])&&(o=p(c.matches[0].replace(ne,re),ee.test(l[0].type)&&ge(t.parentNode)||t))){if(l.splice(u,1),e=o.length&&ve(l),!e)return H.apply(i,o),i;break}}}return(d||a(e,h))(o,t,!g,i,ee.test(e)&&ge(t.parentNode)||t),i},n.sortStable=w.split("").sort(S).join("")===w,n.detectDuplicates=!!f,p(),n.sortDetached=le(function(e){return 1&e.compareDocumentPosition(d.createElement("div"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ce("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ce("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||ce(P,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(e);d.find=x,d.expr=x.selectors,d.expr[":"]=d.expr.pseudos,d.unique=x.uniqueSort,d.text=x.getText,d.isXMLDoc=x.isXML,d.contains=x.contains;var w=d.expr.match.needsContext,b=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,T=/^.[^:#\[\.,]*$/;function C(e,t,n){if(d.isFunction(t))return d.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return d.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(T.test(t))return d.filter(t,e,n);t=d.filter(t,e)}return d.grep(e,function(e){return s.call(t,e)>=0!==n})}d.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?d.find.matchesSelector(r,e)?[r]:[]:d.find.matches(e,d.grep(t,function(e){return 1===e.nodeType}))},d.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!=typeof e)return this.pushStack(d(e).filter(function(){for(t=0;n>t;t++)if(d.contains(i[t],this))return!0}));for(t=0;n>t;t++)d.find(e,i[t],r);return r=this.pushStack(n>1?d.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(C(this,e||[],!1))},not:function(e){return this.pushStack(C(this,e||[],!0))},is:function(e){return!!C(this,"string"==typeof e&&w.test(e)?d(e):e||[],!1).length}});var k,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,E=d.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:N.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||k).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof d?t[0]:t,d.merge(this,d.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:f,!0)),b.test(n[1])&&d.isPlainObject(t))for(n in t)d.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return r=f.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=f,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):d.isFunction(e)?"undefined"!=typeof k.ready?k.ready(e):e(d):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),d.makeArray(e,this))};E.prototype=d.fn,k=d(f);var S=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};d.extend({dir:function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&d(e).is(n))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),d.fn.extend({has:function(e){var t=d(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(d.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],s=w.test(e)||"string"!=typeof e?d(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&d.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?d.unique(o):o)},index:function(e){return e?"string"==typeof e?s.call(d(e),this[0]):s.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(d.unique(d.merge(this.get(),d(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}});function j(e,t){while((e=e[t])&&1!==e.nodeType);return e}d.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return d.dir(e,"parentNode")},parentsUntil:function(e,t,n){return d.dir(e,"parentNode",n)},next:function(e){return j(e,"nextSibling")},prev:function(e){return j(e,"previousSibling")},nextAll:function(e){return d.dir(e,"nextSibling")},prevAll:function(e){return d.dir(e,"previousSibling")},nextUntil:function(e,t,n){return d.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return d.dir(e,"previousSibling",n)},siblings:function(e){return d.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return d.sibling(e.firstChild)},contents:function(e){return e.contentDocument||d.merge([],e.childNodes)}},function(e,t){d.fn[e]=function(n,r){var i=d.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=d.filter(r,i)),this.length>1&&(D[e]||d.unique(i),S.test(e)&&i.reverse()),this.pushStack(i)}});var A=/\S+/g,L={};function q(e){var t=L[e]={};return d.each(e.match(A)||[],function(e,n){t[n]=!0}),t}d.Callbacks=function(e){e="string"==typeof e?L[e]||q(e):d.extend({},e);var t,n,r,i,o,s,a=[],u=!e.once&&[],l=function(f){for(t=e.memory&&f,n=!0,s=i||0,i=0,o=a.length,r=!0;a&&o>s;s++)if(a[s].apply(f[0],f[1])===!1&&e.stopOnFalse){t=!1;break}r=!1,a&&(u?u.length&&l(u.shift()):t?a=[]:c.disable())},c={add:function(){if(a){var n=a.length;!function s(t){d.each(t,function(t,n){var r=d.type(n);"function"===r?e.unique&&c.has(n)||a.push(n):n&&n.length&&"string"!==r&&s(n)})}(arguments),r?o=a.length:t&&(i=n,l(t))}return this},remove:function(){return a&&d.each(arguments,function(e,t){var n;while((n=d.inArray(t,a,n))>-1)a.splice(n,1),r&&(o>=n&&o--,s>=n&&s--)}),this},has:function(e){return e?d.inArray(e,a)>-1:!(!a||!a.length)},empty:function(){return a=[],o=0,this},disable:function(){return a=u=t=void 0,this},disabled:function(){return!a},lock:function(){return u=void 0,t||c.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!a||n&&!u||(t=t||[],t=[e,t.slice?t.slice():t],r?u.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},d.extend({Deferred:function(e){var t=[["resolve","done",d.Callbacks("once memory"),"resolved"],["reject","fail",d.Callbacks("once memory"),"rejected"],["notify","progress",d.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return d.Deferred(function(n){d.each(t,function(t,o){var s=d.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&d.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?d.extend(e,r):r}},i={};return r.pipe=r.then,d.each(t,function(e,o){var s=o[2],a=o[3];r[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=s.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=r.call(arguments),i=n.length,o=1!==i||e&&d.isFunction(e.promise)?i:0,s=1===o?e:d.Deferred(),a=function(e,t,n){return function(i){t[e]=this,n[e]=arguments.length>1?r.call(arguments):i,n===u?s.notifyWith(t,n):--o||s.resolveWith(t,n)}},u,l,c;if(i>1)for(u=new Array(i),l=new Array(i),c=new Array(i);i>t;t++)n[t]&&d.isFunction(n[t].promise)?n[t].promise().done(a(t,c,n)).fail(s.reject).progress(a(t,l,u)):--o;return o||s.resolveWith(c,n),s.promise()}});var H;d.fn.ready=function(e){return d.ready.promise().done(e),this},d.extend({isReady:!1,readyWait:1,holdReady:function(e){e?d.readyWait++:d.ready(!0)},ready:function(e){(e===!0?--d.readyWait:d.isReady)||(d.isReady=!0,e!==!0&&--d.readyWait>0||(H.resolveWith(f,[d]),d.fn.triggerHandler&&(d(f).triggerHandler("ready"),d(f).off("ready"))))}});function O(){f.removeEventListener("DOMContentLoaded",O,!1),e.removeEventListener("load",O,!1),d.ready()}d.ready.promise=function(t){return H||(H=d.Deferred(),"complete"===f.readyState?setTimeout(d.ready):(f.addEventListener("DOMContentLoaded",O,!1),e.addEventListener("load",O,!1))),H.promise(t)},d.ready.promise();var F=d.access=function(e,t,n,r,i,o,s){var a=0,u=e.length,l=null==n;if("object"===d.type(n)){i=!0;for(a in n)d.access(e,t,a,n[a],!0,o,s)}else if(void 0!==r&&(i=!0,d.isFunction(r)||(s=!0),l&&(s?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(d(e),n)})),t))for(;u>a;a++)t(e[a],n,s?r:r.call(e[a],a,t(e[a],n)));return i?e:l?t.call(e):u?t(e[0],n):o};d.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function P(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=d.expando+P.uid++}P.uid=1,P.accepts=d.acceptData,P.prototype={key:function(e){if(!P.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=P.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,d.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),o=this.cache[i];if("string"==typeof t)o[t]=n;else if(d.isEmptyObject(o))d.extend(this.cache[i],t);else for(r in t)o[r]=t[r];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?(r=this.get(e,t),void 0!==r?r:this.get(e,d.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,o=this.key(e),s=this.cache[o];if(void 0===t)this.cache[o]={};else{d.isArray(t)?r=t.concat(t.map(d.camelCase)):(i=d.camelCase(t),t in s?r=[t,i]:(r=i,r=r in s?[r]:r.match(A)||[])),n=r.length;while(n--)delete s[r[n]]}},hasData:function(e){return!d.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var R=new P,M=new P,W=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,$=/([A-Z])/g;function I(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace($,"-$1").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:W.test(n)?d.parseJSON(n):n}catch(i){}M.set(e,t,n)}else n=void 0;return n}d.extend({hasData:function(e){return M.hasData(e)||R.hasData(e)},data:function(e,t,n){return M.access(e,t,n);
},removeData:function(e,t){M.remove(e,t)},_data:function(e,t,n){return R.access(e,t,n)},_removeData:function(e,t){R.remove(e,t)}}),d.fn.extend({data:function(e,t){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(i=M.get(o),1===o.nodeType&&!R.get(o,"hasDataAttrs"))){n=s.length;while(n--)s[n]&&(r=s[n].name,0===r.indexOf("data-")&&(r=d.camelCase(r.slice(5)),I(o,r,i[r])));R.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){M.set(this,e)}):F(this,function(t){var n,r=d.camelCase(e);if(o&&void 0===t){if(n=M.get(o,e),void 0!==n)return n;if(n=M.get(o,r),void 0!==n)return n;if(n=I(o,r,void 0),void 0!==n)return n}else this.each(function(){var n=M.get(this,r);M.set(this,r,t),-1!==e.indexOf("-")&&void 0!==n&&M.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){M.remove(this,e)})}}),d.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=R.get(e,t),n&&(!r||d.isArray(n)?r=R.access(e,t,d.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=d.queue(e,t),r=n.length,i=n.shift(),o=d._queueHooks(e,t),s=function(){d.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return R.get(e,n)||R.access(e,n,{empty:d.Callbacks("once memory").add(function(){R.remove(e,[t+"queue",n])})})}}),d.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?d.queue(this[0],e):void 0===t?this:this.each(function(){var n=d.queue(this,e,t);d._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&d.dequeue(this,e)})},dequeue:function(e){return this.each(function(){d.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=d.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(s--)n=R.get(o[s],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var B=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,_=["Top","Right","Bottom","Left"],z=function(e,t){return e=t||e,"none"===d.css(e,"display")||!d.contains(e.ownerDocument,e)},X=/^(?:checkbox|radio)$/i;!function(){var e=f.createDocumentFragment(),t=e.appendChild(f.createElement("div")),n=f.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),c.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",c.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var U="undefined";c.focusinBubbles="onfocusin"in e;var V=/^key/,Y=/^(?:mouse|pointer|contextmenu)|click/,G=/^(?:focusinfocus|focusoutblur)$/,Q=/^([^.]*)(?:\.(.+)|)$/;function J(){return!0}function K(){return!1}function Z(){try{return f.activeElement}catch(e){}}d.event={global:{},add:function(e,t,n,r,i){var o,s,a,u,l,c,f,p,h,g,m,v=R.get(e);if(v){n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=d.guid++),(u=v.events)||(u=v.events={}),(s=v.handle)||(s=v.handle=function(t){return typeof d!==U&&d.event.triggered!==t.type?d.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(A)||[""],l=t.length;while(l--)a=Q.exec(t[l])||[],h=m=a[1],g=(a[2]||"").split(".").sort(),h&&(f=d.event.special[h]||{},h=(i?f.delegateType:f.bindType)||h,f=d.event.special[h]||{},c=d.extend({type:h,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&d.expr.match.needsContext.test(i),namespace:g.join(".")},o),(p=u[h])||(p=u[h]=[],p.delegateCount=0,f.setup&&f.setup.call(e,r,g,s)!==!1||e.addEventListener&&e.addEventListener(h,s,!1)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),d.event.global[h]=!0)}},remove:function(e,t,n,r,i){var o,s,a,u,l,c,f,p,h,g,m,v=R.hasData(e)&&R.get(e);if(v&&(u=v.events)){t=(t||"").match(A)||[""],l=t.length;while(l--)if(a=Q.exec(t[l])||[],h=m=a[1],g=(a[2]||"").split(".").sort(),h){f=d.event.special[h]||{},h=(r?f.delegateType:f.bindType)||h,p=u[h]||[],a=a[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=p.length;while(o--)c=p[o],!i&&m!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));s&&!p.length&&(f.teardown&&f.teardown.call(e,g,v.handle)!==!1||d.removeEvent(e,h,v.handle),delete u[h])}else for(h in u)d.event.remove(e,h+t[l],n,r,!0);d.isEmptyObject(u)&&(delete v.handle,R.remove(e,"events"))}},trigger:function(t,n,r,i){var o,s,a,u,c,p,h,g=[r||f],m=l.call(t,"type")?t.type:t,v=l.call(t,"namespace")?t.namespace.split("."):[];if(s=a=r=r||f,3!==r.nodeType&&8!==r.nodeType&&!G.test(m+d.event.triggered)&&(m.indexOf(".")>=0&&(v=m.split("."),m=v.shift(),v.sort()),c=m.indexOf(":")<0&&"on"+m,t=t[d.expando]?t:new d.Event(m,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=v.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:d.makeArray(n,[t]),h=d.event.special[m]||{},i||!h.trigger||h.trigger.apply(r,n)!==!1)){if(!i&&!h.noBubble&&!d.isWindow(r)){for(u=h.delegateType||m,G.test(u+m)||(s=s.parentNode);s;s=s.parentNode)g.push(s),a=s;a===(r.ownerDocument||f)&&g.push(a.defaultView||a.parentWindow||e)}o=0;while((s=g[o++])&&!t.isPropagationStopped())t.type=o>1?u:h.bindType||m,p=(R.get(s,"events")||{})[t.type]&&R.get(s,"handle"),p&&p.apply(s,n),p=c&&s[c],p&&p.apply&&d.acceptData(s)&&(t.result=p.apply(s,n),t.result===!1&&t.preventDefault());return t.type=m,i||t.isDefaultPrevented()||h._default&&h._default.apply(g.pop(),n)!==!1||!d.acceptData(r)||c&&d.isFunction(r[m])&&!d.isWindow(r)&&(a=r[c],a&&(r[c]=null),d.event.triggered=m,r[m](),d.event.triggered=void 0,a&&(r[c]=a)),t.result}},dispatch:function(e){e=d.event.fix(e);var t,n,i,o,s,a=[],u=r.call(arguments),l=(R.get(this,"events")||{})[e.type]||[],c=d.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){a=d.event.handlers.call(this,e,l),t=0;while((o=a[t++])&&!e.isPropagationStopped()){e.currentTarget=o.elem,n=0;while((s=o.handlers[n++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(s.namespace))&&(e.handleObj=s,e.data=s.data,i=((d.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,u),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,s=[],a=t.delegateCount,u=e.target;if(a&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==e.type){for(r=[],n=0;a>n;n++)o=t[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?d(i,this).index(u)>=0:d.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&s.push({elem:u,handlers:r})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||f,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[d.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];s||(this.fixHooks[i]=s=Y.test(i)?this.mouseHooks:V.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new d.Event(o),t=r.length;while(t--)n=r[t],e[n]=o[n];return e.target||(e.target=f),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==Z()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===Z()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&d.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return d.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=d.extend(new d.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?d.event.trigger(i,null,t):d.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},d.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},d.Event=function(e,t){return this instanceof d.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?J:K):this.type=e,t&&d.extend(this,t),this.timeStamp=e&&e.timeStamp||d.now(),void(this[d.expando]=!0)):new d.Event(e,t)},d.Event.prototype={isDefaultPrevented:K,isPropagationStopped:K,isImmediatePropagationStopped:K,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=J,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=J,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=J,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},d.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){d.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!d.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),c.focusinBubbles||d.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){d.event.simulate(t,e.target,d.event.fix(e),!0)};d.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=R.access(r,t);i||r.addEventListener(e,n,!0),R.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=R.access(r,t)-1;i?R.access(r,t,i):(r.removeEventListener(e,n,!0),R.remove(r,t))}}}),d.fn.extend({on:function(e,t,n,r,i){var o,s;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(s in e)this.on(s,t,n,e[s],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=K;else if(!r)return this;return 1===i&&(o=r,r=function(e){return d().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=d.guid++)),this.each(function(){d.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,d(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=K),this.each(function(){d.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){d.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?d.event.trigger(e,t,n,!0):void 0}});var ee=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,te=/<([\w:]+)/,ne=/<|&#?\w+;/,re=/<(?:script|style|link)/i,ie=/checked\s*(?:[^=]|=\s*.checked.)/i,oe=/^$|\/(?:java|ecma)script/i,se=/^true\/(.*)/,ae=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ue={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ue.optgroup=ue.option,ue.tbody=ue.tfoot=ue.colgroup=ue.caption=ue.thead,ue.th=ue.td;function le(e,t){return d.nodeName(e,"table")&&d.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ce(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function fe(e){var t=se.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function pe(e,t){for(var n=0,r=e.length;r>n;n++)R.set(e[n],"globalEval",!t||R.get(t[n],"globalEval"))}function de(e,t){var n,r,i,o,s,a,u,l;if(1===t.nodeType){if(R.hasData(e)&&(o=R.access(e),s=R.set(t,o),l=o.events)){delete s.handle,s.events={};for(i in l)for(n=0,r=l[i].length;r>n;n++)d.event.add(t,i,l[i][n])}M.hasData(e)&&(a=M.access(e),u=d.extend({},a),M.set(t,u))}}function he(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&d.nodeName(e,t)?d.merge([e],n):n}function ge(e,t){var n=t.nodeName.toLowerCase();"input"===n&&X.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}d.extend({clone:function(e,t,n){var r,i,o,s,a=e.cloneNode(!0),u=d.contains(e.ownerDocument,e);if(!(c.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||d.isXMLDoc(e)))for(s=he(a),o=he(e),r=0,i=o.length;i>r;r++)ge(o[r],s[r]);if(t)if(n)for(o=o||he(e),s=s||he(a),r=0,i=o.length;i>r;r++)de(o[r],s[r]);else de(e,a);return s=he(a,"script"),s.length>0&&pe(s,!u&&he(e,"script")),a},buildFragment:function(e,t,n,r){for(var i,o,s,a,u,l,c=t.createDocumentFragment(),f=[],p=0,h=e.length;h>p;p++)if(i=e[p],i||0===i)if("object"===d.type(i))d.merge(f,i.nodeType?[i]:i);else if(ne.test(i)){o=o||c.appendChild(t.createElement("div")),s=(te.exec(i)||["",""])[1].toLowerCase(),a=ue[s]||ue._default,o.innerHTML=a[1]+i.replace(ee,"<$1></$2>")+a[2],l=a[0];while(l--)o=o.lastChild;d.merge(f,o.childNodes),o=c.firstChild,o.textContent=""}else f.push(t.createTextNode(i));c.textContent="",p=0;while(i=f[p++])if((!r||-1===d.inArray(i,r))&&(u=d.contains(i.ownerDocument,i),o=he(c.appendChild(i),"script"),u&&pe(o),n)){l=0;while(i=o[l++])oe.test(i.type||"")&&n.push(i)}return c},cleanData:function(e){for(var t,n,r,i,o=d.event.special,s=0;void 0!==(n=e[s]);s++){if(d.acceptData(n)&&(i=n[R.expando],i&&(t=R.cache[i]))){if(t.events)for(r in t.events)o[r]?d.event.remove(n,r):d.removeEvent(n,r,t.handle);R.cache[i]&&delete R.cache[i]}delete M.cache[n[M.expando]]}}}),d.fn.extend({text:function(e){return F(this,function(e){return void 0===e?d.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=le(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=le(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?d.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||d.cleanData(he(n)),n.parentNode&&(t&&d.contains(n.ownerDocument,n)&&pe(he(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(d.cleanData(he(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return d.clone(this,e,t)})},html:function(e){return F(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!re.test(e)&&!ue[(te.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ee,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(d.cleanData(he(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,d.cleanData(he(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=i.apply([],e);var n,r,o,s,a,u,l=0,f=this.length,p=this,h=f-1,g=e[0],m=d.isFunction(g);if(m||f>1&&"string"==typeof g&&!c.checkClone&&ie.test(g))return this.each(function(n){var r=p.eq(n);m&&(e[0]=g.call(this,n,r.html())),r.domManip(e,t)});if(f&&(n=d.buildFragment(e,this[0].ownerDocument,!1,this),r=n.firstChild,1===n.childNodes.length&&(n=r),r)){for(o=d.map(he(n,"script"),ce),s=o.length;f>l;l++)a=n,l!==h&&(a=d.clone(a,!0,!0),s&&d.merge(o,he(a,"script"))),t.call(this[l],a,l);if(s)for(u=o[o.length-1].ownerDocument,d.map(o,fe),l=0;s>l;l++)a=o[l],oe.test(a.type||"")&&!R.access(a,"globalEval")&&d.contains(u,a)&&(a.src?d._evalUrl&&d._evalUrl(a.src):d.globalEval(a.textContent.replace(ae,"")))}return this}}),d.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){d.fn[e]=function(e){for(var n,r=[],i=d(e),s=i.length-1,a=0;s>=a;a++)n=a===s?this:this.clone(!0),d(i[a])[t](n),o.apply(r,n.get());return this.pushStack(r)}});var me,ve={};function ye(t,n){var r,i=d(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(i[0]))?r.display:d.css(i[0],"display");return i.detach(),o}function xe(e){var t=f,n=ve[e];return n||(n=ye(e,t),"none"!==n&&n||(me=(me||d("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=me[0].contentDocument,t.write(),t.close(),n=ye(e,t),me.detach()),ve[e]=n),n}var we=/^margin/,be=new RegExp("^("+B+")(?!px)[a-z%]+$","i"),Te=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)};function Ce(e,t,n){var r,i,o,s,a=e.style;return n=n||Te(e),n&&(s=n.getPropertyValue(t)||n[t]),n&&(""!==s||d.contains(e.ownerDocument,e)||(s=d.style(e,t)),be.test(s)&&we.test(t)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o)),void 0!==s?s+"":s}function ke(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}!function(){var t,n,r=f.documentElement,i=f.createElement("div"),o=f.createElement("div");if(o.style){o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",c.clearCloneStyle="content-box"===o.style.backgroundClip,i.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",i.appendChild(o);function s(){o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o.innerHTML="",r.appendChild(i);var s=e.getComputedStyle(o,null);t="1%"!==s.top,n="4px"===s.width,r.removeChild(i)}e.getComputedStyle&&d.extend(c,{pixelPosition:function(){return s(),t},boxSizingReliable:function(){return null==n&&s(),n},reliableMarginRight:function(){var t,n=o.appendChild(f.createElement("div"));return n.style.cssText=o.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",o.style.width="1px",r.appendChild(i),t=!parseFloat(e.getComputedStyle(n,null).marginRight),r.removeChild(i),o.removeChild(n),t}})}}(),d.swap=function(e,t,n,r){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=s[o];return i};var Ne=/^(none|table(?!-c[ea]).+)/,Ee=new RegExp("^("+B+")(.*)$","i"),Se=new RegExp("^([+-])=("+B+")","i"),De={position:"absolute",visibility:"hidden",display:"block"},je={letterSpacing:"0",fontWeight:"400"},Ae=["Webkit","O","Moz","ms"];function Le(e,t){if(t in e)return t;var n=t[0].toUpperCase()+t.slice(1),r=t,i=Ae.length;while(i--)if(t=Ae[i]+n,t in e)return t;return r}function qe(e,t,n){var r=Ee.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function He(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=d.css(e,n+_[o],!0,i)),r?("content"===n&&(s-=d.css(e,"padding"+_[o],!0,i)),"margin"!==n&&(s-=d.css(e,"border"+_[o]+"Width",!0,i))):(s+=d.css(e,"padding"+_[o],!0,i),"padding"!==n&&(s+=d.css(e,"border"+_[o]+"Width",!0,i)));return s}function Oe(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Te(e),s="border-box"===d.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=Ce(e,t,o),(0>i||null==i)&&(i=e.style[t]),be.test(i))return i;r=s&&(c.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+He(e,t,n||(s?"border":"content"),r,o)+"px"}function Fe(e,t){for(var n,r,i,o=[],s=0,a=e.length;a>s;s++)r=e[s],r.style&&(o[s]=R.get(r,"olddisplay"),n=r.style.display,t?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&z(r)&&(o[s]=R.access(r,"olddisplay",xe(r.nodeName)))):(i=z(r),"none"===n&&i||R.set(r,"olddisplay",i?n:d.css(r,"display"))));for(s=0;a>s;s++)r=e[s],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[s]||"":"none"));return e}d.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ce(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=d.camelCase(t),u=e.style;return t=d.cssProps[a]||(d.cssProps[a]=Le(u,a)),s=d.cssHooks[t]||d.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(i=s.get(e,!1,r))?i:u[t]:(o=typeof n,"string"===o&&(i=Se.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(d.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||d.cssNumber[a]||(n+="px"),c.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,r))||(u[t]=n)),void 0)}},css:function(e,t,n,r){var i,o,s,a=d.camelCase(t);return t=d.cssProps[a]||(d.cssProps[a]=Le(e.style,a)),s=d.cssHooks[t]||d.cssHooks[a],s&&"get"in s&&(i=s.get(e,!0,n)),void 0===i&&(i=Ce(e,t,r)),"normal"===i&&t in je&&(i=je[t]),""===n||n?(o=parseFloat(i),n===!0||d.isNumeric(o)?o||0:i):i}}),d.each(["height","width"],function(e,t){d.cssHooks[t]={get:function(e,n,r){return n?Ne.test(d.css(e,"display"))&&0===e.offsetWidth?d.swap(e,De,function(){return Oe(e,t,r)}):Oe(e,t,r):void 0},set:function(e,n,r){var i=r&&Te(e);return qe(e,n,r?He(e,t,r,"border-box"===d.css(e,"boxSizing",!1,i),i):0)}}}),d.cssHooks.marginRight=ke(c.reliableMarginRight,function(e,t){return t?d.swap(e,{display:"inline-block"},Ce,[e,"marginRight"]):void 0}),d.each({margin:"",padding:"",border:"Width"},function(e,t){d.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+_[r]+t]=o[r]||o[r-2]||o[0];return i}},we.test(e)||(d.cssHooks[e+t].set=qe)}),d.fn.extend({css:function(e,t){return F(this,function(e,t,n){var r,i,o={},s=0;if(d.isArray(t)){for(r=Te(e),i=t.length;i>s;s++)o[t[s]]=d.css(e,t[s],!1,r);return o}return void 0!==n?d.style(e,t,n):d.css(e,t)},e,t,arguments.length>1)},show:function(){return Fe(this,!0)},hide:function(){return Fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){z(this)?d(this).show():d(this).hide()})}});function Pe(e,t,n,r,i){return new Pe.prototype.init(e,t,n,r,i)}d.Tween=Pe,Pe.prototype={constructor:Pe,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(d.cssNumber[n]?"":"px")},cur:function(){var e=Pe.propHooks[this.prop];return e&&e.get?e.get(this):Pe.propHooks._default.get(this)},run:function(e){var t,n=Pe.propHooks[this.prop];return this.pos=t=this.options.duration?d.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Pe.propHooks._default.set(this),this}},Pe.prototype.init.prototype=Pe.prototype,Pe.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=d.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){d.fx.step[e.prop]?d.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[d.cssProps[e.prop]]||d.cssHooks[e.prop])?d.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Pe.propHooks.scrollTop=Pe.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},d.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},d.fx=Pe.prototype.init,d.fx.step={};var Re,Me,We=/^(?:toggle|show|hide)$/,$e=new RegExp("^(?:([+-])=|)("+B+")([a-z%]*)$","i"),Ie=/queueHooks$/,Be=[Ve],_e={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=$e.exec(t),o=i&&i[3]||(d.cssNumber[e]?"":"px"),s=(d.cssNumber[e]||"px"!==o&&+r)&&$e.exec(d.css(n.elem,e)),a=1,u=20;if(s&&s[3]!==o){o=o||s[3],i=i||[],s=+r||1;do a=a||".5",s/=a,d.style(n.elem,e,s+o);while(a!==(a=n.cur()/r)&&1!==a&&--u)}return i&&(s=n.start=+s||+r||0,n.unit=o,n.end=i[1]?s+(i[1]+1)*i[2]:+i[2]),n}]};function ze(){return setTimeout(function(){Re=void 0}),Re=d.now()}function Xe(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=_[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function Ue(e,t,n){for(var r,i=(_e[t]||[]).concat(_e["*"]),o=0,s=i.length;s>o;o++)if(r=i[o].call(n,t,e))return r}function Ve(e,t,n){var r,i,o,s,a,u,l,c,f=this,p={},h=e.style,g=e.nodeType&&z(e),m=R.get(e,"fxshow");n.queue||(a=d._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,d.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],l=d.css(e,"display"),c="none"===l?R.get(e,"olddisplay")||xe(e.nodeName):l,"inline"===c&&"none"===d.css(e,"float")&&(h.display="inline-block")),n.overflow&&(h.overflow="hidden",f.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],We.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;g=!0}p[r]=m&&m[r]||d.style(e,r)}else l=void 0;if(d.isEmptyObject(p))"inline"===("none"===l?xe(e.nodeName):l)&&(h.display=l);else{m?"hidden"in m&&(g=m.hidden):m=R.access(e,"fxshow",{}),o&&(m.hidden=!g),g?d(e).show():f.done(function(){d(e).hide()}),f.done(function(){var t;R.remove(e,"fxshow");for(t in p)d.style(e,t,p[t])});for(r in p)s=Ue(g?m[r]:0,r,f),r in m||(m[r]=s.start,g&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}}function Ye(e,t){var n,r,i,o,s;for(n in e)if(r=d.camelCase(n),i=t[r],o=e[n],d.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),s=d.cssHooks[r],s&&"expand"in s){o=s.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function Ge(e,t,n){var r,i,o=0,s=Be.length,a=d.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=Re||ze(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,s=0,u=l.tweens.length;u>s;s++)l.tweens[s].run(o);return a.notifyWith(e,[l,o,n]),1>o&&u?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:d.extend({},t),opts:d.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Re||ze(),duration:n.duration,tweens:[],createTween:function(t,n){var r=d.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),c=l.props;for(Ye(c,l.opts.specialEasing);s>o;o++)if(r=Be[o].call(l,e,c,l.opts))return r;return d.map(c,Ue,l),d.isFunction(l.opts.start)&&l.opts.start.call(e,l),d.fx.timer(d.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}d.Animation=d.extend(Ge,{tweener:function(e,t){d.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],_e[n]=_e[n]||[],_e[n].unshift(t)},prefilter:function(e,t){t?Be.unshift(e):Be.push(e)}}),d.speed=function(e,t,n){var r=e&&"object"==typeof e?d.extend({},e):{complete:n||!n&&t||d.isFunction(e)&&e,duration:e,easing:n&&t||t&&!d.isFunction(t)&&t};return r.duration=d.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in d.fx.speeds?d.fx.speeds[r.duration]:d.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){d.isFunction(r.old)&&r.old.call(this),r.queue&&d.dequeue(this,r.queue)},r},d.fn.extend({fadeTo:function(e,t,n,r){return this.filter(z).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=d.isEmptyObject(e),o=d.speed(t,n,r),s=function(){var t=Ge(this,d.extend({},e),o);(i||R.get(this,"finish"))&&t.stop(!0)};return s.finish=s,i||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=d.timers,s=R.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&Ie.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));(t||!n)&&d.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=R.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=d.timers,s=r?r.length:0;for(n.finish=!0,d.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;s>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),d.each(["toggle","show","hide"],function(e,t){var n=d.fn[t];d.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(Xe(t,!0),e,r,i)}}),d.each({slideDown:Xe("show"),slideUp:Xe("hide"),slideToggle:Xe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){d.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),d.timers=[],d.fx.tick=function(){var e,t=0,n=d.timers;for(Re=d.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||d.fx.stop(),Re=void 0},d.fx.timer=function(e){d.timers.push(e),e()?d.fx.start():d.timers.pop()},d.fx.interval=13,d.fx.start=function(){Me||(Me=setInterval(d.fx.tick,d.fx.interval))},d.fx.stop=function(){clearInterval(Me),Me=null},d.fx.speeds={slow:600,fast:200,_default:400},d.fn.delay=function(e,t){return e=d.fx?d.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=f.createElement("input"),t=f.createElement("select"),n=t.appendChild(f.createElement("option"));e.type="checkbox",c.checkOn=""!==e.value,c.optSelected=n.selected,t.disabled=!0,c.optDisabled=!n.disabled,e=f.createElement("input"),e.value="t",e.type="radio",c.radioValue="t"===e.value}();var Qe,Je,Ke=d.expr.attrHandle;d.fn.extend({attr:function(e,t){return F(this,d.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){d.removeAttr(this,e)})}}),d.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===U?d.prop(e,t,n):(1===o&&d.isXMLDoc(e)||(t=t.toLowerCase(),r=d.attrHooks[t]||(d.expr.match.bool.test(t)?Je:Qe)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=d.find.attr(e,t),
null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void d.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(A);if(o&&1===e.nodeType)while(n=o[i++])r=d.propFix[n]||n,d.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!c.radioValue&&"radio"===t&&d.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),Je={set:function(e,t,n){return t===!1?d.removeAttr(e,n):e.setAttribute(n,n),n}},d.each(d.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Ke[t]||d.find.attr;Ke[t]=function(e,t,r){var i,o;return r||(o=Ke[t],Ke[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,Ke[t]=o),i}});var Ze=/^(?:input|select|textarea|button)$/i;d.fn.extend({prop:function(e,t){return F(this,d.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[d.propFix[e]||e]})}}),d.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return o=1!==s||!d.isXMLDoc(e),o&&(t=d.propFix[t]||t,i=d.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||Ze.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),c.optSelected||(d.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),d.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){d.propFix[this.toLowerCase()]=this});var et=/[\t\r\n\f]/g;d.fn.extend({addClass:function(e){var t,n,r,i,o,s,a="string"==typeof e&&e,u=0,l=this.length;if(d.isFunction(e))return this.each(function(t){d(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(A)||[];l>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(et," "):" ")){o=0;while(i=t[o++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");s=d.trim(r),n.className!==s&&(n.className=s)}return this},removeClass:function(e){var t,n,r,i,o,s,a=0===arguments.length||"string"==typeof e&&e,u=0,l=this.length;if(d.isFunction(e))return this.each(function(t){d(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(A)||[];l>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(et," "):"")){o=0;while(i=t[o++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");s=e?d.trim(r):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(d.isFunction(e)?function(n){d(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n){var t,r=0,i=d(this),o=e.match(A)||[];while(t=o[r++])i.hasClass(t)?i.removeClass(t):i.addClass(t)}else(n===U||"boolean"===n)&&(this.className&&R.set(this,"__className__",this.className),this.className=this.className||e===!1?"":R.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(et," ").indexOf(t)>=0)return!0;return!1}});var tt=/\r/g;d.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=d.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,d(this).val()):e,null==i?i="":"number"==typeof i?i+="":d.isArray(i)&&(i=d.map(i,function(e){return null==e?"":e+""})),t=d.valHooks[this.type]||d.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=d.valHooks[i.type]||d.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(tt,""):null==n?"":n)}}}),d.extend({valHooks:{option:{get:function(e){var t=d.find.attr(e,"value");return null!=t?t:d.trim(d.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,s=o?null:[],a=o?i+1:r.length,u=0>i?a:o?i:0;a>u;u++)if(n=r[u],!(!n.selected&&u!==i||(c.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&d.nodeName(n.parentNode,"optgroup"))){if(t=d(n).val(),o)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=d.makeArray(t),s=i.length;while(s--)r=i[s],(r.selected=d.inArray(r.value,o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),d.each(["radio","checkbox"],function(){d.valHooks[this]={set:function(e,t){return d.isArray(t)?e.checked=d.inArray(d(e).val(),t)>=0:void 0}},c.checkOn||(d.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),d.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){d.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),d.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var nt=d.now(),rt=/\?/;d.parseJSON=function(e){return JSON.parse(e+"")},d.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(r){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&d.error("Invalid XML: "+e),t};var it=/#.*$/,ot=/([?&])_=[^&]*/,st=/^(.*?):[ \t]*([^\r\n]*)$/gm,at=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ut=/^(?:GET|HEAD)$/,lt=/^\/\//,ct=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ft={},pt={},dt="*/".concat("*"),ht=e.location.href,gt=ct.exec(ht.toLowerCase())||[];function mt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(A)||[];if(d.isFunction(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function vt(e,t,n,r){var i={},o=e===pt;function s(a){var u;return i[a]=!0,d.each(e[a]||[],function(e,a){var l=a(t,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):void 0:(t.dataTypes.unshift(l),s(l),!1)}),u}return s(t.dataTypes[0])||!i["*"]&&s("*")}function yt(e,t){var n,r,i=d.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&d.extend(!0,e,r),e}function xt(e,t,n){var r,i,o,s,a=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}s||(s=i)}o=o||s}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function wt(e,t,n,r){var i,o,s,a,u,l={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(s=l[u+" "+o]||l["* "+o],!s)for(i in l)if(a=i.split(" "),a[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){s===!0?s=l[i]:l[i]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(f){return{state:"parsererror",error:s?f:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}d.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ht,type:"GET",isLocal:at.test(gt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":dt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":d.parseJSON,"text xml":d.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?yt(yt(e,d.ajaxSettings),t):yt(d.ajaxSettings,e)},ajaxPrefilter:mt(ft),ajaxTransport:mt(pt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r,i,o,s,a,u,l,c=d.ajaxSetup({},t),f=c.context||c,p=c.context&&(f.nodeType||f.jquery)?d(f):d.event,h=d.Deferred(),g=d.Callbacks("once memory"),m=c.statusCode||{},v={},y={},x=0,w="canceled",b={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!o){o={};while(t=st.exec(i))o[t[1].toLowerCase()]=t[2]}t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?i:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return x||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)m[t]=[m[t],e[t]];else b.always(e[b.status]);return this},abort:function(e){var t=e||w;return n&&n.abort(t),C(0,t),this}};if(h.promise(b).complete=g.add,b.success=b.done,b.error=b.fail,c.url=((e||c.url||ht)+"").replace(it,"").replace(lt,gt[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=d.trim(c.dataType||"*").toLowerCase().match(A)||[""],null==c.crossDomain&&(a=ct.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===gt[1]&&a[2]===gt[2]&&(a[3]||("http:"===a[1]?"80":"443"))===(gt[3]||("http:"===gt[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=d.param(c.data,c.traditional)),vt(ft,c,t,b),2===x)return b;u=d.event&&c.global,u&&0===d.active++&&d.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!ut.test(c.type),r=c.url,c.hasContent||(c.data&&(r=c.url+=(rt.test(r)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=ot.test(r)?r.replace(ot,"$1_="+nt++):r+(rt.test(r)?"&":"?")+"_="+nt++)),c.ifModified&&(d.lastModified[r]&&b.setRequestHeader("If-Modified-Since",d.lastModified[r]),d.etag[r]&&b.setRequestHeader("If-None-Match",d.etag[r])),(c.data&&c.hasContent&&c.contentType!==!1||t.contentType)&&b.setRequestHeader("Content-Type",c.contentType),b.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+dt+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)b.setRequestHeader(l,c.headers[l]);if(c.beforeSend&&(c.beforeSend.call(f,b,c)===!1||2===x))return b.abort();w="abort";for(l in{success:1,error:1,complete:1})b[l](c[l]);if(n=vt(pt,c,t,b)){b.readyState=1,u&&p.trigger("ajaxSend",[b,c]),c.async&&c.timeout>0&&(s=setTimeout(function(){b.abort("timeout")},c.timeout));try{x=1,n.send(v,C)}catch(T){if(!(2>x))throw T;C(-1,T)}}else C(-1,"No Transport");function C(e,t,o,a){var l,v,y,w,T,C=t;2!==x&&(x=2,s&&clearTimeout(s),n=void 0,i=a||"",b.readyState=e>0?4:0,l=e>=200&&300>e||304===e,o&&(w=xt(c,b,o)),w=wt(c,w,b,l),l?(c.ifModified&&(T=b.getResponseHeader("Last-Modified"),T&&(d.lastModified[r]=T),T=b.getResponseHeader("etag"),T&&(d.etag[r]=T)),204===e||"HEAD"===c.type?C="nocontent":304===e?C="notmodified":(C=w.state,v=w.data,y=w.error,l=!y)):(y=C,(e||!C)&&(C="error",0>e&&(e=0))),b.status=e,b.statusText=(t||C)+"",l?h.resolveWith(f,[v,C,b]):h.rejectWith(f,[b,C,y]),b.statusCode(m),m=void 0,u&&p.trigger(l?"ajaxSuccess":"ajaxError",[b,c,l?v:y]),g.fireWith(f,[b,C]),u&&(p.trigger("ajaxComplete",[b,c]),--d.active||d.event.trigger("ajaxStop")))}return b},getJSON:function(e,t,n){return d.get(e,t,n,"json")},getScript:function(e,t){return d.get(e,void 0,t,"script")}}),d.each(["get","post"],function(e,t){d[t]=function(e,n,r,i){return d.isFunction(n)&&(i=i||r,r=n,n=void 0),d.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),d._evalUrl=function(e){return d.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},d.fn.extend({wrapAll:function(e){var t;return d.isFunction(e)?this.each(function(t){d(this).wrapAll(e.call(this,t))}):(this[0]&&(t=d(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(d.isFunction(e)?function(t){d(this).wrapInner(e.call(this,t))}:function(){var t=d(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=d.isFunction(e);return this.each(function(n){d(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){d.nodeName(this,"body")||d(this).replaceWith(this.childNodes)}).end()}}),d.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},d.expr.filters.visible=function(e){return!d.expr.filters.hidden(e)};var bt=/%20/g,Tt=/\[\]$/,Ct=/\r?\n/g,kt=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;function Et(e,t,n,r){var i;if(d.isArray(t))d.each(t,function(t,i){n||Tt.test(e)?r(e,i):Et(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==d.type(t))r(e,t);else for(i in t)Et(e+"["+i+"]",t[i],n,r)}d.param=function(e,t){var n,r=[],i=function(e,t){t=d.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=d.ajaxSettings&&d.ajaxSettings.traditional),d.isArray(e)||e.jquery&&!d.isPlainObject(e))d.each(e,function(){i(this.name,this.value)});else for(n in e)Et(n,e[n],t,i);return r.join("&").replace(bt,"+")},d.fn.extend({serialize:function(){return d.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=d.prop(this,"elements");return e?d.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!d(this).is(":disabled")&&Nt.test(this.nodeName)&&!kt.test(e)&&(this.checked||!X.test(e))}).map(function(e,t){var n=d(this).val();return null==n?null:d.isArray(n)?d.map(n,function(e){return{name:t.name,value:e.replace(Ct,"\r\n")}}):{name:t.name,value:n.replace(Ct,"\r\n")}}).get()}}),d.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var St=0,Dt={},jt={0:200,1223:204},At=d.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Dt)Dt[e]()}),c.cors=!!At&&"withCredentials"in At,c.ajax=At=!!At,d.ajaxTransport(function(e){var t;return c.cors||At&&!e.crossDomain?{send:function(n,r){var i,o=e.xhr(),s=++St;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)o.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete Dt[s],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?r(o.status,o.statusText):r(jt[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=Dt[s]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(a){if(t)throw a}},abort:function(){t&&t()}}:void 0}),d.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return d.globalEval(e),e}}}),d.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),d.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=d("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),f.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Lt=[],qt=/(=)\?(?=&|$)|\?\?/;d.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Lt.pop()||d.expando+"_"+nt++;return this[e]=!0,e}}),d.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,s,a=t.jsonp!==!1&&(qt.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&qt.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=d.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(qt,"$1"+i):t.jsonp!==!1&&(t.url+=(rt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||d.error(i+" was not called"),s[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){s=arguments},r.always(function(){e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Lt.push(i)),s&&d.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),d.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||f;var r=b.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=d.buildFragment([e],t,i),i&&i.length&&d(i).remove(),d.merge([],r.childNodes))};var Ht=d.fn.load;d.fn.load=function(e,t,n){if("string"!=typeof e&&Ht)return Ht.apply(this,arguments);var r,i,o,s=this,a=e.indexOf(" ");return a>=0&&(r=d.trim(e.slice(a)),e=e.slice(0,a)),d.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),s.length>0&&d.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){o=arguments,s.html(r?d("<div>").append(d.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){s.each(n,o||[e.responseText,t,e])}),this},d.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){d.fn[t]=function(e){return this.on(t,e)}}),d.expr.filters.animated=function(e){return d.grep(d.timers,function(t){return e===t.elem}).length};var Ot=e.document.documentElement;function Ft(e){return d.isWindow(e)?e:9===e.nodeType&&e.defaultView}d.offset={setOffset:function(e,t,n){var r,i,o,s,a,u,l,c=d.css(e,"position"),f=d(e),p={};"static"===c&&(e.style.position="relative"),a=f.offset(),o=d.css(e,"top"),u=d.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(r=f.position(),s=r.top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),d.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(p.top=t.top-a.top+s),null!=t.left&&(p.left=t.left-a.left+i),"using"in t?t.using.call(e,p):f.css(p)}},d.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){d.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;if(o)return t=o.documentElement,d.contains(t,r)?(typeof r.getBoundingClientRect!==U&&(i=r.getBoundingClientRect()),n=Ft(o),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===d.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),d.nodeName(e[0],"html")||(r=e.offset()),r.top+=d.css(e[0],"borderTopWidth",!0),r.left+=d.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-d.css(n,"marginTop",!0),left:t.left-r.left-d.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||Ot;while(e&&!d.nodeName(e,"html")&&"static"===d.css(e,"position"))e=e.offsetParent;return e||Ot})}}),d.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var r="pageYOffset"===n;d.fn[t]=function(i){return F(this,function(t,i,o){var s=Ft(t);return void 0===o?s?s[n]:t[i]:void(s?s.scrollTo(r?e.pageXOffset:o,r?o:e.pageYOffset):t[i]=o)},t,i,arguments.length,null)}}),d.each(["top","left"],function(e,t){d.cssHooks[t]=ke(c.pixelPosition,function(e,n){return n?(n=Ce(e,t),be.test(n)?d(e).position()[t]+"px":n):void 0})}),d.each({Height:"height",Width:"width"},function(e,t){d.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){d.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),s=n||(r===!0||i===!0?"margin":"border");return F(this,function(t,n,r){var i;return d.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?d.css(t,n,s):d.style(t,n,r,s)},t,o?r:void 0,o,null)}})}),d.fn.size=function(){return this.length},d.fn.andSelf=d.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return d});var Pt=e.jQuery,Rt=e.$;return d.noConflict=function(t){return e.$===d&&(e.$=Rt),t&&e.jQuery===d&&(e.jQuery=Pt),d},typeof t===U&&(e.jQuery=e.$=d),d});;
!function(){"use strict";function t(e,o){function i(t,e){return function(){return t.apply(e,arguments)}}var r;if(o=o||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=o.touchBoundary||10,this.layer=e,this.tapDelay=o.tapDelay||200,this.tapTimeout=o.tapTimeout||700,!t.notNeeded(e)){for(var a=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],c=this,s=0,u=a.length;u>s;s++)c[a[s]]=i(c[a[s]],c);n&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,o){var i=Node.prototype.removeEventListener;"click"===t?i.call(e,t,n.hijacked||n,o):i.call(e,t,n,o)},e.addEventListener=function(t,n,o){var i=Node.prototype.addEventListener;"click"===t?i.call(e,t,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),o):i.call(e,t,n,o)}),"function"==typeof e.onclick&&(r=e.onclick,e.addEventListener("click",function(t){r(t)},!1),e.onclick=null)}}var e=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!e,o=/iP(ad|hone|od)/.test(navigator.userAgent)&&!e,i=o&&/OS 4_\d(_\d)?/.test(navigator.userAgent),r=o&&/OS [6-7]_\d/.test(navigator.userAgent),a=navigator.userAgent.indexOf("BB10")>0;t.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(o&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},t.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},t.prototype.sendClick=function(t,e){var n,o;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),o=e.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(t),!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},t.prototype.determineEventType=function(t){return n&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},t.prototype.focus=function(t){var e;o&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},t.prototype.updateScrollParent=function(t){var e,n;if(e=t.fastClickScrollParent,!e||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.onTouchStart=function(t){var e,n,r;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],o){if(r=window.getSelection(),r.rangeCount&&!r.isCollapsed)return!0;if(!i){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n?!0:!1},t.prototype.onTouchMove=function(t){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},t.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},t.prototype.onTouchEnd=function(t){var e,a,c,s,u,l=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,a=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,r&&(u=t.changedTouches[0],l=document.elementFromPoint(u.pageX-window.pageXOffset,u.pageY-window.pageYOffset)||l,l.fastClickScrollParent=this.targetElement.fastClickScrollParent),c=l.tagName.toLowerCase(),"label"===c){if(e=this.findControl(l)){if(this.focus(l),n)return!1;l=e}}else if(this.needsFocus(l))return t.timeStamp-a>100||o&&window.top!==window&&"input"===c?(this.targetElement=null,!1):(this.focus(l),this.sendClick(l,t),o&&"select"===c||(this.targetElement=null,t.preventDefault()),!1);return o&&!i&&(s=l.fastClickScrollParent,s&&s.fastClickLastScrollTop!==s.scrollTop)?!0:(this.needsClick(l)||(t.preventDefault(),this.sendClick(l,t)),!1)},t.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(t){return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0},t.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},t.prototype.destroy=function(){var t=this.layer;n&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},t.notNeeded=function(t){var e,o,i,r;if("undefined"==typeof window.ontouchstart)return!0;if(o=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(o>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&(i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),i[1]>=10&&i[2]>=3&&(e=document.querySelector("meta[name=viewport]")))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction?!0:(r=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],r>=27&&(e=document.querySelector("meta[name=viewport]"),e&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===t.style.touchAction||"manipulation"===t.style.touchAction?!0:!1)},t.attach=function(e,n){return new t(e,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.FastClick=t):window.FastClick=t}();;
(function(e,t,i,r){var n=e(t);e.fn.lazyload=function(o){var f=this;var l;var a={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:false,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};function h(){var t=0;f.each(function(){var i=e(this);if(a.skip_invisible&&!i.is(":visible")){return}if(e.abovethetop(this,a)||e.leftofbegin(this,a)){}else if(!e.belowthefold(this,a)&&!e.rightoffold(this,a)){i.trigger("appear");t=0}else{if(++t>a.failure_limit){return false}}})}if(o){if(r!==o.failurelimit){o.failure_limit=o.failurelimit;delete o.failurelimit}if(r!==o.effectspeed){o.effect_speed=o.effectspeed;delete o.effectspeed}e.extend(a,o)}l=a.container===r||a.container===t?n:e(a.container);if(0===a.event.indexOf("scroll")){l.bind(a.event,function(){return h()})}this.each(function(){var t=this;var i=e(t);t.loaded=false;if(i.attr("src")===r||i.attr("src")===false){if(i.is("img")){i.attr("src",a.placeholder)}}i.one("appear",function(){if(!this.loaded){if(a.appear){var r=f.length;a.appear.call(t,r,a)}e("<img />").bind("load",function(){var r=i.attr("data-"+a.data_attribute);i.hide();if(i.is("img")){i.attr("src",r)}else{i.css("background-image","url('"+r+"')")}i[a.effect](a.effect_speed);t.loaded=true;var n=e.grep(f,function(e){return!e.loaded});f=e(n);if(a.load){var o=f.length;a.load.call(t,o,a)}}).attr("src",i.attr("data-"+a.data_attribute))}});if(0!==a.event.indexOf("scroll")){i.bind(a.event,function(){if(!t.loaded){i.trigger("appear")}})}});n.bind("resize",function(){h()});if(/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)){n.bind("pageshow",function(t){if(t.originalEvent&&t.originalEvent.persisted){f.each(function(){e(this).trigger("appear")})}})}e(i).ready(function(){h()});return this};e.belowthefold=function(i,o){var f;if(o.container===r||o.container===t){f=(t.innerHeight?t.innerHeight:n.height())+n.scrollTop()}else{f=e(o.container).offset().top+e(o.container).height()}return f<=e(i).offset().top-o.threshold};e.rightoffold=function(i,o){var f;if(o.container===r||o.container===t){f=n.width()+n.scrollLeft()}else{f=e(o.container).offset().left+e(o.container).width()}return f<=e(i).offset().left-o.threshold};e.abovethetop=function(i,o){var f;if(o.container===r||o.container===t){f=n.scrollTop()}else{f=e(o.container).offset().top}return f>=e(i).offset().top+o.threshold+e(i).height()};e.leftofbegin=function(i,o){var f;if(o.container===r||o.container===t){f=n.scrollLeft()}else{f=e(o.container).offset().left}return f>=e(i).offset().left+o.threshold+e(i).width()};e.inviewport=function(t,i){return!e.rightoffold(t,i)&&!e.leftofbegin(t,i)&&!e.belowthefold(t,i)&&!e.abovethetop(t,i)};e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})})(jQuery,window,document);;
!function(e){function t(e){var t=e.length,a=r.type(e);return"function"===a||r.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===a||0===t||"number"==typeof t&&t>0&&t-1 in e}if(!e.jQuery){var r=function(e,t){return new r.fn.init(e,t)};r.isWindow=function(e){return null!=e&&e==e.window},r.type=function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[i.call(e)]||"object":typeof e},r.isArray=Array.isArray||function(e){return"array"===r.type(e)},r.isPlainObject=function(e){var t;if(!e||"object"!==r.type(e)||e.nodeType||r.isWindow(e))return!1;try{if(e.constructor&&!o.call(e,"constructor")&&!o.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(a){return!1}for(t in e);return void 0===t||o.call(e,t)},r.each=function(e,r,a){var n,o=0,i=e.length,s=t(e);if(a){if(s)for(;i>o&&(n=r.apply(e[o],a),n!==!1);o++);else for(o in e)if(n=r.apply(e[o],a),n===!1)break}else if(s)for(;i>o&&(n=r.call(e[o],o,e[o]),n!==!1);o++);else for(o in e)if(n=r.call(e[o],o,e[o]),n===!1)break;return e},r.data=function(e,t,n){if(void 0===n){var o=e[r.expando],i=o&&a[o];if(void 0===t)return i;if(i&&t in i)return i[t]}else if(void 0!==t){var o=e[r.expando]||(e[r.expando]=++r.uuid);return a[o]=a[o]||{},a[o][t]=n,n}},r.removeData=function(e,t){var n=e[r.expando],o=n&&a[n];o&&r.each(t,function(e,t){delete o[t]})},r.extend=function(){var e,t,a,n,o,i,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[l]||{},l++),"object"!=typeof s&&"function"!==r.type(s)&&(s={}),l===u&&(s=this,l--);u>l;l++)if(null!=(o=arguments[l]))for(n in o)e=s[n],a=o[n],s!==a&&(c&&a&&(r.isPlainObject(a)||(t=r.isArray(a)))?(t?(t=!1,i=e&&r.isArray(e)?e:[]):i=e&&r.isPlainObject(e)?e:{},s[n]=r.extend(c,i,a)):void 0!==a&&(s[n]=a));return s},r.queue=function(e,a,n){function o(e,r){var a=r||[];return null!=e&&(t(Object(e))?!function(e,t){for(var r=+t.length,a=0,n=e.length;r>a;)e[n++]=t[a++];if(r!==r)for(;void 0!==t[a];)e[n++]=t[a++];return e.length=n,e}(a,"string"==typeof e?[e]:e):[].push.call(a,e)),a}if(e){a=(a||"fx")+"queue";var i=r.data(e,a);return n?(!i||r.isArray(n)?i=r.data(e,a,o(n)):i.push(n),i):i||[]}},r.dequeue=function(e,t){r.each(e.nodeType?[e]:e,function(e,a){t=t||"fx";var n=r.queue(a,t),o=n.shift();"inprogress"===o&&(o=n.shift()),o&&("fx"===t&&n.unshift("inprogress"),o.call(a,function(){r.dequeue(a,t)}))})},r.fn=r.prototype={init:function(e){if(e.nodeType)return this[0]=e,this;throw new Error("Not a DOM node.")},offset:function(){var t=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:t.top+(e.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:t.left+(e.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function e(){for(var e=this.offsetParent||document;e&&"html"===!e.nodeType.toLowerCase&&"static"===e.style.position;)e=e.offsetParent;return e||document}var t=this[0],e=e.apply(t),a=this.offset(),n=/^(?:body|html)$/i.test(e.nodeName)?{top:0,left:0}:r(e).offset();return a.top-=parseFloat(t.style.marginTop)||0,a.left-=parseFloat(t.style.marginLeft)||0,e.style&&(n.top+=parseFloat(e.style.borderTopWidth)||0,n.left+=parseFloat(e.style.borderLeftWidth)||0),{top:a.top-n.top,left:a.left-n.left}}};var a={};r.expando="velocity"+(new Date).getTime(),r.uuid=0;for(var n={},o=n.hasOwnProperty,i=n.toString,s="Boolean Number String Function Array Date RegExp Object Error".split(" "),l=0;l<s.length;l++)n["[object "+s[l]+"]"]=s[l].toLowerCase();r.fn.init.prototype=r.fn,e.Velocity={Utilities:r}}}(window),function(e){"object"==typeof module&&"object"==typeof module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):e()}(function(){return function(e,t,r,a){function n(e){for(var t=-1,r=e?e.length:0,a=[];++t<r;){var n=e[t];n&&a.push(n)}return a}function o(e){return g.isWrapped(e)?e=[].slice.call(e):g.isNode(e)&&(e=[e]),e}function i(e){var t=m.data(e,"velocity");return null===t?a:t}function s(e){return function(t){return Math.round(t*e)*(1/e)}}function l(e,r,a,n){function o(e,t){return 1-3*t+3*e}function i(e,t){return 3*t-6*e}function s(e){return 3*e}function l(e,t,r){return((o(t,r)*e+i(t,r))*e+s(t))*e}function u(e,t,r){return 3*o(t,r)*e*e+2*i(t,r)*e+s(t)}function c(t,r){for(var n=0;m>n;++n){var o=u(r,e,a);if(0===o)return r;var i=l(r,e,a)-t;r-=i/o}return r}function p(){for(var t=0;b>t;++t)w[t]=l(t*x,e,a)}function f(t,r,n){var o,i,s=0;do i=r+(n-r)/2,o=l(i,e,a)-t,o>0?n=i:r=i;while(Math.abs(o)>h&&++s<v);return i}function d(t){for(var r=0,n=1,o=b-1;n!=o&&w[n]<=t;++n)r+=x;--n;var i=(t-w[n])/(w[n+1]-w[n]),s=r+i*x,l=u(s,e,a);return l>=y?c(t,s):0==l?s:f(t,r,r+x)}function g(){V=!0,(e!=r||a!=n)&&p()}var m=4,y=.001,h=1e-7,v=10,b=11,x=1/(b-1),S="Float32Array"in t;if(4!==arguments.length)return!1;for(var P=0;4>P;++P)if("number"!=typeof arguments[P]||isNaN(arguments[P])||!isFinite(arguments[P]))return!1;e=Math.min(e,1),a=Math.min(a,1),e=Math.max(e,0),a=Math.max(a,0);var w=S?new Float32Array(b):new Array(b),V=!1,C=function(t){return V||g(),e===r&&a===n?t:0===t?0:1===t?1:l(d(t),r,n)};C.getControlPoints=function(){return[{x:e,y:r},{x:a,y:n}]};var T="generateBezier("+[e,r,a,n]+")";return C.toString=function(){return T},C}function u(e,t){var r=e;return g.isString(e)?b.Easings[e]||(r=!1):r=g.isArray(e)&&1===e.length?s.apply(null,e):g.isArray(e)&&2===e.length?x.apply(null,e.concat([t])):g.isArray(e)&&4===e.length?l.apply(null,e):!1,r===!1&&(r=b.Easings[b.defaults.easing]?b.defaults.easing:v),r}function c(e){if(e){var t=(new Date).getTime(),r=b.State.calls.length;r>1e4&&(b.State.calls=n(b.State.calls));for(var o=0;r>o;o++)if(b.State.calls[o]){var s=b.State.calls[o],l=s[0],u=s[2],f=s[3],d=!!f,y=null;f||(f=b.State.calls[o][3]=t-16);for(var h=Math.min((t-f)/u.duration,1),v=0,x=l.length;x>v;v++){var P=l[v],V=P.element;if(i(V)){var C=!1;if(u.display!==a&&null!==u.display&&"none"!==u.display){if("flex"===u.display){var T=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];m.each(T,function(e,t){S.setPropertyValue(V,"display",t)})}S.setPropertyValue(V,"display",u.display)}u.visibility!==a&&"hidden"!==u.visibility&&S.setPropertyValue(V,"visibility",u.visibility);for(var k in P)if("element"!==k){var A=P[k],F,E=g.isString(A.easing)?b.Easings[A.easing]:A.easing;if(1===h)F=A.endValue;else{var j=A.endValue-A.startValue;if(F=A.startValue+j*E(h,u,j),!d&&F===A.currentValue)continue}if(A.currentValue=F,"tween"===k)y=F;else{if(S.Hooks.registered[k]){var H=S.Hooks.getRoot(k),N=i(V).rootPropertyValueCache[H];N&&(A.rootPropertyValue=N)}var L=S.setPropertyValue(V,k,A.currentValue+(0===parseFloat(F)?"":A.unitType),A.rootPropertyValue,A.scrollData);S.Hooks.registered[k]&&(i(V).rootPropertyValueCache[H]=S.Normalizations.registered[H]?S.Normalizations.registered[H]("extract",null,L[1]):L[1]),"transform"===L[0]&&(C=!0)}}u.mobileHA&&i(V).transformCache.translate3d===a&&(i(V).transformCache.translate3d="(0px, 0px, 0px)",C=!0),C&&S.flushTransformCache(V)}}u.display!==a&&"none"!==u.display&&(b.State.calls[o][2].display=!1),u.visibility!==a&&"hidden"!==u.visibility&&(b.State.calls[o][2].visibility=!1),u.progress&&u.progress.call(s[1],s[1],h,Math.max(0,f+u.duration-t),f,y),1===h&&p(o)}}b.State.isTicking&&w(c)}function p(e,t){if(!b.State.calls[e])return!1;for(var r=b.State.calls[e][0],n=b.State.calls[e][1],o=b.State.calls[e][2],s=b.State.calls[e][4],l=!1,u=0,c=r.length;c>u;u++){var p=r[u].element;if(t||o.loop||("none"===o.display&&S.setPropertyValue(p,"display",o.display),"hidden"===o.visibility&&S.setPropertyValue(p,"visibility",o.visibility)),o.loop!==!0&&(m.queue(p)[1]===a||!/\.velocityQueueEntryFlag/i.test(m.queue(p)[1]))&&i(p)){i(p).isAnimating=!1,i(p).rootPropertyValueCache={};var f=!1;m.each(S.Lists.transforms3D,function(e,t){var r=/^scale/.test(t)?1:0,n=i(p).transformCache[t];i(p).transformCache[t]!==a&&new RegExp("^\\("+r+"[^.]").test(n)&&(f=!0,delete i(p).transformCache[t])}),o.mobileHA&&(f=!0,delete i(p).transformCache.translate3d),f&&S.flushTransformCache(p),S.Values.removeClass(p,"velocity-animating")}if(!t&&o.complete&&!o.loop&&u===c-1)try{o.complete.call(n,n)}catch(d){setTimeout(function(){throw d},1)}s&&o.loop!==!0&&s(n),i(p)&&o.loop===!0&&!t&&(m.each(i(p).tweensContainer,function(e,t){/^rotate/.test(e)&&360===parseFloat(t.endValue)&&(t.endValue=0,t.startValue=360),/^backgroundPosition/.test(e)&&100===parseFloat(t.endValue)&&"%"===t.unitType&&(t.endValue=0,t.startValue=100)}),b(p,"reverse",{loop:!0,delay:o.delay})),o.queue!==!1&&m.dequeue(p,o.queue)}b.State.calls[e]=!1;for(var g=0,y=b.State.calls.length;y>g;g++)if(b.State.calls[g]!==!1){l=!0;break}l===!1&&(b.State.isTicking=!1,delete b.State.calls,b.State.calls=[])}var f=function(){if(r.documentMode)return r.documentMode;for(var e=7;e>4;e--){var t=r.createElement("div");if(t.innerHTML="<!--[if IE "+e+"]><span></span><![endif]-->",t.getElementsByTagName("span").length)return t=null,e}return a}(),d=function(){var e=0;return t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(t){var r=(new Date).getTime(),a;return a=Math.max(0,16-(r-e)),e=r+a,setTimeout(function(){t(r+a)},a)}}(),g={isString:function(e){return"string"==typeof e},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},isNode:function(e){return e&&e.nodeType},isNodeList:function(e){return"object"==typeof e&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(e))&&e.length!==a&&(0===e.length||"object"==typeof e[0]&&e[0].nodeType>0)},isWrapped:function(e){return e&&(e.jquery||t.Zepto&&t.Zepto.zepto.isZ(e))},isSVG:function(e){return t.SVGElement&&e instanceof t.SVGElement},isEmptyObject:function(e){for(var t in e)return!1;return!0}},m,y=!1;if(e.fn&&e.fn.jquery?(m=e,y=!0):m=t.Velocity.Utilities,8>=f&&!y)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(7>=f)return void(jQuery.fn.velocity=jQuery.fn.animate);var h=400,v="swing",b={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:t.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:r.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:m,Redirects:{},Easings:{},Promise:t.Promise,defaults:{queue:"",duration:h,easing:v,begin:a,complete:a,progress:a,display:a,visibility:a,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(e){m.data(e,"velocity",{isSVG:g.isSVG(e),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1};t.pageYOffset!==a?(b.State.scrollAnchor=t,b.State.scrollPropertyLeft="pageXOffset",b.State.scrollPropertyTop="pageYOffset"):(b.State.scrollAnchor=r.documentElement||r.body.parentNode||r.body,b.State.scrollPropertyLeft="scrollLeft",b.State.scrollPropertyTop="scrollTop");var x=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,r,a){var n={x:t.x+a.dx*r,v:t.v+a.dv*r,tension:t.tension,friction:t.friction};return{dx:n.v,dv:e(n)}}function r(r,a){var n={dx:r.v,dv:e(r)},o=t(r,.5*a,n),i=t(r,.5*a,o),s=t(r,a,i),l=1/6*(n.dx+2*(o.dx+i.dx)+s.dx),u=1/6*(n.dv+2*(o.dv+i.dv)+s.dv);return r.x=r.x+l*a,r.v=r.v+u*a,r}return function a(e,t,n){var o={x:-1,v:0,tension:null,friction:null},i=[0],s=0,l=1e-4,u=.016,c,p,f;for(e=parseFloat(e)||500,t=parseFloat(t)||20,n=n||null,o.tension=e,o.friction=t,c=null!==n,c?(s=a(e,t),p=s/n*u):p=u;;)if(f=r(f||o,p),i.push(1+f.x),s+=16,!(Math.abs(f.x)>l&&Math.abs(f.v)>l))break;return c?function(e){return i[e*(i.length-1)|0]}:s}}();b.Easings={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)}},m.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(e,t){b.Easings[t[0]]=l.apply(null,t[1])});var S=b.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var e=0;e<S.Lists.colors.length;e++){var t="color"===S.Lists.colors[e]?"0 0 0 1":"255 255 255 1";S.Hooks.templates[S.Lists.colors[e]]=["Red Green Blue Alpha",t]}var r,a,n;if(f)for(r in S.Hooks.templates){a=S.Hooks.templates[r],n=a[0].split(" ");var o=a[1].match(S.RegEx.valueSplit);"Color"===n[0]&&(n.push(n.shift()),o.push(o.shift()),S.Hooks.templates[r]=[n.join(" "),o.join(" ")])}for(r in S.Hooks.templates){a=S.Hooks.templates[r],n=a[0].split(" ");for(var e in n){var i=r+n[e],s=e;S.Hooks.registered[i]=[r,s]}}},getRoot:function(e){var t=S.Hooks.registered[e];return t?t[0]:e},cleanRootPropertyValue:function(e,t){return S.RegEx.valueUnwrap.test(t)&&(t=t.match(S.RegEx.valueUnwrap)[1]),S.Values.isCSSNullValue(t)&&(t=S.Hooks.templates[e][1]),t},extractValue:function(e,t){var r=S.Hooks.registered[e];if(r){var a=r[0],n=r[1];return t=S.Hooks.cleanRootPropertyValue(a,t),t.toString().match(S.RegEx.valueSplit)[n]}return t},injectValue:function(e,t,r){var a=S.Hooks.registered[e];if(a){var n=a[0],o=a[1],i,s;return r=S.Hooks.cleanRootPropertyValue(n,r),i=r.toString().match(S.RegEx.valueSplit),i[o]=t,s=i.join(" ")}return r}},Normalizations:{registered:{clip:function(e,t,r){switch(e){case"name":return"clip";case"extract":var a;return S.RegEx.wrappedValueAlreadyExtracted.test(r)?a=r:(a=r.toString().match(S.RegEx.valueUnwrap),a=a?a[1].replace(/,(\s+)?/g," "):r),a;case"inject":return"rect("+r+")"}},blur:function(e,t,r){switch(e){case"name":return b.State.isFirefox?"filter":"-webkit-filter";case"extract":var a=parseFloat(r);if(!a&&0!==a){var n=r.toString().match(/blur\(([0-9]+[A-z]+)\)/i);a=n?n[1]:0}return a;case"inject":return parseFloat(r)?"blur("+r+")":"none"}},opacity:function(e,t,r){if(8>=f)switch(e){case"name":return"filter";case"extract":var a=r.toString().match(/alpha\(opacity=(.*)\)/i);return r=a?a[1]/100:1;case"inject":return t.style.zoom=1,parseFloat(r)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(r),10)+")"}else switch(e){case"name":return"opacity";case"extract":return r;case"inject":return r}}},register:function(){9>=f||b.State.isGingerbread||(S.Lists.transformsBase=S.Lists.transformsBase.concat(S.Lists.transforms3D));for(var e=0;e<S.Lists.transformsBase.length;e++)!function(){var t=S.Lists.transformsBase[e];S.Normalizations.registered[t]=function(e,r,n){switch(e){case"name":return"transform";case"extract":return i(r)===a||i(r).transformCache[t]===a?/^scale/i.test(t)?1:0:i(r).transformCache[t].replace(/[()]/g,"");case"inject":var o=!1;switch(t.substr(0,t.length-1)){case"translate":o=!/(%|px|em|rem|vw|vh|\d)$/i.test(n);break;case"scal":case"scale":b.State.isAndroid&&i(r).transformCache[t]===a&&1>n&&(n=1),o=!/(\d)$/i.test(n);break;case"skew":o=!/(deg|\d)$/i.test(n);break;case"rotate":o=!/(deg|\d)$/i.test(n)}return o||(i(r).transformCache[t]="("+n+")"),i(r).transformCache[t]}}}();for(var e=0;e<S.Lists.colors.length;e++)!function(){var t=S.Lists.colors[e];S.Normalizations.registered[t]=function(e,r,n){switch(e){case"name":return t;case"extract":var o;if(S.RegEx.wrappedValueAlreadyExtracted.test(n))o=n;else{var i,s={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(n)?i=s[n]!==a?s[n]:s.black:S.RegEx.isHex.test(n)?i="rgb("+S.Values.hexToRgb(n).join(" ")+")":/^rgba?\(/i.test(n)||(i=s.black),o=(i||n).toString().match(S.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=f||3!==o.split(" ").length||(o+=" 1"),o;case"inject":return 8>=f?4===n.split(" ").length&&(n=n.split(/\s+/).slice(0,3).join(" ")):3===n.split(" ").length&&(n+=" 1"),(8>=f?"rgb":"rgba")+"("+n.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})},SVGAttribute:function(e){var t="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(f||b.State.isAndroid&&!b.State.isChrome)&&(t+="|transform"),new RegExp("^("+t+")$","i").test(e)},prefixCheck:function(e){if(b.State.prefixMatches[e])return[b.State.prefixMatches[e],!0];for(var t=["","Webkit","Moz","ms","O"],r=0,a=t.length;a>r;r++){var n;if(n=0===r?e:t[r]+e.replace(/^\w/,function(e){return e.toUpperCase()}),g.isString(b.State.prefixElement.style[n]))return b.State.prefixMatches[e]=n,[n,!0]}return[e,!1]}},Values:{hexToRgb:function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,a;return e=e.replace(t,function(e,t,r,a){return t+t+r+r+a+a}),a=r.exec(e),a?[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]:[0,0,0]},isCSSNullValue:function(e){return 0==e||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(e)},getUnitType:function(e){return/^(rotate|skew)/i.test(e)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(e)?"":"px"},getDisplayType:function(e){var t=e&&e.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(t)?"inline":/^(li)$/i.test(t)?"list-item":/^(tr)$/i.test(t)?"table-row":/^(table)$/i.test(t)?"table":/^(tbody)$/i.test(t)?"table-row-group":"block"},addClass:function(e,t){e.classList?e.classList.add(t):e.className+=(e.className.length?" ":"")+t},removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.toString().replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(e,r,n,o){function s(e,r){function n(){u&&S.setPropertyValue(e,"display","none")}var l=0;if(8>=f)l=m.css(e,r);else{var u=!1;if(/^(width|height)$/.test(r)&&0===S.getPropertyValue(e,"display")&&(u=!0,S.setPropertyValue(e,"display",S.Values.getDisplayType(e))),!o){if("height"===r&&"border-box"!==S.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var c=e.offsetHeight-(parseFloat(S.getPropertyValue(e,"borderTopWidth"))||0)-(parseFloat(S.getPropertyValue(e,"borderBottomWidth"))||0)-(parseFloat(S.getPropertyValue(e,"paddingTop"))||0)-(parseFloat(S.getPropertyValue(e,"paddingBottom"))||0);return n(),c}if("width"===r&&"border-box"!==S.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var p=e.offsetWidth-(parseFloat(S.getPropertyValue(e,"borderLeftWidth"))||0)-(parseFloat(S.getPropertyValue(e,"borderRightWidth"))||0)-(parseFloat(S.getPropertyValue(e,"paddingLeft"))||0)-(parseFloat(S.getPropertyValue(e,"paddingRight"))||0);return n(),p}}var d;d=i(e)===a?t.getComputedStyle(e,null):i(e).computedStyle?i(e).computedStyle:i(e).computedStyle=t.getComputedStyle(e,null),"borderColor"===r&&(r="borderTopColor"),l=9===f&&"filter"===r?d.getPropertyValue(r):d[r],(""===l||null===l)&&(l=e.style[r]),n()}if("auto"===l&&/^(top|right|bottom|left)$/i.test(r)){var g=s(e,"position");("fixed"===g||"absolute"===g&&/top|left/i.test(r))&&(l=m(e).position()[r]+"px")}return l}var l;if(S.Hooks.registered[r]){var u=r,c=S.Hooks.getRoot(u);n===a&&(n=S.getPropertyValue(e,S.Names.prefixCheck(c)[0])),S.Normalizations.registered[c]&&(n=S.Normalizations.registered[c]("extract",e,n)),l=S.Hooks.extractValue(u,n)}else if(S.Normalizations.registered[r]){var p,d;p=S.Normalizations.registered[r]("name",e),"transform"!==p&&(d=s(e,S.Names.prefixCheck(p)[0]),S.Values.isCSSNullValue(d)&&S.Hooks.templates[r]&&(d=S.Hooks.templates[r][1])),l=S.Normalizations.registered[r]("extract",e,d)}if(!/^[\d-]/.test(l))if(i(e)&&i(e).isSVG&&S.Names.SVGAttribute(r))if(/^(height|width)$/i.test(r))try{l=e.getBBox()[r]}catch(g){l=0}else l=e.getAttribute(r);else l=s(e,S.Names.prefixCheck(r)[0]);return S.Values.isCSSNullValue(l)&&(l=0),b.debug>=2&&console.log("Get "+r+": "+l),l},setPropertyValue:function(e,r,a,n,o){var s=r;if("scroll"===r)o.container?o.container["scroll"+o.direction]=a:"Left"===o.direction?t.scrollTo(a,o.alternateValue):t.scrollTo(o.alternateValue,a);else if(S.Normalizations.registered[r]&&"transform"===S.Normalizations.registered[r]("name",e))S.Normalizations.registered[r]("inject",e,a),s="transform",a=i(e).transformCache[r];else{if(S.Hooks.registered[r]){var l=r,u=S.Hooks.getRoot(r);n=n||S.getPropertyValue(e,u),a=S.Hooks.injectValue(l,a,n),r=u}if(S.Normalizations.registered[r]&&(a=S.Normalizations.registered[r]("inject",e,a),r=S.Normalizations.registered[r]("name",e)),s=S.Names.prefixCheck(r)[0],8>=f)try{e.style[s]=a}catch(c){b.debug&&console.log("Browser does not support ["+a+"] for ["+s+"]")}else i(e)&&i(e).isSVG&&S.Names.SVGAttribute(r)?e.setAttribute(r,a):e.style[s]=a;b.debug>=2&&console.log("Set "+r+" ("+s+"): "+a)}return[s,a]},flushTransformCache:function(e){function t(t){return parseFloat(S.getPropertyValue(e,t))}var r="";if((f||b.State.isAndroid&&!b.State.isChrome)&&i(e).isSVG){var a={translate:[t("translateX"),t("translateY")],skewX:[t("skewX")],skewY:[t("skewY")],scale:1!==t("scale")?[t("scale"),t("scale")]:[t("scaleX"),t("scaleY")],rotate:[t("rotateZ"),0,0]};m.each(i(e).transformCache,function(e){/^translate/i.test(e)?e="translate":/^scale/i.test(e)?e="scale":/^rotate/i.test(e)&&(e="rotate"),a[e]&&(r+=e+"("+a[e].join(" ")+") ",delete a[e])})}else{var n,o;m.each(i(e).transformCache,function(t){return n=i(e).transformCache[t],"transformPerspective"===t?(o=n,!0):(9===f&&"rotateZ"===t&&(t="rotate"),void(r+=t+n+" "))}),o&&(r="perspective"+o+" "+r)}S.setPropertyValue(e,"transform",r)}};S.Hooks.register(),S.Normalizations.register(),b.hook=function(e,t,r){var n=a;return e=o(e),m.each(e,function(e,o){if(i(o)===a&&b.init(o),r===a)n===a&&(n=b.CSS.getPropertyValue(o,t));else{var s=b.CSS.setPropertyValue(o,t,r);"transform"===s[0]&&b.CSS.flushTransformCache(o),n=s}}),n};var P=function(){function e(){return l?k.promise||null:f}function n(){function e(e){function p(e,t){var r=a,i=a,s=a;return g.isArray(e)?(r=e[0],!g.isArray(e[1])&&/^[\d-]/.test(e[1])||g.isFunction(e[1])||S.RegEx.isHex.test(e[1])?s=e[1]:(g.isString(e[1])&&!S.RegEx.isHex.test(e[1])||g.isArray(e[1]))&&(i=t?e[1]:u(e[1],o.duration),e[2]!==a&&(s=e[2]))):r=e,t||(i=i||o.easing),g.isFunction(r)&&(r=r.call(n,V,w)),g.isFunction(s)&&(s=s.call(n,V,w)),[r||0,i,s]}function f(e,t){var r,a;return a=(t||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(e){return r=e,""}),r||(r=S.Values.getUnitType(e)),[a,r]}function d(){var e={myParent:n.parentNode||r.body,position:S.getPropertyValue(n,"position"),fontSize:S.getPropertyValue(n,"fontSize")},a=e.position===L.lastPosition&&e.myParent===L.lastParent,o=e.fontSize===L.lastFontSize;L.lastParent=e.myParent,L.lastPosition=e.position,L.lastFontSize=e.fontSize;var s=100,l={};if(o&&a)l.emToPx=L.lastEmToPx,l.percentToPxWidth=L.lastPercentToPxWidth,l.percentToPxHeight=L.lastPercentToPxHeight;else{var u=i(n).isSVG?r.createElementNS("http://www.w3.org/2000/svg","rect"):r.createElement("div");b.init(u),e.myParent.appendChild(u),m.each(["overflow","overflowX","overflowY"],function(e,t){b.CSS.setPropertyValue(u,t,"hidden")}),b.CSS.setPropertyValue(u,"position",e.position),b.CSS.setPropertyValue(u,"fontSize",e.fontSize),b.CSS.setPropertyValue(u,"boxSizing","content-box"),m.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(e,t){b.CSS.setPropertyValue(u,t,s+"%")}),b.CSS.setPropertyValue(u,"paddingLeft",s+"em"),l.percentToPxWidth=L.lastPercentToPxWidth=(parseFloat(S.getPropertyValue(u,"width",null,!0))||1)/s,l.percentToPxHeight=L.lastPercentToPxHeight=(parseFloat(S.getPropertyValue(u,"height",null,!0))||1)/s,l.emToPx=L.lastEmToPx=(parseFloat(S.getPropertyValue(u,"paddingLeft"))||1)/s,e.myParent.removeChild(u)}return null===L.remToPx&&(L.remToPx=parseFloat(S.getPropertyValue(r.body,"fontSize"))||16),null===L.vwToPx&&(L.vwToPx=parseFloat(t.innerWidth)/100,L.vhToPx=parseFloat(t.innerHeight)/100),l.remToPx=L.remToPx,l.vwToPx=L.vwToPx,l.vhToPx=L.vhToPx,b.debug>=1&&console.log("Unit ratios: "+JSON.stringify(l),n),l}if(o.begin&&0===V)try{o.begin.call(y,y)}catch(h){setTimeout(function(){throw h},1)}if("scroll"===A){var P=/^x$/i.test(o.axis)?"Left":"Top",C=parseFloat(o.offset)||0,T,F,E;o.container?g.isWrapped(o.container)||g.isNode(o.container)?(o.container=o.container[0]||o.container,T=o.container["scroll"+P],E=T+m(n).position()[P.toLowerCase()]+C):o.container=null:(T=b.State.scrollAnchor[b.State["scrollProperty"+P]],F=b.State.scrollAnchor[b.State["scrollProperty"+("Left"===P?"Top":"Left")]],E=m(n).offset()[P.toLowerCase()]+C),s={scroll:{rootPropertyValue:!1,startValue:T,currentValue:T,endValue:E,unitType:"",easing:o.easing,scrollData:{container:o.container,direction:P,alternateValue:F}},element:n},b.debug&&console.log("tweensContainer (scroll): ",s.scroll,n)}else if("reverse"===A){if(!i(n).tweensContainer)return void m.dequeue(n,o.queue);"none"===i(n).opts.display&&(i(n).opts.display="auto"),"hidden"===i(n).opts.visibility&&(i(n).opts.visibility="visible"),i(n).opts.loop=!1,i(n).opts.begin=null,i(n).opts.complete=null,x.easing||delete o.easing,x.duration||delete o.duration,o=m.extend({},i(n).opts,o);var j=m.extend(!0,{},i(n).tweensContainer);for(var H in j)if("element"!==H){var N=j[H].startValue;j[H].startValue=j[H].currentValue=j[H].endValue,j[H].endValue=N,g.isEmptyObject(x)||(j[H].easing=o.easing),b.debug&&console.log("reverse tweensContainer ("+H+"): "+JSON.stringify(j[H]),n)}s=j}else if("start"===A){var j;i(n).tweensContainer&&i(n).isAnimating===!0&&(j=i(n).tweensContainer),m.each(v,function(e,t){if(RegExp("^"+S.Lists.colors.join("$|^")+"$").test(e)){var r=p(t,!0),n=r[0],o=r[1],i=r[2];if(S.RegEx.isHex.test(n)){for(var s=["Red","Green","Blue"],l=S.Values.hexToRgb(n),u=i?S.Values.hexToRgb(i):a,c=0;c<s.length;c++){var f=[l[c]];o&&f.push(o),u!==a&&f.push(u[c]),v[e+s[c]]=f}delete v[e]}}});for(var O in v){var z=p(v[O]),q=z[0],$=z[1],M=z[2];O=S.Names.camelCase(O);var I=S.Hooks.getRoot(O),B=!1;if(i(n).isSVG||"tween"===I||S.Names.prefixCheck(I)[1]!==!1||S.Normalizations.registered[I]!==a){(o.display!==a&&null!==o.display&&"none"!==o.display||o.visibility!==a&&"hidden"!==o.visibility)&&/opacity|filter/.test(O)&&!M&&0!==q&&(M=0),o._cacheValues&&j&&j[O]?(M===a&&(M=j[O].endValue+j[O].unitType),B=i(n).rootPropertyValueCache[I]):S.Hooks.registered[O]?M===a?(B=S.getPropertyValue(n,I),M=S.getPropertyValue(n,O,B)):B=S.Hooks.templates[I][1]:M===a&&(M=S.getPropertyValue(n,O));var W,G,D,X=!1;if(W=f(O,M),M=W[0],D=W[1],W=f(O,q),q=W[0].replace(/^([+-\/*])=/,function(e,t){return X=t,""}),G=W[1],M=parseFloat(M)||0,q=parseFloat(q)||0,"%"===G&&(/^(fontSize|lineHeight)$/.test(O)?(q/=100,G="em"):/^scale/.test(O)?(q/=100,G=""):/(Red|Green|Blue)$/i.test(O)&&(q=q/100*255,G="")),/[\/*]/.test(X))G=D;else if(D!==G&&0!==M)if(0===q)G=D;else{l=l||d();var Y=/margin|padding|left|right|width|text|word|letter/i.test(O)||/X$/.test(O)||"x"===O?"x":"y";switch(D){case"%":M*="x"===Y?l.percentToPxWidth:l.percentToPxHeight;break;case"px":break;default:M*=l[D+"ToPx"]}switch(G){case"%":M*=1/("x"===Y?l.percentToPxWidth:l.percentToPxHeight);break;case"px":break;default:M*=1/l[G+"ToPx"]}}switch(X){case"+":q=M+q;break;case"-":q=M-q;break;case"*":q=M*q;break;case"/":q=M/q}s[O]={rootPropertyValue:B,startValue:M,currentValue:M,endValue:q,unitType:G,easing:$},b.debug&&console.log("tweensContainer ("+O+"): "+JSON.stringify(s[O]),n)}else b.debug&&console.log("Skipping ["+I+"] due to a lack of browser support.")}s.element=n}s.element&&(S.Values.addClass(n,"velocity-animating"),R.push(s),""===o.queue&&(i(n).tweensContainer=s,i(n).opts=o),i(n).isAnimating=!0,V===w-1?(b.State.calls.push([R,y,o,null,k.resolver]),b.State.isTicking===!1&&(b.State.isTicking=!0,c())):V++)}var n=this,o=m.extend({},b.defaults,x),s={},l;switch(i(n)===a&&b.init(n),parseFloat(o.delay)&&o.queue!==!1&&m.queue(n,o.queue,function(e){b.velocityQueueEntryFlag=!0,i(n).delayTimer={setTimeout:setTimeout(e,parseFloat(o.delay)),next:e}}),o.duration.toString().toLowerCase()){case"fast":o.duration=200;break;case"normal":o.duration=h;break;case"slow":o.duration=600;break;default:o.duration=parseFloat(o.duration)||1}b.mock!==!1&&(b.mock===!0?o.duration=o.delay=1:(o.duration*=parseFloat(b.mock)||1,o.delay*=parseFloat(b.mock)||1)),o.easing=u(o.easing,o.duration),o.begin&&!g.isFunction(o.begin)&&(o.begin=null),o.progress&&!g.isFunction(o.progress)&&(o.progress=null),o.complete&&!g.isFunction(o.complete)&&(o.complete=null),o.display!==a&&null!==o.display&&(o.display=o.display.toString().toLowerCase(),"auto"===o.display&&(o.display=b.CSS.Values.getDisplayType(n))),o.visibility!==a&&null!==o.visibility&&(o.visibility=o.visibility.toString().toLowerCase()),o.mobileHA=o.mobileHA&&b.State.isMobile&&!b.State.isGingerbread,o.queue===!1?o.delay?setTimeout(e,o.delay):e():m.queue(n,o.queue,function(t,r){return r===!0?(k.promise&&k.resolver(y),!0):(b.velocityQueueEntryFlag=!0,void e(t))}),""!==o.queue&&"fx"!==o.queue||"inprogress"===m.queue(n)[0]||m.dequeue(n)}var s=arguments[0]&&(arguments[0].p||m.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||g.isString(arguments[0].properties)),l,f,d,y,v,x;if(g.isWrapped(this)?(l=!1,d=0,y=this,f=this):(l=!0,d=1,y=s?arguments[0].elements||arguments[0].e:arguments[0]),y=o(y)){s?(v=arguments[0].properties||arguments[0].p,x=arguments[0].options||arguments[0].o):(v=arguments[d],x=arguments[d+1]);var w=y.length,V=0;if(!/^(stop|finish)$/i.test(v)&&!m.isPlainObject(x)){var C=d+1;x={};for(var T=C;T<arguments.length;T++)g.isArray(arguments[T])||!/^(fast|normal|slow)$/i.test(arguments[T])&&!/^\d/.test(arguments[T])?g.isString(arguments[T])||g.isArray(arguments[T])?x.easing=arguments[T]:g.isFunction(arguments[T])&&(x.complete=arguments[T]):x.duration=arguments[T]}var k={promise:null,resolver:null,rejecter:null};l&&b.Promise&&(k.promise=new b.Promise(function(e,t){k.resolver=e,k.rejecter=t}));var A;switch(v){case"scroll":A="scroll";break;case"reverse":A="reverse";break;case"finish":case"stop":m.each(y,function(e,t){i(t)&&i(t).delayTimer&&(clearTimeout(i(t).delayTimer.setTimeout),i(t).delayTimer.next&&i(t).delayTimer.next(),delete i(t).delayTimer)});var F=[];return m.each(b.State.calls,function(e,t){t&&m.each(t[1],function(r,n){var o=x===a?"":x;return o===!0||t[2].queue===o||x===a&&t[2].queue===!1?void m.each(y,function(r,a){a===n&&((x===!0||g.isString(x))&&(m.each(m.queue(a,g.isString(x)?x:""),function(e,t){g.isFunction(t)&&t(null,!0)}),m.queue(a,g.isString(x)?x:"",[])),"stop"===v?(i(a)&&i(a).tweensContainer&&o!==!1&&m.each(i(a).tweensContainer,function(e,t){
t.endValue=t.currentValue}),F.push(e)):"finish"===v&&(t[2].duration=1))}):!0})}),"stop"===v&&(m.each(F,function(e,t){p(t,!0)}),k.promise&&k.resolver(y)),e();default:if(!m.isPlainObject(v)||g.isEmptyObject(v)){if(g.isString(v)&&b.Redirects[v]){var E=m.extend({},x),j=E.duration,H=E.delay||0;return E.backwards===!0&&(y=m.extend(!0,[],y).reverse()),m.each(y,function(e,t){parseFloat(E.stagger)?E.delay=H+parseFloat(E.stagger)*e:g.isFunction(E.stagger)&&(E.delay=H+E.stagger.call(t,e,w)),E.drag&&(E.duration=parseFloat(j)||(/^(callout|transition)/.test(v)?1e3:h),E.duration=Math.max(E.duration*(E.backwards?1-e/w:(e+1)/w),.75*E.duration,200)),b.Redirects[v].call(t,t,E||{},e,w,y,k.promise?k:a)}),e()}var N="Velocity: First argument ("+v+") was not a property map, a known action, or a registered redirect. Aborting.";return k.promise?k.rejecter(new Error(N)):console.log(N),e()}A="start"}var L={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},R=[];m.each(y,function(e,t){g.isNode(t)&&n.call(t)});var E=m.extend({},b.defaults,x),O;if(E.loop=parseInt(E.loop),O=2*E.loop-1,E.loop)for(var z=0;O>z;z++){var q={delay:E.delay,progress:E.progress};z===O-1&&(q.display=E.display,q.visibility=E.visibility,q.complete=E.complete),P(y,"reverse",q)}return e()}};b=m.extend(P,b),b.animate=P;var w=t.requestAnimationFrame||d;return b.State.isMobile||r.hidden===a||r.addEventListener("visibilitychange",function(){r.hidden?(w=function(e){return setTimeout(function(){e(!0)},16)},c()):w=t.requestAnimationFrame||d}),e.Velocity=b,e!==t&&(e.fn.velocity=P,e.fn.velocity.defaults=b.defaults),m.each(["Down","Up"],function(e,t){b.Redirects["slide"+t]=function(e,r,n,o,i,s){var l=m.extend({},r),u=l.begin,c=l.complete,p={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},f={};l.display===a&&(l.display="Down"===t?"inline"===b.CSS.Values.getDisplayType(e)?"inline-block":"block":"none"),l.begin=function(){u&&u.call(i,i);for(var r in p){f[r]=e.style[r];var a=b.CSS.getPropertyValue(e,r);p[r]="Down"===t?[a,0]:[0,a]}f.overflow=e.style.overflow,e.style.overflow="hidden"},l.complete=function(){for(var t in f)e.style[t]=f[t];c&&c.call(i,i),s&&s.resolver(i)},b(e,p,l)}}),m.each(["In","Out"],function(e,t){b.Redirects["fade"+t]=function(e,r,n,o,i,s){var l=m.extend({},r),u={opacity:"In"===t?1:0},c=l.complete;l.complete=n!==o-1?l.begin=null:function(){c&&c.call(i,i),s&&s.resolver(i)},l.display===a&&(l.display="In"===t?"auto":"none"),b(this,u,l)}}),b}(window.jQuery||window.Zepto||window,window,document)});;
!function(t){"function"==typeof require&&"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(["velocity"],t):t()}(function(){return function(t,a,e,r){function n(t,a){var e=[];return t&&a?(s.each([t,a],function(t,a){var r=[];s.each(a,function(t,a){for(;a.toString().length<5;)a="0"+a;r.push(a)}),e.push(r.join(""))}),parseFloat(e[0])>parseFloat(e[1])):!1}if(!t.Velocity||!t.Velocity.Utilities)return void(a.console&&console.log("Velocity UI Pack: Velocity must be loaded first. Aborting."));var i=t.Velocity,s=i.Utilities,o=i.version,l={major:1,minor:1,patch:0};if(n(l,o)){var c="Velocity UI Pack: You need to update Velocity (jquery.velocity.js) to a newer version. Visit http://github.com/julianshapiro/velocity.";throw alert(c),new Error(c)}i.RegisterEffect=i.RegisterUI=function(t,a){function e(t,a,e,r){var n=0,o;s.each(t.nodeType?[t]:t,function(t,a){r&&(e+=t*r),o=a.parentNode,s.each(["height","paddingTop","paddingBottom","marginTop","marginBottom"],function(t,e){n+=parseFloat(i.CSS.getPropertyValue(a,e))})}),i.animate(o,{height:("In"===a?"+":"-")+"="+n},{queue:!1,easing:"ease-in-out",duration:e*("In"===a?.6:1)})}return i.Redirects[t]=function(n,o,l,c,u,f){function p(){o.display!==r&&"none"!==o.display||!/Out$/.test(t)||s.each(u.nodeType?[u]:u,function(t,a){i.CSS.setPropertyValue(a,"display","none")}),o.complete&&o.complete.call(u,u),f&&f.resolver(u||n)}var d=l===c-1;a.defaultDuration="function"==typeof a.defaultDuration?a.defaultDuration.call(u,u):parseFloat(a.defaultDuration);for(var g=0;g<a.calls.length;g++){var y=a.calls[g],m=y[0],X=o.duration||a.defaultDuration||1e3,Y=y[1],O=y[2]||{},v={};if(v.duration=X*(Y||1),v.queue=o.queue||"",v.easing=O.easing||"ease",v.delay=parseFloat(O.delay)||0,v._cacheValues=O._cacheValues||!0,0===g){if(v.delay+=parseFloat(o.delay)||0,0===l&&(v.begin=function(){o.begin&&o.begin.call(u,u);var a=t.match(/(In|Out)$/);a&&"In"===a[0]&&m.opacity!==r&&s.each(u.nodeType?[u]:u,function(t,a){i.CSS.setPropertyValue(a,"opacity",0)}),o.animateParentHeight&&a&&e(u,a[0],X+v.delay,o.stagger)}),null!==o.display)if(o.display!==r&&"none"!==o.display)v.display=o.display;else if(/In$/.test(t)){var D=i.CSS.Values.getDisplayType(n);v.display="inline"===D?"inline-block":D}o.visibility&&"hidden"!==o.visibility&&(v.visibility=o.visibility)}g===a.calls.length-1&&(v.complete=function(){if(a.reset){for(var t in a.reset){var e=a.reset[t];i.CSS.Hooks.registered[t]!==r||"string"!=typeof e&&"number"!=typeof e||(a.reset[t]=[a.reset[t],a.reset[t]])}var s={duration:0,queue:!1};d&&(s.complete=p),i.animate(n,a.reset,s)}else d&&p()},"hidden"===o.visibility&&(v.visibility=o.visibility)),i.animate(n,m,v)}},i},i.RegisterEffect.packagedEffects={"callout.bounce":{defaultDuration:550,calls:[[{translateY:-30},.25],[{translateY:0},.125],[{translateY:-15},.125],[{translateY:0},.25]]},"callout.shake":{defaultDuration:800,calls:[[{translateX:-11},.125],[{translateX:11},.125],[{translateX:-11},.125],[{translateX:11},.125],[{translateX:-11},.125],[{translateX:11},.125],[{translateX:-11},.125],[{translateX:0},.125]]},"callout.flash":{defaultDuration:1100,calls:[[{opacity:[0,"easeInOutQuad",1]},.25],[{opacity:[1,"easeInOutQuad"]},.25],[{opacity:[0,"easeInOutQuad"]},.25],[{opacity:[1,"easeInOutQuad"]},.25]]},"callout.pulse":{defaultDuration:825,calls:[[{scaleX:1.1,scaleY:1.1},.5,{easing:"easeInExpo"}],[{scaleX:1,scaleY:1},.5]]},"callout.swing":{defaultDuration:950,calls:[[{rotateZ:15},.2],[{rotateZ:-10},.2],[{rotateZ:5},.2],[{rotateZ:-5},.2],[{rotateZ:0},.2]]},"callout.tada":{defaultDuration:1e3,calls:[[{scaleX:.9,scaleY:.9,rotateZ:-3},.1],[{scaleX:1.1,scaleY:1.1,rotateZ:3},.1],[{scaleX:1.1,scaleY:1.1,rotateZ:-3},.1],["reverse",.125],["reverse",.125],["reverse",.125],["reverse",.125],["reverse",.125],[{scaleX:1,scaleY:1,rotateZ:0},.2]]},"transition.fadeIn":{defaultDuration:500,calls:[[{opacity:[1,0]}]]},"transition.fadeOut":{defaultDuration:500,calls:[[{opacity:[0,1]}]]},"transition.flipXIn":{defaultDuration:700,calls:[[{opacity:[1,0],transformPerspective:[800,800],rotateY:[0,-55]}]],reset:{transformPerspective:0}},"transition.flipXOut":{defaultDuration:700,calls:[[{opacity:[0,1],transformPerspective:[800,800],rotateY:55}]],reset:{transformPerspective:0,rotateY:0}},"transition.flipYIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],rotateX:[0,-45]}]],reset:{transformPerspective:0}},"transition.flipYOut":{defaultDuration:800,calls:[[{opacity:[0,1],transformPerspective:[800,800],rotateX:25}]],reset:{transformPerspective:0,rotateX:0}},"transition.flipBounceXIn":{defaultDuration:900,calls:[[{opacity:[.725,0],transformPerspective:[400,400],rotateY:[-10,90]},.5],[{opacity:.8,rotateY:10},.25],[{opacity:1,rotateY:0},.25]],reset:{transformPerspective:0}},"transition.flipBounceXOut":{defaultDuration:800,calls:[[{opacity:[.9,1],transformPerspective:[400,400],rotateY:-10},.5],[{opacity:0,rotateY:90},.5]],reset:{transformPerspective:0,rotateY:0}},"transition.flipBounceYIn":{defaultDuration:850,calls:[[{opacity:[.725,0],transformPerspective:[400,400],rotateX:[-10,90]},.5],[{opacity:.8,rotateX:10},.25],[{opacity:1,rotateX:0},.25]],reset:{transformPerspective:0}},"transition.flipBounceYOut":{defaultDuration:800,calls:[[{opacity:[.9,1],transformPerspective:[400,400],rotateX:-15},.5],[{opacity:0,rotateX:90},.5]],reset:{transformPerspective:0,rotateX:0}},"transition.swoopIn":{defaultDuration:850,calls:[[{opacity:[1,0],transformOriginX:["100%","50%"],transformOriginY:["100%","100%"],scaleX:[1,0],scaleY:[1,0],translateX:[0,-700],translateZ:0}]],reset:{transformOriginX:"50%",transformOriginY:"50%"}},"transition.swoopOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformOriginX:["50%","100%"],transformOriginY:["100%","100%"],scaleX:0,scaleY:0,translateX:-700,translateZ:0}]],reset:{transformOriginX:"50%",transformOriginY:"50%",scaleX:1,scaleY:1,translateX:0}},"transition.whirlIn":{defaultDuration:850,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,0],scaleY:[1,0],rotateY:[0,160]},1,{easing:"easeInOutSine"}]]},"transition.whirlOut":{defaultDuration:750,calls:[[{opacity:[0,"easeInOutQuint",1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:0,scaleY:0,rotateY:160},1,{easing:"swing"}]],reset:{scaleX:1,scaleY:1,rotateY:0}},"transition.shrinkIn":{defaultDuration:750,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,1.5],scaleY:[1,1.5],translateZ:0}]]},"transition.shrinkOut":{defaultDuration:600,calls:[[{opacity:[0,1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:1.3,scaleY:1.3,translateZ:0}]],reset:{scaleX:1,scaleY:1}},"transition.expandIn":{defaultDuration:700,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,.625],scaleY:[1,.625],translateZ:0}]]},"transition.expandOut":{defaultDuration:700,calls:[[{opacity:[0,1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:.5,scaleY:.5,translateZ:0}]],reset:{scaleX:1,scaleY:1}},"transition.bounceIn":{defaultDuration:800,calls:[[{opacity:[1,0],scaleX:[1.05,.3],scaleY:[1.05,.3]},.4],[{scaleX:.9,scaleY:.9,translateZ:0},.2],[{scaleX:1,scaleY:1},.5]]},"transition.bounceOut":{defaultDuration:800,calls:[[{scaleX:.95,scaleY:.95},.35],[{scaleX:1.1,scaleY:1.1,translateZ:0},.35],[{opacity:[0,1],scaleX:.3,scaleY:.3},.3]],reset:{scaleX:1,scaleY:1}},"transition.bounceUpIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateY:[-30,1e3]},.6,{easing:"easeOutCirc"}],[{translateY:10},.2],[{translateY:0},.2]]},"transition.bounceUpOut":{defaultDuration:1e3,calls:[[{translateY:20},.2],[{opacity:[0,"easeInCirc",1],translateY:-1e3},.8]],reset:{translateY:0}},"transition.bounceDownIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateY:[30,-1e3]},.6,{easing:"easeOutCirc"}],[{translateY:-10},.2],[{translateY:0},.2]]},"transition.bounceDownOut":{defaultDuration:1e3,calls:[[{translateY:-20},.2],[{opacity:[0,"easeInCirc",1],translateY:1e3},.8]],reset:{translateY:0}},"transition.bounceLeftIn":{defaultDuration:750,calls:[[{opacity:[1,0],translateX:[30,-1250]},.6,{easing:"easeOutCirc"}],[{translateX:-10},.2],[{translateX:0},.2]]},"transition.bounceLeftOut":{defaultDuration:750,calls:[[{translateX:30},.2],[{opacity:[0,"easeInCirc",1],translateX:-1250},.8]],reset:{translateX:0}},"transition.bounceRightIn":{defaultDuration:750,calls:[[{opacity:[1,0],translateX:[-30,1250]},.6,{easing:"easeOutCirc"}],[{translateX:10},.2],[{translateX:0},.2]]},"transition.bounceRightOut":{defaultDuration:750,calls:[[{translateX:-30},.2],[{opacity:[0,"easeInCirc",1],translateX:1250},.8]],reset:{translateX:0}},"transition.slideUpIn":{defaultDuration:900,calls:[[{opacity:[1,0],translateY:[0,20],translateZ:0}]]},"transition.slideUpOut":{defaultDuration:900,calls:[[{opacity:[0,1],translateY:-20,translateZ:0}]],reset:{translateY:0}},"transition.slideDownIn":{defaultDuration:900,calls:[[{opacity:[1,0],translateY:[0,-20],translateZ:0}]]},"transition.slideDownOut":{defaultDuration:900,calls:[[{opacity:[0,1],translateY:20,translateZ:0}]],reset:{translateY:0}},"transition.slideLeftIn":{defaultDuration:1e3,calls:[[{opacity:[1,0],translateX:[0,-20],translateZ:0}]]},"transition.slideLeftOut":{defaultDuration:1050,calls:[[{opacity:[0,1],translateX:-20,translateZ:0}]],reset:{translateX:0}},"transition.slideRightIn":{defaultDuration:1e3,calls:[[{opacity:[1,0],translateX:[0,20],translateZ:0}]]},"transition.slideRightOut":{defaultDuration:1050,calls:[[{opacity:[0,1],translateX:20,translateZ:0}]],reset:{translateX:0}},"transition.slideUpBigIn":{defaultDuration:850,calls:[[{opacity:[1,0],translateY:[0,75],translateZ:0}]]},"transition.slideUpBigOut":{defaultDuration:800,calls:[[{opacity:[0,1],translateY:-75,translateZ:0}]],reset:{translateY:0}},"transition.slideDownBigIn":{defaultDuration:850,calls:[[{opacity:[1,0],translateY:[0,-75],translateZ:0}]]},"transition.slideDownBigOut":{defaultDuration:800,calls:[[{opacity:[0,1],translateY:75,translateZ:0}]],reset:{translateY:0}},"transition.slideLeftBigIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateX:[0,-75],translateZ:0}]]},"transition.slideLeftBigOut":{defaultDuration:750,calls:[[{opacity:[0,1],translateX:-75,translateZ:0}]],reset:{translateX:0}},"transition.slideRightBigIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateX:[0,75],translateZ:0}]]},"transition.slideRightBigOut":{defaultDuration:750,calls:[[{opacity:[0,1],translateX:75,translateZ:0}]],reset:{translateX:0}},"transition.perspectiveUpIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:["100%","100%"],rotateX:[0,-180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveUpOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:["100%","100%"],rotateX:-180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateX:0}},"transition.perspectiveDownIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:[0,0],rotateX:[0,180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveDownOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:[0,0],rotateX:180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateX:0}},"transition.perspectiveLeftIn":{defaultDuration:950,calls:[[{opacity:[1,0],transformPerspective:[2e3,2e3],transformOriginX:[0,0],transformOriginY:[0,0],rotateY:[0,-180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveLeftOut":{defaultDuration:950,calls:[[{opacity:[0,1],transformPerspective:[2e3,2e3],transformOriginX:[0,0],transformOriginY:[0,0],rotateY:-180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateY:0}},"transition.perspectiveRightIn":{defaultDuration:950,calls:[[{opacity:[1,0],transformPerspective:[2e3,2e3],transformOriginX:["100%","100%"],transformOriginY:[0,0],rotateY:[0,180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveRightOut":{defaultDuration:950,calls:[[{opacity:[0,1],transformPerspective:[2e3,2e3],transformOriginX:["100%","100%"],transformOriginY:[0,0],rotateY:180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateY:0}}};for(var u in i.RegisterEffect.packagedEffects)i.RegisterEffect(u,i.RegisterEffect.packagedEffects[u]);i.RunSequence=function(t){var a=s.extend(!0,[],t);a.length>1&&(s.each(a.reverse(),function(t,e){var r=a[t+1];if(r){var n=e.o||e.options,o=r.o||r.options,l=n&&n.sequenceQueue===!1?"begin":"complete",c=o&&o[l],u={};u[l]=function(){var t=r.e||r.elements,a=t.nodeType?[t]:t;c&&c.call(a,a),i(e)},r.o?r.o=s.extend({},o,u):r.options=s.extend({},o,u)}}),a.reverse()),i(a[0])}}(window.jQuery||window.Zepto||window,window,document)});;
(function(e,t,i,n){var o=i("html"),a=i(e),r=i(t),s=i.fancybox=function(){s.open.apply(this,arguments)},l=navigator.userAgent.match(/msie/i),c=null,d=t.createTouch!==n,p=function(e){return e&&e.hasOwnProperty&&e instanceof i},h=function(e){return e&&"string"===i.type(e)},f=function(e){return h(e)&&0<e.indexOf("%")},u=function(e,t){var i=parseInt(e,10)||0;t&&f(e)&&(i*=s.getViewport()[t]/100);return Math.ceil(i)},g=function(e,t){return u(e,t)+"px"};i.extend(s,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!d,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(l?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:i.noop,beforeLoad:i.noop,afterLoad:i.noop,beforeShow:i.noop,afterShow:i.noop,beforeChange:i.noop,beforeClose:i.noop,afterClose:i.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(e,t){if(e&&(i.isPlainObject(t)||(t={}),!1!==s.close(!0)))return i.isArray(e)||(e=p(e)?i(e).get():[e]),i.each(e,function(o,a){var r={},l,c,d,f,u;"object"===i.type(a)&&(a.nodeType&&(a=i(a)),p(a)?(r={href:a.data("fancybox-href")||a.attr("href"),title:a.data("fancybox-title")||a.attr("title"),isDom:!0,element:a},i.metadata&&i.extend(!0,r,a.metadata())):r=a);l=t.href||r.href||(h(a)?a:null);c=t.title!==n?t.title:r.title||"";f=(d=t.content||r.content)?"html":t.type||r.type;!f&&r.isDom&&(f=a.data("fancybox-type"),f||(f=(f=a.prop("class").match(/fancybox\.(\w+)/))?f[1]:null));h(l)&&(f||(s.isImage(l)?f="image":s.isSWF(l)?f="swf":"#"===l.charAt(0)?f="inline":h(a)&&(f="html",d=a)),"ajax"===f&&(u=l.split(/\s+/,2),l=u.shift(),u=u.shift()));d||("inline"===f?l?d=i(h(l)?l.replace(/.*(?=#[^\s]+$)/,""):l):r.isDom&&(d=a):"html"===f?d=l:!f&&(!l&&r.isDom)&&(f="inline",d=a));i.extend(r,{href:l,type:f,content:d,title:c,selector:u});e[o]=r}),s.opts=i.extend(!0,{},s.defaults,t),t.keys!==n&&(s.opts.keys=t.keys?i.extend({},s.defaults.keys,t.keys):!1),s.group=e,s._start(s.opts.index)},cancel:function(){var e=s.coming;e&&!1!==s.trigger("onCancel")&&(s.hideLoading(),s.ajaxLoad&&s.ajaxLoad.abort(),s.ajaxLoad=null,s.imgPreload&&(s.imgPreload.onload=s.imgPreload.onerror=null),e.wrap&&e.wrap.stop(!0,!0).trigger("onReset").remove(),s.coming=null,s.current||s._afterZoomOut(e))},close:function(e){s.cancel();!1!==s.trigger("beforeClose")&&(s.unbindEvents(),s.isActive&&(!s.isOpen||!0===e?(i(".fancybox-wrap").stop(!0).trigger("onReset").remove(),s._afterZoomOut()):(s.isOpen=s.isOpened=!1,s.isClosing=!0,i(".fancybox-item, .fancybox-nav").remove(),s.wrap.stop(!0,!0).removeClass("fancybox-opened"),s.transitions[s.current.closeMethod]())))},play:function(e){var t=function(){clearTimeout(s.player.timer)},i=function(){t();s.current&&s.player.isActive&&(s.player.timer=setTimeout(s.next,s.current.playSpeed))},n=function(){t();r.unbind(".player");s.player.isActive=!1;s.trigger("onPlayEnd")};if(!0===e||!s.player.isActive&&!1!==e){if(s.current&&(s.current.loop||s.current.index<s.group.length-1))s.player.isActive=!0,r.bind({"onCancel.player beforeClose.player":n,"onUpdate.player":i,"beforeLoad.player":t}),i(),s.trigger("onPlayStart")}else n()},next:function(e){var t=s.current;t&&(h(e)||(e=t.direction.next),s.jumpto(t.index+1,e,"next"))},prev:function(e){var t=s.current;t&&(h(e)||(e=t.direction.prev),s.jumpto(t.index-1,e,"prev"))},jumpto:function(e,t,i){var o=s.current;o&&(e=u(e),s.direction=t||o.direction[e>=o.index?"next":"prev"],s.router=i||"jumpto",o.loop&&(0>e&&(e=o.group.length+e%o.group.length),e%=o.group.length),o.group[e]!==n&&(s.cancel(),s._start(e)))},reposition:function(e,t){var n=s.current,o=n?n.wrap:null,a;o&&(a=s._getPosition(t),e&&"scroll"===e.type?(delete a.position,o.stop(!0,!0).animate(a,200)):(o.css(a),n.pos=i.extend({},n.dim,a)))},update:function(e){var t=e&&e.type,i=!t||"orientationchange"===t;i&&(clearTimeout(c),c=null);s.isOpen&&!c&&(c=setTimeout(function(){var n=s.current;n&&!s.isClosing&&(s.wrap.removeClass("fancybox-tmp"),(i||"load"===t||"resize"===t&&n.autoResize)&&s._setDimension(),"scroll"===t&&n.canShrink||s.reposition(e),s.trigger("onUpdate"),c=null)},i&&!d?0:300))},toggle:function(e){s.isOpen&&(s.current.fitToView="boolean"===i.type(e)?e:!s.current.fitToView,d&&(s.wrap.removeAttr("style").addClass("fancybox-tmp"),s.trigger("onUpdate")),s.update())},hideLoading:function(){r.unbind(".loading");i("#fancybox-loading").remove()},showLoading:function(){var e,t;s.hideLoading();e=i('<div id="fancybox-loading"><div></div></div>').click(s.cancel).appendTo("body");r.bind("keydown.loading",function(e){if(27===(e.which||e.keyCode))e.preventDefault(),s.cancel()});s.defaults.fixed||(t=s.getViewport(),e.css({position:"absolute",top:.5*t.h+t.y,left:.5*t.w+t.x}))},getViewport:function(){var t=s.current&&s.current.locked||!1,i={x:a.scrollLeft(),y:a.scrollTop()};t?(i.w=t[0].clientWidth,i.h=t[0].clientHeight):(i.w=d&&e.innerWidth?e.innerWidth:a.width(),i.h=d&&e.innerHeight?e.innerHeight:a.height());return i},unbindEvents:function(){s.wrap&&p(s.wrap)&&s.wrap.unbind(".fb");r.unbind(".fb");a.unbind(".fb")},bindEvents:function(){var e=s.current,t;e&&(a.bind("orientationchange.fb"+(d?"":" resize.fb")+(e.autoCenter&&!e.locked?" scroll.fb":""),s.update),(t=e.keys)&&r.bind("keydown.fb",function(o){var a=o.which||o.keyCode,r=o.target||o.srcElement;if(27===a&&s.coming)return!1;!o.ctrlKey&&(!o.altKey&&!o.shiftKey&&!o.metaKey&&(!r||!r.type&&!i(r).is("[contenteditable]")))&&i.each(t,function(t,r){if(1<e.group.length&&r[a]!==n)return s[t](r[a]),o.preventDefault(),!1;if(-1<i.inArray(a,r))return s[t](),o.preventDefault(),!1})}),i.fn.mousewheel&&e.mouseWheel&&s.wrap.bind("mousewheel.fb",function(t,n,o,a){for(var r=i(t.target||null),l=!1;r.length&&!l&&!r.is(".fancybox-skin")&&!r.is(".fancybox-wrap");)l=r[0]&&!(r[0].style.overflow&&"hidden"===r[0].style.overflow)&&(r[0].clientWidth&&r[0].scrollWidth>r[0].clientWidth||r[0].clientHeight&&r[0].scrollHeight>r[0].clientHeight),r=i(r).parent();if(0!==n&&!l&&1<s.group.length&&!e.canShrink){if(0<a||0<o)s.prev(0<a?"down":"left");else if(0>a||0>o)s.next(0>a?"up":"right");t.preventDefault()}}))},trigger:function(e,t){var n,o=t||s.coming||s.current;if(o){i.isFunction(o[e])&&(n=o[e].apply(o,Array.prototype.slice.call(arguments,1)));if(!1===n)return!1;o.helpers&&i.each(o.helpers,function(t,n){if(n&&s.helpers[t]&&i.isFunction(s.helpers[t][e]))s.helpers[t][e](i.extend(!0,{},s.helpers[t].defaults,n),o)});r.trigger(e)}},isImage:function(e){return h(e)&&e.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(e){return h(e)&&e.match(/\.(swf)((\?|#).*)?$/i)},_start:function(e){var t={},n,o;e=u(e);n=s.group[e]||null;if(!n)return!1;t=i.extend(!0,{},s.opts,n);n=t.margin;o=t.padding;"number"===i.type(n)&&(t.margin=[n,n,n,n]);"number"===i.type(o)&&(t.padding=[o,o,o,o]);t.modal&&i.extend(!0,t,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}});t.autoSize&&(t.autoWidth=t.autoHeight=!0);"auto"===t.width&&(t.autoWidth=!0);"auto"===t.height&&(t.autoHeight=!0);t.group=s.group;t.index=e;s.coming=t;if(!1===s.trigger("beforeLoad"))s.coming=null;else{o=t.type;n=t.href;if(!o)return s.coming=null,s.current&&s.router&&"jumpto"!==s.router?(s.current.index=e,s[s.router](s.direction)):!1;s.isActive=!0;if("image"===o||"swf"===o)t.autoHeight=t.autoWidth=!1,t.scrolling="visible";"image"===o&&(t.aspectRatio=!0);"iframe"===o&&d&&(t.scrolling="scroll");t.wrap=i(t.tpl.wrap).addClass("fancybox-"+(d?"mobile":"desktop")+" fancybox-type-"+o+" fancybox-tmp "+t.wrapCSS).appendTo(t.parent||"body");i.extend(t,{skin:i(".fancybox-skin",t.wrap),outer:i(".fancybox-outer",t.wrap),inner:i(".fancybox-inner",t.wrap)});i.each(["Top","Right","Bottom","Left"],function(e,i){t.skin.css("padding"+i,g(t.padding[e]))});s.trigger("onReady");if("inline"===o||"html"===o){if(!t.content||!t.content.length)return s._error("content")}else if(!n)return s._error("href");"image"===o?s._loadImage():"ajax"===o?s._loadAjax():"iframe"===o?s._loadIframe():s._afterLoad()}},_error:function(e){i.extend(s.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:e,content:s.coming.tpl.error});s._afterLoad()},_loadImage:function(){var e=s.imgPreload=new Image;e.onload=function(){this.onload=this.onerror=null;s.coming.width=this.width/s.opts.pixelRatio;s.coming.height=this.height/s.opts.pixelRatio;s._afterLoad()};e.onerror=function(){this.onload=this.onerror=null;s._error("image")};e.src=s.coming.href;!0!==e.complete&&s.showLoading()},_loadAjax:function(){var e=s.coming;s.showLoading();s.ajaxLoad=i.ajax(i.extend({},e.ajax,{url:e.href,error:function(e,t){s.coming&&"abort"!==t?s._error("ajax",e):s.hideLoading()},success:function(t,i){"success"===i&&(e.content=t,s._afterLoad())}}))},_loadIframe:function(){var e=s.coming,t=i(e.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",d?"auto":e.iframe.scrolling).attr("src",e.href);i(e.wrap).bind("onReset",function(){try{i(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(e){}});e.iframe.preload&&(s.showLoading(),t.one("load",function(){i(this).data("ready",1);d||i(this).bind("load.fb",s.update);i(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();s._afterLoad()}));e.content=t.appendTo(e.inner);e.iframe.preload||s._afterLoad()},_preloadImages:function(){var e=s.group,t=s.current,i=e.length,n=t.preload?Math.min(t.preload,i-1):0,o,a;for(a=1;a<=n;a+=1)o=e[(t.index+a)%i],"image"===o.type&&o.href&&((new Image).src=o.href)},_afterLoad:function(){var e=s.coming,t=s.current,n,o,a,r,l;s.hideLoading();if(e&&!1!==s.isActive)if(!1===s.trigger("afterLoad",e,t))e.wrap.stop(!0).trigger("onReset").remove(),s.coming=null;else{t&&(s.trigger("beforeChange",t),t.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove());s.unbindEvents();n=e.content;o=e.type;a=e.scrolling;i.extend(s,{wrap:e.wrap,skin:e.skin,outer:e.outer,inner:e.inner,current:e,previous:t});r=e.href;switch(o){case"inline":case"ajax":case"html":e.selector?n=i("<div>").html(n).find(e.selector):p(n)&&(n.data("fancybox-placeholder")||n.data("fancybox-placeholder",i('<div class="fancybox-placeholder"></div>').insertAfter(n).hide()),n=n.show().detach(),e.wrap.bind("onReset",function(){i(this).find(n).length&&n.hide().replaceAll(n.data("fancybox-placeholder")).data("fancybox-placeholder",!1)}));break;case"image":n=e.tpl.image.replace("{href}",r);break;case"swf":n='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+r+'"></param>',l="",i.each(e.swf,function(e,t){n+='<param name="'+e+'" value="'+t+'"></param>';l+=" "+e+'="'+t+'"'}),n+='<embed src="'+r+'" type="application/x-shockwave-flash" width="100%" height="100%"'+l+"></embed></object>"}(!p(n)||!n.parent().is(e.inner))&&e.inner.append(n);s.trigger("beforeShow");e.inner.css("overflow","yes"===a?"scroll":"no"===a?"hidden":a);s._setDimension();s.reposition();s.isOpen=!1;s.coming=null;s.bindEvents();if(s.isOpened){if(t.prevMethod)s.transitions[t.prevMethod]()}else i(".fancybox-wrap").not(e.wrap).stop(!0).trigger("onReset").remove();s.transitions[s.isOpened?e.nextMethod:e.openMethod]();s._preloadImages()}},_setDimension:function(){var e=s.getViewport(),t=0,n=!1,o=!1,n=s.wrap,a=s.skin,r=s.inner,l=s.current,o=l.width,c=l.height,d=l.minWidth,p=l.minHeight,h=l.maxWidth,m=l.maxHeight,y=l.scrolling,x=l.scrollOutside?l.scrollbarWidth:0,v=l.margin,w=u(v[1]+v[3]),b=u(v[0]+v[2]),k,C,O,W,_,S,T,L,E;n.add(a).add(r).width("auto").height("auto").removeClass("fancybox-tmp");v=u(a.outerWidth(!0)-a.width());k=u(a.outerHeight(!0)-a.height());C=w+v;O=b+k;W=f(o)?(e.w-C)*u(o)/100:o;_=f(c)?(e.h-O)*u(c)/100:c;if("iframe"===l.type){if(E=l.content,l.autoHeight&&1===E.data("ready"))try{E[0].contentWindow.document.location&&(r.width(W).height(9999),S=E.contents().find("body"),x&&S.css("overflow-x","hidden"),_=S.outerHeight(!0))}catch(R){}}else if(l.autoWidth||l.autoHeight)r.addClass("fancybox-tmp"),l.autoWidth||r.width(W),l.autoHeight||r.height(_),l.autoWidth&&(W=r.width()),l.autoHeight&&(_=r.height()),r.removeClass("fancybox-tmp");o=u(W);c=u(_);L=W/_;d=u(f(d)?u(d,"w")-C:d);h=u(f(h)?u(h,"w")-C:h);p=u(f(p)?u(p,"h")-O:p);m=u(f(m)?u(m,"h")-O:m);S=h;T=m;l.fitToView&&(h=Math.min(e.w-C,h),m=Math.min(e.h-O,m));C=e.w-w;b=e.h-b;l.aspectRatio?(o>h&&(o=h,c=u(o/L)),c>m&&(c=m,o=u(c*L)),o<d&&(o=d,c=u(o/L)),c<p&&(c=p,o=u(c*L))):(o=Math.max(d,Math.min(o,h)),l.autoHeight&&"iframe"!==l.type&&(r.width(o),c=r.height()),c=Math.max(p,Math.min(c,m)));if(l.fitToView)if(r.width(o).height(c),n.width(o+v),e=n.width(),w=n.height(),l.aspectRatio)for(;(e>C||w>b)&&(o>d&&c>p)&&!(19<t++);)c=Math.max(p,Math.min(m,c-10)),o=u(c*L),o<d&&(o=d,c=u(o/L)),o>h&&(o=h,c=u(o/L)),r.width(o).height(c),n.width(o+v),e=n.width(),w=n.height();else o=Math.max(d,Math.min(o,o-(e-C))),c=Math.max(p,Math.min(c,c-(w-b)));x&&("auto"===y&&c<_&&o+v+x<C)&&(o+=x);r.width(o).height(c);n.width(o+v);e=n.width();w=n.height();n=(e>C||w>b)&&o>d&&c>p;o=l.aspectRatio?o<S&&c<T&&o<W&&c<_:(o<S||c<T)&&(o<W||c<_);i.extend(l,{dim:{width:g(e),height:g(w)},origWidth:W,origHeight:_,canShrink:n,canExpand:o,wPadding:v,hPadding:k,wrapSpace:w-a.outerHeight(!0),skinSpace:a.height()-c});!E&&(l.autoHeight&&c>p&&c<m&&!o)&&r.height("auto")},_getPosition:function(e){var t=s.current,i=s.getViewport(),n=t.margin,o=s.wrap.width()+n[1]+n[3],a=s.wrap.height()+n[0]+n[2],n={position:"absolute",top:n[0],left:n[3]};t.autoCenter&&t.fixed&&!e&&a<=i.h&&o<=i.w?n.position="fixed":t.locked||(n.top+=i.y,n.left+=i.x);n.top=g(Math.max(n.top,n.top+(i.h-a)*t.topRatio));n.left=g(Math.max(n.left,n.left+(i.w-o)*t.leftRatio));return n},_afterZoomIn:function(){var e=s.current;e&&(s.isOpen=s.isOpened=!0,s.wrap.css("overflow","visible").addClass("fancybox-opened"),s.update(),(e.closeClick||e.nextClick&&1<s.group.length)&&s.inner.css("cursor","pointer").bind("click.fb",function(t){!i(t.target).is("a")&&!i(t.target).parent().is("a")&&(t.preventDefault(),s[e.closeClick?"close":"next"]())}),e.closeBtn&&i(e.tpl.closeBtn).appendTo(s.skin).bind("click.fb",function(e){e.preventDefault();s.close()}),e.arrows&&1<s.group.length&&((e.loop||0<e.index)&&i(e.tpl.prev).appendTo(s.outer).bind("click.fb",s.prev),(e.loop||e.index<s.group.length-1)&&i(e.tpl.next).appendTo(s.outer).bind("click.fb",s.next)),s.trigger("afterShow"),!e.loop&&e.index===e.group.length-1?s.play(!1):s.opts.autoPlay&&!s.player.isActive&&(s.opts.autoPlay=!1,s.play()))},_afterZoomOut:function(e){e=e||s.current;i(".fancybox-wrap").trigger("onReset").remove();i.extend(s,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null});s.trigger("afterClose",e)}});s.transitions={getOrigPosition:function(){var e=s.current,t=e.element,i=e.orig,n={},o=50,a=50,r=e.hPadding,l=e.wPadding,c=s.getViewport();!i&&(e.isDom&&t.is(":visible"))&&(i=t.find("img:first"),i.length||(i=t));p(i)?(n=i.offset(),i.is("img")&&(o=i.outerWidth(),a=i.outerHeight())):(n.top=c.y+(c.h-a)*e.topRatio,n.left=c.x+(c.w-o)*e.leftRatio);if("fixed"===s.wrap.css("position")||e.locked)n.top-=c.y,n.left-=c.x;return n={top:g(n.top-r*e.topRatio),left:g(n.left-l*e.leftRatio),width:g(o+l),height:g(a+r)}},step:function(e,t){var i,n,o=t.prop;n=s.current;var a=n.wrapSpace,r=n.skinSpace;if("width"===o||"height"===o)i=t.end===t.start?1:(e-t.start)/(t.end-t.start),s.isClosing&&(i=1-i),n="width"===o?n.wPadding:n.hPadding,n=e-n,s.skin[o](u("width"===o?n:n-a*i)),s.inner[o](u("width"===o?n:n-a*i-r*i))},zoomIn:function(){var e=s.current,t=e.pos,n=e.openEffect,o="elastic"===n,a=i.extend({opacity:1},t);delete a.position;o?(t=this.getOrigPosition(),e.openOpacity&&(t.opacity=.1)):"fade"===n&&(t.opacity=.1);s.wrap.css(t).animate(a,{duration:"none"===n?0:e.openSpeed,easing:e.openEasing,step:o?this.step:null,complete:s._afterZoomIn})},zoomOut:function(){var e=s.current,t=e.closeEffect,i="elastic"===t,n={opacity:.1};i&&(n=this.getOrigPosition(),e.closeOpacity&&(n.opacity=.1));s.wrap.animate(n,{duration:"none"===t?0:e.closeSpeed,easing:e.closeEasing,step:i?this.step:null,complete:s._afterZoomOut})},changeIn:function(){var e=s.current,t=e.nextEffect,i=e.pos,n={opacity:1},o=s.direction,a;i.opacity=.1;"elastic"===t&&(a="down"===o||"up"===o?"top":"left","down"===o||"right"===o?(i[a]=g(u(i[a])-200),n[a]="+=200px"):(i[a]=g(u(i[a])+200),n[a]="-=200px"));"none"===t?s._afterZoomIn():s.wrap.css(i).animate(n,{duration:e.nextSpeed,easing:e.nextEasing,complete:s._afterZoomIn})},changeOut:function(){var e=s.previous,t=e.prevEffect,n={opacity:.1},o=s.direction;"elastic"===t&&(n["down"===o||"up"===o?"top":"left"]=("up"===o||"left"===o?"-":"+")+"=200px");e.wrap.animate(n,{duration:"none"===t?0:e.prevSpeed,easing:e.prevEasing,complete:function(){i(this).trigger("onReset").remove()}})}};s.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!d,fixed:!0},overlay:null,fixed:!1,el:i("html"),create:function(e){e=i.extend({},this.defaults,e);this.overlay&&this.close();this.overlay=i('<div class="fancybox-overlay"></div>').appendTo(s.coming?s.coming.parent:e.parent);this.fixed=!1;e.fixed&&s.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(e){var t=this;e=i.extend({},this.defaults,e);this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(e);this.fixed||(a.bind("resize.overlay",i.proxy(this.update,this)),this.update());e.closeClick&&this.overlay.bind("click.overlay",function(e){if(i(e.target).hasClass("fancybox-overlay"))return s.isActive?s.close():t.close(),!1});this.overlay.css(e.css).show()},close:function(){var e,t;a.unbind("resize.overlay");this.el.hasClass("fancybox-lock")&&(i(".fancybox-margin").removeClass("fancybox-margin"),e=a.scrollTop(),t=a.scrollLeft(),this.el.removeClass("fancybox-lock"),a.scrollTop(e).scrollLeft(t));i(".fancybox-overlay").remove().hide();i.extend(this,{overlay:null,fixed:!1})},update:function(){var e="100%",i;this.overlay.width(e).height("100%");l?(i=Math.max(t.documentElement.offsetWidth,t.body.offsetWidth),r.width()>i&&(e=r.width())):r.width()>a.width()&&(e=r.width());this.overlay.width(e).height(r.height())},onReady:function(e,t){var n=this.overlay;i(".fancybox-overlay").stop(!0,!0);n||this.create(e);e.locked&&(this.fixed&&t.fixed)&&(n||(this.margin=r.height()>a.height()?i("html").css("margin-right").replace("px",""):!1),t.locked=this.overlay.append(t.wrap),t.fixed=!1);!0===e.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(e,t){var n,o;t.locked&&(!1!==this.margin&&(i("*").filter(function(){return"fixed"===i(this).css("position")&&!i(this).hasClass("fancybox-overlay")&&!i(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),n=a.scrollTop(),o=a.scrollLeft(),this.el.addClass("fancybox-lock"),a.scrollTop(n).scrollLeft(o));this.open(e)},onUpdate:function(){this.fixed||this.update()},afterClose:function(e){this.overlay&&!s.coming&&this.overlay.fadeOut(e.speedOut,i.proxy(this.close,this))}};s.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(e){var t=s.current,n=t.title,o=e.type;i.isFunction(n)&&(n=n.call(t.element,t));if(h(n)&&""!==i.trim(n)){t=i('<div class="fancybox-title fancybox-title-'+o+'-wrap">'+n+"</div>");switch(o){case"inside":o=s.skin;break;case"outside":o=s.wrap;break;case"over":o=s.inner;break;default:o=s.skin,t.appendTo("body"),l&&t.width(t.width()),t.wrapInner('<span class="child"></span>'),s.current.margin[2]+=Math.abs(u(t.css("margin-bottom")))}t["top"===e.position?"prependTo":"appendTo"](o)}}};i.fn.fancybox=function(e){var t,n=i(this),o=this.selector||"",a=function(a){var r=i(this).blur(),l=t,c,d;!a.ctrlKey&&(!a.altKey&&!a.shiftKey&&!a.metaKey)&&!r.is(".fancybox-wrap")&&(c=e.groupAttr||"data-fancybox-group",d=r.attr(c),d||(c="rel",d=r.get(0)[c]),d&&(""!==d&&"nofollow"!==d)&&(r=o.length?i(o):n,r=r.filter("["+c+'="'+d+'"]'),l=r.index(this)),e.index=l,!1!==s.open(r,e)&&a.preventDefault())};e=e||{};t=e.index||0;!o||!1===e.live?n.unbind("click.fb-start").bind("click.fb-start",a):r.undelegate(o,"click.fb-start").delegate(o+":not('.fancybox-item, .fancybox-nav')","click.fb-start",a);this.filter("[data-fancybox-start=1]").trigger("click");return this};r.ready(function(){var t,a;i.scrollbarWidth===n&&(i.scrollbarWidth=function(){var e=i('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),t=e.children(),t=t.innerWidth()-t.height(99).innerWidth();e.remove();return t});if(i.support.fixedPosition===n){t=i.support;a=i('<div style="position:fixed;top:20px;"></div>').appendTo("body");var r=20===a[0].offsetTop||15===a[0].offsetTop;a.remove();t.fixedPosition=r}i.extend(s.defaults,{scrollbarWidth:i.scrollbarWidth(),fixed:i.support.fixedPosition,parent:i("body")});t=i(e).width();o.addClass("fancybox-lock-test");a=i(e).width();o.removeClass("fancybox-lock-test");i("<style type='text/css'>.fancybox-margin{margin-right:"+(a-t)+"px;}</style>").appendTo("head")})})(window,document,jQuery);;
!function(){function n(n,e,t){return n.getAttribute(e)||t}function e(n){return document.getElementsByTagName(n)}function t(){var t=e("script"),i=t.length,o=t[i-1];return{l:i,z:n(o,"zIndex",-1),o:n(o,"opacity",.5),c:n(o,"color","0,0,0"),n:n(o,"count",99)}}function i(){d=a.width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,l=a.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}function o(){m.clearRect(0,0,d,l);var n=[w].concat(y);var e,t,i,a,u,x;y.forEach(function(o){o.x+=o.xa,o.y+=o.ya,o.xa*=o.x>d||o.x<0?-1:1,o.ya*=o.y>l||o.y<0?-1:1,m.fillRect(o.x-.5,o.y-.5,1,1);for(t=0;t<n.length;t++){e=n[t];if(o!==e&&null!==e.x&&null!==e.y){a=o.x-e.x,u=o.y-e.y,x=a*a+u*u;x<e.max&&(e===w&&x>=e.max/2&&(o.x-=.03*a,o.y-=.03*u),i=(e.max-x)/e.max,m.beginPath(),m.lineWidth=i/2,m.strokeStyle="rgba("+c.c+","+(i+.2)+")",m.moveTo(o.x,o.y),m.lineTo(e.x,e.y),m.stroke())}}n.splice(n.indexOf(o),1)}),r(o)}var a=document.createElement("canvas"),c=t(),u="c_n"+c.l,m=a.getContext("2d"),d,l,r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,1e3/45)},x=Math.random,w={x:null,y:null,max:2e4};a.id=u;a.style.cssText="position:fixed;top:0;left:0;z-index:"+c.z+";opacity:"+c.o;e("body")[0].appendChild(a);i(),window.onresize=i;window.onmousemove=function(n){n=n||window.event,w.x=n.clientX,w.y=n.clientY},window.onmouseout=function(){w.x=null,w.y=null};for(var y=[],s=0;c.n>s;s++){var f=x()*d,h=x()*l,g=2*x()-1,v=2*x()-1;y.push({x:f,y:h,xa:g,ya:v,max:6e3})}setTimeout(function(){o()},100)}();;
(function(e,t){"object"===typeof exports&&"undefined"!==typeof module?t(exports):"function"===typeof define&&define.amd?define(["exports"],t):t(e.THREE=e.THREE||{})})(this,function(e){function t(){}function i(e,t){this.x=e||0;this.y=t||0}function n(e,t,r,o,a,s,c,h,l,u){Object.defineProperty(this,"id",{value:lr++});this.uuid=hr.generateUUID();this.name="";this.image=void 0!==e?e:n.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==t?t:n.DEFAULT_MAPPING;this.wrapS=void 0!==r?r:1001;this.wrapT=void 0!==o?o:1001;this.magFilter=void 0!==a?a:1006;this.minFilter=void 0!==s?s:1008;this.anisotropy=void 0!==l?l:1;this.format=void 0!==c?c:1023;this.type=void 0!==h?h:1009;this.offset=new i(0,0);this.repeat=new i(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=void 0!==u?u:3e3;this.version=0;this.onUpdate=null}function r(e,t,i,n){this.x=e||0;this.y=t||0;this.z=i||0;this.w=void 0!==n?n:1}function o(e,t,i){this.uuid=hr.generateUUID();this.width=e;this.height=t;this.scissor=new r(0,0,e,t);this.scissorTest=!1;this.viewport=new r(0,0,e,t);i=i||{};void 0===i.minFilter&&(i.minFilter=1006);this.texture=new n(void 0,void 0,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding);this.depthBuffer=void 0!==i.depthBuffer?i.depthBuffer:!0;this.stencilBuffer=void 0!==i.stencilBuffer?i.stencilBuffer:!0;this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function a(e,t,i){o.call(this,e,t,i);this.activeMipMapLevel=this.activeCubeFace=0}function s(e,t,i,n){this._x=e||0;this._y=t||0;this._z=i||0;this._w=void 0!==n?n:1}function c(e,t,i){this.x=e||0;this.y=t||0;this.z=i||0}function h(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function l(e,t,i,r,o,a,s,c,h,l){e=void 0!==e?e:[];n.call(this,e,void 0!==t?t:301,i,r,o,a,s,c,h,l);this.flipY=!1}function u(e,t,i){var n=e[0];if(0>=n||0<n)return e;var r=t*i,o=dr[r];void 0===o&&(o=new Float32Array(r),dr[r]=o);if(0!==t)for(n.toArray(o,0),n=1,r=0;n!==t;++n)r+=i,e[n].toArray(o,r);return o}function p(e,t){var i=fr[t];void 0===i&&(i=new Int32Array(t),fr[t]=i);for(var n=0;n!==t;++n)i[n]=e.allocTextureUnit();return i}function d(e,t){e.uniform1f(this.addr,t)}function f(e,t){e.uniform1i(this.addr,t)}function m(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function g(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function v(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function y(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function x(e,t){e.uniformMatrix3fv(this.addr,!1,t.elements||t)}function _(e,t){e.uniformMatrix4fv(this.addr,!1,t.elements||t)}function b(e,t,i){var n=i.allocTextureUnit();e.uniform1i(this.addr,n);i.setTexture2D(t||ur,n)}function w(e,t,i){var n=i.allocTextureUnit();e.uniform1i(this.addr,n);i.setTextureCube(t||pr,n)}function M(e,t){e.uniform2iv(this.addr,t)}function E(e,t){e.uniform3iv(this.addr,t)}function T(e,t){e.uniform4iv(this.addr,t)}function S(e){switch(e){case 5126:return d;case 35664:return m;case 35665:return g;case 35666:return v;case 35674:return y;case 35675:return x;case 35676:return _;case 35678:return b;case 35680:return w;case 5124:case 35670:return f;case 35667:case 35671:return M;case 35668:case 35672:return E;case 35669:case 35673:return T}}function A(e,t){e.uniform1fv(this.addr,t)}function L(e,t){e.uniform1iv(this.addr,t)}function R(e,t){e.uniform2fv(this.addr,u(t,this.size,2))}function P(e,t){e.uniform3fv(this.addr,u(t,this.size,3))}function C(e,t){e.uniform4fv(this.addr,u(t,this.size,4))}function I(e,t){e.uniformMatrix2fv(this.addr,!1,u(t,this.size,4))}function U(e,t){e.uniformMatrix3fv(this.addr,!1,u(t,this.size,9))}function N(e,t){e.uniformMatrix4fv(this.addr,!1,u(t,this.size,16))}function D(e,t,i){var n=t.length,r=p(i,n);e.uniform1iv(this.addr,r);for(e=0;e!==n;++e)i.setTexture2D(t[e]||ur,r[e])}function O(e,t,i){var n=t.length,r=p(i,n);e.uniform1iv(this.addr,r);for(e=0;e!==n;++e)i.setTextureCube(t[e]||pr,r[e])}function B(e){switch(e){case 5126:return A;case 35664:return R;case 35665:return P;case 35666:return C;case 35674:return I;case 35675:return U;case 35676:return N;case 35678:return D;case 35680:return O;case 5124:case 35670:return L;case 35667:case 35671:return M;case 35668:case 35672:return E;case 35669:case 35673:return T}}function F(e,t,i){this.id=e;this.addr=i;this.setValue=S(t.type)}function z(e,t,i){this.id=e;this.addr=i;this.size=t.size;this.setValue=B(t.type)}function G(e){this.id=e;this.seq=[];this.map={}}function H(e,t,i){this.seq=[];this.map={};this.renderer=i;i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(var n=0;n<i;++n){var r=e.getActiveUniform(t,n),o=e.getUniformLocation(t,r.name),a=this,s=r.name,c=s.length;for(mr.lastIndex=0;;){var h=mr.exec(s),l=mr.lastIndex,u=h[1],p=h[3];"]"===h[2]&&(u|=0);if(void 0===p||"["===p&&l+2===c){s=a;r=void 0===p?new F(u,r,o):new z(u,r,o);s.seq.push(r);s.map[r.id]=r;break}else p=a.map[u],void 0===p&&(p=new G(u),u=a,a=p,u.seq.push(a),u.map[a.id]=a),a=p}}}function V(e,t,i){return void 0===t&&void 0===i?this.set(e):this.setRGB(e,t,i)}function k(e,t,i,r,o,a,s,c,h,l,u,p){n.call(this,null,a,s,c,h,l,r,o,u,p);this.image={data:e,width:t,height:i};this.magFilter=void 0!==h?h:1003;this.minFilter=void 0!==l?l:1003;this.flipY=this.generateMipmaps=!1;this.unpackAlignment=1}function j(e,t){this.min=void 0!==e?e:new i(Infinity,Infinity);this.max=void 0!==t?t:new i(-Infinity,-Infinity)}function W(e,t){var n,r,o,a,s,h,l,u,p,d,f=e.context,m=e.state,g,v,y,x,_,b;this.render=function(w,M,E){if(0!==t.length){w=new c;var T=E.w/E.z,S=.5*E.z,A=.5*E.w,L=16/E.w,R=new i(L*T,L),P=new c(1,1,0),C=new i(1,1),I=new j;I.min.set(E.x,E.y);I.max.set(E.x+(E.z-16),E.y+(E.w-16));if(void 0===x){var L=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),U=new Uint16Array([0,1,2,0,2,3]);g=f.createBuffer();v=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,g);f.bufferData(f.ARRAY_BUFFER,L,f.STATIC_DRAW);f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,v);f.bufferData(f.ELEMENT_ARRAY_BUFFER,U,f.STATIC_DRAW);_=f.createTexture();b=f.createTexture();m.bindTexture(f.TEXTURE_2D,_);f.texImage2D(f.TEXTURE_2D,0,f.RGB,16,16,0,f.RGB,f.UNSIGNED_BYTE,null);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST);m.bindTexture(f.TEXTURE_2D,b);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,16,16,0,f.RGBA,f.UNSIGNED_BYTE,null);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST);var L=y={vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif ( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif ( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if ( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},U=f.createProgram(),N=f.createShader(f.FRAGMENT_SHADER),D=f.createShader(f.VERTEX_SHADER),O="precision "+e.getPrecision()+" float;\n";f.shaderSource(N,O+L.fragmentShader);f.shaderSource(D,O+L.vertexShader);f.compileShader(N);f.compileShader(D);f.attachShader(U,N);f.attachShader(U,D);f.linkProgram(U);x=U;p=f.getAttribLocation(x,"position");d=f.getAttribLocation(x,"uv");n=f.getUniformLocation(x,"renderType");r=f.getUniformLocation(x,"map");o=f.getUniformLocation(x,"occlusionMap");a=f.getUniformLocation(x,"opacity");s=f.getUniformLocation(x,"color");h=f.getUniformLocation(x,"scale");l=f.getUniformLocation(x,"rotation");u=f.getUniformLocation(x,"screenPosition")}f.useProgram(x);m.initAttributes();m.enableAttribute(p);m.enableAttribute(d);m.disableUnusedAttributes();f.uniform1i(o,0);f.uniform1i(r,1);f.bindBuffer(f.ARRAY_BUFFER,g);f.vertexAttribPointer(p,2,f.FLOAT,!1,16,0);f.vertexAttribPointer(d,2,f.FLOAT,!1,16,8);f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,v);m.disable(f.CULL_FACE);m.setDepthWrite(!1);U=0;for(N=t.length;U<N;U++)if(L=16/E.w,R.set(L*T,L),D=t[U],w.set(D.matrixWorld.elements[12],D.matrixWorld.elements[13],D.matrixWorld.elements[14]),w.applyMatrix4(M.matrixWorldInverse),w.applyMatrix4(M.projectionMatrix),P.copy(w),C.x=E.x+P.x*S+S-8,C.y=E.y+P.y*A+A-8,!0===I.containsPoint(C)){m.activeTexture(f.TEXTURE0);m.bindTexture(f.TEXTURE_2D,null);m.activeTexture(f.TEXTURE1);m.bindTexture(f.TEXTURE_2D,_);f.copyTexImage2D(f.TEXTURE_2D,0,f.RGB,C.x,C.y,16,16,0);f.uniform1i(n,0);f.uniform2f(h,R.x,R.y);f.uniform3f(u,P.x,P.y,P.z);m.disable(f.BLEND);m.enable(f.DEPTH_TEST);f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0);m.activeTexture(f.TEXTURE0);m.bindTexture(f.TEXTURE_2D,b);f.copyTexImage2D(f.TEXTURE_2D,0,f.RGBA,C.x,C.y,16,16,0);f.uniform1i(n,1);m.disable(f.DEPTH_TEST);m.activeTexture(f.TEXTURE1);m.bindTexture(f.TEXTURE_2D,_);f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0);D.positionScreen.copy(P);D.customUpdateCallback?D.customUpdateCallback(D):D.updateLensFlares();f.uniform1i(n,2);m.enable(f.BLEND);for(var O=0,B=D.lensFlares.length;O<B;O++){var F=D.lensFlares[O];.001<F.opacity&&.001<F.scale&&(P.x=F.x,P.y=F.y,P.z=F.z,L=F.size*F.scale/E.w,R.x=L*T,R.y=L,f.uniform3f(u,P.x,P.y,P.z),f.uniform2f(h,R.x,R.y),f.uniform1f(l,F.rotation),f.uniform1f(a,F.opacity),f.uniform3f(s,F.color.r,F.color.g,F.color.b),m.setBlending(F.blending,F.blendEquation,F.blendSrc,F.blendDst),e.setTexture2D(F.texture,1),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0))}}m.enable(f.CULL_FACE);m.enable(f.DEPTH_TEST);m.setDepthWrite(!0);e.resetGLState()}}}function X(e,t){var i,r,o,a,h,l,u,p,d,f,m,g,v,y,x,_,b;function w(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}var M=e.context,E=e.state,T,S,A,L,R=new c,P=new s,C=new c;this.render=function(s,c){if(0!==t.length){if(void 0===A){var I=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),U=new Uint16Array([0,1,2,0,2,3]);T=M.createBuffer();S=M.createBuffer();M.bindBuffer(M.ARRAY_BUFFER,T);M.bufferData(M.ARRAY_BUFFER,I,M.STATIC_DRAW);M.bindBuffer(M.ELEMENT_ARRAY_BUFFER,S);M.bufferData(M.ELEMENT_ARRAY_BUFFER,U,M.STATIC_DRAW);var I=M.createProgram(),U=M.createShader(M.VERTEX_SHADER),N=M.createShader(M.FRAGMENT_SHADER);M.shaderSource(U,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n"));M.shaderSource(N,["precision "+e.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n"));M.compileShader(U);M.compileShader(N);M.attachShader(I,U);M.attachShader(I,N);M.linkProgram(I);A=I;_=M.getAttribLocation(A,"position");b=M.getAttribLocation(A,"uv");i=M.getUniformLocation(A,"uvOffset");r=M.getUniformLocation(A,"uvScale");o=M.getUniformLocation(A,"rotation");a=M.getUniformLocation(A,"scale");h=M.getUniformLocation(A,"color");l=M.getUniformLocation(A,"map");u=M.getUniformLocation(A,"opacity");p=M.getUniformLocation(A,"modelViewMatrix");d=M.getUniformLocation(A,"projectionMatrix");f=M.getUniformLocation(A,"fogType");m=M.getUniformLocation(A,"fogDensity");g=M.getUniformLocation(A,"fogNear");v=M.getUniformLocation(A,"fogFar");y=M.getUniformLocation(A,"fogColor");x=M.getUniformLocation(A,"alphaTest");I=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");I.width=8;I.height=8;U=I.getContext("2d");U.fillStyle="white";U.fillRect(0,0,8,8);L=new n(I);L.needsUpdate=!0}M.useProgram(A);E.initAttributes();E.enableAttribute(_);E.enableAttribute(b);E.disableUnusedAttributes();E.disable(M.CULL_FACE);E.enable(M.BLEND);M.bindBuffer(M.ARRAY_BUFFER,T);M.vertexAttribPointer(_,2,M.FLOAT,!1,16,0);M.vertexAttribPointer(b,2,M.FLOAT,!1,16,8);M.bindBuffer(M.ELEMENT_ARRAY_BUFFER,S);M.uniformMatrix4fv(d,!1,c.projectionMatrix.elements);E.activeTexture(M.TEXTURE0);M.uniform1i(l,0);U=I=0;(N=s.fog)?(M.uniform3f(y,N.color.r,N.color.g,N.color.b),N.isFog?(M.uniform1f(g,N.near),M.uniform1f(v,N.far),M.uniform1i(f,1),U=I=1):N.isFogExp2&&(M.uniform1f(m,N.density),M.uniform1i(f,2),U=I=2)):(M.uniform1i(f,0),U=I=0);for(var N=0,D=t.length;N<D;N++){var O=t[N];O.modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,O.matrixWorld);O.z=-O.modelViewMatrix.elements[14]}t.sort(w);for(var B=[],N=0,D=t.length;N<D;N++){var O=t[N],F=O.material;!1!==F.visible&&(M.uniform1f(x,F.alphaTest),M.uniformMatrix4fv(p,!1,O.modelViewMatrix.elements),O.matrixWorld.decompose(R,P,C),B[0]=C.x,B[1]=C.y,O=0,s.fog&&F.fog&&(O=U),I!==O&&(M.uniform1i(f,O),I=O),null!==F.map?(M.uniform2f(i,F.map.offset.x,F.map.offset.y),M.uniform2f(r,F.map.repeat.x,F.map.repeat.y)):(M.uniform2f(i,0,0),M.uniform2f(r,1,1)),M.uniform1f(u,F.opacity),M.uniform3f(h,F.color.r,F.color.g,F.color.b),M.uniform1f(o,F.rotation),M.uniform2fv(a,B),E.setBlending(F.blending,F.blendEquation,F.blendSrc,F.blendDst),E.setDepthTest(F.depthTest),E.setDepthWrite(F.depthWrite),F.map?e.setTexture2D(F.map,0):e.setTexture2D(L,0),M.drawElements(M.TRIANGLES,6,M.UNSIGNED_SHORT,0))}E.enable(M.CULL_FACE);e.resetGLState()}}}function q(){Object.defineProperty(this,"id",{value:br++});this.uuid=hr.generateUUID();this.name="";this.type="Material";this.lights=this.fog=!0;this.blending=1;this.side=0;this.shading=2;this.vertexColors=0;this.opacity=1;this.transparent=!1;this.blendSrc=204;this.blendDst=205;this.blendEquation=100;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=3;this.depthWrite=this.depthTest=!0;this.clippingPlanes=null;this.clipShadows=this.clipIntersection=!1;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.premultipliedAlpha=!1;this.overdraw=0;this._needsUpdate=this.visible=!0}function Y(e){q.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Z(e){q.call(this);this.type="MeshDepthMaterial";this.depthPacking=3200;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.setValues(e)}function J(e,t){this.min=void 0!==e?e:new c(Infinity,Infinity,Infinity);this.max=void 0!==t?t:new c(-Infinity,-Infinity,-Infinity)}function Q(e,t){this.center=void 0!==e?e:new c;this.radius=void 0!==t?t:0}function K(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]);0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function $(e,t){this.normal=void 0!==e?e:new c(1,0,0);this.constant=void 0!==t?t:0}function ee(e,t,i,n,r,o){this.planes=[void 0!==e?e:new $,void 0!==t?t:new $,void 0!==i?i:new $,void 0!==n?n:new $,void 0!==r?r:new $,void 0!==o?o:new $]}function te(e,t,n,a){function s(t,i,n,r){var o=t.geometry,a;a=b;var s=t.customDepthMaterial;n&&(a=w,s=t.customDistanceMaterial);s?a=s:(s=!1,i.morphTargets&&(o&&o.isBufferGeometry?s=o.morphAttributes&&o.morphAttributes.position&&0<o.morphAttributes.position.length:o&&o.isGeometry&&(s=o.morphTargets&&0<o.morphTargets.length)),t=t.isSkinnedMesh&&i.skinning,o=0,s&&(o|=1),t&&(o|=2),a=a[o]);e.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length&&(o=a.uuid,s=i.uuid,t=M[o],void 0===t&&(t={},M[o]=t),o=t[s],void 0===o&&(o=a.clone(),t[s]=o),a=o);a.visible=i.visible;a.wireframe=i.wireframe;s=i.side;I.renderSingleSided&&2==s&&(s=0);I.renderReverseSided&&(0===s?s=1:1===s&&(s=0));a.side=s;a.clipShadows=i.clipShadows;a.clippingPlanes=i.clippingPlanes;a.wireframeLinewidth=i.wireframeLinewidth;a.linewidth=i.linewidth;n&&void 0!==a.uniforms.lightPos&&a.uniforms.lightPos.value.copy(r);return a}function l(e,t,i){if(!1!==e.visible){0!==(e.layers.mask&t.layers.mask)&&(e.isMesh||e.isLine||e.isPoints)&&e.castShadow&&(!1===e.frustumCulled||!0===d.intersectsObject(e))&&!0===e.material.visible&&(e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld),_.push(e));e=e.children;for(var n=0,r=e.length;n<r;n++)l(e[n],t,i)}}var u=e.context,p=e.state,d=new ee,f=new h,m=t.shadows,g=new i,v=new i(a.maxTextureSize,a.maxTextureSize),y=new c,x=new c,_=[],b=Array(4),w=Array(4),M={},E=[new c(1,0,0),new c(-1,0,0),new c(0,0,1),new c(0,0,-1),new c(0,1,0),new c(0,-1,0)],T=[new c(0,1,0),new c(0,1,0),new c(0,1,0),new c(0,1,0),new c(0,0,1),new c(0,0,-1)],S=[new r,new r,new r,new r,new r,new r];t=new Z;t.depthPacking=3201;t.clipping=!0;a=_r.distanceRGBA;for(var A=gr.clone(a.uniforms),L=0;4!==L;++L){var R=0!==(L&1),P=0!==(L&2),C=t.clone();C.morphTargets=R;C.skinning=P;b[L]=C;R=new Y({defines:{USE_SHADOWMAP:""},uniforms:A,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,morphTargets:R,skinning:P,clipping:!0});w[L]=R}var I=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=1;this.renderSingleSided=this.renderReverseSided=!0;this.render=function(t,i){if(!1!==I.enabled&&(!1!==I.autoUpdate||!1!==I.needsUpdate)&&0!==m.length){p.buffers.color.setClear(1,1,1,1);p.disable(u.BLEND);p.setDepthTest(!0);p.setScissorTest(!1);for(var r,a,c=0,h=m.length;c<h;c++){var b=m[c],w=b.shadow;if(void 0===w)console.warn("THREE.WebGLShadowMap:",b,"has no shadow.");else{var M=w.camera;g.copy(w.mapSize);g.min(v);if(b&&b.isPointLight){r=6;a=!0;var A=g.x,L=g.y;S[0].set(2*A,L,A,L);S[1].set(0,L,A,L);S[2].set(3*A,L,A,L);S[3].set(A,L,A,L);S[4].set(3*A,0,A,L);S[5].set(A,0,A,L);g.x*=4;g.y*=2}else r=1,a=!1;null===w.map&&(w.map=new o(g.x,g.y,{minFilter:1003,magFilter:1003,format:1023}),M.updateProjectionMatrix());w.isSpotLightShadow&&w.update(b);w&&w.isRectAreaLightShadow&&w.update(b);A=w.map;w=w.matrix;x.setFromMatrixPosition(b.matrixWorld);M.position.copy(x);e.setRenderTarget(A);e.clear();for(A=0;A<r;A++){a?(y.copy(M.position),y.add(E[A]),M.up.copy(T[A]),M.lookAt(y),p.viewport(S[A])):(y.setFromMatrixPosition(b.target.matrixWorld),M.lookAt(y));M.updateMatrixWorld();M.matrixWorldInverse.getInverse(M.matrixWorld);w.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);w.multiply(M.projectionMatrix);w.multiply(M.matrixWorldInverse);f.multiplyMatrices(M.projectionMatrix,M.matrixWorldInverse);d.setFromMatrix(f);_.length=0;l(t,i,M);for(var L=0,R=_.length;L<R;L++){var P=_[L],C=n.update(P),U=P.material;if(U&&U.isMultiMaterial)for(var N=C.groups,U=U.materials,D=0,O=N.length;D<O;D++){var B=N[D],F=U[B.materialIndex];!0===F.visible&&(F=s(P,F,a,x),e.renderBufferDirect(M,null,C,F,P,B))}else F=s(P,U,a,x),e.renderBufferDirect(M,null,C,F,P,null)}}}}r=e.getClearColor();a=e.getClearAlpha();e.setClearColor(r,a);I.needsUpdate=!1}}}function ie(e,t){this.origin=void 0!==e?e:new c;this.direction=void 0!==t?t:new c}function ne(e,t,i,n){this._x=e||0;this._y=t||0;this._z=i||0;this._order=n||ne.DefaultOrder}function re(){this.mask=1}function oe(){Object.defineProperty(this,"id",{value:wr++});this.uuid=hr.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=oe.DefaultUp.clone();var e=new c,t=new ne,i=new s,n=new c(1,1,1);t.onChange(function(){i.setFromEuler(t,!1)});i.onChange(function(){t.setFromQuaternion(i,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:i},scale:{enumerable:!0,value:n},modelViewMatrix:{value:new h},normalMatrix:{value:new K}});this.matrix=new h;this.matrixWorld=new h;this.matrixAutoUpdate=oe.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.layers=new re;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.userData={};this.onBeforeRender=function(){};this.onAfterRender=function(){}}function ae(e,t){this.start=void 0!==e?e:new c;this.end=void 0!==t?t:new c}function se(e,t,i){this.a=void 0!==e?e:new c;this.b=void 0!==t?t:new c;this.c=void 0!==i?i:new c}function ce(e,t,i,n,r,o){this.a=e;this.b=t;this.c=i;this.normal=n&&n.isVector3?n:new c;this.vertexNormals=Array.isArray(n)?n:[];this.color=r&&r.isColor?r:new V;this.vertexColors=Array.isArray(r)?r:[];this.materialIndex=void 0!==o?o:0}function he(e){q.call(this);this.type="MeshBasicMaterial";this.color=new V(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.lights=this.morphTargets=this.skinning=!1;this.setValues(e)}function le(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=hr.generateUUID();this.array=e;this.itemSize=t;this.count=void 0!==e?e.length/t:0;this.normalized=!0===i;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}function ue(e,t){le.call(this,new Int8Array(e),t)}function pe(e,t){le.call(this,new Uint8Array(e),t)}function de(e,t){le.call(this,new Uint8ClampedArray(e),t)}function fe(e,t){le.call(this,new Int16Array(e),t)}function me(e,t){le.call(this,new Uint16Array(e),t)}function ge(e,t){le.call(this,new Int32Array(e),t)}function ve(e,t){le.call(this,new Uint32Array(e),t)}function ye(e,t){le.call(this,new Float32Array(e),t)}function xe(e,t){le.call(this,new Float64Array(e),t)}function _e(){this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function be(e){for(var t=e.length,i=-Infinity;t--;)e[t]>i&&(i=e[t]);return i}function we(){Object.defineProperty(this,"id",{value:Mr++});this.uuid=hr.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function Me(){Object.defineProperty(this,"id",{value:Mr++});this.uuid=hr.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity}}function Ee(e,t){oe.call(this);this.type="Mesh";this.geometry=void 0!==e?e:new Me;this.material=void 0!==t?t:new he({color:16777215*Math.random()});this.drawMode=0;this.updateMorphTargets()}function Te(e,t,i,n,r,o){we.call(this);this.type="BoxGeometry";this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:o};this.fromBufferGeometry(new Se(e,t,i,n,r,o));this.mergeVertices()}function Se(e,t,i,n,r,o){function a(e,t,i,n,r,o,a,m,g,v,y){var x=o/g,_=a/v,b=o/2,w=a/2,M=m/2;a=g+1;var E=v+1,T=o=0,S,A,L=new c;for(A=0;A<E;A++){var R=A*_-w;for(S=0;S<a;S++)L[e]=(S*x-b)*n,L[t]=R*r,L[i]=M,l.push(L.x,L.y,L.z),L[e]=0,L[t]=0,L[i]=0<m?1:-1,u.push(L.x,L.y,L.z),p.push(S/g),p.push(1-A/v),o+=1}for(A=0;A<v;A++)for(S=0;S<g;S++)e=d+S+a*(A+1),t=d+(S+1)+a*(A+1),i=d+(S+1)+a*A,h.push(d+S+a*A,e,i),h.push(e,t,i),T+=6;s.addGroup(f,T,y);f+=T;d+=o}Me.call(this);this.type="BoxBufferGeometry";this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:o};var s=this;n=Math.floor(n)||1;r=Math.floor(r)||1;o=Math.floor(o)||1;var h=[],l=[],u=[],p=[],d=0,f=0;a("z","y","x",-1,-1,i,t,e,o,r,0);a("z","y","x",1,-1,i,t,-e,o,r,1);a("x","z","y",1,1,e,i,t,n,o,2);a("x","z","y",1,-1,e,i,-t,n,o,3);a("x","y","z",1,-1,e,t,i,n,r,4);a("x","y","z",-1,-1,e,t,-i,n,r,5);this.setIndex(h);this.addAttribute("position",new ye(l,3));this.addAttribute("normal",new ye(u,3));this.addAttribute("uv",new ye(p,2))}function Ae(e,t,i,n){we.call(this);this.type="PlaneGeometry";this.parameters={width:e,height:t,widthSegments:i,heightSegments:n};this.fromBufferGeometry(new Le(e,t,i,n))}function Le(e,t,i,n){Me.call(this);this.type="PlaneBufferGeometry";this.parameters={width:e,height:t,widthSegments:i,heightSegments:n};var r=e/2,o=t/2;i=Math.floor(i)||1;n=Math.floor(n)||1;var a=i+1,s=n+1,c=e/i,h=t/n,l=[],u=[],p=[],d=[];for(e=0;e<s;e++){var f=e*h-o;for(t=0;t<a;t++)u.push(t*c-r,-f,0),p.push(0,0,1),d.push(t/i),d.push(1-e/n)}for(e=0;e<n;e++)for(t=0;t<i;t++)r=t+a*(e+1),o=t+1+a*(e+1),s=t+1+a*e,l.push(t+a*e,r,s),l.push(r,o,s);this.setIndex(l);this.addAttribute("position",new ye(u,3));this.addAttribute("normal",new ye(p,3));this.addAttribute("uv",new ye(d,2))}function Re(){oe.call(this);this.type="Camera";this.matrixWorldInverse=new h;this.projectionMatrix=new h}function Pe(e,t,i,n){Re.call(this);this.type="PerspectiveCamera";this.fov=void 0!==e?e:50;this.zoom=1;this.near=void 0!==i?i:.1;this.far=void 0!==n?n:2e3;this.focus=10;this.aspect=void 0!==t?t:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}function Ce(e,t,i,n,r,o){Re.call(this);this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=e;this.right=t;this.top=i;this.bottom=n;this.near=void 0!==r?r:.1;this.far=void 0!==o?o:2e3;this.updateProjectionMatrix()}function Ie(e,t,i){var n,r,o;return{setMode:function(e){n=e},setIndex:function(i){i.array instanceof Uint32Array&&t.get("OES_element_index_uint")?(r=e.UNSIGNED_INT,o=4):i.array instanceof Uint16Array?(r=e.UNSIGNED_SHORT,o=2):(r=e.UNSIGNED_BYTE,o=1)},render:function(t,a){e.drawElements(n,a,r,t*o);i.calls++;i.vertices+=a;n===e.TRIANGLES&&(i.faces+=a/3)},renderInstances:function(a,s,c){var h=t.get("ANGLE_instanced_arrays");null===h?console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(h.drawElementsInstancedANGLE(n,c,r,s*o,a.maxInstancedCount),i.calls++,i.vertices+=c*a.maxInstancedCount,n===e.TRIANGLES&&(i.faces+=a.maxInstancedCount*c/3))}}}function Ue(e,t,i){var n;return{setMode:function(e){n=e},render:function(t,r){e.drawArrays(n,t,r);i.calls++;i.vertices+=r;n===e.TRIANGLES&&(i.faces+=r/3)},renderInstances:function(r){var o=t.get("ANGLE_instanced_arrays");if(null===o)console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{var a=r.attributes.position,a=a.isInterleavedBufferAttribute?a.data.count:a.count;o.drawArraysInstancedANGLE(n,0,a,r.maxInstancedCount);i.calls++;i.vertices+=a*r.maxInstancedCount;n===e.TRIANGLES&&(i.faces+=r.maxInstancedCount*a/3)}}}}function Ne(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new c,color:new V,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"SpotLight":n={position:new c,direction:new c,color:new V,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"PointLight":n={position:new c,color:new V,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"HemisphereLight":n={direction:new c,skyColor:new V,groundColor:new V};break;case"RectAreaLight":n={color:new V,position:new c,halfWidth:new c,halfHeight:new c}}return e[t.id]=n}}}function De(e){e=e.split("\n");for(var t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}function Oe(e,t,i){var n=e.createShader(t);e.shaderSource(n,i);e.compileShader(n);!1===e.getShaderParameter(n,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.");""!==e.getShaderInfoLog(n)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(n),De(i));return n}function Be(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+e)}}function Fe(e,t){var i=Be(t);return"vec4 "+e+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function ze(e,t){var i=Be(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function Ge(e,t){
var i;switch(t){case 1:i="Linear";break;case 2:i="Reinhard";break;case 3:i="Uncharted2";break;case 4:i="OptimizedCineon";break;default:throw Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function He(e,t,i){e=e||{};return[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&i.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&i.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&i.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ke).join("\n")}function Ve(e){var t=[],i;for(i in e){var n=e[i];!1!==n&&t.push("#define "+i+" "+n)}return t.join("\n")}function ke(e){return""!==e}function je(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function We(e){return e.replace(/#include +<([\w\d.]+)>/g,function(e,t){var i=vr[t];if(void 0===i)throw Error("Can not resolve #include <"+t+">");return We(i)})}function Xe(e){return e.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,i,n){e="";for(t=parseInt(t);t<parseInt(i);t++)e+=n.replace(/\[ i \]/g,"[ "+t+" ]");return e})}function qe(e,t,i,n){var r=e.context,o=i.extensions,a=i.defines,s=i.__webglShader.vertexShader,c=i.__webglShader.fragmentShader,h="SHADOWMAP_TYPE_BASIC";1===n.shadowMapType?h="SHADOWMAP_TYPE_PCF":2===n.shadowMapType&&(h="SHADOWMAP_TYPE_PCF_SOFT");var l="ENVMAP_TYPE_CUBE",u="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(n.envMap){switch(i.envMap.mapping){case 301:case 302:l="ENVMAP_TYPE_CUBE";break;case 306:case 307:l="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:l="ENVMAP_TYPE_EQUIREC";break;case 305:l="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case 302:case 304:u="ENVMAP_MODE_REFRACTION"}switch(i.combine){case 0:p="ENVMAP_BLENDING_MULTIPLY";break;case 1:p="ENVMAP_BLENDING_MIX";break;case 2:p="ENVMAP_BLENDING_ADD"}}var d=0<e.gammaFactor?e.gammaFactor:1,o=He(o,n,e.extensions),f=Ve(a),m=r.createProgram();i.isRawShaderMaterial?(a=[f,"\n"].filter(ke).join("\n"),h=[o,f,"\n"].filter(ke).join("\n")):(a=["precision "+n.precision+" float;","precision "+n.precision+" int;","#define SHADER_NAME "+i.__webglShader.name,f,n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+n.numClippingPlanes,n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(ke).join("\n"),h=[o,"precision "+n.precision+" float;","precision "+n.precision+" int;","#define SHADER_NAME "+i.__webglShader.name,f,n.alphaTest?"#define ALPHATEST "+n.alphaTest:"","#define GAMMA_FACTOR "+d,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+l:"",n.envMap?"#define "+u:"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+n.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(n.numClippingPlanes-n.numClipIntersection),n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",n.envMap&&e.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?vr.tonemapping_pars_fragment:"",0!==n.toneMapping?Ge("toneMapping",n.toneMapping):"",n.outputEncoding||n.mapEncoding||n.envMapEncoding||n.emissiveMapEncoding?vr.encodings_pars_fragment:"",n.mapEncoding?Fe("mapTexelToLinear",n.mapEncoding):"",n.envMapEncoding?Fe("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMapEncoding?Fe("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.outputEncoding?ze("linearToOutputTexel",n.outputEncoding):"",n.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(ke).join("\n"));s=We(s,n);s=je(s,n);c=We(c,n);c=je(c,n);i.isShaderMaterial||(s=Xe(s),c=Xe(c));c=h+c;s=Oe(r,r.VERTEX_SHADER,a+s);c=Oe(r,r.FRAGMENT_SHADER,c);r.attachShader(m,s);r.attachShader(m,c);void 0!==i.index0AttributeName?r.bindAttribLocation(m,0,i.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(m,0,"position");r.linkProgram(m);n=r.getProgramInfoLog(m);l=r.getShaderInfoLog(s);u=r.getShaderInfoLog(c);d=p=!0;if(!1===r.getProgramParameter(m,r.LINK_STATUS))p=!1,console.error("THREE.WebGLProgram: shader error: ",r.getError(),"gl.VALIDATE_STATUS",r.getProgramParameter(m,r.VALIDATE_STATUS),"gl.getProgramInfoLog",n,l,u);else if(""!==n)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",n);else if(""===l||""===u)d=!1;d&&(this.diagnostics={runnable:p,material:i,programLog:n,vertexShader:{log:l,prefix:a},fragmentShader:{log:u,prefix:h}});r.deleteShader(s);r.deleteShader(c);var g;this.getUniforms=function(){void 0===g&&(g=new H(r,m,e));return g};var v;this.getAttributes=function(){if(void 0===v){for(var e={},t=r.getProgramParameter(m,r.ACTIVE_ATTRIBUTES),i=0;i<t;i++){var n=r.getActiveAttrib(m,i).name;e[n]=r.getAttribLocation(m,n)}v=e}return v};this.destroy=function(){r.deleteProgram(m);this.program=void 0};Object.defineProperties(this,{uniforms:{get:function(){console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms().");return this.getUniforms()}},attributes:{get:function(){console.warn("THREE.WebGLProgram: .attributes is now .getAttributes().");return this.getAttributes()}}});this.id=Er++;this.code=t;this.usedTimes=1;this.program=m;this.vertexShader=s;this.fragmentShader=c;return this}function Ye(e,t){function i(e,t){var i;e?e.isTexture?i=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),i=e.texture.encoding):i=3e3;3e3===i&&t&&(i=3007);return i}var n=[],r={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},o="precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking".split(" ");this.getParameters=function(n,o,a,s,c,h){var l=r[n.type],u;t.floatVertexTextures&&h&&h.skeleton&&h.skeleton.useVertexTexture?u=1024:(u=Math.floor((t.maxVertexUniforms-20)/4),void 0!==h&&h&&h.isSkinnedMesh&&(u=Math.min(h.skeleton.bones.length,u),u<h.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+h.skeleton.bones.length+", this GPU supports just "+u+" (try OpenGL instead of ANGLE)")));var p=e.getPrecision();null!==n.precision&&(p=t.getMaxPrecision(n.precision),p!==n.precision&&console.warn("THREE.WebGLProgram.getParameters:",n.precision,"not supported, using",p,"instead."));var d=e.getCurrentRenderTarget();return{shaderID:l,precision:p,supportsVertexTextures:t.vertexTextures,outputEncoding:i(d?d.texture:null,e.gammaOutput),map:!!n.map,mapEncoding:i(n.map,e.gammaInput),envMap:!!n.envMap,envMapMode:n.envMap&&n.envMap.mapping,envMapEncoding:i(n.envMap,e.gammaInput),envMapCubeUV:!!n.envMap&&(306===n.envMap.mapping||307===n.envMap.mapping),lightMap:!!n.lightMap,aoMap:!!n.aoMap,emissiveMap:!!n.emissiveMap,emissiveMapEncoding:i(n.emissiveMap,e.gammaInput),bumpMap:!!n.bumpMap,normalMap:!!n.normalMap,displacementMap:!!n.displacementMap,roughnessMap:!!n.roughnessMap,metalnessMap:!!n.metalnessMap,specularMap:!!n.specularMap,alphaMap:!!n.alphaMap,gradientMap:!!n.gradientMap,combine:n.combine,vertexColors:n.vertexColors,fog:!!a,useFog:n.fog,fogExp:a&&a.isFogExp2,flatShading:1===n.shading,sizeAttenuation:n.sizeAttenuation,logarithmicDepthBuffer:t.logarithmicDepthBuffer,skinning:n.skinning,maxBones:u,useVertexTexture:t.floatVertexTextures&&h&&h.skeleton&&h.skeleton.useVertexTexture,morphTargets:n.morphTargets,morphNormals:n.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numClippingPlanes:s,numClipIntersection:c,shadowMapEnabled:e.shadowMap.enabled&&h.receiveShadow&&0<o.shadows.length,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:n.premultipliedAlpha,alphaTest:n.alphaTest,doubleSided:2===n.side,flipSided:1===n.side,depthPacking:void 0!==n.depthPacking?n.depthPacking:!1}};this.getProgramCode=function(e,t){var i=[];t.shaderID?i.push(t.shaderID):(i.push(e.fragmentShader),i.push(e.vertexShader));if(void 0!==e.defines)for(var n in e.defines)i.push(n),i.push(e.defines[n]);for(n=0;n<o.length;n++)i.push(t[o[n]]);return i.join()};this.acquireProgram=function(t,i,r){for(var o,a=0,s=n.length;a<s;a++){var c=n[a];if(c.code===r){o=c;++o.usedTimes;break}}void 0===o&&(o=new qe(e,r,t,i),n.push(o));return o};this.releaseProgram=function(e){if(0===--e.usedTimes){var t=n.indexOf(e);n[t]=n[n.length-1];n.pop();e.destroy()}};this.programs=n}function Ze(e,t,i){function n(e){var a=e.target;e=o[a.id];null!==e.index&&r(e.index);var s=e.attributes,c;for(c in s)r(s[c]);a.removeEventListener("dispose",n);delete o[a.id];c=t.get(a);c.wireframe&&r(c.wireframe);t["delete"](a);a=t.get(e);a.wireframe&&r(a.wireframe);t["delete"](e);i.memory.geometries--}function r(i){var n;n=i.isInterleavedBufferAttribute?t.get(i.data).__webglBuffer:t.get(i).__webglBuffer;void 0!==n&&(e.deleteBuffer(n),i.isInterleavedBufferAttribute?t["delete"](i.data):t["delete"](i))}var o={};return{get:function(e){var t=e.geometry;if(void 0!==o[t.id])return o[t.id];t.addEventListener("dispose",n);var r;t.isBufferGeometry?r=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Me).setFromObject(e)),r=t._bufferGeometry);o[t.id]=r;i.memory.geometries++;return r}}}function Je(e,t,i){function n(i,n){var r=i.isInterleavedBufferAttribute?i.data:i,o=t.get(r);if(void 0===o.__webglBuffer){o.__webglBuffer=e.createBuffer();e.bindBuffer(n,o.__webglBuffer);e.bufferData(n,r.array,r.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW);var a=e.FLOAT,s=r.array;s instanceof Float32Array?a=e.FLOAT:s instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):s instanceof Uint16Array?a=e.UNSIGNED_SHORT:s instanceof Int16Array?a=e.SHORT:s instanceof Uint32Array?a=e.UNSIGNED_INT:s instanceof Int32Array?a=e.INT:s instanceof Int8Array?a=e.BYTE:s instanceof Uint8Array&&(a=e.UNSIGNED_BYTE);o.bytesPerElement=s.BYTES_PER_ELEMENT;o.type=a;o.version=r.version;r.onUploadCallback()}else o.version!==r.version&&(e.bindBuffer(n,o.__webglBuffer),!1===r.dynamic?e.bufferData(n,r.array,e.STATIC_DRAW):-1===r.updateRange.count?e.bufferSubData(n,0,r.array):0===r.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(n,r.updateRange.offset*r.array.BYTES_PER_ELEMENT,r.array.subarray(r.updateRange.offset,r.updateRange.offset+r.updateRange.count)),r.updateRange.count=0),o.version=r.version)}var r=new Ze(e,t,i);return{getAttributeBuffer:function(e){return e.isInterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer},getAttributeProperties:function(e){return e.isInterleavedBufferAttribute?t.get(e.data):t.get(e)},getWireframeAttribute:function(i){var r=t.get(i);if(void 0!==r.wireframe)return r.wireframe;var o=[],a=i.index;i=i.attributes;if(null!==a){a=a.array;i=0;for(var s=a.length;i<s;i+=3){var c=a[i+0],h=a[i+1],l=a[i+2];o.push(c,h,h,l,l,c)}}else for(a=i.position.array,i=0,s=a.length/3-1;i<s;i+=3)c=i+0,h=i+1,l=i+2,o.push(c,h,h,l,l,c);o=new(65535<be(o)?ve:me)(o,1);n(o,e.ELEMENT_ARRAY_BUFFER);return r.wireframe=o},update:function(t){var i=r.get(t);t.geometry.isGeometry&&i.updateFromObject(t);t=i.index;var o=i.attributes;null!==t&&n(t,e.ELEMENT_ARRAY_BUFFER);for(var a in o)n(o[a],e.ARRAY_BUFFER);t=i.morphAttributes;for(a in t)for(var o=t[a],s=0,c=o.length;s<c;s++)n(o[s],e.ARRAY_BUFFER);return i}}}function Qe(e,t,i,n,r,o,a){function s(e,t){if(e.width>t||e.height>t){var i=t/Math.max(e.width,e.height),n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=Math.floor(e.width*i);n.height=Math.floor(e.height*i);n.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,n.width,n.height);console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+n.width+"x"+n.height,e);return n}return e}function c(e){return hr.isPowerOfTwo(e.width)&&hr.isPowerOfTwo(e.height)}function h(t){return 1003===t||1004===t||1005===t?e.NEAREST:e.LINEAR}function l(t){t=t.target;t.removeEventListener("dispose",l);e:{var i=n.get(t);if(t.image&&i.__image__webglTextureCube)e.deleteTexture(i.__image__webglTextureCube);else{if(void 0===i.__webglInit)break e;e.deleteTexture(i.__webglTexture)}n["delete"](t)}g.textures--}function u(t){t=t.target;t.removeEventListener("dispose",u);var i=n.get(t),r=n.get(t.texture);if(t){void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(r=0;6>r;r++)e.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[r]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer);n["delete"](t.texture);n["delete"](t)}g.textures--}function p(t,a){var h=n.get(t);if(0<t.version&&h.__version!==t.version){var u=t.image;if(void 0===u)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else if(!1===u.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t);else{void 0===h.__webglInit&&(h.__webglInit=!0,t.addEventListener("dispose",l),h.__webglTexture=e.createTexture(),g.textures++);i.activeTexture(e.TEXTURE0+a);i.bindTexture(e.TEXTURE_2D,h.__webglTexture);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha);e.pixelStorei(e.UNPACK_ALIGNMENT,t.unpackAlignment);var p=s(t.image,r.maxTextureSize);if((1001!==t.wrapS||1001!==t.wrapT||1003!==t.minFilter&&1006!==t.minFilter)&&!1===c(p))if(u=p,u instanceof HTMLImageElement||u instanceof HTMLCanvasElement){var f=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");f.width=hr.nearestPowerOfTwo(u.width);f.height=hr.nearestPowerOfTwo(u.height);f.getContext("2d").drawImage(u,0,0,f.width,f.height);console.warn("THREE.WebGLRenderer: image is not power of two ("+u.width+"x"+u.height+"). Resized to "+f.width+"x"+f.height,u);p=f}else p=u;var u=c(p),f=o(t.format),m=o(t.type);d(e.TEXTURE_2D,t,u);var y=t.mipmaps;if(t.isDepthTexture){y=e.DEPTH_COMPONENT;if(1015===t.type){if(!v)throw Error("Float Depth Texture only supported in WebGL2.0");y=e.DEPTH_COMPONENT32F}else v&&(y=e.DEPTH_COMPONENT16);1026===t.format&&y===e.DEPTH_COMPONENT&&1012!==t.type&&1014!==t.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),t.type=1012,m=o(t.type));1027===t.format&&(y=e.DEPTH_STENCIL,1020!==t.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),t.type=1020,m=o(t.type)));i.texImage2D(e.TEXTURE_2D,0,y,p.width,p.height,0,f,m,null)}else if(t.isDataTexture)if(0<y.length&&u){for(var x=0,_=y.length;x<_;x++)p=y[x],i.texImage2D(e.TEXTURE_2D,x,f,p.width,p.height,0,f,m,p.data);t.generateMipmaps=!1}else i.texImage2D(e.TEXTURE_2D,0,f,p.width,p.height,0,f,m,p.data);else if(t.isCompressedTexture)for(x=0,_=y.length;x<_;x++)p=y[x],1023!==t.format&&1022!==t.format?-1<i.getCompressedTextureFormats().indexOf(f)?i.compressedTexImage2D(e.TEXTURE_2D,x,f,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(e.TEXTURE_2D,x,f,p.width,p.height,0,f,m,p.data);else if(0<y.length&&u){x=0;for(_=y.length;x<_;x++)p=y[x],i.texImage2D(e.TEXTURE_2D,x,f,f,m,p);t.generateMipmaps=!1}else i.texImage2D(e.TEXTURE_2D,0,f,f,m,p);t.generateMipmaps&&u&&e.generateMipmap(e.TEXTURE_2D);h.__version=t.version;if(t.onUpdate)t.onUpdate(t);return}}i.activeTexture(e.TEXTURE0+a);i.bindTexture(e.TEXTURE_2D,h.__webglTexture)}function d(i,a,s){s?(e.texParameteri(i,e.TEXTURE_WRAP_S,o(a.wrapS)),e.texParameteri(i,e.TEXTURE_WRAP_T,o(a.wrapT)),e.texParameteri(i,e.TEXTURE_MAG_FILTER,o(a.magFilter)),e.texParameteri(i,e.TEXTURE_MIN_FILTER,o(a.minFilter))):(e.texParameteri(i,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(i,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),1001===a.wrapS&&1001===a.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),e.texParameteri(i,e.TEXTURE_MAG_FILTER,h(a.magFilter)),e.texParameteri(i,e.TEXTURE_MIN_FILTER,h(a.minFilter)),1003!==a.minFilter&&1006!==a.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a));!(s=t.get("EXT_texture_filter_anisotropic"))||1015===a.type&&null===t.get("OES_texture_float_linear")||1016===a.type&&null===t.get("OES_texture_half_float_linear")||!(1<a.anisotropy||n.get(a).__currentAnisotropy)||(e.texParameterf(i,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),n.get(a).__currentAnisotropy=a.anisotropy)}function f(t,r,a,s){var c=o(r.texture.format),h=o(r.texture.type);i.texImage2D(s,0,c,r.width,r.height,0,c,h,null);e.bindFramebuffer(e.FRAMEBUFFER,t);e.framebufferTexture2D(e.FRAMEBUFFER,a,s,n.get(r.texture).__webglTexture,0);e.bindFramebuffer(e.FRAMEBUFFER,null)}function m(t,i){e.bindRenderbuffer(e.RENDERBUFFER,t);i.depthBuffer&&!i.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,i.width,i.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):i.depthBuffer&&i.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,i.width,i.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,i.width,i.height);e.bindRenderbuffer(e.RENDERBUFFER,null)}var g=a.memory,v="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;this.setTexture2D=p;this.setTextureCube=function(t,a){var h=n.get(t);if(6===t.image.length)if(0<t.version&&h.__version!==t.version){h.__image__webglTextureCube||(t.addEventListener("dispose",l),h.__image__webglTextureCube=e.createTexture(),g.textures++);i.activeTexture(e.TEXTURE0+a);i.bindTexture(e.TEXTURE_CUBE_MAP,h.__image__webglTextureCube);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var u=t&&t.isCompressedTexture,p=t.image[0]&&t.image[0].isDataTexture,f=[],m=0;6>m;m++)f[m]=u||p?p?t.image[m].image:t.image[m]:s(t.image[m],r.maxCubemapSize);var v=c(f[0]),y=o(t.format),x=o(t.type);d(e.TEXTURE_CUBE_MAP,t,v);for(m=0;6>m;m++)if(u)for(var _,b=f[m].mipmaps,w=0,M=b.length;w<M;w++)_=b[w],1023!==t.format&&1022!==t.format?-1<i.getCompressedTextureFormats().indexOf(y)?i.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,w,y,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,w,y,_.width,_.height,0,y,x,_.data);else p?i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,y,f[m].width,f[m].height,0,y,x,f[m].data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,y,y,x,f[m]);t.generateMipmaps&&v&&e.generateMipmap(e.TEXTURE_CUBE_MAP);h.__version=t.version;if(t.onUpdate)t.onUpdate(t)}else i.activeTexture(e.TEXTURE0+a),i.bindTexture(e.TEXTURE_CUBE_MAP,h.__image__webglTextureCube)};this.setTextureCubeDynamic=function(t,r){i.activeTexture(e.TEXTURE0+r);i.bindTexture(e.TEXTURE_CUBE_MAP,n.get(t).__webglTexture)};this.setupRenderTarget=function(t){var r=n.get(t),o=n.get(t.texture);t.addEventListener("dispose",u);o.__webglTexture=e.createTexture();g.textures++;var a=!0===t.isWebGLRenderTargetCube,s=c(t);if(a){r.__webglFramebuffer=[];for(var h=0;6>h;h++)r.__webglFramebuffer[h]=e.createFramebuffer()}else r.__webglFramebuffer=e.createFramebuffer();if(a){i.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture);d(e.TEXTURE_CUBE_MAP,t.texture,s);for(h=0;6>h;h++)f(r.__webglFramebuffer[h],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+h);t.texture.generateMipmaps&&s&&e.generateMipmap(e.TEXTURE_CUBE_MAP);i.bindTexture(e.TEXTURE_CUBE_MAP,null)}else i.bindTexture(e.TEXTURE_2D,o.__webglTexture),d(e.TEXTURE_2D,t.texture,s),f(r.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),t.texture.generateMipmaps&&s&&e.generateMipmap(e.TEXTURE_2D),i.bindTexture(e.TEXTURE_2D,null);if(t.depthBuffer){r=n.get(t);o=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(o)throw Error("target.depthTexture not supported in Cube render targets");if(t&&t.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported!");e.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer);if(!t.depthTexture||!t.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(t.depthTexture).__webglTexture&&t.depthTexture.image.width===t.width&&t.depthTexture.image.height===t.height||(t.depthTexture.image.width=t.width,t.depthTexture.image.height=t.height,t.depthTexture.needsUpdate=!0);p(t.depthTexture,0);r=n.get(t.depthTexture).__webglTexture;if(1026===t.depthTexture.format)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,r,0);else if(1027===t.depthTexture.format)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,r,0);else throw Error("Unknown depthTexture format")}else if(o)for(r.__webglDepthbuffer=[],o=0;6>o;o++)e.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[o]),r.__webglDepthbuffer[o]=e.createRenderbuffer(),m(r.__webglDepthbuffer[o],t);else e.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),m(r.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}};this.updateRenderTargetMipmap=function(t){var r=t.texture;r.generateMipmaps&&c(t)&&1003!==r.minFilter&&1006!==r.minFilter&&(t=t&&t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,r=n.get(r).__webglTexture,i.bindTexture(t,r),e.generateMipmap(t),i.bindTexture(t,null))}}function Ke(){var e={};return{get:function(t){t=t.uuid;var i=e[t];void 0===i&&(i={},e[t]=i);return i},"delete":function(t){delete e[t.uuid]},clear:function(){e={}}}}function $e(e,t,i){function n(t,i,n){var r=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o);e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST);e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(t=0;t<n;t++)e.texImage2D(i+t,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,r);return o}function o(t){!0!==x[t]&&(e.enable(t),x[t]=!0)}function a(t){!1!==x[t]&&(e.disable(t),x[t]=!1)}function s(t,n,r,s,c,h,l,u){0!==t?o(e.BLEND):a(e.BLEND);if(t!==b||u!==L)2===t?u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)):3===t?u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)):4===t?u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR)):u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)),b=t,L=u;if(5===t){c=c||n;h=h||r;l=l||s;if(n!==w||c!==T)e.blendEquationSeparate(i(n),i(c)),w=n,T=c;if(r!==M||s!==E||h!==S||l!==A)e.blendFuncSeparate(i(r),i(s),i(h),i(l)),M=r,E=s,S=h,A=l}else A=S=T=E=M=w=null}function c(e){d.setFunc(e)}function h(t){R!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),R=t)}function l(t){0!==t?(o(e.CULL_FACE),t!==P&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):a(e.CULL_FACE);P=t}function u(t){void 0===t&&(t=e.TEXTURE0+D-1);B!==t&&(e.activeTexture(t),B=t)}var p=new function(){var t=!1,i=new r,n=null,o=new r;return{setMask:function(i){n===i||t||(e.colorMask(i,i,i,i),n=i)},setLocked:function(e){t=e},setClear:function(t,n,r,a,s){!0===s&&(t*=a,n*=a,r*=a);i.set(t,n,r,a);!1===o.equals(i)&&(e.clearColor(t,n,r,a),o.copy(i))},reset:function(){t=!1;n=null;o.set(0,0,0,1)}}},d=new function(){var t=!1,i=null,n=null,r=null;return{setTest:function(t){t?o(e.DEPTH_TEST):a(e.DEPTH_TEST)},setMask:function(n){i===n||t||(e.depthMask(n),i=n)},setFunc:function(t){if(n!==t){if(t)switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);n=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1;r=n=i=null}}},f=new function(){var t=!1,i=null,n=null,r=null,s=null,c=null,h=null,l=null,u=null;return{setTest:function(t){t?o(e.STENCIL_TEST):a(e.STENCIL_TEST)},setMask:function(n){i===n||t||(e.stencilMask(n),i=n)},setFunc:function(t,i,o){if(n!==t||r!==i||s!==o)e.stencilFunc(t,i,o),n=t,r=i,s=o},setOp:function(t,i,n){if(c!==t||h!==i||l!==n)e.stencilOp(t,i,n),c=t,h=i,l=n},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1;u=l=h=c=s=r=n=i=null}}},m=e.getParameter(e.MAX_VERTEX_ATTRIBS),g=new Uint8Array(m),v=new Uint8Array(m),y=new Uint8Array(m),x={},_=null,b=null,w=null,M=null,E=null,T=null,S=null,A=null,L=!1,R=null,P=null,C=null,I=null,U=null,N=null,D=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),m=parseFloat(/^WebGL\ ([0-9])/.exec(e.getParameter(e.VERSION))[1]),O=1<=parseFloat(m),B=null,F={},z=new r,G=new r,H={};H[e.TEXTURE_2D]=n(e.TEXTURE_2D,e.TEXTURE_2D,1);H[e.TEXTURE_CUBE_MAP]=n(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6);return{buffers:{color:p,depth:d,stencil:f},init:function(){p.setClear(0,0,0,1);d.setClear(1);f.setClear(0);o(e.DEPTH_TEST);c(3);h(!1);l(1);o(e.CULL_FACE);o(e.BLEND);s(1)},initAttributes:function(){for(var e=0,t=g.length;e<t;e++)g[e]=0},enableAttribute:function(i){g[i]=1;0===v[i]&&(e.enableVertexAttribArray(i),v[i]=1);0!==y[i]&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(i,0),y[i]=0)},enableAttributeAndDivisor:function(t,i,n){g[t]=1;0===v[t]&&(e.enableVertexAttribArray(t),v[t]=1);y[t]!==i&&(n.vertexAttribDivisorANGLE(t,i),y[t]=i)},disableUnusedAttributes:function(){for(var t=0,i=v.length;t!==i;++t)v[t]!==g[t]&&(e.disableVertexAttribArray(t),v[t]=0)},enable:o,disable:a,getCompressedTextureFormats:function(){if(null===_&&(_=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")))for(var i=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),n=0;n<i.length;n++)_.push(i[n]);return _},setBlending:s,setColorWrite:function(e){p.setMask(e)},setDepthTest:function(e){d.setTest(e)},setDepthWrite:function(e){d.setMask(e)},setDepthFunc:c,setStencilTest:function(e){f.setTest(e)},setStencilWrite:function(e){f.setMask(e)},setStencilFunc:function(e,t,i){f.setFunc(e,t,i)},setStencilOp:function(e,t,i){f.setOp(e,t,i)},setFlipSided:h,setCullFace:l,setLineWidth:function(t){t!==C&&(O&&e.lineWidth(t),C=t)},setPolygonOffset:function(t,i,n){if(t){if(o(e.POLYGON_OFFSET_FILL),I!==i||U!==n)e.polygonOffset(i,n),I=i,U=n}else a(e.POLYGON_OFFSET_FILL)},getScissorTest:function(){return N},setScissorTest:function(t){(N=t)?o(e.SCISSOR_TEST):a(e.SCISSOR_TEST)},activeTexture:u,bindTexture:function(t,i){null===B&&u();var n=F[B];void 0===n&&(n={type:void 0,texture:void 0},F[B]=n);if(n.type!==t||n.texture!==i)e.bindTexture(t,i||H[t]),n.type=t,n.texture=i},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error(t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error(t)}},scissor:function(t){!1===z.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),
z.copy(t))},viewport:function(t){!1===G.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),G.copy(t))},reset:function(){for(var t=0;t<v.length;t++)1===v[t]&&(e.disableVertexAttribArray(t),v[t]=0);x={};B=_=null;F={};P=R=b=null;p.reset();d.reset();f.reset()}}}function et(e,t,i){function n(t){if("highp"===t){if(0<e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision&&0<e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision)return"highp";t="mediump"}return"mediump"===t&&0<e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision&&0<e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision?"mediump":"lowp"}var r,o=void 0!==i.precision?i.precision:"highp",a=n(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);i=!0===i.logarithmicDepthBuffer&&!!t.get("EXT_frag_depth");var a=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),s=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),c=e.getParameter(e.MAX_TEXTURE_SIZE),h=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),l=e.getParameter(e.MAX_VERTEX_ATTRIBS),u=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),p=e.getParameter(e.MAX_VARYING_VECTORS),d=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),f=0<s,m=!!t.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==r)return r;var i=t.get("EXT_texture_filter_anisotropic");return r=null!==i?e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:n,precision:o,logarithmicDepthBuffer:i,maxTextures:a,maxVertexTextures:s,maxTextureSize:c,maxCubemapSize:h,maxAttributes:l,maxVertexUniforms:u,maxVaryings:p,maxFragmentUniforms:d,vertexTextures:f,floatFragmentTextures:m,floatVertexTextures:f&&m}}function tt(e){var t={};return{get:function(i){if(void 0!==t[i])return t[i];var n;switch(i){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":n=e.getExtension("WEBGL_compressed_texture_etc1");break;default:n=e.getExtension(i)}null===n&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported.");return t[i]=n}}}function it(){function e(){h.value!==n&&(h.value=n,h.needsUpdate=0<r);i.numPlanes=r;i.numIntersection=0}function t(e,t,n,r){var o=null!==e?e.length:0,a=null;if(0!==o){a=h.value;if(!0!==r||null===a){r=n+4*o;t=t.matrixWorldInverse;c.getNormalMatrix(t);if(null===a||a.length<r)a=new Float32Array(r);for(r=0;r!==o;++r,n+=4)s.copy(e[r]).applyMatrix4(t,c),s.normal.toArray(a,n),a[n+3]=s.constant}h.value=a;h.needsUpdate=!0}i.numPlanes=o;return a}var i=this,n=null,r=0,o=!1,a=!1,s=new $,c=new K,h={value:null,needsUpdate:!1};this.uniform=h;this.numIntersection=this.numPlanes=0;this.init=function(e,i,a){var s=0!==e.length||i||0!==r||o;o=i;n=t(e,a,0);r=e.length;return s};this.beginShadows=function(){a=!0;t(null)};this.endShadows=function(){a=!1;e()};this.setState=function(i,s,c,l,u,p){if(!o||null===i||0===i.length||a&&!c)a?t(null):e();else{c=a?0:r;var d=4*c,f=u.clippingState||null;h.value=f;f=t(i,l,d,p);for(i=0;i!==d;++i)f[i]=n[i];u.clippingState=f;this.numIntersection=s?this.numPlanes:0;this.numPlanes+=c}}}function nt(e){function t(){De.init();De.scissor(Z.copy(se).multiplyScalar(ae));De.viewport(K.copy(le).multiplyScalar(ae));De.buffers.color.setClear(ie.r,ie.g,ie.b,ne,A)}function i(){q=F=null;j="";k=-1;De.reset()}function n(e){e.preventDefault();i();t();Oe.clear()}function o(e){e=e.target;e.removeEventListener("dispose",o);a(e);Oe["delete"](e)}function a(e){var t=Oe.get(e).program;e.program=void 0;void 0!==t&&ze.releaseProgram(t)}function s(e,t){return Math.abs(t[0])-Math.abs(e[0])}function l(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.material.program&&t.material.program&&e.material.program!==t.material.program?e.material.program.id-t.material.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function u(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function p(e,t,i,n,r){var o;i.transparent?(n=I,o=++U):(n=P,o=++C);o=n[o];void 0!==o?(o.id=e.id,o.object=e,o.geometry=t,o.material=i,o.z=ve.z,o.group=r):(o={id:e.id,object:e,geometry:t,material:i,z:ve.z,group:r},n.push(o))}function d(e){if(!ue.intersectsSphere(e))return!1;var t=pe.numPlanes;if(0===t)return!0;var i=B.clippingPlanes,n=e.center;e=-e.radius;var r=0;do if(i[r].distanceToPoint(n)<e)return!1;while(++r!==t);return!0}function f(e,t){if(!1!==e.visible){if(0!==(e.layers.mask&t.layers.mask))if(e.isLight)R.push(e);else if(e.isSprite){var i;(i=!1===e.frustumCulled)||(me.center.set(0,0,0),me.radius=.7071067811865476,me.applyMatrix4(e.matrixWorld),i=!0===d(me));i&&D.push(e)}else if(e.isLensFlare)O.push(e);else if(e.isImmediateRenderObject)!0===B.sortObjects&&(ve.setFromMatrixPosition(e.matrixWorld),ve.applyMatrix4(ge)),p(e,null,e.material,ve.z,null);else if(e.isMesh||e.isLine||e.isPoints)if(e.isSkinnedMesh&&e.skeleton.update(),(i=!1===e.frustumCulled)||(i=e.geometry,null===i.boundingSphere&&i.computeBoundingSphere(),me.copy(i.boundingSphere).applyMatrix4(e.matrixWorld),i=!0===d(me)),i){var n=e.material;if(!0===n.visible)if(!0===B.sortObjects&&(ve.setFromMatrixPosition(e.matrixWorld),ve.applyMatrix4(ge)),i=Fe.update(e),n.isMultiMaterial)for(var r=i.groups,o=n.materials,n=0,a=r.length;n<a;n++){var s=r[n],c=o[s.materialIndex];!0===c.visible&&p(e,i,c,ve.z,s)}else p(e,i,n,ve.z,null)}i=e.children;n=0;for(a=i.length;n<a;n++)f(i[n],t)}}function m(e,t,i,n){for(var r=0,o=e.length;r<o;r++){var a=e[r],s=a.object,c=a.geometry,h=void 0===n?a.material:n,a=a.group;s.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,s.matrixWorld);s.normalMatrix.getNormalMatrix(s.modelViewMatrix);s.onBeforeRender(B,t,i,c,h,a);if(s.isImmediateRenderObject){g(h);var l=v(i,t.fog,h,s);j="";s.render(function(e){B.renderBufferImmediate(e,l,h)})}else B.renderBufferDirect(i,t.fog,c,h,s,a);s.onAfterRender(B,t,i,c,h,a)}}function g(e){2===e.side?De.disable(we.CULL_FACE):De.enable(we.CULL_FACE);De.setFlipSided(1===e.side);!0===e.transparent?De.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):De.setBlending(0);De.setDepthFunc(e.depthFunc);De.setDepthTest(e.depthTest);De.setDepthWrite(e.depthWrite);De.setColorWrite(e.colorWrite);De.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function v(e,t,i,n){$=0;var r=Oe.get(i);de&&(fe||e!==q)&&pe.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,e,r,e===q&&i.id===k);!1===i.needsUpdate&&(void 0===r.program?i.needsUpdate=!0:i.fog&&r.fog!==t?i.needsUpdate=!0:i.lights&&r.lightsHash!==_e.hash?i.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===pe.numPlanes&&r.numIntersection===pe.numIntersection||(i.needsUpdate=!0));if(i.needsUpdate){e:{var s=Oe.get(i),c=ze.getParameters(i,_e,t,pe.numPlanes,pe.numIntersection,n),h=ze.getProgramCode(i,c),l=s.program,u=!0;if(void 0===l)i.addEventListener("dispose",o);else if(l.code!==h)a(i);else if(void 0!==c.shaderID)break e;else u=!1;u&&(c.shaderID?(l=_r[c.shaderID],s.__webglShader={name:i.type,uniforms:gr.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}):s.__webglShader={name:i.type,uniforms:i.uniforms,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader},i.__webglShader=s.__webglShader,l=ze.acquireProgram(i,c,h),s.program=l,i.program=l);c=l.getAttributes();if(i.morphTargets)for(h=i.numSupportedMorphTargets=0;h<B.maxMorphTargets;h++)0<=c["morphTarget"+h]&&i.numSupportedMorphTargets++;if(i.morphNormals)for(h=i.numSupportedMorphNormals=0;h<B.maxMorphNormals;h++)0<=c["morphNormal"+h]&&i.numSupportedMorphNormals++;c=s.__webglShader.uniforms;if(!i.isShaderMaterial&&!i.isRawShaderMaterial||!0===i.clipping)s.numClippingPlanes=pe.numPlanes,s.numIntersection=pe.numIntersection,c.clippingPlanes=pe.uniform;s.fog=t;s.lightsHash=_e.hash;i.lights&&(c.ambientLightColor.value=_e.ambient,c.directionalLights.value=_e.directional,c.spotLights.value=_e.spot,c.rectAreaLights.value=_e.rectArea,c.pointLights.value=_e.point,c.hemisphereLights.value=_e.hemi,c.directionalShadowMap.value=_e.directionalShadowMap,c.directionalShadowMatrix.value=_e.directionalShadowMatrix,c.spotShadowMap.value=_e.spotShadowMap,c.spotShadowMatrix.value=_e.spotShadowMatrix,c.pointShadowMap.value=_e.pointShadowMap,c.pointShadowMatrix.value=_e.pointShadowMatrix);h=s.program.getUniforms();c=H.seqWithValue(h.seq,c);s.uniformsList=c}i.needsUpdate=!1}var p=!1,u=l=!1,s=r.program,c=s.getUniforms(),h=r.__webglShader.uniforms;s.id!==F&&(we.useProgram(s.program),F=s.id,u=l=p=!0);i.id!==k&&(k=i.id,l=!0);if(p||e!==q){c.set(we,e,"projectionMatrix");Re.logarithmicDepthBuffer&&c.setValue(we,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2));e!==q&&(q=e,u=l=!0);if(i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap)p=c.map.cameraPosition,void 0!==p&&p.setValue(we,ve.setFromMatrixPosition(e.matrixWorld));(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning)&&c.setValue(we,"viewMatrix",e.matrixWorldInverse);c.set(we,B,"toneMappingExposure");c.set(we,B,"toneMappingWhitePoint")}i.skinning&&(c.setOptional(we,n,"bindMatrix"),c.setOptional(we,n,"bindMatrixInverse"),e=n.skeleton)&&(Re.floatVertexTextures&&e.useVertexTexture?(c.set(we,e,"boneTexture"),c.set(we,e,"boneTextureWidth"),c.set(we,e,"boneTextureHeight")):c.setOptional(we,e,"boneMatrices"));if(l){i.lights&&(e=u,h.ambientLightColor.needsUpdate=e,h.directionalLights.needsUpdate=e,h.pointLights.needsUpdate=e,h.spotLights.needsUpdate=e,h.rectAreaLights.needsUpdate=e,h.hemisphereLights.needsUpdate=e);t&&i.fog&&(h.fogColor.value=t.color,t.isFog?(h.fogNear.value=t.near,h.fogFar.value=t.far):t.isFogExp2&&(h.fogDensity.value=t.density));if(i.isMeshBasicMaterial||i.isMeshLambertMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.isMeshNormalMaterial||i.isMeshDepthMaterial){h.opacity.value=i.opacity;h.diffuse.value=i.color;i.emissive&&h.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity);h.map.value=i.map;h.specularMap.value=i.specularMap;h.alphaMap.value=i.alphaMap;i.lightMap&&(h.lightMap.value=i.lightMap,h.lightMapIntensity.value=i.lightMapIntensity);i.aoMap&&(h.aoMap.value=i.aoMap,h.aoMapIntensity.value=i.aoMapIntensity);var d;i.map?d=i.map:i.specularMap?d=i.specularMap:i.displacementMap?d=i.displacementMap:i.normalMap?d=i.normalMap:i.bumpMap?d=i.bumpMap:i.roughnessMap?d=i.roughnessMap:i.metalnessMap?d=i.metalnessMap:i.alphaMap?d=i.alphaMap:i.emissiveMap&&(d=i.emissiveMap);void 0!==d&&(d.isWebGLRenderTarget&&(d=d.texture),t=d.offset,d=d.repeat,h.offsetRepeat.value.set(t.x,t.y,d.x,d.y));h.envMap.value=i.envMap;h.flipEnvMap.value=i.envMap&&i.envMap.isCubeTexture?-1:1;h.reflectivity.value=i.reflectivity;h.refractionRatio.value=i.refractionRatio}i.isLineBasicMaterial?(h.diffuse.value=i.color,h.opacity.value=i.opacity):i.isLineDashedMaterial?(h.diffuse.value=i.color,h.opacity.value=i.opacity,h.dashSize.value=i.dashSize,h.totalSize.value=i.dashSize+i.gapSize,h.scale.value=i.scale):i.isPointsMaterial?(h.diffuse.value=i.color,h.opacity.value=i.opacity,h.size.value=i.size*ae,h.scale.value=.5*oe,h.map.value=i.map,null!==i.map&&(d=i.map.offset,i=i.map.repeat,h.offsetRepeat.value.set(d.x,d.y,i.x,i.y))):i.isMeshLambertMaterial?i.emissiveMap&&(h.emissiveMap.value=i.emissiveMap):i.isMeshToonMaterial?(y(h,i),i.gradientMap&&(h.gradientMap.value=i.gradientMap)):i.isMeshPhongMaterial?y(h,i):i.isMeshPhysicalMaterial?(h.clearCoat.value=i.clearCoat,h.clearCoatRoughness.value=i.clearCoatRoughness,x(h,i)):i.isMeshStandardMaterial?x(h,i):i.isMeshDepthMaterial?i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias):i.isMeshNormalMaterial&&(i.bumpMap&&(h.bumpMap.value=i.bumpMap,h.bumpScale.value=i.bumpScale),i.normalMap&&(h.normalMap.value=i.normalMap,h.normalScale.value.copy(i.normalScale)),i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias));void 0!==h.ltcMat&&(h.ltcMat.value=THREE.UniformsLib.LTC_MAT_TEXTURE);void 0!==h.ltcMag&&(h.ltcMag.value=THREE.UniformsLib.LTC_MAG_TEXTURE);H.upload(we,r.uniformsList,h,B)}c.set(we,n,"modelViewMatrix");c.set(we,n,"normalMatrix");c.setValue(we,"modelMatrix",n.matrixWorld);return s}function y(e,t){e.specular.value=t.specular;e.shininess.value=Math.max(t.shininess,1e-4);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale);t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale));t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function x(e,t){e.roughness.value=t.roughness;e.metalness.value=t.metalness;t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap);t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale);t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale));t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function _(e){var t;if(1e3===e)return we.REPEAT;if(1001===e)return we.CLAMP_TO_EDGE;if(1002===e)return we.MIRRORED_REPEAT;if(1003===e)return we.NEAREST;if(1004===e)return we.NEAREST_MIPMAP_NEAREST;if(1005===e)return we.NEAREST_MIPMAP_LINEAR;if(1006===e)return we.LINEAR;if(1007===e)return we.LINEAR_MIPMAP_NEAREST;if(1008===e)return we.LINEAR_MIPMAP_LINEAR;if(1009===e)return we.UNSIGNED_BYTE;if(1017===e)return we.UNSIGNED_SHORT_4_4_4_4;if(1018===e)return we.UNSIGNED_SHORT_5_5_5_1;if(1019===e)return we.UNSIGNED_SHORT_5_6_5;if(1010===e)return we.BYTE;if(1011===e)return we.SHORT;if(1012===e)return we.UNSIGNED_SHORT;if(1013===e)return we.INT;if(1014===e)return we.UNSIGNED_INT;if(1015===e)return we.FLOAT;if(1016===e&&(t=Ae.get("OES_texture_half_float"),null!==t))return t.HALF_FLOAT_OES;if(1021===e)return we.ALPHA;if(1022===e)return we.RGB;if(1023===e)return we.RGBA;if(1024===e)return we.LUMINANCE;if(1025===e)return we.LUMINANCE_ALPHA;if(1026===e)return we.DEPTH_COMPONENT;if(1027===e)return we.DEPTH_STENCIL;if(100===e)return we.FUNC_ADD;if(101===e)return we.FUNC_SUBTRACT;if(102===e)return we.FUNC_REVERSE_SUBTRACT;if(200===e)return we.ZERO;if(201===e)return we.ONE;if(202===e)return we.SRC_COLOR;if(203===e)return we.ONE_MINUS_SRC_COLOR;if(204===e)return we.SRC_ALPHA;if(205===e)return we.ONE_MINUS_SRC_ALPHA;if(206===e)return we.DST_ALPHA;if(207===e)return we.ONE_MINUS_DST_ALPHA;if(208===e)return we.DST_COLOR;if(209===e)return we.ONE_MINUS_DST_COLOR;if(210===e)return we.SRC_ALPHA_SATURATE;if(2001===e||2002===e||2003===e||2004===e)if(t=Ae.get("WEBGL_compressed_texture_s3tc"),null!==t){if(2001===e)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(2002===e)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(2003===e)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(2004===e)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(2100===e||2101===e||2102===e||2103===e)if(t=Ae.get("WEBGL_compressed_texture_pvrtc"),null!==t){if(2100===e)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(2101===e)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(2102===e)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(2103===e)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(2151===e&&(t=Ae.get("WEBGL_compressed_texture_etc1"),null!==t))return t.COMPRESSED_RGB_ETC1_WEBGL;if(103===e||104===e)if(t=Ae.get("EXT_blend_minmax"),null!==t){if(103===e)return t.MIN_EXT;if(104===e)return t.MAX_EXT}return 1020===e&&(t=Ae.get("WEBGL_depth_texture"),null!==t)?t.UNSIGNED_INT_24_8_WEBGL:0}console.log("THREE.WebGLRenderer","84");e=e||{};var b=void 0!==e.canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),w=void 0!==e.context?e.context:null,M=void 0!==e.alpha?e.alpha:!1,E=void 0!==e.depth?e.depth:!0,T=void 0!==e.stencil?e.stencil:!0,S=void 0!==e.antialias?e.antialias:!1,A=void 0!==e.premultipliedAlpha?e.premultipliedAlpha:!0,L=void 0!==e.preserveDrawingBuffer?e.preserveDrawingBuffer:!1,R=[],P=[],C=-1,I=[],U=-1,N=new Float32Array(8),D=[],O=[];this.domElement=b;this.context=null;this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.clippingPlanes=[];this.localClippingEnabled=!1;this.gammaFactor=2;this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1;this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var B=this,F=null,z=null,G=null,k=-1,j="",q=null,Z=new r,J=null,K=new r,$=0,ie=new V(0),ne=0,re=b.width,oe=b.height,ae=1,se=new r(0,0,re,oe),ce=!1,le=new r(0,0,re,oe),ue=new ee,pe=new it,de=!1,fe=!1,me=new Q,ge=new h,ve=new c,ye=new h,xe=new h,_e={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},be={calls:0,vertices:0,faces:0,points:0};this.info={render:be,memory:{geometries:0,textures:0},programs:null};var we;try{M={alpha:M,depth:E,stencil:T,antialias:S,premultipliedAlpha:A,preserveDrawingBuffer:L};we=w||b.getContext("webgl",M)||b.getContext("experimental-webgl",M);if(null===we){if(null!==b.getContext("webgl"))throw"Error creating WebGL context with your selected attributes.";throw"Error creating WebGL context."}void 0===we.getShaderPrecisionFormat&&(we.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});b.addEventListener("webglcontextlost",n,!1)}catch(Te){console.error("THREE.WebGLRenderer: "+Te)}var Ae=new tt(we);Ae.get("WEBGL_depth_texture");Ae.get("OES_texture_float");Ae.get("OES_texture_float_linear");Ae.get("OES_texture_half_float");Ae.get("OES_texture_half_float_linear");Ae.get("OES_standard_derivatives");Ae.get("ANGLE_instanced_arrays");Ae.get("OES_element_index_uint")&&(Me.MaxIndex=4294967296);var Re=new et(we,Ae,e),De=new $e(we,Ae,_),Oe=new Ke,Be=new Qe(we,Ae,De,Oe,Re,_,this.info),Fe=new Je(we,Oe,this.info),ze=new Ye(this,Re),Ge=new Ne;this.info.programs=ze.programs;var He=new Ue(we,Ae,be),Ve=new Ie(we,Ae,be),ke,je,We,Xe;t();this.context=we;this.capabilities=Re;this.extensions=Ae;this.properties=Oe;this.state=De;var qe=new te(this,_e,Fe,Re);this.shadowMap=qe;var Ze=new X(this,D),nt=new W(this,O);this.getContext=function(){return we};this.getContextAttributes=function(){return we.getContextAttributes()};this.forceContextLoss=function(){Ae.get("WEBGL_lose_context").loseContext()};this.getMaxAnisotropy=function(){return Re.getMaxAnisotropy()};this.getPrecision=function(){return Re.precision};this.getPixelRatio=function(){return ae};this.setPixelRatio=function(e){void 0!==e&&(ae=e,this.setSize(le.z,le.w,!1))};this.getSize=function(){return{width:re,height:oe}};this.setSize=function(e,t,i){re=e;oe=t;b.width=e*ae;b.height=t*ae;!1!==i&&(b.style.width=e+"px",b.style.height=t+"px");this.setViewport(0,0,e,t)};this.setViewport=function(e,t,i,n){De.viewport(le.set(e,t,i,n))};this.setScissor=function(e,t,i,n){De.scissor(se.set(e,t,i,n))};this.setScissorTest=function(e){De.setScissorTest(ce=e)};this.getClearColor=function(){return ie};this.setClearColor=function(e,t){ie.set(e);ne=void 0!==t?t:1;De.buffers.color.setClear(ie.r,ie.g,ie.b,ne,A)};this.getClearAlpha=function(){return ne};this.setClearAlpha=function(e){ne=e;De.buffers.color.setClear(ie.r,ie.g,ie.b,ne,A)};this.clear=function(e,t,i){var n=0;if(void 0===e||e)n|=we.COLOR_BUFFER_BIT;if(void 0===t||t)n|=we.DEPTH_BUFFER_BIT;if(void 0===i||i)n|=we.STENCIL_BUFFER_BIT;we.clear(n)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,!0,!1)};this.clearStencil=function(){this.clear(!1,!1,!0)};this.clearTarget=function(e,t,i,n){this.setRenderTarget(e);this.clear(t,i,n)};this.resetGLState=i;this.dispose=function(){I=[];U=-1;P=[];C=-1;b.removeEventListener("webglcontextlost",n,!1)};this.renderBufferImmediate=function(e,t,i){De.initAttributes();var n=Oe.get(e);e.hasPositions&&!n.position&&(n.position=we.createBuffer());e.hasNormals&&!n.normal&&(n.normal=we.createBuffer());e.hasUvs&&!n.uv&&(n.uv=we.createBuffer());e.hasColors&&!n.color&&(n.color=we.createBuffer());t=t.getAttributes();e.hasPositions&&(we.bindBuffer(we.ARRAY_BUFFER,n.position),we.bufferData(we.ARRAY_BUFFER,e.positionArray,we.DYNAMIC_DRAW),De.enableAttribute(t.position),we.vertexAttribPointer(t.position,3,we.FLOAT,!1,0,0));if(e.hasNormals){we.bindBuffer(we.ARRAY_BUFFER,n.normal);if(!i.isMeshPhongMaterial&&!i.isMeshStandardMaterial&&!i.isMeshNormalMaterial&&1===i.shading)for(var r=0,o=3*e.count;r<o;r+=9){var a=e.normalArray,s=(a[r+0]+a[r+3]+a[r+6])/3,c=(a[r+1]+a[r+4]+a[r+7])/3,h=(a[r+2]+a[r+5]+a[r+8])/3;a[r+0]=s;a[r+1]=c;a[r+2]=h;a[r+3]=s;a[r+4]=c;a[r+5]=h;a[r+6]=s;a[r+7]=c;a[r+8]=h}we.bufferData(we.ARRAY_BUFFER,e.normalArray,we.DYNAMIC_DRAW);De.enableAttribute(t.normal);we.vertexAttribPointer(t.normal,3,we.FLOAT,!1,0,0)}e.hasUvs&&i.map&&(we.bindBuffer(we.ARRAY_BUFFER,n.uv),we.bufferData(we.ARRAY_BUFFER,e.uvArray,we.DYNAMIC_DRAW),De.enableAttribute(t.uv),we.vertexAttribPointer(t.uv,2,we.FLOAT,!1,0,0));e.hasColors&&0!==i.vertexColors&&(we.bindBuffer(we.ARRAY_BUFFER,n.color),we.bufferData(we.ARRAY_BUFFER,e.colorArray,we.DYNAMIC_DRAW),De.enableAttribute(t.color),we.vertexAttribPointer(t.color,3,we.FLOAT,!1,0,0));De.disableUnusedAttributes();we.drawArrays(we.TRIANGLES,0,e.count);e.count=0};this.renderBufferDirect=function(e,t,i,n,r,o){g(n);var a=v(e,t,n,r),c=!1;e=i.id+"_"+a.id+"_"+n.wireframe;e!==j&&(j=e,c=!0);t=r.morphTargetInfluences;if(void 0!==t){var h=[];e=0;for(var l=t.length;e<l;e++)c=t[e],h.push([c,e]);h.sort(s);8<h.length&&(h.length=8);var u=i.morphAttributes;e=0;for(l=h.length;e<l;e++)c=h[e],N[e]=c[0],0!==c[0]?(t=c[1],!0===n.morphTargets&&u.position&&i.addAttribute("morphTarget"+e,u.position[t]),!0===n.morphNormals&&u.normal&&i.addAttribute("morphNormal"+e,u.normal[t])):(!0===n.morphTargets&&i.removeAttribute("morphTarget"+e),!0===n.morphNormals&&i.removeAttribute("morphNormal"+e));e=h.length;for(t=N.length;e<t;e++)N[e]=0;a.getUniforms().setValue(we,"morphTargetInfluences",N);c=!0}t=i.index;l=i.attributes.position;h=1;!0===n.wireframe&&(t=Fe.getWireframeAttribute(i),h=2);null!==t?(e=Ve,e.setIndex(t)):e=He;if(c){e:{var c=void 0,p;if(i&&i.isInstancedBufferGeometry&&(p=Ae.get("ANGLE_instanced_arrays"),null===p)){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");break e}void 0===c&&(c=0);De.initAttributes();var u=i.attributes,a=a.getAttributes(),d=n.defaultAttributeValues,f;for(f in a){var m=a[f];if(0<=m){var y=u[f];if(void 0!==y){var x=y.normalized,_=y.itemSize,b=Fe.getAttributeProperties(y),w=b.__webglBuffer,M=b.type,b=b.bytesPerElement;if(y.isInterleavedBufferAttribute){var E=y.data,T=E.stride,y=y.offset;E&&E.isInstancedInterleavedBuffer?(De.enableAttributeAndDivisor(m,E.meshPerAttribute,p),void 0===i.maxInstancedCount&&(i.maxInstancedCount=E.meshPerAttribute*E.count)):De.enableAttribute(m);we.bindBuffer(we.ARRAY_BUFFER,w);we.vertexAttribPointer(m,_,M,x,T*b,(c*T+y)*b)}else y.isInstancedBufferAttribute?(De.enableAttributeAndDivisor(m,y.meshPerAttribute,p),void 0===i.maxInstancedCount&&(i.maxInstancedCount=y.meshPerAttribute*y.count)):De.enableAttribute(m),we.bindBuffer(we.ARRAY_BUFFER,w),we.vertexAttribPointer(m,_,M,x,0,c*_*b)}else if(void 0!==d&&(x=d[f],void 0!==x))switch(x.length){case 2:we.vertexAttrib2fv(m,x);break;case 3:we.vertexAttrib3fv(m,x);break;case 4:we.vertexAttrib4fv(m,x);break;default:we.vertexAttrib1fv(m,x)}}}De.disableUnusedAttributes()}null!==t&&we.bindBuffer(we.ELEMENT_ARRAY_BUFFER,Fe.getAttributeBuffer(t))}p=0;null!==t?p=t.count:void 0!==l&&(p=l.count);t=i.drawRange.start*h;l=null!==o?o.start*h:0;f=Math.max(t,l);o=Math.max(0,Math.min(p,t+i.drawRange.count*h,l+(null!==o?o.count*h:Infinity))-1-f+1);if(0!==o){if(r.isMesh)if(!0===n.wireframe)De.setLineWidth(n.wireframeLinewidth*(null===z?ae:1)),e.setMode(we.LINES);else switch(r.drawMode){case 0:e.setMode(we.TRIANGLES);break;case 1:e.setMode(we.TRIANGLE_STRIP);break;case 2:e.setMode(we.TRIANGLE_FAN)}else r.isLine?(n=n.linewidth,void 0===n&&(n=1),De.setLineWidth(n*(null===z?ae:1)),r.isLineSegments?e.setMode(we.LINES):e.setMode(we.LINE_STRIP)):r.isPoints&&e.setMode(we.POINTS);i&&i.isInstancedBufferGeometry?0<i.maxInstancedCount&&e.renderInstances(i,f,o):e.render(f,o)}};this.render=function(e,t,i,n){if(void 0!==t&&!0!==t.isCamera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{j="";k=-1;q=null;!0===e.autoUpdate&&e.updateMatrixWorld();null===t.parent&&t.updateMatrixWorld();t.matrixWorldInverse.getInverse(t.matrixWorld);ge.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse);ue.setFromMatrix(ge);R.length=0;U=C=-1;D.length=0;O.length=0;fe=this.localClippingEnabled;de=pe.init(this.clippingPlanes,fe,t);f(e,t);P.length=C+1;I.length=U+1;!0===B.sortObjects&&(P.sort(l),I.sort(u));de&&pe.beginShadows();for(var r=R,o=0,a=0,s=r.length;a<s;a++){var c=r[a];c.castShadow&&(_e.shadows[o++]=c)}_e.shadows.length=o;qe.render(e,t);for(var r=R,p=c=0,d=0,g,v,y,x,_=t.matrixWorldInverse,b=0,w=0,M=0,E=0,T=0,o=0,a=r.length;o<a;o++)if(s=r[o],g=s.color,v=s.intensity,y=s.distance,x=s.shadow&&s.shadow.map?s.shadow.map.texture:null,s.isAmbientLight)c+=g.r*v,p+=g.g*v,d+=g.b*v;else if(s.isDirectionalLight){var S=Ge.get(s);S.color.copy(s.color).multiplyScalar(s.intensity);S.direction.setFromMatrixPosition(s.matrixWorld);ve.setFromMatrixPosition(s.target.matrixWorld);S.direction.sub(ve);S.direction.transformDirection(_);if(S.shadow=s.castShadow)S.shadowBias=s.shadow.bias,S.shadowRadius=s.shadow.radius,S.shadowMapSize=s.shadow.mapSize;_e.directionalShadowMap[b]=x;_e.directionalShadowMatrix[b]=s.shadow.matrix;_e.directional[b++]=S}else if(s.isSpotLight){S=Ge.get(s);S.position.setFromMatrixPosition(s.matrixWorld);S.position.applyMatrix4(_);S.color.copy(g).multiplyScalar(v);S.distance=y;S.direction.setFromMatrixPosition(s.matrixWorld);ve.setFromMatrixPosition(s.target.matrixWorld);S.direction.sub(ve);S.direction.transformDirection(_);S.coneCos=Math.cos(s.angle);S.penumbraCos=Math.cos(s.angle*(1-s.penumbra));S.decay=0===s.distance?0:s.decay;if(S.shadow=s.castShadow)S.shadowBias=s.shadow.bias,S.shadowRadius=s.shadow.radius,S.shadowMapSize=s.shadow.mapSize;_e.spotShadowMap[M]=x;_e.spotShadowMatrix[M]=s.shadow.matrix;_e.spot[M++]=S}else if(s.isRectAreaLight)S=Ge.get(s),S.color.copy(g).multiplyScalar(v/(s.width*s.height)),S.position.setFromMatrixPosition(s.matrixWorld),S.position.applyMatrix4(_),xe.identity(),ye.copy(s.matrixWorld),ye.premultiply(_),xe.extractRotation(ye),S.halfWidth.set(.5*s.width,0,0),S.halfHeight.set(0,.5*s.height,0),S.halfWidth.applyMatrix4(xe),S.halfHeight.applyMatrix4(xe),_e.rectArea[E++]=S;else if(s.isPointLight){S=Ge.get(s);S.position.setFromMatrixPosition(s.matrixWorld);S.position.applyMatrix4(_);S.color.copy(s.color).multiplyScalar(s.intensity);S.distance=s.distance;S.decay=0===s.distance?0:s.decay;if(S.shadow=s.castShadow)S.shadowBias=s.shadow.bias,S.shadowRadius=s.shadow.radius,S.shadowMapSize=s.shadow.mapSize;_e.pointShadowMap[w]=x;void 0===_e.pointShadowMatrix[w]&&(_e.pointShadowMatrix[w]=new h);ve.setFromMatrixPosition(s.matrixWorld).negate();_e.pointShadowMatrix[w].identity().setPosition(ve);_e.point[w++]=S}else s.isHemisphereLight&&(S=Ge.get(s),S.direction.setFromMatrixPosition(s.matrixWorld),S.direction.transformDirection(_),S.direction.normalize(),S.skyColor.copy(s.color).multiplyScalar(v),S.groundColor.copy(s.groundColor).multiplyScalar(v),_e.hemi[T++]=S);_e.ambient[0]=c;_e.ambient[1]=p;_e.ambient[2]=d;_e.directional.length=b;_e.spot.length=M;_e.rectArea.length=E;_e.point.length=w;_e.hemi.length=T;_e.hash=b+","+w+","+M+","+E+","+T+","+_e.shadows.length;de&&pe.endShadows();be.calls=0;be.vertices=0;be.faces=0;be.points=0;void 0===i&&(i=null);this.setRenderTarget(i);r=e.background;null===r?De.buffers.color.setClear(ie.r,ie.g,ie.b,ne,A):r&&r.isColor&&(De.buffers.color.setClear(r.r,r.g,r.b,1,A),n=!0);(this.autoClear||n)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);r&&r.isCubeTexture?(void 0===We&&(We=new Pe,Xe=new Ee(new Se(5,5,5),new Y({uniforms:_r.cube.uniforms,vertexShader:_r.cube.vertexShader,fragmentShader:_r.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))),We.projectionMatrix.copy(t.projectionMatrix),We.matrixWorld.extractRotation(t.matrixWorld),We.matrixWorldInverse.getInverse(We.matrixWorld),Xe.material.uniforms.tCube.value=r,Xe.modelViewMatrix.multiplyMatrices(We.matrixWorldInverse,Xe.matrixWorld),Fe.update(Xe),B.renderBufferDirect(We,null,Xe.geometry,Xe.material,Xe,null)):r&&r.isTexture&&(void 0===ke&&(ke=new Ce(-1,1,1,-1,0,1),je=new Ee(new Le(2,2),new he({depthTest:!1,depthWrite:!1,fog:!1}))),je.material.map=r,Fe.update(je),B.renderBufferDirect(ke,null,je.geometry,je.material,je,null));e.overrideMaterial?(n=e.overrideMaterial,m(P,e,t,n),m(I,e,t,n)):(De.setBlending(0),m(P,e,t),m(I,e,t));Ze.render(e,t);nt.render(e,t,K);i&&Be.updateRenderTargetMipmap(i);De.setDepthTest(!0);De.setDepthWrite(!0);De.setColorWrite(!0)}};this.setFaceCulling=function(e,t){De.setCullFace(e);De.setFlipSided(0===t)};this.allocTextureUnit=function(){var e=$;e>=Re.maxTextures&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+Re.maxTextures);$+=1;return e};this.setTexture2D=function(){var e=!1;return function(t,i){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture);Be.setTexture2D(t,i)}}();this.setTexture=function(){var e=!1;return function(t,i){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0);Be.setTexture2D(t,i)}}();this.setTextureCube=function(){var e=!1;return function(t,i){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture);t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?Be.setTextureCube(t,i):Be.setTextureCubeDynamic(t,i)}}();this.getCurrentRenderTarget=function(){return z};this.setRenderTarget=function(e){(z=e)&&void 0===Oe.get(e).__webglFramebuffer&&Be.setupRenderTarget(e);var t=e&&e.isWebGLRenderTargetCube,i;e?(i=Oe.get(e),i=t?i.__webglFramebuffer[e.activeCubeFace]:i.__webglFramebuffer,Z.copy(e.scissor),J=e.scissorTest,K.copy(e.viewport)):(i=null,Z.copy(se).multiplyScalar(ae),J=ce,K.copy(le).multiplyScalar(ae));G!==i&&(we.bindFramebuffer(we.FRAMEBUFFER,i),G=i);De.scissor(Z);De.setScissorTest(J);De.viewport(K);t&&(t=Oe.get(e.texture),we.framebufferTexture2D(we.FRAMEBUFFER,we.COLOR_ATTACHMENT0,we.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,t.__webglTexture,e.activeMipMapLevel))};this.readRenderTargetPixels=function(e,t,i,n,r,o){if(!1===(e&&e.isWebGLRenderTarget))console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");else{
var a=Oe.get(e).__webglFramebuffer;if(a){var s=!1;a!==G&&(we.bindFramebuffer(we.FRAMEBUFFER,a),s=!0);try{var c=e.texture,h=c.format,l=c.type;1023!==h&&_(h)!==we.getParameter(we.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===l||_(l)===we.getParameter(we.IMPLEMENTATION_COLOR_READ_TYPE)||1015===l&&(Ae.get("OES_texture_float")||Ae.get("WEBGL_color_buffer_float"))||1016===l&&Ae.get("EXT_color_buffer_half_float")?we.checkFramebufferStatus(we.FRAMEBUFFER)===we.FRAMEBUFFER_COMPLETE?0<=t&&t<=e.width-n&&0<=i&&i<=e.height-r&&we.readPixels(t,i,n,r,_(h),_(l),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{s&&we.bindFramebuffer(we.FRAMEBUFFER,G)}}}}}function rt(e,t){this.name="";this.color=new V(e);this.density=void 0!==t?t:25e-5}function ot(e,t,i){this.name="";this.color=new V(e);this.near=void 0!==t?t:1;this.far=void 0!==i?i:1e3}function at(){oe.call(this);this.type="Scene";this.overrideMaterial=this.fog=this.background=null;this.autoUpdate=!0}function st(e,t,i,n,r){oe.call(this);this.lensFlares=[];this.positionScreen=new c;this.customUpdateCallback=void 0;void 0!==e&&this.add(e,t,i,n,r)}function ct(e){q.call(this);this.type="SpriteMaterial";this.color=new V(16777215);this.map=null;this.rotation=0;this.lights=this.fog=!1;this.setValues(e)}function ht(e){oe.call(this);this.type="Sprite";this.material=void 0!==e?e:new ct}function lt(){oe.call(this);this.type="LOD";Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function ut(e,t,i){this.useVertexTexture=void 0!==i?i:!0;this.identityMatrix=new h;e=e||[];this.bones=e.slice(0);this.useVertexTexture?(e=Math.sqrt(4*this.bones.length),e=hr.nextPowerOfTwo(Math.ceil(e)),this.boneTextureHeight=this.boneTextureWidth=e=Math.max(e,4),this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new k(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,1023,1015)):this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else for(console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[],t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new h)}function pt(){oe.call(this);this.type="Bone"}function dt(e,t,i){Ee.call(this,e,t);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new h;this.bindMatrixInverse=new h;e=[];if(this.geometry&&void 0!==this.geometry.bones){for(var n,r=0,o=this.geometry.bones.length;r<o;++r)n=this.geometry.bones[r],t=new pt,e.push(t),t.name=n.name,t.position.fromArray(n.pos),t.quaternion.fromArray(n.rotq),void 0!==n.scl&&t.scale.fromArray(n.scl);r=0;for(o=this.geometry.bones.length;r<o;++r)n=this.geometry.bones[r],-1!==n.parent&&null!==n.parent&&void 0!==e[n.parent]?e[n.parent].add(e[r]):this.add(e[r])}this.normalizeSkinWeights();this.updateMatrixWorld(!0);this.bind(new ut(e,void 0,i),this.matrixWorld)}function ft(e){q.call(this);this.type="LineBasicMaterial";this.color=new V(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.lights=!1;this.setValues(e)}function mt(e,t,i){if(1===i)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new gt(e,t);oe.call(this);this.type="Line";this.geometry=void 0!==e?e:new Me;this.material=void 0!==t?t:new ft({color:16777215*Math.random()})}function gt(e,t){mt.call(this,e,t);this.type="LineSegments"}function vt(e){q.call(this);this.type="PointsMaterial";this.color=new V(16777215);this.map=null;this.size=1;this.sizeAttenuation=!0;this.lights=!1;this.setValues(e)}function yt(e,t){oe.call(this);this.type="Points";this.geometry=void 0!==e?e:new Me;this.material=void 0!==t?t:new vt({color:16777215*Math.random()})}function xt(){oe.call(this);this.type="Group"}function _t(e,t,i,r,o,a,s,c,h){function l(){requestAnimationFrame(l);e.readyState>=e.HAVE_CURRENT_DATA&&(u.needsUpdate=!0)}n.call(this,e,t,i,r,o,a,s,c,h);this.generateMipmaps=!1;var u=this;l()}function bt(e,t,i,r,o,a,s,c,h,l,u,p){n.call(this,null,a,s,c,h,l,r,o,u,p);this.image={width:t,height:i};this.mipmaps=e;this.generateMipmaps=this.flipY=!1}function wt(e,t,i,r,o,a,s,c,h){n.call(this,e,t,i,r,o,a,s,c,h);this.needsUpdate=!0}function Mt(e,t,i,r,o,a,s,c,h,l){l=void 0!==l?l:1026;if(1026!==l&&1027!==l)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&1026===l&&(i=1012);void 0===i&&1027===l&&(i=1020);n.call(this,null,r,o,a,s,c,l,i,h);this.image={width:e,height:t};this.magFilter=void 0!==s?s:1003;this.minFilter=void 0!==c?c:1003;this.generateMipmaps=this.flipY=!1}function Et(e){function t(e,t){return e-t}Me.call(this);this.type="WireframeGeometry";var i=[],n,r,o,a,s=[0,0],h={},l,u=["a","b","c"];if(e&&e.isGeometry){var p=e.faces;n=0;for(o=p.length;n<o;n++){var d=p[n];for(r=0;3>r;r++)s[0]=d[u[r]],s[1]=d[u[(r+1)%3]],s.sort(t),l=s.toString(),void 0===h[l]&&(h[l]={index1:s[0],index2:s[1]})}for(l in h)n=h[l],u=e.vertices[n.index1],i.push(u.x,u.y,u.z),u=e.vertices[n.index2],i.push(u.x,u.y,u.z)}else if(e&&e.isBufferGeometry){var f,u=new c;if(null!==e.index){p=e.attributes.position;d=e.index;f=e.groups;0===f.length&&e.addGroup(0,d.count);e=0;for(a=f.length;e<a;++e)for(n=f[e],r=n.start,o=n.count,n=r,o=r+o;n<o;n+=3)for(r=0;3>r;r++)s[0]=d.getX(n+r),s[1]=d.getX(n+(r+1)%3),s.sort(t),l=s.toString(),void 0===h[l]&&(h[l]={index1:s[0],index2:s[1]});for(l in h)n=h[l],u.fromBufferAttribute(p,n.index1),i.push(u.x,u.y,u.z),u.fromBufferAttribute(p,n.index2),i.push(u.x,u.y,u.z)}else for(p=e.attributes.position,n=0,o=p.count/3;n<o;n++)for(r=0;3>r;r++)h=3*n+r,u.fromBufferAttribute(p,h),i.push(u.x,u.y,u.z),h=3*n+(r+1)%3,u.fromBufferAttribute(p,h),i.push(u.x,u.y,u.z)}this.addAttribute("position",new ye(i,3))}function Tt(e,t,i){we.call(this);this.type="ParametricGeometry";this.parameters={func:e,slices:t,stacks:i};this.fromBufferGeometry(new St(e,t,i));this.mergeVertices()}function St(e,t,i){Me.call(this);this.type="ParametricBufferGeometry";this.parameters={func:e,slices:t,stacks:i};var n=[],r=[],o=[],a,s,c=t+1;for(a=0;a<=i;a++){var h=a/i;for(s=0;s<=t;s++){var l=s/t,u=e(l,h);r.push(u.x,u.y,u.z);o.push(l,h)}}for(a=0;a<i;a++)for(s=0;s<t;s++)e=a*c+s+1,h=(a+1)*c+s+1,l=(a+1)*c+s,n.push(a*c+s,e,l),n.push(e,h,l);this.setIndex(n);this.addAttribute("position",new ye(r,3));this.addAttribute("uv",new ye(o,2));this.computeVertexNormals()}function At(e,t,i,n){we.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:e,indices:t,radius:i,detail:n};this.fromBufferGeometry(new Lt(e,t,i,n));this.mergeVertices()}function Lt(e,t,n,r){function o(e){h.push(e.x,e.y,e.z)}function a(t,i){var n=3*t;i.x=e[n+0];i.y=e[n+1];i.z=e[n+2]}function s(e,t,i,n){0>n&&1===e.x&&(l[t]=e.x-1);0===i.x&&0===i.z&&(l[t]=n/2/Math.PI+.5)}Me.call(this);this.type="PolyhedronBufferGeometry";this.parameters={vertices:e,indices:t,radius:n,detail:r};n=n||1;var h=[],l=[];(function(e){for(var i=new c,n=new c,r=new c,s=0;s<t.length;s+=3){a(t[s+0],i);a(t[s+1],n);a(t[s+2],r);var h=i,l=n,u=r,p=Math.pow(2,e),d=[],f,m;for(f=0;f<=p;f++){d[f]=[];var g=h.clone().lerp(u,f/p),v=l.clone().lerp(u,f/p),y=p-f;for(m=0;m<=y;m++)d[f][m]=0===m&&f===p?g:g.clone().lerp(v,m/y)}for(f=0;f<p;f++)for(m=0;m<2*(p-f)-1;m++)h=Math.floor(m/2),0===m%2?(o(d[f][h+1]),o(d[f+1][h]),o(d[f][h])):(o(d[f][h+1]),o(d[f+1][h+1]),o(d[f+1][h]))}})(r||0);(function(e){for(var t=new c,i=0;i<h.length;i+=3)t.x=h[i+0],t.y=h[i+1],t.z=h[i+2],t.normalize().multiplyScalar(e),h[i+0]=t.x,h[i+1]=t.y,h[i+2]=t.z})(n);(function(){for(var e=new c,t=0;t<h.length;t+=3)e.x=h[t+0],e.y=h[t+1],e.z=h[t+2],l.push(Math.atan2(e.z,-e.x)/2/Math.PI+.5,1-(Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5));for(var e=new c,t=new c,n=new c,r=new c,o=new i,a=new i,u=new i,p=0,d=0;p<h.length;p+=9,d+=6){e.set(h[p+0],h[p+1],h[p+2]);t.set(h[p+3],h[p+4],h[p+5]);n.set(h[p+6],h[p+7],h[p+8]);o.set(l[d+0],l[d+1]);a.set(l[d+2],l[d+3]);u.set(l[d+4],l[d+5]);r.copy(e).add(t).add(n).divideScalar(3);var f=Math.atan2(r.z,-r.x);s(o,d+0,e,f);s(a,d+2,t,f);s(u,d+4,n,f)}for(e=0;e<l.length;e+=6)t=l[e+0],n=l[e+2],r=l[e+4],o=Math.min(t,n,r),.9<Math.max(t,n,r)&&.1>o&&(.2>t&&(l[e+0]+=1),.2>n&&(l[e+2]+=1),.2>r&&(l[e+4]+=1))})();this.addAttribute("position",new ye(h,3));this.addAttribute("normal",new ye(h.slice(),3));this.addAttribute("uv",new ye(l,2));this.normalizeNormals()}function Rt(e,t){we.call(this);this.type="TetrahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new Pt(e,t));this.mergeVertices()}function Pt(e,t){Lt.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t);this.type="TetrahedronBufferGeometry";this.parameters={radius:e,detail:t}}function Ct(e,t){we.call(this);this.type="OctahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new It(e,t));this.mergeVertices()}function It(e,t){Lt.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t);this.type="OctahedronBufferGeometry";this.parameters={radius:e,detail:t}}function Ut(e,t){we.call(this);this.type="IcosahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new Nt(e,t));this.mergeVertices()}function Nt(e,t){var i=(1+Math.sqrt(5))/2;Lt.call(this,[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t);this.type="IcosahedronBufferGeometry";this.parameters={radius:e,detail:t}}function Dt(e,t){we.call(this);this.type="DodecahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new Ot(e,t));this.mergeVertices()}function Ot(e,t){var i=(1+Math.sqrt(5))/2,n=1/i;Lt.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t);this.type="DodecahedronBufferGeometry";this.parameters={radius:e,detail:t}}function Bt(e,t,i,n,r,o){we.call(this);this.type="TubeGeometry";this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:n,closed:r};void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");e=new Ft(e,t,i,n,r);this.tangents=e.tangents;this.normals=e.normals;this.binormals=e.binormals;this.fromBufferGeometry(e);this.mergeVertices()}function Ft(e,t,n,r,o){function a(i){var o=e.getPointAt(i/t),a=s.normals[i];i=s.binormals[i];for(d=0;d<=r;d++){var c=d/r*Math.PI*2,u=Math.sin(c),c=-Math.cos(c);l.x=c*a.x+u*i.x;l.y=c*a.y+u*i.y;l.z=c*a.z+u*i.z;l.normalize();m.push(l.x,l.y,l.z);h.x=o.x+n*l.x;h.y=o.y+n*l.y;h.z=o.z+n*l.z;f.push(h.x,h.y,h.z)}}Me.call(this);this.type="TubeBufferGeometry";this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:o};t=t||64;n=n||1;r=r||8;o=o||!1;var s=e.computeFrenetFrames(t,o);this.tangents=s.tangents;this.normals=s.normals;this.binormals=s.binormals;var h=new c,l=new c,u=new i,p,d,f=[],m=[],g=[],v=[];for(p=0;p<t;p++)a(p);a(!1===o?t:0);for(p=0;p<=t;p++)for(d=0;d<=r;d++)u.x=p/t,u.y=d/r,g.push(u.x,u.y);(function(){for(d=1;d<=t;d++)for(p=1;p<=r;p++){var e=(r+1)*d+(p-1),i=(r+1)*d+p,n=(r+1)*(d-1)+p;v.push((r+1)*(d-1)+(p-1),e,n);v.push(e,i,n)}})();this.setIndex(v);this.addAttribute("position",new ye(f,3));this.addAttribute("normal",new ye(m,3));this.addAttribute("uv",new ye(g,2))}function zt(e,t,i,n,r,o,a){we.call(this);this.type="TorusKnotGeometry";this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:n,p:r,q:o};void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");this.fromBufferGeometry(new Gt(e,t,i,n,r,o));this.mergeVertices()}function Gt(e,t,n,r,o,a){function s(e,t,i,n,r){var o=Math.sin(e);t=i/t*e;i=Math.cos(t);r.x=n*(2+i)*.5*Math.cos(e);r.y=n*(2+i)*o*.5;r.z=n*Math.sin(t)*.5}Me.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:o,q:a};e=e||100;t=t||40;n=Math.floor(n)||64;r=Math.floor(r)||8;o=o||2;a=a||3;var h=[],l=[],u=[],p=[],d,f,m=new c,g=new c;new i;var v=new c,y=new c,x=new c,_=new c,b=new c;for(d=0;d<=n;++d)for(f=d/n*o*Math.PI*2,s(f,o,a,e,v),s(f+.01,o,a,e,y),_.subVectors(y,v),b.addVectors(y,v),x.crossVectors(_,b),b.crossVectors(x,_),x.normalize(),b.normalize(),f=0;f<=r;++f){var w=f/r*Math.PI*2,M=-t*Math.cos(w),w=t*Math.sin(w);m.x=v.x+(M*b.x+w*x.x);m.y=v.y+(M*b.y+w*x.y);m.z=v.z+(M*b.z+w*x.z);l.push(m.x,m.y,m.z);g.subVectors(m,v).normalize();u.push(g.x,g.y,g.z);p.push(d/n);p.push(f/r)}for(f=1;f<=n;f++)for(d=1;d<=r;d++)e=(r+1)*f+(d-1),t=(r+1)*f+d,o=(r+1)*(f-1)+d,h.push((r+1)*(f-1)+(d-1),e,o),h.push(e,t,o);this.setIndex(h);this.addAttribute("position",new ye(l,3));this.addAttribute("normal",new ye(u,3));this.addAttribute("uv",new ye(p,2))}function Ht(e,t,i,n,r){we.call(this);this.type="TorusGeometry";this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:r};this.fromBufferGeometry(new Vt(e,t,i,n,r))}function Vt(e,t,i,n,r){Me.call(this);this.type="TorusBufferGeometry";this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:r};e=e||100;t=t||40;i=Math.floor(i)||8;n=Math.floor(n)||6;r=r||2*Math.PI;var o=[],a=[],s=[],h=[],l=new c,u=new c,p=new c,d,f;for(d=0;d<=i;d++)for(f=0;f<=n;f++){var m=f/n*r,g=d/i*Math.PI*2;u.x=(e+t*Math.cos(g))*Math.cos(m);u.y=(e+t*Math.cos(g))*Math.sin(m);u.z=t*Math.sin(g);a.push(u.x,u.y,u.z);l.x=e*Math.cos(m);l.y=e*Math.sin(m);p.subVectors(u,l).normalize();s.push(p.x,p.y,p.z);h.push(f/n);h.push(d/i)}for(d=1;d<=i;d++)for(f=1;f<=n;f++)e=(n+1)*(d-1)+f-1,t=(n+1)*(d-1)+f,r=(n+1)*d+f,o.push((n+1)*d+f-1,e,r),o.push(e,t,r);this.setIndex(o);this.addAttribute("position",new ye(a,3));this.addAttribute("normal",new ye(s,3));this.addAttribute("uv",new ye(h,2))}function kt(e,t){"undefined"!==typeof e&&(we.call(this),this.type="ExtrudeGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeFaceNormals())}function jt(e,t){t=t||{};var i=t.font;if(!1===(i&&i.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new we;i=i.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50;void 0===t.bevelThickness&&(t.bevelThickness=10);void 0===t.bevelSize&&(t.bevelSize=8);void 0===t.bevelEnabled&&(t.bevelEnabled=!1);kt.call(this,i,t);this.type="TextGeometry"}function Wt(e,t,i,n,r,o,a){we.call(this);this.type="SphereGeometry";this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:r,thetaStart:o,thetaLength:a};this.fromBufferGeometry(new Xt(e,t,i,n,r,o,a))}function Xt(e,t,i,n,r,o,a){Me.call(this);this.type="SphereBufferGeometry";this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:r,thetaStart:o,thetaLength:a};e=e||50;t=Math.max(3,Math.floor(t)||8);i=Math.max(2,Math.floor(i)||6);n=void 0!==n?n:0;r=void 0!==r?r:2*Math.PI;o=void 0!==o?o:0;a=void 0!==a?a:Math.PI;var s=o+a,h,l,u=0,p=[],d=new c,f=new c,m=[],g=[],v=[],y=[];for(l=0;l<=i;l++){var x=[],_=l/i;for(h=0;h<=t;h++){var b=h/t;d.x=-e*Math.cos(n+b*r)*Math.sin(o+_*a);d.y=e*Math.cos(o+_*a);d.z=e*Math.sin(n+b*r)*Math.sin(o+_*a);g.push(d.x,d.y,d.z);f.set(d.x,d.y,d.z).normalize();v.push(f.x,f.y,f.z);y.push(b,1-_);x.push(u++)}p.push(x)}for(l=0;l<i;l++)for(h=0;h<t;h++)e=p[l][h+1],n=p[l][h],r=p[l+1][h],a=p[l+1][h+1],(0!==l||0<o)&&m.push(e,n,a),(l!==i-1||s<Math.PI)&&m.push(n,r,a);this.setIndex(m);this.addAttribute("position",new ye(g,3));this.addAttribute("normal",new ye(v,3));this.addAttribute("uv",new ye(y,2))}function qt(e,t,i,n,r,o){we.call(this);this.type="RingGeometry";this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:o};this.fromBufferGeometry(new Yt(e,t,i,n,r,o))}function Yt(e,t,n,r,o,a){Me.call(this);this.type="RingBufferGeometry";this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:o,thetaLength:a};e=e||20;t=t||50;o=void 0!==o?o:0;a=void 0!==a?a:2*Math.PI;n=void 0!==n?Math.max(3,n):8;r=void 0!==r?Math.max(1,r):1;var s=[],h=[],l=[],u=[],p=e,d=(t-e)/r,f=new c,m=new i,g,v;for(g=0;g<=r;g++){for(v=0;v<=n;v++)e=o+v/n*a,f.x=p*Math.cos(e),f.y=p*Math.sin(e),h.push(f.x,f.y,f.z),l.push(0,0,1),m.x=(f.x/t+1)/2,m.y=(f.y/t+1)/2,u.push(m.x,m.y);p+=d}for(g=0;g<r;g++)for(t=g*(n+1),v=0;v<n;v++)e=v+t,o=e+n+1,a=e+n+2,p=e+1,s.push(e,o,p),s.push(o,a,p);this.setIndex(s);this.addAttribute("position",new ye(h,3));this.addAttribute("normal",new ye(l,3));this.addAttribute("uv",new ye(u,2))}function Zt(e,t,i,n){we.call(this);this.type="LatheGeometry";this.parameters={points:e,segments:t,phiStart:i,phiLength:n};this.fromBufferGeometry(new Jt(e,t,i,n));this.mergeVertices()}function Jt(e,t,n,r){Me.call(this);this.type="LatheBufferGeometry";this.parameters={points:e,segments:t,phiStart:n,phiLength:r};t=Math.floor(t)||12;n=n||0;r=r||2*Math.PI;r=hr.clamp(r,0,2*Math.PI);var o=[],a=[],s=[],h=1/t,l=new c,u=new i,p,d;for(p=0;p<=t;p++){d=n+p*h*r;var f=Math.sin(d),m=Math.cos(d);for(d=0;d<=e.length-1;d++)l.x=e[d].x*f,l.y=e[d].y,l.z=e[d].x*m,a.push(l.x,l.y,l.z),u.x=p/t,u.y=d/(e.length-1),s.push(u.x,u.y)}for(p=0;p<t;p++)for(d=0;d<e.length-1;d++)n=d+p*e.length,h=n+e.length,l=n+e.length+1,u=n+1,o.push(n,h,u),o.push(h,l,u);this.setIndex(o);this.addAttribute("position",new ye(a,3));this.addAttribute("uv",new ye(s,2));this.computeVertexNormals();if(r===2*Math.PI)for(r=this.attributes.normal.array,o=new c,a=new c,s=new c,n=t*e.length*3,d=p=0;p<e.length;p++,d+=3)o.x=r[d+0],o.y=r[d+1],o.z=r[d+2],a.x=r[n+d+0],a.y=r[n+d+1],a.z=r[n+d+2],s.addVectors(o,a).normalize(),r[d+0]=r[n+d+0]=s.x,r[d+1]=r[n+d+1]=s.y,r[d+2]=r[n+d+2]=s.z}function Qt(e,t){we.call(this);this.type="ShapeGeometry";"object"===typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments);this.parameters={shapes:e,curveSegments:t};this.fromBufferGeometry(new Kt(e,t));this.mergeVertices()}function Kt(e,t){function i(e){var i,s,h=r.length/3;e=e.extractPoints(t);var l=e.shape,u=e.holes;if(!1===Tr.isClockWise(l))for(l=l.reverse(),e=0,i=u.length;e<i;e++)s=u[e],!0===Tr.isClockWise(s)&&(u[e]=s.reverse());var p=Tr.triangulateShape(l,u);e=0;for(i=u.length;e<i;e++)s=u[e],l=l.concat(s);e=0;for(i=l.length;e<i;e++)s=l[e],r.push(s.x,s.y,0),o.push(0,0,1),a.push(s.x,s.y);e=0;for(i=p.length;e<i;e++)l=p[e],n.push(l[0]+h,l[1]+h,l[2]+h),c+=3}Me.call(this);this.type="ShapeBufferGeometry";this.parameters={shapes:e,curveSegments:t};t=t||12;var n=[],r=[],o=[],a=[],s=0,c=0;if(!1===Array.isArray(e))i(e);else for(var h=0;h<e.length;h++)i(e[h]),this.addGroup(s,c,h),s+=c,c=0;this.setIndex(n);this.addAttribute("position",new ye(r,3));this.addAttribute("normal",new ye(o,3));this.addAttribute("uv",new ye(a,2))}function $t(e,t){function i(e,t){return e-t}Me.call(this);this.type="EdgesGeometry";this.parameters={thresholdAngle:t};var n=[],r=Math.cos(hr.DEG2RAD*(void 0!==t?t:1)),o=[0,0],a={},s,c=["a","b","c"],h;e.isBufferGeometry?(h=new we,h.fromBufferGeometry(e)):h=e.clone();h.mergeVertices();h.computeFaceNormals();var l=h.vertices;h=h.faces;for(var u=0,p=h.length;u<p;u++)for(var d=h[u],f=0;3>f;f++)o[0]=d[c[f]],o[1]=d[c[(f+1)%3]],o.sort(i),s=o.toString(),void 0===a[s]?a[s]={index1:o[0],index2:o[1],face1:u,face2:void 0}:a[s].face2=u;for(s in a)if(o=a[s],void 0===o.face2||h[o.face1].normal.dot(h[o.face2].normal)<=r)c=l[o.index1],n.push(c.x,c.y,c.z),c=l[o.index2],n.push(c.x,c.y,c.z);this.addAttribute("position",new ye(n,3))}function ei(e,t,i,n,r,o,a,s){we.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s};this.fromBufferGeometry(new ti(e,t,i,n,r,o,a,s));this.mergeVertices()}function ti(e,t,n,r,o,a,s,h){function l(n){var o,a,l,v=new i,_=new c,b=0,w=!0===n?e:t,M=!0===n?1:-1;a=g;for(o=1;o<=r;o++)d.push(0,y*M,0),f.push(0,M,0),m.push(.5,.5),g++;l=g;for(o=0;o<=r;o++){var E=o/r*h+s,T=Math.cos(E),E=Math.sin(E);_.x=w*E;_.y=y*M;_.z=w*T;d.push(_.x,_.y,_.z);f.push(0,M,0);v.x=.5*T+.5;v.y=.5*E*M+.5;m.push(v.x,v.y);g++}for(o=0;o<r;o++)v=a+o,_=l+o,!0===n?p.push(_,_+1,v):p.push(_+1,_,v),b+=3;u.addGroup(x,b,!0===n?1:2);x+=b}Me.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:o,openEnded:a,thetaStart:s,thetaLength:h};var u=this;e=void 0!==e?e:20;t=void 0!==t?t:20;n=void 0!==n?n:100;r=Math.floor(r)||8;o=Math.floor(o)||1;a=void 0!==a?a:!1;s=void 0!==s?s:0;h=void 0!==h?h:2*Math.PI;var p=[],d=[],f=[],m=[],g=0,v=[],y=n/2,x=0;(function(){var i,a,l=new c,_=new c,b=0,w=(t-e)/n;for(a=0;a<=o;a++){var M=[],E=a/o,T=E*(t-e)+e;for(i=0;i<=r;i++){var S=i/r,A=S*h+s,L=Math.sin(A),A=Math.cos(A);_.x=T*L;_.y=-E*n+y;_.z=T*A;d.push(_.x,_.y,_.z);l.set(L,w,A).normalize();f.push(l.x,l.y,l.z);m.push(S,1-E);M.push(g++)}v.push(M)}for(i=0;i<r;i++)for(a=0;a<o;a++)l=v[a+1][i],_=v[a+1][i+1],w=v[a][i+1],p.push(v[a][i],l,w),p.push(l,_,w),b+=6;u.addGroup(x,b,0);x+=b})();!1===a&&(0<e&&l(!0),0<t&&l(!1));this.setIndex(p);this.addAttribute("position",new ye(d,3));this.addAttribute("normal",new ye(f,3));this.addAttribute("uv",new ye(m,2))}function ii(e,t,i,n,r,o,a){ei.call(this,0,e,t,i,n,r,o,a);this.type="ConeGeometry";this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:o,thetaLength:a}}function ni(e,t,i,n,r,o,a){ti.call(this,0,e,t,i,n,r,o,a);this.type="ConeBufferGeometry";this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:o,thetaLength:a}}function ri(e,t,i,n){we.call(this);this.type="CircleGeometry";this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:n};this.fromBufferGeometry(new oi(e,t,i,n))}function oi(e,t,n,r){Me.call(this);this.type="CircleBufferGeometry";this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r};e=e||50;t=void 0!==t?Math.max(3,t):8;n=void 0!==n?n:0;r=void 0!==r?r:2*Math.PI;var o=[],a=[],s=[],h=[],l,u,p=new c,d=new i;a.push(0,0,0);s.push(0,0,1);h.push(.5,.5);u=0;for(l=3;u<=t;u++,l+=3){var f=n+u/t*r;p.x=e*Math.cos(f);p.y=e*Math.sin(f);a.push(p.x,p.y,p.z);s.push(0,0,1);d.x=(a[l]/e+1)/2;d.y=(a[l+1]/e+1)/2;h.push(d.x,d.y)}for(l=1;l<=t;l++)o.push(l,l+1,0);this.setIndex(o);this.addAttribute("position",new ye(a,3));this.addAttribute("normal",new ye(s,3));this.addAttribute("uv",new ye(h,2))}function ai(){Y.call(this,{uniforms:gr.merge([xr.lights,{opacity:{value:1}}]),vertexShader:vr.shadow_vert,fragmentShader:vr.shadow_frag});this.transparent=this.lights=!0;Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}}})}function si(e){Y.call(this,e);this.type="RawShaderMaterial"}function ci(e){this.uuid=hr.generateUUID();this.type="MultiMaterial";this.materials=Array.isArray(e)?e:[];this.visible=!0}function hi(e){q.call(this);this.defines={STANDARD:""};this.type="MeshStandardMaterial";this.color=new V(16777215);this.metalness=this.roughness=.5;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new V(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new i(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(e)}function li(e){hi.call(this);this.defines={PHYSICAL:""};this.type="MeshPhysicalMaterial";this.reflectivity=.5;this.clearCoatRoughness=this.clearCoat=0;this.setValues(e)}function ui(e){q.call(this);this.type="MeshPhongMaterial";this.color=new V(16777215);this.specular=new V(1118481);this.shininess=30;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new V(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new i(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(e)}function pi(e){ui.call(this);this.defines={TOON:""};this.type="MeshToonMaterial";this.gradientMap=null;this.setValues(e)}function di(e){q.call(this,e);this.type="MeshNormalMaterial";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new i(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1;this.setValues(e)}function fi(e){q.call(this);this.type="MeshLambertMaterial";this.color=new V(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new V(0);this.emissiveIntensity=1;this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(e)}function mi(e){q.call(this);this.type="LineDashedMaterial";this.color=new V(16777215);this.scale=this.linewidth=1;this.dashSize=3;this.gapSize=1;this.lights=!1;this.setValues(e)}function gi(e,t,i){var n=this,r=!1,o=0,a=0;this.onStart=void 0;this.onLoad=e;this.onProgress=t;this.onError=i;this.itemStart=function(e){a++;if(!1===r&&void 0!==n.onStart)n.onStart(e,o,a);r=!0};this.itemEnd=function(e){o++;if(void 0!==n.onProgress)n.onProgress(e,o,a);if(o===a&&(r=!1,void 0!==n.onLoad))n.onLoad()};this.itemError=function(e){if(void 0!==n.onError)n.onError(e)}}function vi(e){this.manager=void 0!==e?e:Rr}function yi(e){this.manager=void 0!==e?e:Rr;this._parser=null}function xi(e){this.manager=void 0!==e?e:Rr;this._parser=null}function _i(e){this.manager=void 0!==e?e:Rr}function bi(e){this.manager=void 0!==e?e:Rr}function wi(e){this.manager=void 0!==e?e:Rr}function Mi(e,t){oe.call(this);this.type="Light";this.color=new V(e);this.intensity=void 0!==t?t:1;this.receiveShadow=void 0}function Ei(e,t,i){Mi.call(this,e,i);this.type="HemisphereLight";this.castShadow=void 0;this.position.copy(oe.DefaultUp);this.updateMatrix();this.groundColor=new V(t)}function Ti(e){this.camera=e;this.bias=0;this.radius=1;this.mapSize=new i(512,512);this.map=null;this.matrix=new h}function Si(){Ti.call(this,new Pe(50,1,.5,500))}function Ai(e,t,i,n,r,o){Mi.call(this,e,t);this.type="SpotLight";this.position.copy(oe.DefaultUp);this.updateMatrix();this.target=new oe;Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}});this.distance=void 0!==i?i:0;this.angle=void 0!==n?n:Math.PI/3;this.penumbra=void 0!==r?r:0;this.decay=void 0!==o?o:1;this.shadow=new Si}function Li(e,t,i,n){Mi.call(this,e,t);this.type="PointLight";Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}});this.distance=void 0!==i?i:0;this.decay=void 0!==n?n:1;this.shadow=new Ti(new Pe(90,1,.5,500))}function Ri(){Ti.call(this,new Ce(-5,5,5,-5,.5,500))}function Pi(e,t){Mi.call(this,e,t);this.type="DirectionalLight";this.position.copy(oe.DefaultUp);this.updateMatrix();this.target=new oe;this.shadow=new Ri}function Ci(e,t){Mi.call(this,e,t);this.type="AmbientLight";this.castShadow=void 0}function Ii(e,t,i,n){this.parameterPositions=e;this._cachedIndex=0;this.resultBuffer=void 0!==n?n:new t.constructor(i);this.sampleValues=t;this.valueSize=i}function Ui(e,t,i,n){Ii.call(this,e,t,i,n);this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function Ni(e,t,i,n){Ii.call(this,e,t,i,n)}function Di(e,t,i,n){Ii.call(this,e,t,i,n)}function Oi(e,t,i,n){if(void 0===e)throw Error("track name is undefined");if(void 0===t||0===t.length)throw Error("no keyframes in track named "+e);this.name=e;this.times=Pr.convertArray(t,this.TimeBufferType);this.values=Pr.convertArray(i,this.ValueBufferType);this.setInterpolation(n||this.DefaultInterpolation);this.validate();this.optimize()}function Bi(e,t,i,n){Oi.call(this,e,t,i,n)}function Fi(e,t,i,n){Ii.call(this,e,t,i,n)}function zi(e,t,i,n){Oi.call(this,e,t,i,n)}function Gi(e,t,i,n){Oi.call(this,e,t,i,n)}function Hi(e,t,i,n){Oi.call(this,e,t,i,n)}function Vi(e,t,i){Oi.call(this,e,t,i)}function ki(e,t,i,n){Oi.call(this,e,t,i,n)}function ji(e,t,i,n){Oi.apply(this,arguments)}function Wi(e,t,i){this.name=e;this.tracks=i;this.duration=void 0!==t?t:-1;this.uuid=hr.generateUUID();0>this.duration&&this.resetDuration();this.optimize()}function Xi(e){this.manager=void 0!==e?e:Rr;this.textures={}}function qi(e){this.manager=void 0!==e?e:Rr}function Yi(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}}function Zi(e){"boolean"===typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0);this.manager=void 0!==e?e:Rr;this.withCredentials=!1}function Ji(e){this.manager=void 0!==e?e:Rr;this.texturePath=""}function Qi(e,t,i,n,r){t=.5*(n-t);r=.5*(r-i);var o=e*e;return(2*i-2*n+t+r)*e*o+(-3*i+3*n-2*t-r)*o+t*e+i}function Ki(e,t,i,n){var r=1-e;return r*r*t+2*(1-e)*e*i+e*e*n}function $i(e,t,i,n,r){var o=1-e,a=1-e;return o*o*o*t+3*a*a*e*i+3*(1-e)*e*e*n+e*e*e*r}function en(){}function tn(e,t){this.v1=e;this.v2=t}function nn(){this.curves=[];this.autoClose=!1}function rn(e,t,i,n,r,o,a,s){this.aX=e;this.aY=t;this.xRadius=i;this.yRadius=n;this.aStartAngle=r;this.aEndAngle=o;this.aClockwise=a;this.aRotation=s||0}function on(e){this.points=void 0===e?[]:e}function an(e,t,i,n){this.v0=e;this.v1=t;this.v2=i;this.v3=n}function sn(e,t,i){this.v0=e;this.v1=t;this.v2=i}function cn(e){nn.call(this);this.currentPoint=new i;e&&this.fromPoints(e)}function hn(){cn.apply(this,arguments);this.holes=[]}function ln(){this.subPaths=[];this.currentPath=null}function un(e){this.data=e}function pn(e){this.manager=void 0!==e?e:Rr}function dn(e){this.manager=void 0!==e?e:Rr}function fn(e,t,i,n){Mi.call(this,e,t);this.type="RectAreaLight";this.position.set(0,1,0);this.updateMatrix();this.width=void 0!==i?i:10;this.height=void 0!==n?n:10}function mn(){this.type="StereoCamera";this.aspect=1;this.eyeSep=.064;this.cameraL=new Pe;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new Pe;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1}function gn(e,t,i){oe.call(this);this.type="CubeCamera";var n=new Pe(90,1,e,t);n.up.set(0,-1,0);n.lookAt(new c(1,0,0));this.add(n);var r=new Pe(90,1,e,t);r.up.set(0,-1,0);r.lookAt(new c(-1,0,0));this.add(r);var o=new Pe(90,1,e,t);o.up.set(0,0,1);o.lookAt(new c(0,1,0));this.add(o);var s=new Pe(90,1,e,t);s.up.set(0,0,-1);s.lookAt(new c(0,-1,0));this.add(s);var h=new Pe(90,1,e,t);h.up.set(0,-1,0);h.lookAt(new c(0,0,1));this.add(h);var l=new Pe(90,1,e,t);l.up.set(0,-1,0);l.lookAt(new c(0,0,-1));this.add(l);this.renderTarget=new a(i,i,{format:1022,magFilter:1006,minFilter:1006});this.updateCubeMap=function(e,t){null===this.parent&&this.updateMatrixWorld();var i=this.renderTarget,a=i.texture.generateMipmaps;
i.texture.generateMipmaps=!1;i.activeCubeFace=0;e.render(t,n,i);i.activeCubeFace=1;e.render(t,r,i);i.activeCubeFace=2;e.render(t,o,i);i.activeCubeFace=3;e.render(t,s,i);i.activeCubeFace=4;e.render(t,h,i);i.texture.generateMipmaps=a;i.activeCubeFace=5;e.render(t,l,i);e.setRenderTarget(null)}}function vn(){oe.call(this);this.type="AudioListener";this.context=Nr.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null}function yn(e){oe.call(this);this.type="Audio";this.context=e.context;this.gain=this.context.createGain();this.gain.connect(e.getInput());this.autoplay=!1;this.buffer=null;this.loop=!1;this.startTime=0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.sourceType="empty";this.filters=[]}function xn(e){yn.call(this,e);this.panner=this.context.createPanner();this.panner.connect(this.gain)}function _n(e,t){this.analyser=e.context.createAnalyser();this.analyser.fftSize=void 0!==t?t:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);e.getOutput().connect(this.analyser)}function bn(e,t,i){this.binding=e;this.valueSize=i;e=Float64Array;switch(t){case"quaternion":t=this._slerp;break;case"string":case"bool":e=Array;t=this._select;break;default:t=this._lerp}this.buffer=new e(4*i);this._mixBufferRegion=t;this.referenceCount=this.useCount=this.cumulativeWeight=0}function wn(e,t,i){this.path=t;this.parsedPath=i||wn.parseTrackName(t);this.node=wn.findNode(e,this.parsedPath.nodeName)||e;this.rootNode=e}function Mn(e){this.uuid=hr.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var i=0,n=arguments.length;i!==n;++i)t[arguments[i].uuid]=i;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function En(e,t,i){this._mixer=e;this._clip=t;this._localRoot=i||null;e=t.tracks;t=e.length;i=Array(t);for(var n={endingStart:2400,endingEnd:2400},r=0;r!==t;++r){var o=e[r].createInterpolant(null);i[r]=o;o.settings=n}this._interpolantSettings=n;this._interpolants=i;this._propertyBindings=Array(t);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=2201;this._loopCount=-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function Tn(e){this._root=e;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1}function Sn(e,t){"string"===typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=t);this.value=e}function An(){Me.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=void 0}function Ln(e,t,i,n){this.uuid=hr.generateUUID();this.data=e;this.itemSize=t;this.offset=i;this.normalized=!0===n}function Rn(e,t){this.uuid=hr.generateUUID();this.array=e;this.stride=t;this.count=void 0!==e?e.length/t:0;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}function Pn(e,t,i){Rn.call(this,e,t);this.meshPerAttribute=i||1}function Cn(e,t,i){le.call(this,e,t);this.meshPerAttribute=i||1}function In(e,t,i,n){this.ray=new ie(e,t);this.near=i||0;this.far=n||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})}function Un(e,t){return e.distance-t.distance}function Nn(e,t,i,n){if(!1!==e.visible&&(e.raycast(t,i),!0===n)){e=e.children;n=0;for(var r=e.length;n<r;n++)Nn(e[n],t,i,!0)}}function Dn(e){this.autoStart=void 0!==e?e:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1}function On(e,t,i){this.radius=void 0!==e?e:1;this.phi=void 0!==t?t:0;this.theta=void 0!==i?i:0;return this}function Bn(e,t,i){this.radius=void 0!==e?e:1;this.theta=void 0!==t?t:0;this.y=void 0!==i?i:0;return this}function Fn(e,t){Ee.call(this,e,t);this.animationsMap={};this.animationsList=[];var i=this.geometry.morphTargets.length;this.createAnimation("__default",0,i-1,i/1);this.setAnimationWeight("__default",1)}function zn(e){oe.call(this);this.material=e;this.render=function(e){}}function Gn(e,t,i,n){this.object=e;this.size=void 0!==t?t:1;e=void 0!==i?i:16711680;n=void 0!==n?n:1;t=0;(i=this.object.geometry)&&i.isGeometry?t=3*i.faces.length:i&&i.isBufferGeometry&&(t=i.attributes.normal.count);i=new Me;t=new ye(6*t,3);i.addAttribute("position",t);gt.call(this,i,new ft({color:e,linewidth:n}));this.matrixAutoUpdate=!1;this.update()}function Hn(e){oe.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=!1;e=new Me;for(var t=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,n=1;32>i;i++,n++){var r=i/32*Math.PI*2,o=n/32*Math.PI*2;t.push(Math.cos(r),Math.sin(r),1,Math.cos(o),Math.sin(o),1)}e.addAttribute("position",new ye(t,3));t=new ft({fog:!1});this.cone=new gt(e,t);this.add(this.cone);this.update()}function Vn(e){this.bones=this.getBoneList(e);for(var t=new Me,i=[],n=[],r=new V(0,0,1),o=new V(0,1,0),a=0;a<this.bones.length;a++){var s=this.bones[a];s.parent&&s.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),n.push(r.r,r.g,r.b),n.push(o.r,o.g,o.b))}t.addAttribute("position",new ye(i,3));t.addAttribute("color",new ye(n,3));i=new ft({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0});gt.call(this,t,i);this.root=e;this.matrix=e.matrixWorld;this.matrixAutoUpdate=!1;this.update()}function kn(e,t){this.light=e;this.light.updateMatrixWorld();var i=new Xt(t,4,2),n=new he({wireframe:!0,fog:!1});n.color.copy(this.light.color).multiplyScalar(this.light.intensity);Ee.call(this,i,n);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1}function jn(e){oe.call(this);this.light=e;this.light.updateMatrixWorld();var t=new he({color:e.color,fog:!1});e=new he({color:e.color,fog:!1,wireframe:!0});var i=new Me;i.addAttribute("position",new le(new Float32Array(18),3));this.add(new Ee(i,t));this.add(new Ee(i,e));this.update()}function Wn(e,t){oe.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=!1;var i=new It(t);i.rotateY(.5*Math.PI);var n=new he({vertexColors:2,wireframe:!0}),r=i.getAttribute("position"),r=new Float32Array(3*r.count);i.addAttribute("color",new le(r,3));this.add(new Ee(i,n));this.update()}function Xn(e,t,i,n){e=e||10;t=t||10;i=new V(void 0!==i?i:4473924);n=new V(void 0!==n?n:8947848);var r=t/2,o=e/t,a=e/2;e=[];for(var s=[],c=0,h=0,l=-a;c<=t;c++,l+=o){e.push(-a,0,l,a,0,l);e.push(l,0,-a,l,0,a);var u=c===r?i:n;u.toArray(s,h);h+=3;u.toArray(s,h);h+=3;u.toArray(s,h);h+=3;u.toArray(s,h);h+=3}t=new Me;t.addAttribute("position",new ye(e,3));t.addAttribute("color",new ye(s,3));i=new ft({vertexColors:2});gt.call(this,t,i)}function qn(e,t,i,n,r,o){e=e||10;t=t||16;i=i||8;n=n||64;r=new V(void 0!==r?r:4473924);o=new V(void 0!==o?o:8947848);var a=[],s=[],c,h,l,u,p;for(l=0;l<=t;l++)h=l/t*2*Math.PI,c=Math.sin(h)*e,h=Math.cos(h)*e,a.push(0,0,0),a.push(c,0,h),p=l&1?r:o,s.push(p.r,p.g,p.b),s.push(p.r,p.g,p.b);for(l=0;l<=i;l++)for(p=l&1?r:o,u=e-e/i*l,t=0;t<n;t++)h=t/n*2*Math.PI,c=Math.sin(h)*u,h=Math.cos(h)*u,a.push(c,0,h),s.push(p.r,p.g,p.b),h=(t+1)/n*2*Math.PI,c=Math.sin(h)*u,h=Math.cos(h)*u,a.push(c,0,h),s.push(p.r,p.g,p.b);e=new Me;e.addAttribute("position",new ye(a,3));e.addAttribute("color",new ye(s,3));a=new ft({vertexColors:2});gt.call(this,e,a)}function Yn(e,t,i,n){this.object=e;this.size=void 0!==t?t:1;e=void 0!==i?i:16776960;n=void 0!==n?n:1;t=0;(i=this.object.geometry)&&i.isGeometry?t=i.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");i=new Me;t=new ye(6*t,3);i.addAttribute("position",t);gt.call(this,i,new ft({color:e,linewidth:n}));this.matrixAutoUpdate=!1;this.update()}function Zn(e,t){oe.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=!1;void 0===t&&(t=1);var i=new Me;i.addAttribute("position",new ye([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var n=new ft({fog:!1});this.add(new mt(i,n));i=new Me;i.addAttribute("position",new ye([0,0,0,0,0,1],3));this.add(new mt(i,n));this.update()}function Jn(e){function t(e,t,n){i(e,n);i(t,n)}function i(e,t){o.push(0,0,0);a.push(t.r,t.g,t.b);void 0===s[e]&&(s[e]=[]);s[e].push(o.length/3-1)}var n=new Me,r=new ft({color:16777215,vertexColors:1}),o=[],a=[],s={},c=new V(16755200),h=new V(16711680),l=new V(43775),u=new V(16777215),p=new V(3355443);t("n1","n2",c);t("n2","n4",c);t("n4","n3",c);t("n3","n1",c);t("f1","f2",c);t("f2","f4",c);t("f4","f3",c);t("f3","f1",c);t("n1","f1",c);t("n2","f2",c);t("n3","f3",c);t("n4","f4",c);t("p","n1",h);t("p","n2",h);t("p","n3",h);t("p","n4",h);t("u1","u2",l);t("u2","u3",l);t("u3","u1",l);t("c","t",u);t("p","c",p);t("cn1","cn2",p);t("cn3","cn4",p);t("cf1","cf2",p);t("cf3","cf4",p);n.addAttribute("position",new ye(o,3));n.addAttribute("color",new ye(a,3));gt.call(this,n,r);this.camera=e;this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix();this.matrix=e.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=s;this.update()}function Qn(e,t){void 0===t&&(t=16776960);var i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),r=new Me;r.setIndex(new le(i,1));r.addAttribute("position",new le(n,3));gt.call(this,r,new ft({color:t}));void 0!==e&&this.update(e)}function Kn(e,t,i,n,r,o){oe.call(this);void 0===n&&(n=16776960);void 0===i&&(i=1);void 0===r&&(r=.2*i);void 0===o&&(o=.2*r);void 0===Dr&&(Dr=new Me,Dr.addAttribute("position",new ye([0,0,0,0,1,0],3)),Or=new ti(0,.5,1,5,1),Or.translate(0,-.5,0));this.position.copy(t);this.line=new mt(Dr,new ft({color:n}));this.line.matrixAutoUpdate=!1;this.add(this.line);this.cone=new Ee(Or,new he({color:n}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(e);this.setLength(i,r,o)}function $n(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e];e=new Me;e.addAttribute("position",new ye(t,3));e.addAttribute("color",new ye([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));t=new ft({vertexColors:2});gt.call(this,e,t)}function er(){var e=0,t=0,i=0,n=0;return{initCatmullRom:function(r,o,a,s,c){r=c*(a-r);s=c*(s-o);e=o;t=r;i=-3*o+3*a-2*r-s;n=2*o-2*a+r+s},initNonuniformCatmullRom:function(r,o,a,s,c,h,l){r=((o-r)/c-(a-r)/(c+h)+(a-o)/h)*h;s=((a-o)/h-(s-o)/(h+l)+(s-a)/l)*h;e=o;t=r;i=-3*o+3*a-2*r-s;n=2*o-2*a+r+s},calc:function(r){var o=r*r;return e+t*r+i*o+n*o*r}}}function tr(e){this.points=e||[];this.closed=!1}function ir(e,t,i,n){this.v0=e;this.v1=t;this.v2=i;this.v3=n}function nr(e,t,i){this.v0=e;this.v1=t;this.v2=i}function rr(e,t){this.v1=e;this.v2=t}function or(e,t,i,n,r,o){rn.call(this,e,t,i,i,n,r,o)}function ar(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");tr.call(this,e);this.type="catmullrom";this.closed=!0}function sr(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");tr.call(this,e);this.type="catmullrom"}function cr(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.");tr.call(this,e);this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Math.sign&&(Math.sign=function(e){return 0>e?-1:0<e?1:+e});void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});void 0===Object.assign&&function(){Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(void 0!==n&&null!==n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}}();t.prototype={addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[e]&&(i[e]=[]);-1===i[e].indexOf(t)&&i[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var i=this._listeners[e];if(void 0!==i){var n=i.indexOf(t);-1!==n&&i.splice(n,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;var i=[],n,r=t.length;for(n=0;n<r;n++)i[n]=t[n];for(n=0;n<r;n++)i[n].call(this,e)}}}};var hr={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),t=Array(36),i=0,n;return function(){for(var r=0;36>r;r++)8===r||13===r||18===r||23===r?t[r]="-":14===r?t[r]="4":(2>=i&&(i=33554432+16777216*Math.random()|0),n=i&15,i>>=4,t[r]=e[19===r?n&3|8:n]);return t.join("")}}(),clamp:function(e,t,i){return Math.max(t,Math.min(i,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,i,n,r){return n+(e-t)*(r-n)/(i-t)},lerp:function(e,t,i){return(1-i)*e+i*t},smoothstep:function(e,t,i){if(e<=t)return 0;if(e>=i)return 1;e=(e-t)/(i-t);return e*e*(3-2*e)},smootherstep:function(e,t,i){if(e<=t)return 0;if(e>=i)return 1;e=(e-t)/(i-t);return e*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*hr.DEG2RAD},radToDeg:function(e){return e*hr.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){e--;e|=e>>1;e|=e>>2;e|=e>>4;e|=e>>8;e|=e>>16;e++;return e}};i.prototype={constructor:i,isVector2:!0,get width(){return this.x},set width(e){this.x=e},get height(){return this.y},set height(e){this.y=e},set:function(e,t){this.x=e;this.y=t;return this},setScalar:function(e){this.y=this.x=e;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){this.x=e.x;this.y=e.y;return this},add:function(e,t){if(void 0!==t)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t);this.x+=e.x;this.y+=e.y;return this},addScalar:function(e){this.x+=e;this.y+=e;return this},addVectors:function(e,t){this.x=e.x+t.x;this.y=e.y+t.y;return this},addScaledVector:function(e,t){this.x+=e.x*t;this.y+=e.y*t;return this},sub:function(e,t){if(void 0!==t)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t);this.x-=e.x;this.y-=e.y;return this},subScalar:function(e){this.x-=e;this.y-=e;return this},subVectors:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;return this},multiply:function(e){this.x*=e.x;this.y*=e.y;return this},multiplyScalar:function(e){isFinite(e)?(this.x*=e,this.y*=e):this.y=this.x=0;return this},divide:function(e){this.x/=e.x;this.y/=e.y;return this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){this.x=Math.min(this.x,e.x);this.y=Math.min(this.y,e.y);return this},max:function(e){this.x=Math.max(this.x,e.x);this.y=Math.max(this.y,e.y);return this},clamp:function(e,t){this.x=Math.max(e.x,Math.min(t.x,this.x));this.y=Math.max(e.y,Math.min(t.y,this.y));return this},clampScalar:function(){var e,t;return function(n,r){void 0===e&&(e=new i,t=new i);e.set(n,n);t.set(r,r);return this.clamp(e,t)}}(),clampLength:function(e,t){var i=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,i))/i)},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var e=Math.atan2(this.y,this.x);0>e&&(e+=2*Math.PI);return e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x;e=this.y-e.y;return t*t+e*e},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){this.x+=(e.x-this.x)*t;this.y+=(e.y-this.y)*t;return this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){void 0===t&&(t=0);this.x=e[t];this.y=e[t+1];return this},toArray:function(e,t){void 0===e&&(e=[]);void 0===t&&(t=0);e[t]=this.x;e[t+1]=this.y;return e},fromBufferAttribute:function(e,t,i){void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().");this.x=e.getX(t);this.y=e.getY(t);return this},rotateAround:function(e,t){var i=Math.cos(t),n=Math.sin(t),r=this.x-e.x,o=this.y-e.y;this.x=r*i-o*n+e.x;this.y=r*n+o*i+e.y;return this}};var lr=0;n.DEFAULT_IMAGE=void 0;n.DEFAULT_MAPPING=300;n.prototype={constructor:n,isTexture:!0,set needsUpdate(e){!0===e&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.image=e.image;this.mipmaps=e.mipmaps.slice(0);this.mapping=e.mapping;this.wrapS=e.wrapS;this.wrapT=e.wrapT;this.magFilter=e.magFilter;this.minFilter=e.minFilter;this.anisotropy=e.anisotropy;this.format=e.format;this.type=e.type;this.offset.copy(e.offset);this.repeat.copy(e.repeat);this.generateMipmaps=e.generateMipmaps;this.premultiplyAlpha=e.premultiplyAlpha;this.flipY=e.flipY;this.unpackAlignment=e.unpackAlignment;this.encoding=e.encoding;return this},toJSON:function(e){if(void 0!==e.textures[this.uuid])return e.textures[this.uuid];var t={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;void 0===i.uuid&&(i.uuid=hr.generateUUID());if(void 0===e.images[i.uuid]){var n=e.images,r=i.uuid,o=i.uuid,a;void 0!==i.toDataURL?a=i:(a=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),a.width=i.width,a.height=i.height,a.getContext("2d").drawImage(i,0,0,i.width,i.height));a=2048<a.width||2048<a.height?a.toDataURL("image/jpeg",.6):a.toDataURL("image/png");n[r]={uuid:o,url:a}}t.image=i.uuid}return e.textures[this.uuid]=t},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300===this.mapping){e.multiply(this.repeat);e.add(this.offset);if(0>e.x||1<e.x)switch(this.wrapS){case 1e3:e.x-=Math.floor(e.x);break;case 1001:e.x=0>e.x?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(0>e.y||1<e.y)switch(this.wrapT){case 1e3:e.y-=Math.floor(e.y);break;case 1001:e.y=0>e.y?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}};Object.assign(n.prototype,t.prototype);r.prototype={constructor:r,isVector4:!0,set:function(e,t,i,n){this.x=e;this.y=t;this.z=i;this.w=n;return this},setScalar:function(e){this.w=this.z=this.y=this.x=e;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setZ:function(e){this.z=e;return this},setW:function(e){this.w=e;return this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){this.x=e.x;this.y=e.y;this.z=e.z;this.w=void 0!==e.w?e.w:1;return this},add:function(e,t){if(void 0!==t)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t);this.x+=e.x;this.y+=e.y;this.z+=e.z;this.w+=e.w;return this},addScalar:function(e){this.x+=e;this.y+=e;this.z+=e;this.w+=e;return this},addVectors:function(e,t){this.x=e.x+t.x;this.y=e.y+t.y;this.z=e.z+t.z;this.w=e.w+t.w;return this},addScaledVector:function(e,t){this.x+=e.x*t;this.y+=e.y*t;this.z+=e.z*t;this.w+=e.w*t;return this},sub:function(e,t){if(void 0!==t)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t);this.x-=e.x;this.y-=e.y;this.z-=e.z;this.w-=e.w;return this},subScalar:function(e){this.x-=e;this.y-=e;this.z-=e;this.w-=e;return this},subVectors:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;this.z=e.z-t.z;this.w=e.w-t.w;return this},multiplyScalar:function(e){isFinite(e)?(this.x*=e,this.y*=e,this.z*=e,this.w*=e):this.w=this.z=this.y=this.x=0;return this},applyMatrix4:function(e){var t=this.x,i=this.y,n=this.z,r=this.w;e=e.elements;this.x=e[0]*t+e[4]*i+e[8]*n+e[12]*r;this.y=e[1]*t+e[5]*i+e[9]*n+e[13]*r;this.z=e[2]*t+e[6]*i+e[10]*n+e[14]*r;this.w=e[3]*t+e[7]*i+e[11]*n+e[15]*r;return this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);1e-4>t?(this.x=1,this.z=this.y=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t);return this},setAxisAngleFromRotationMatrix:function(e){var t,i,n;e=e.elements;var r=e[0];n=e[4];var o=e[8],a=e[1],s=e[5],c=e[9];i=e[2];t=e[6];var h=e[10];if(.01>Math.abs(n-a)&&.01>Math.abs(o-i)&&.01>Math.abs(c-t)){if(.1>Math.abs(n+a)&&.1>Math.abs(o+i)&&.1>Math.abs(c+t)&&.1>Math.abs(r+s+h-3))return this.set(1,0,0,0),this;e=Math.PI;r=(r+1)/2;s=(s+1)/2;h=(h+1)/2;n=(n+a)/4;o=(o+i)/4;c=(c+t)/4;r>s&&r>h?.01>r?(t=0,n=i=.707106781):(t=Math.sqrt(r),i=n/t,n=o/t):s>h?.01>s?(t=.707106781,i=0,n=.707106781):(i=Math.sqrt(s),t=n/i,n=c/i):.01>h?(i=t=.707106781,n=0):(n=Math.sqrt(h),t=o/n,i=c/n);this.set(t,i,n,e);return this}e=Math.sqrt((t-c)*(t-c)+(o-i)*(o-i)+(a-n)*(a-n));.001>Math.abs(e)&&(e=1);this.x=(t-c)/e;this.y=(o-i)/e;this.z=(a-n)/e;this.w=Math.acos((r+s+h-1)/2);return this},min:function(e){this.x=Math.min(this.x,e.x);this.y=Math.min(this.y,e.y);this.z=Math.min(this.z,e.z);this.w=Math.min(this.w,e.w);return this},max:function(e){this.x=Math.max(this.x,e.x);this.y=Math.max(this.y,e.y);this.z=Math.max(this.z,e.z);this.w=Math.max(this.w,e.w);return this},clamp:function(e,t){this.x=Math.max(e.x,Math.min(t.x,this.x));this.y=Math.max(e.y,Math.min(t.y,this.y));this.z=Math.max(e.z,Math.min(t.z,this.z));this.w=Math.max(e.w,Math.min(t.w,this.w));return this},clampScalar:function(){var e,t;return function(i,n){void 0===e&&(e=new r,t=new r);e.set(i,i,i,i);t.set(n,n,n,n);return this.clamp(e,t)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){this.x+=(e.x-this.x)*t;this.y+=(e.y-this.y)*t;this.z+=(e.z-this.z)*t;this.w+=(e.w-this.w)*t;return this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){void 0===t&&(t=0);this.x=e[t];this.y=e[t+1];this.z=e[t+2];this.w=e[t+3];return this},toArray:function(e,t){void 0===e&&(e=[]);void 0===t&&(t=0);e[t]=this.x;e[t+1]=this.y;e[t+2]=this.z;e[t+3]=this.w;return e},fromBufferAttribute:function(e,t,i){void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().");this.x=e.getX(t);this.y=e.getY(t);this.z=e.getZ(t);this.w=e.getW(t);return this}};o.prototype={constructor:o,isWebGLRenderTarget:!0,setSize:function(e,t){if(this.width!==e||this.height!==t)this.width=e,this.height=t,this.dispose();this.viewport.set(0,0,e,t);this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.width=e.width;this.height=e.height;this.viewport.copy(e.viewport);this.texture=e.texture.clone();this.depthBuffer=e.depthBuffer;this.stencilBuffer=e.stencilBuffer;this.depthTexture=e.depthTexture;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}};Object.assign(o.prototype,t.prototype);a.prototype=Object.create(o.prototype);a.prototype.constructor=a;a.prototype.isWebGLRenderTargetCube=!0;s.prototype={constructor:s,get x(){return this._x},set x(e){this._x=e;this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e;this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e;this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e;this.onChangeCallback()},set:function(e,t,i,n){this._x=e;this._y=t;this._z=i;this._w=n;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){this._x=e.x;this._y=e.y;this._z=e.z;this._w=e.w;this.onChangeCallback();return this},setFromEuler:function(e,t){if(!1===(e&&e.isEuler))throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=Math.cos(e._x/2),n=Math.cos(e._y/2),r=Math.cos(e._z/2),o=Math.sin(e._x/2),a=Math.sin(e._y/2),s=Math.sin(e._z/2),c=e.order;"XYZ"===c?(this._x=o*n*r+i*a*s,this._y=i*a*r-o*n*s,this._z=i*n*s+o*a*r,this._w=i*n*r-o*a*s):"YXZ"===c?(this._x=o*n*r+i*a*s,this._y=i*a*r-o*n*s,this._z=i*n*s-o*a*r,this._w=i*n*r+o*a*s):"ZXY"===c?(this._x=o*n*r-i*a*s,this._y=i*a*r+o*n*s,this._z=i*n*s+o*a*r,this._w=i*n*r-o*a*s):"ZYX"===c?(this._x=o*n*r-i*a*s,this._y=i*a*r+o*n*s,this._z=i*n*s-o*a*r,this._w=i*n*r+o*a*s):"YZX"===c?(this._x=o*n*r+i*a*s,this._y=i*a*r+o*n*s,this._z=i*n*s-o*a*r,this._w=i*n*r-o*a*s):"XZY"===c&&(this._x=o*n*r-i*a*s,this._y=i*a*r-o*n*s,this._z=i*n*s+o*a*r,this._w=i*n*r+o*a*s);if(!1!==t)this.onChangeCallback();return this},setFromAxisAngle:function(e,t){var i=t/2,n=Math.sin(i);this._x=e.x*n;this._y=e.y*n;this._z=e.z*n;this._w=Math.cos(i);this.onChangeCallback();return this},setFromRotationMatrix:function(e){var t=e.elements,i=t[0];e=t[4];var n=t[8],r=t[1],o=t[5],a=t[9],s=t[2],c=t[6],t=t[10],h=i+o+t;0<h?(i=.5/Math.sqrt(h+1),this._w=.25/i,this._x=(c-a)*i,this._y=(n-s)*i,this._z=(r-e)*i):i>o&&i>t?(i=2*Math.sqrt(1+i-o-t),this._w=(c-a)/i,this._x=.25*i,this._y=(e+r)/i,this._z=(n+s)/i):o>t?(i=2*Math.sqrt(1+o-i-t),this._w=(n-s)/i,this._x=(e+r)/i,this._y=.25*i,this._z=(a+c)/i):(i=2*Math.sqrt(1+t-i-o),this._w=(r-e)/i,this._x=(n+s)/i,this._y=(a+c)/i,this._z=.25*i);this.onChangeCallback();return this},setFromUnitVectors:function(){var e,t;return function(i,n){void 0===e&&(e=new c);t=i.dot(n)+1;1e-6>t?(t=0,Math.abs(i.x)>Math.abs(i.z)?e.set(-i.y,i.x,0):e.set(0,-i.z,i.y)):e.crossVectors(i,n);this._x=e.x;this._y=e.y;this._z=e.z;this._w=t;return this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();0===e?(this._z=this._y=this._x=0,this._w=1):(e=1/e,this._x*=e,this._y*=e,this._z*=e,this._w*=e);this.onChangeCallback();return this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var i=e._x,n=e._y,r=e._z,o=e._w,a=t._x,s=t._y,c=t._z,h=t._w;this._x=i*h+o*a+n*c-r*s;this._y=n*h+o*s+r*a-i*c;this._z=r*h+o*c+i*s-n*a;this._w=o*h-i*a-n*s-r*c;this.onChangeCallback();return this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var i=this._x,n=this._y,r=this._z,o=this._w,a=o*e._w+i*e._x+n*e._y+r*e._z;0>a?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e);if(1<=a)return this._w=o,this._x=i,this._y=n,this._z=r,this;var s=Math.sqrt(1-a*a);if(.001>Math.abs(s))return this._w=.5*(o+this._w),this._x=.5*(i+this._x),this._y=.5*(n+this._y),this._z=.5*(r+this._z),this;var c=Math.atan2(s,a),a=Math.sin((1-t)*c)/s,s=Math.sin(t*c)/s;this._w=o*a+this._w*s;this._x=i*a+this._x*s;this._y=n*a+this._y*s;this._z=r*a+this._z*s;this.onChangeCallback();return this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){void 0===t&&(t=0);this._x=e[t];this._y=e[t+1];this._z=e[t+2];this._w=e[t+3];this.onChangeCallback();return this},toArray:function(e,t){void 0===e&&(e=[]);void 0===t&&(t=0);e[t]=this._x;e[t+1]=this._y;e[t+2]=this._z;e[t+3]=this._w;return e},onChange:function(e){this.onChangeCallback=e;return this},onChangeCallback:function(){}};Object.assign(s,{slerp:function(e,t,i,n){return i.copy(e).slerp(t,n)},slerpFlat:function(e,t,i,n,r,o,a){var s=i[n+0],c=i[n+1],h=i[n+2];i=i[n+3];n=r[o+0];var l=r[o+1],u=r[o+2];r=r[o+3];if(i!==r||s!==n||c!==l||h!==u){o=1-a;var p=s*n+c*l+h*u+i*r,d=0<=p?1:-1,f=1-p*p;f>Number.EPSILON&&(f=Math.sqrt(f),p=Math.atan2(f,p*d),o=Math.sin(o*p)/f,a=Math.sin(a*p)/f);d*=a;s=s*o+n*d;c=c*o+l*d;h=h*o+u*d;i=i*o+r*d;o===1-a&&(a=1/Math.sqrt(s*s+c*c+h*h+i*i),s*=a,c*=a,h*=a,i*=a)}e[t]=s;e[t+1]=c;e[t+2]=h;e[t+3]=i}});c.prototype={constructor:c,isVector3:!0,set:function(e,t,i){this.x=e;this.y=t;this.z=i;return this},setScalar:function(e){this.z=this.y=this.x=e;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setZ:function(e){this.z=e;return this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;
break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){this.x=e.x;this.y=e.y;this.z=e.z;return this},add:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t);this.x+=e.x;this.y+=e.y;this.z+=e.z;return this},addScalar:function(e){this.x+=e;this.y+=e;this.z+=e;return this},addVectors:function(e,t){this.x=e.x+t.x;this.y=e.y+t.y;this.z=e.z+t.z;return this},addScaledVector:function(e,t){this.x+=e.x*t;this.y+=e.y*t;this.z+=e.z*t;return this},sub:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t);this.x-=e.x;this.y-=e.y;this.z-=e.z;return this},subScalar:function(e){this.x-=e;this.y-=e;this.z-=e;return this},subVectors:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;this.z=e.z-t.z;return this},multiply:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t);this.x*=e.x;this.y*=e.y;this.z*=e.z;return this},multiplyScalar:function(e){isFinite(e)?(this.x*=e,this.y*=e,this.z*=e):this.z=this.y=this.x=0;return this},multiplyVectors:function(e,t){this.x=e.x*t.x;this.y=e.y*t.y;this.z=e.z*t.z;return this},applyEuler:function(){var e;return function(t){!1===(t&&t.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");void 0===e&&(e=new s);return this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e;return function(t,i){void 0===e&&(e=new s);return this.applyQuaternion(e.setFromAxisAngle(t,i))}}(),applyMatrix3:function(e){var t=this.x,i=this.y,n=this.z;e=e.elements;this.x=e[0]*t+e[3]*i+e[6]*n;this.y=e[1]*t+e[4]*i+e[7]*n;this.z=e[2]*t+e[5]*i+e[8]*n;return this},applyMatrix4:function(e){var t=this.x,i=this.y,n=this.z;e=e.elements;this.x=e[0]*t+e[4]*i+e[8]*n+e[12];this.y=e[1]*t+e[5]*i+e[9]*n+e[13];this.z=e[2]*t+e[6]*i+e[10]*n+e[14];return this.divideScalar(e[3]*t+e[7]*i+e[11]*n+e[15])},applyQuaternion:function(e){var t=this.x,i=this.y,n=this.z,r=e.x,o=e.y,a=e.z;e=e.w;var s=e*t+o*n-a*i,c=e*i+a*t-r*n,h=e*n+r*i-o*t,t=-r*t-o*i-a*n;this.x=s*e+t*-r+c*-a-h*-o;this.y=c*e+t*-o+h*-r-s*-a;this.z=h*e+t*-a+s*-o-c*-r;return this},project:function(){var e;return function(t){void 0===e&&(e=new h);e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld));return this.applyMatrix4(e)}}(),unproject:function(){var e;return function(t){void 0===e&&(e=new h);e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix));return this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,i=this.y,n=this.z;e=e.elements;this.x=e[0]*t+e[4]*i+e[8]*n;this.y=e[1]*t+e[5]*i+e[9]*n;this.z=e[2]*t+e[6]*i+e[10]*n;return this.normalize()},divide:function(e){this.x/=e.x;this.y/=e.y;this.z/=e.z;return this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){this.x=Math.min(this.x,e.x);this.y=Math.min(this.y,e.y);this.z=Math.min(this.z,e.z);return this},max:function(e){this.x=Math.max(this.x,e.x);this.y=Math.max(this.y,e.y);this.z=Math.max(this.z,e.z);return this},clamp:function(e,t){this.x=Math.max(e.x,Math.min(t.x,this.x));this.y=Math.max(e.y,Math.min(t.y,this.y));this.z=Math.max(e.z,Math.min(t.z,this.z));return this},clampScalar:function(){var e,t;return function(i,n){void 0===e&&(e=new c,t=new c);e.set(i,i,i);t.set(n,n,n);return this.clamp(e,t)}}(),clampLength:function(e,t){var i=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,i))/i)},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){this.x+=(e.x-this.x)*t;this.y+=(e.y-this.y)*t;this.z+=(e.z-this.z)*t;return this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var i=this.x,n=this.y,r=this.z;this.x=n*e.z-r*e.y;this.y=r*e.x-i*e.z;this.z=i*e.y-n*e.x;return this},crossVectors:function(e,t){var i=e.x,n=e.y,r=e.z,o=t.x,a=t.y,s=t.z;this.x=n*s-r*a;this.y=r*o-i*s;this.z=i*a-n*o;return this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e;return function(t){void 0===e&&(e=new c);e.copy(this).projectOnVector(t);return this.sub(e)}}(),reflect:function(){var e;return function(t){void 0===e&&(e=new c);return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){e=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(hr.clamp(e,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y;e=this.z-e.z;return t*t+i*i+e*e},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;this.x=t*Math.sin(e.theta);this.y=Math.cos(e.phi)*e.radius;this.z=t*Math.cos(e.theta);return this},setFromCylindrical:function(e){this.x=e.radius*Math.sin(e.theta);this.y=e.y;this.z=e.radius*Math.cos(e.theta);return this},setFromMatrixPosition:function(e){return this.setFromMatrixColumn(e,3)},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length();e=this.setFromMatrixColumn(e,2).length();this.x=t;this.y=i;this.z=e;return this},setFromMatrixColumn:function(e,t){if("number"===typeof e){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var i=e;e=t;t=i}return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){void 0===t&&(t=0);this.x=e[t];this.y=e[t+1];this.z=e[t+2];return this},toArray:function(e,t){void 0===e&&(e=[]);void 0===t&&(t=0);e[t]=this.x;e[t+1]=this.y;e[t+2]=this.z;return e},fromBufferAttribute:function(e,t,i){void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");this.x=e.getX(t);this.y=e.getY(t);this.z=e.getZ(t);return this}};h.prototype={constructor:h,isMatrix4:!0,set:function(e,t,i,n,r,o,a,s,c,h,l,u,p,d,f,m){var g=this.elements;g[0]=e;g[4]=t;g[8]=i;g[12]=n;g[1]=r;g[5]=o;g[9]=a;g[13]=s;g[2]=c;g[6]=h;g[10]=l;g[14]=u;g[3]=p;g[7]=d;g[11]=f;g[15]=m;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new h).fromArray(this.elements)},copy:function(e){this.elements.set(e.elements);return this},copyPosition:function(e){var t=this.elements;e=e.elements;t[12]=e[12];t[13]=e[13];t[14]=e[14];return this},extractBasis:function(e,t,i){e.setFromMatrixColumn(this,0);t.setFromMatrixColumn(this,1);i.setFromMatrixColumn(this,2);return this},makeBasis:function(e,t,i){this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1);return this},extractRotation:function(){var e;return function(t){void 0===e&&(e=new c);var i=this.elements,n=t.elements,r=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length();t=1/e.setFromMatrixColumn(t,2).length();i[0]=n[0]*r;i[1]=n[1]*r;i[2]=n[2]*r;i[4]=n[4]*o;i[5]=n[5]*o;i[6]=n[6]*o;i[8]=n[8]*t;i[9]=n[9]*t;i[10]=n[10]*t;return this}}(),makeRotationFromEuler:function(e){!1===(e&&e.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,i=e.x,n=e.y,r=e.z,o=Math.cos(i),i=Math.sin(i),a=Math.cos(n),n=Math.sin(n),s=Math.cos(r),r=Math.sin(r);if("XYZ"===e.order){e=o*s;var c=o*r,h=i*s,l=i*r;t[0]=a*s;t[4]=-a*r;t[8]=n;t[1]=c+h*n;t[5]=e-l*n;t[9]=-i*a;t[2]=l-e*n;t[6]=h+c*n;t[10]=o*a}else"YXZ"===e.order?(e=a*s,c=a*r,h=n*s,l=n*r,t[0]=e+l*i,t[4]=h*i-c,t[8]=o*n,t[1]=o*r,t[5]=o*s,t[9]=-i,t[2]=c*i-h,t[6]=l+e*i,t[10]=o*a):"ZXY"===e.order?(e=a*s,c=a*r,h=n*s,l=n*r,t[0]=e-l*i,t[4]=-o*r,t[8]=h+c*i,t[1]=c+h*i,t[5]=o*s,t[9]=l-e*i,t[2]=-o*n,t[6]=i,t[10]=o*a):"ZYX"===e.order?(e=o*s,c=o*r,h=i*s,l=i*r,t[0]=a*s,t[4]=h*n-c,t[8]=e*n+l,t[1]=a*r,t[5]=l*n+e,t[9]=c*n-h,t[2]=-n,t[6]=i*a,t[10]=o*a):"YZX"===e.order?(e=o*a,c=o*n,h=i*a,l=i*n,t[0]=a*s,t[4]=l-e*r,t[8]=h*r+c,t[1]=r,t[5]=o*s,t[9]=-i*s,t[2]=-n*s,t[6]=c*r+h,t[10]=e-l*r):"XZY"===e.order&&(e=o*a,c=o*n,h=i*a,l=i*n,t[0]=a*s,t[4]=-r,t[8]=n*s,t[1]=e*r+l,t[5]=o*s,t[9]=c*r-h,t[2]=h*r-c,t[6]=i*s,t[10]=l*r+e);t[3]=0;t[7]=0;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return this},makeRotationFromQuaternion:function(e){var t=this.elements,i=e.x,n=e.y,r=e.z,o=e.w,a=i+i,s=n+n,c=r+r;e=i*a;var h=i*s,i=i*c,l=n*s,n=n*c,r=r*c,a=o*a,s=o*s,o=o*c;t[0]=1-(l+r);t[4]=h-o;t[8]=i+s;t[1]=h+o;t[5]=1-(e+r);t[9]=n-a;t[2]=i-s;t[6]=n+a;t[10]=1-(e+l);t[3]=0;t[7]=0;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return this},lookAt:function(){var e,t,i;return function(n,r,o){void 0===e&&(e=new c,t=new c,i=new c);var a=this.elements;i.subVectors(n,r).normalize();0===i.lengthSq()&&(i.z=1);e.crossVectors(o,i).normalize();0===e.lengthSq()&&(i.z+=1e-4,e.crossVectors(o,i).normalize());t.crossVectors(i,e);a[0]=e.x;a[4]=t.x;a[8]=i.x;a[1]=e.y;a[5]=t.y;a[9]=i.y;a[2]=e.z;a[6]=t.z;a[10]=i.z;return this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.elements,n=t.elements,r=this.elements,o=i[0],a=i[4],s=i[8],c=i[12],h=i[1],l=i[5],u=i[9],p=i[13],d=i[2],f=i[6],m=i[10],g=i[14],v=i[3],y=i[7],x=i[11],i=i[15],_=n[0],b=n[4],w=n[8],M=n[12],E=n[1],T=n[5],S=n[9],A=n[13],L=n[2],R=n[6],P=n[10],C=n[14],I=n[3],U=n[7],N=n[11],n=n[15];r[0]=o*_+a*E+s*L+c*I;r[4]=o*b+a*T+s*R+c*U;r[8]=o*w+a*S+s*P+c*N;r[12]=o*M+a*A+s*C+c*n;r[1]=h*_+l*E+u*L+p*I;r[5]=h*b+l*T+u*R+p*U;r[9]=h*w+l*S+u*P+p*N;r[13]=h*M+l*A+u*C+p*n;r[2]=d*_+f*E+m*L+g*I;r[6]=d*b+f*T+m*R+g*U;r[10]=d*w+f*S+m*P+g*N;r[14]=d*M+f*A+m*C+g*n;r[3]=v*_+y*E+x*L+i*I;r[7]=v*b+y*T+x*R+i*U;r[11]=v*w+y*S+x*P+i*N;r[15]=v*M+y*A+x*C+i*n;return this},multiplyToArray:function(e,t,i){var n=this.elements;this.multiplyMatrices(e,t);i[0]=n[0];i[1]=n[1];i[2]=n[2];i[3]=n[3];i[4]=n[4];i[5]=n[5];i[6]=n[6];i[7]=n[7];i[8]=n[8];i[9]=n[9];i[10]=n[10];i[11]=n[11];i[12]=n[12];i[13]=n[13];i[14]=n[14];i[15]=n[15];return this},multiplyScalar:function(e){var t=this.elements;t[0]*=e;t[4]*=e;t[8]*=e;t[12]*=e;t[1]*=e;t[5]*=e;t[9]*=e;t[13]*=e;t[2]*=e;t[6]*=e;t[10]*=e;t[14]*=e;t[3]*=e;t[7]*=e;t[11]*=e;t[15]*=e;return this},applyToBufferAttribute:function(){var e;return function(t){void 0===e&&(e=new c);for(var i=0,n=t.count;i<n;i++)e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.applyMatrix4(this),t.setXYZ(i,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],i=e[4],n=e[8],r=e[12],o=e[1],a=e[5],s=e[9],c=e[13],h=e[2],l=e[6],u=e[10],p=e[14];return e[3]*(+r*s*l-n*c*l-r*a*u+i*c*u+n*a*p-i*s*p)+e[7]*(+t*s*p-t*c*u+r*o*u-n*o*p+n*c*h-r*s*h)+e[11]*(+t*c*l-t*a*p-r*o*l+i*o*p+r*a*h-i*c*h)+e[15]*(-n*a*h-t*s*l+t*a*u+n*o*l-i*o*u+i*s*h)},transpose:function(){var e=this.elements,t;t=e[1];e[1]=e[4];e[4]=t;t=e[2];e[2]=e[8];e[8]=t;t=e[6];e[6]=e[9];e[9]=t;t=e[3];e[3]=e[12];e[12]=t;t=e[7];e[7]=e[13];e[13]=t;t=e[11];e[11]=e[14];e[14]=t;return this},setPosition:function(e){var t=this.elements;t[12]=e.x;t[13]=e.y;t[14]=e.z;return this},getInverse:function(e,t){var i=this.elements,n=e.elements,r=n[0],o=n[1],a=n[2],s=n[3],c=n[4],h=n[5],l=n[6],u=n[7],p=n[8],d=n[9],f=n[10],m=n[11],g=n[12],v=n[13],y=n[14],n=n[15],x=d*y*u-v*f*u+v*l*m-h*y*m-d*l*n+h*f*n,_=g*f*u-p*y*u-g*l*m+c*y*m+p*l*n-c*f*n,b=p*v*u-g*d*u+g*h*m-c*v*m-p*h*n+c*d*n,w=g*d*l-p*v*l-g*h*f+c*v*f+p*h*y-c*d*y,M=r*x+o*_+a*b+s*w;if(0===M){if(!0===t)throw Error("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");console.warn("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");return this.identity()}M=1/M;i[0]=x*M;i[1]=(v*f*s-d*y*s-v*a*m+o*y*m+d*a*n-o*f*n)*M;i[2]=(h*y*s-v*l*s+v*a*u-o*y*u-h*a*n+o*l*n)*M;i[3]=(d*l*s-h*f*s-d*a*u+o*f*u+h*a*m-o*l*m)*M;i[4]=_*M;i[5]=(p*y*s-g*f*s+g*a*m-r*y*m-p*a*n+r*f*n)*M;i[6]=(g*l*s-c*y*s-g*a*u+r*y*u+c*a*n-r*l*n)*M;i[7]=(c*f*s-p*l*s+p*a*u-r*f*u-c*a*m+r*l*m)*M;i[8]=b*M;i[9]=(g*d*s-p*v*s-g*o*m+r*v*m+p*o*n-r*d*n)*M;i[10]=(c*v*s-g*h*s+g*o*u-r*v*u-c*o*n+r*h*n)*M;i[11]=(p*h*s-c*d*s-p*o*u+r*d*u+c*o*m-r*h*m)*M;i[12]=w*M;i[13]=(p*v*a-g*d*a+g*o*f-r*v*f-p*o*y+r*d*y)*M;i[14]=(g*h*a-c*v*a-g*o*l+r*v*l+c*o*y-r*h*y)*M;i[15]=(c*d*a-p*h*a+p*o*l-r*d*l-c*o*f+r*h*f)*M;return this},scale:function(e){var t=this.elements,i=e.x,n=e.y;e=e.z;t[0]*=i;t[4]*=n;t[8]*=e;t[1]*=i;t[5]*=n;t[9]*=e;t[2]*=i;t[6]*=n;t[10]*=e;t[3]*=i;t[7]*=n;t[11]*=e;return this},getMaxScaleOnAxis:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))},makeTranslation:function(e,t,i){this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1);return this},makeRotationX:function(e){var t=Math.cos(e);e=Math.sin(e);this.set(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1);return this},makeRotationY:function(e){var t=Math.cos(e);e=Math.sin(e);this.set(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1);return this},makeRotationZ:function(e){var t=Math.cos(e);e=Math.sin(e);this.set(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(e,t){var i=Math.cos(t),n=Math.sin(t),r=1-i,o=e.x,a=e.y,s=e.z,c=r*o,h=r*a;this.set(c*o+i,c*a-n*s,c*s+n*a,0,c*a+n*s,h*a+i,h*s-n*o,0,c*s-n*a,h*s+n*o,r*s*s+i,0,0,0,0,1);return this},makeScale:function(e,t,i){this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1);return this},makeShear:function(e,t,i){this.set(1,t,i,0,e,1,i,0,e,t,1,0,0,0,0,1);return this},compose:function(e,t,i){this.makeRotationFromQuaternion(t);this.scale(i);this.setPosition(e);return this},decompose:function(){var e,t;return function(i,n,r){void 0===e&&(e=new c,t=new h);var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),l=e.set(o[8],o[9],o[10]).length();0>this.determinant()&&(a=-a);i.x=o[12];i.y=o[13];i.z=o[14];t.elements.set(this.elements);i=1/a;var o=1/s,u=1/l;t.elements[0]*=i;t.elements[1]*=i;t.elements[2]*=i;t.elements[4]*=o;t.elements[5]*=o;t.elements[6]*=o;t.elements[8]*=u;t.elements[9]*=u;t.elements[10]*=u;n.setFromRotationMatrix(t);r.x=a;r.y=s;r.z=l;return this}}(),makePerspective:function(e,t,i,n,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements;a[0]=2*r/(t-e);a[4]=0;a[8]=(t+e)/(t-e);a[12]=0;a[1]=0;a[5]=2*r/(i-n);a[9]=(i+n)/(i-n);a[13]=0;a[2]=0;a[6]=0;a[10]=-(o+r)/(o-r);a[14]=-2*o*r/(o-r);a[3]=0;a[7]=0;a[11]=-1;a[15]=0;return this},makeOrthographic:function(e,t,i,n,r,o){var a=this.elements,s=1/(t-e),c=1/(i-n),h=1/(o-r);a[0]=2*s;a[4]=0;a[8]=0;a[12]=-((t+e)*s);a[1]=0;a[5]=2*c;a[9]=0;a[13]=-((i+n)*c);a[2]=0;a[6]=0;a[10]=-2*h;a[14]=-((o+r)*h);a[3]=0;a[7]=0;a[11]=0;a[15]=1;return this},equals:function(e){var t=this.elements;e=e.elements;for(var i=0;16>i;i++)if(t[i]!==e[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var i=0;16>i;i++)this.elements[i]=e[i+t];return this},toArray:function(e,t){void 0===e&&(e=[]);void 0===t&&(t=0);var i=this.elements;e[t]=i[0];e[t+1]=i[1];e[t+2]=i[2];e[t+3]=i[3];e[t+4]=i[4];e[t+5]=i[5];e[t+6]=i[6];e[t+7]=i[7];e[t+8]=i[8];e[t+9]=i[9];e[t+10]=i[10];e[t+11]=i[11];e[t+12]=i[12];e[t+13]=i[13];e[t+14]=i[14];e[t+15]=i[15];return e}};l.prototype=Object.create(n.prototype);l.prototype.constructor=l;l.prototype.isCubeTexture=!0;Object.defineProperty(l.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var ur=new n,pr=new l,dr=[],fr=[];G.prototype.setValue=function(e,t){for(var i=this.seq,n=0,r=i.length;n!==r;++n){var o=i[n];o.setValue(e,t[o.id])}};var mr=/([\w\d_]+)(\])?(\[|\.)?/g;H.prototype.setValue=function(e,t,i){t=this.map[t];void 0!==t&&t.setValue(e,i,this.renderer)};H.prototype.set=function(e,t,i){var n=this.map[i];void 0!==n&&n.setValue(e,t[i],this.renderer)};H.prototype.setOptional=function(e,t,i){t=t[i];void 0!==t&&this.setValue(e,i,t)};H.upload=function(e,t,i,n){for(var r=0,o=t.length;r!==o;++r){var a=t[r],s=i[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,n)}};H.seqWithValue=function(e,t){for(var i=[],n=0,r=e.length;n!==r;++n){var o=e[n];o.id in t&&i.push(o)}return i};var gr={merge:function(e){for(var t={},i=0;i<e.length;i++){var n=this.clone(e[i]),r;for(r in n)t[r]=n[r]}return t},clone:function(e){var t={},i;for(i in e){t[i]={};for(var n in e[i]){var r=e[i][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[i][n]=r.clone():Array.isArray(r)?t[i][n]=r.slice():t[i][n]=r}}return t}},vr={alphamap_fragment:"#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n	if ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n	reflectedLight.indirectDiffuse *= ambientOcclusion;\n	#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n	#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n		if( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n			float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n			float maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n			return distanceFalloff * maxDistanceCutoffFactor;\n#else\n			return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n		}\n		return 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n	return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n	return ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	return 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	return 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n	float a2 = pow2( alpha );\n	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n	return RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n	float alpha = pow2( roughness );\n	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n	float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n	float dotNH = saturate( dot( geometry.normal, halfDir ) );\n	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n	vec3 F = F_Schlick( specularColor, dotLH );\n	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n	float D = D_GGX( alpha, dotNH );\n	return F * ( G * D );\n}\nvec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {\n	const float LUT_SIZE  = 64.0;\n	const float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;\n	const float LUT_BIAS  = 0.5/LUT_SIZE;\n	vec3 N = geometry.normal;\n	vec3 V = geometry.viewDir;\n	vec3 P = geometry.position;\n	float theta = acos( dot( N, V ) );\n	vec2 uv = vec2(\n		sqrt( saturate( roughness ) ),\n		saturate( theta / ( 0.5 * PI ) ) );\n	uv = uv * LUT_SCALE + LUT_BIAS;\n	return uv;\n}\nvoid clipQuadToHorizon( inout vec3 L[5], out int n ) {\n	int config = 0;\n	if ( L[0].z > 0.0 ) config += 1;\n	if ( L[1].z > 0.0 ) config += 2;\n	if ( L[2].z > 0.0 ) config += 4;\n	if ( L[3].z > 0.0 ) config += 8;\n	n = 0;\n	if ( config == 0 ) {\n	} else if ( config == 1 ) {\n		n = 3;\n		L[1] = -L[1].z * L[0] + L[0].z * L[1];\n		L[2] = -L[3].z * L[0] + L[0].z * L[3];\n	} else if ( config == 2 ) {\n		n = 3;\n		L[0] = -L[0].z * L[1] + L[1].z * L[0];\n		L[2] = -L[2].z * L[1] + L[1].z * L[2];\n	} else if ( config == 3 ) {\n		n = 4;\n		L[2] = -L[2].z * L[1] + L[1].z * L[2];\n		L[3] = -L[3].z * L[0] + L[0].z * L[3];\n	} else if ( config == 4 ) {\n		n = 3;\n		L[0] = -L[3].z * L[2] + L[2].z * L[3];\n		L[1] = -L[1].z * L[2] + L[2].z * L[1];\n	} else if ( config == 5 ) {\n		n = 0;\n	} else if ( config == 6 ) {\n		n = 4;\n		L[0] = -L[0].z * L[1] + L[1].z * L[0];\n		L[3] = -L[3].z * L[2] + L[2].z * L[3];\n	} else if ( config == 7 ) {\n		n = 5;\n		L[4] = -L[3].z * L[0] + L[0].z * L[3];\n		L[3] = -L[3].z * L[2] + L[2].z * L[3];\n	} else if ( config == 8 ) {\n		n = 3;\n		L[0] = -L[0].z * L[3] + L[3].z * L[0];\n		L[1] = -L[2].z * L[3] + L[3].z * L[2];\n		L[2] =  L[3];\n	} else if ( config == 9 ) {\n		n = 4;\n		L[1] = -L[1].z * L[0] + L[0].z * L[1];\n		L[2] = -L[2].z * L[3] + L[3].z * L[2];\n	} else if ( config == 10 ) {\n		n = 0;\n	} else if ( config == 11 ) {\n		n = 5;\n		L[4] = L[3];\n		L[3] = -L[2].z * L[3] + L[3].z * L[2];\n		L[2] = -L[2].z * L[1] + L[1].z * L[2];\n	} else if ( config == 12 ) {\n		n = 4;\n		L[1] = -L[1].z * L[2] + L[2].z * L[1];\n		L[0] = -L[0].z * L[3] + L[3].z * L[0];\n	} else if ( config == 13 ) {\n		n = 5;\n		L[4] = L[3];\n		L[3] = L[2];\n		L[2] = -L[1].z * L[2] + L[2].z * L[1];\n		L[1] = -L[1].z * L[0] + L[0].z * L[1];\n	} else if ( config == 14 ) {\n		n = 5;\n		L[4] = -L[0].z * L[3] + L[3].z * L[0];\n		L[0] = -L[0].z * L[1] + L[1].z * L[0];\n	} else if ( config == 15 ) {\n		n = 4;\n	}\n	if ( n == 3 )\n		L[3] = L[0];\n	if ( n == 4 )\n		L[4] = L[0];\n}\nfloat integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {\n	float cosTheta = dot( v1, v2 );\n	float theta = acos( cosTheta );\n	float res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );\n	return res;\n}\nvoid initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {\n	rectPoints[0] = pos - halfWidth - halfHeight;\n	rectPoints[1] = pos + halfWidth - halfHeight;\n	rectPoints[2] = pos + halfWidth + halfHeight;\n	rectPoints[3] = pos - halfWidth + halfHeight;\n}\nvec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {\n	vec3 N = geometry.normal;\n	vec3 V = geometry.viewDir;\n	vec3 P = geometry.position;\n	vec3 T1, T2;\n	T1 = normalize(V - N * dot( V, N ));\n	T2 = - cross( N, T1 );\n	mat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );\n	vec3 clippedRect[5];\n	clippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );\n	clippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );\n	clippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );\n	clippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );\n	int n;\n	clipQuadToHorizon(clippedRect, n);\n	if ( n == 0 )\n		return vec3( 0, 0, 0 );\n	clippedRect[0] = normalize( clippedRect[0] );\n	clippedRect[1] = normalize( clippedRect[1] );\n	clippedRect[2] = normalize( clippedRect[2] );\n	clippedRect[3] = normalize( clippedRect[3] );\n	clippedRect[4] = normalize( clippedRect[4] );\n	float sum = 0.0;\n	sum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );\n	sum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );\n	sum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );\n	if (n >= 4)\n		sum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );\n	if (n == 5)\n		sum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );\n	sum = max( 0.0, sum );\n	vec3 Lo_i = vec3( sum, sum, sum );\n	return Lo_i;\n}\nvec3 Rect_Area_Light_Specular_Reflectance(\n		const in GeometricContext geometry,\n		const in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,\n		const in float roughness,\n		const in sampler2D ltcMat, const in sampler2D ltcMag ) {\n	vec3 rectPoints[4];\n	initRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n	vec2 uv = ltcTextureCoords( geometry, roughness );\n	vec4 brdfLtcApproxParams, t;\n	brdfLtcApproxParams = texture2D( ltcMat, uv );\n	t = texture2D( ltcMat, uv );\n	float brdfLtcScalar = texture2D( ltcMag, uv ).a;\n	mat3 brdfLtcApproxMat = mat3(\n		vec3(   1,   0, t.y ),\n		vec3(   0, t.z,   0 ),\n		vec3( t.w,   0, t.x )\n	);\n	vec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );\n	specularReflectance *= brdfLtcScalar;\n	return specularReflectance;\n}\nvec3 Rect_Area_Light_Diffuse_Reflectance(\n		const in GeometricContext geometry,\n		const in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {\n	vec3 rectPoints[4];\n	initRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n	mat3 diffuseBrdfMat = mat3(1);\n	vec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );\n	return diffuseReflectance;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n	vec4 r = roughness * c0 + c1;\n	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n	vec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n	return specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n	return 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n	float dotNH = saturate( dot( geometry.normal, halfDir ) );\n	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n	vec3 F = F_Schlick( specularColor, dotLH );\n	float G = G_BlinnPhong_Implicit( );\n	float D = D_BlinnPhong( shininess, dotNH );\n	return F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n	vec2 dHdxy_fwd() {\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n		return vec2( dBx, dBy );\n	}\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n		vec3 vSigmaX = dFdx( surf_pos );\n		vec3 vSigmaY = dFdy( surf_pos );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n		float fDet = dot( vSigmaX, R1 );\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n	}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n	for ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n		vec4 plane = clippingPlanes[ i ];\n		if ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n	}\n		\n	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n		bool clipped = true;\n		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n			vec4 plane = clippingPlanes[ i ];\n			clipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n		}\n		if ( clipped ) discard;\n	\n	#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n	#if ! defined( PHYSICAL ) && ! defined( PHONG )\n		varying vec3 vViewPosition;\n	#endif\n	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n	varying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n	vViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n	diffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n	varying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n	varying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n	vColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n	const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n	return fract(sin(sn) * c);\n}\nstruct IncidentLight {\n	vec3 color;\n	vec3 direction;\n	bool visible;\n};\nstruct ReflectedLight {\n	vec3 directDiffuse;\n	vec3 directSpecular;\n	vec3 indirectDiffuse;\n	vec3 indirectSpecular;\n};\nstruct GeometricContext {\n	vec3 position;\n	vec3 normal;\n	vec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	float distance = dot( planeNormal, point - pointOnPlane );\n	return - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n	mat3 tmp;\n	tmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n	tmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n	tmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n	return tmp;\n}\n",
cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n	vec3 absDirection = abs(direction);\n	int face = -1;\n	if( absDirection.x > absDirection.z ) {\n		if(absDirection.x > absDirection.y )\n			face = direction.x > 0.0 ? 0 : 3;\n		else\n			face = direction.y > 0.0 ? 1 : 4;\n	}\n	else {\n		if(absDirection.z > absDirection.y )\n			face = direction.z > 0.0 ? 2 : 5;\n		else\n			face = direction.y > 0.0 ? 1 : 4;\n	}\n	return face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n	float scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n	float dxRoughness = dFdx(roughness);\n	float dyRoughness = dFdy(roughness);\n	vec3 dx = dFdx( vec * scale * dxRoughness );\n	vec3 dy = dFdy( vec * scale * dyRoughness );\n	float d = max( dot( dx, dx ), dot( dy, dy ) );\n	d = clamp(d, 1.0, cubeUV_rangeClamp);\n	float mipLevel = 0.5 * log2(d);\n	return vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n	mipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n	float a = 16.0 * cubeUV_rcpTextureSize;\n	vec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n	vec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n	float powScale = exp2_packed.x * exp2_packed.y;\n	float scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n	float mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n	bool bRes = mipLevel == 0.0;\n	scale =  bRes && (scale < a) ? a : scale;\n	vec3 r;\n	vec2 offset;\n	int face = getFaceFromDirection(direction);\n	float rcpPowScale = 1.0 / powScale;\n	if( face == 0) {\n		r = vec3(direction.x, -direction.z, direction.y);\n		offset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n	}\n	else if( face == 1) {\n		r = vec3(direction.y, direction.x, direction.z);\n		offset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n	}\n	else if( face == 2) {\n		r = vec3(direction.z, direction.x, direction.y);\n		offset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n	}\n	else if( face == 3) {\n		r = vec3(direction.x, direction.z, direction.y);\n		offset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n	}\n	else if( face == 4) {\n		r = vec3(direction.y, direction.x, -direction.z);\n		offset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n	}\n	else {\n		r = vec3(direction.z, -direction.x, direction.y);\n		offset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n	}\n	r = normalize(r);\n	float texelOffset = 0.5 * cubeUV_rcpTextureSize;\n	vec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n	vec2 base = offset + vec2( texelOffset );\n	return base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n	float roughnessVal = roughness* cubeUV_maxLods3;\n	float r1 = floor(roughnessVal);\n	float r2 = r1 + 1.0;\n	float t = fract(roughnessVal);\n	vec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n	float s = mipInfo.y;\n	float level0 = mipInfo.x;\n	float level1 = level0 + 1.0;\n	level1 = level1 > 5.0 ? 5.0 : level1;\n	level0 += min( floor( s + 0.5 ), 5.0 );\n	vec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n	vec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n	vec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n	vec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n	vec4 result = mix(color10, color20, t);\n	return vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"#ifdef FLIP_SIDED\n	objectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n	transformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n	vec4 emissiveColor = texture2D( emissiveMap, vUv );\n	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n	totalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n	uniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n	return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n	return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n	return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n	float maxComponent = max( max( value.r, value.g ), value.b );\n	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n	return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n	float maxRGB = max( value.x, max( value.g, value.b ) );\n	float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n	M            = ceil( M * 255.0 ) / 255.0;\n	return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n	float maxRGB = max( value.x, max( value.g, value.b ) );\n	float D      = max( maxRange / maxRGB, 1.0 );\n	D            = min( floor( D ) / 255.0, 1.0 );\n	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n	vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n	Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n	vec4 vResult;\n	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n	vResult.w = fract(Le);\n	vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n	return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n	float Le = value.z * 255.0 + value.w;\n	vec3 Xp_Y_XYZp;\n	Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n	vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n	return vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( cameraToVertex, worldNormal );\n		#else\n			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#else\n		vec3 reflectVec = vReflect;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n	#elif defined( ENVMAP_TYPE_EQUIREC )\n		vec2 sampleUV;\n		sampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n		sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n		vec4 envColor = texture2D( envMap, sampleUV );\n	#elif defined( ENVMAP_TYPE_SPHERE )\n		vec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n	#else\n		vec4 envColor = vec4( 0.0 );\n	#endif\n	envColor = envMapTexelToLinear( envColor );\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_MIX )\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_ADD )\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n	#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n	uniform float reflectivity;\n	uniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n	#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n		varying vec3 vWorldPosition;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	uniform float flipEnvMap;\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n		uniform float refractionRatio;\n	#else\n		varying vec3 vReflect;\n	#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n		varying vec3 vWorldPosition;\n	#else\n		varying vec3 vReflect;\n		uniform float refractionRatio;\n	#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n		vWorldPosition = worldPosition.xyz;\n	#else\n		vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vReflect = reflect( cameraToVertex, worldNormal );\n		#else\n			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n	#ifdef FOG_EXP2\n		float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n	#else\n		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n	#endif\n	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n	uniform vec3 fogColor;\n	varying float fogDepth;\n	#ifdef FOG_EXP2\n		uniform float fogDensity;\n	#else\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n	uniform sampler2D gradientMap;\n	vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n		float dotNL = dot( normal, lightDirection );\n		vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n		#ifdef USE_GRADIENTMAP\n			return texture2D( gradientMap, coord ).rgb;\n		#else\n			return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n		#endif\n	}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n	reflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n	vLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_DIR_LIGHTS > 0\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n		vLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n		#ifdef DOUBLE_SIDED\n			vLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n		#endif\n	}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n	vec3 irradiance = ambientLightColor;\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	return irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n	struct DirectionalLight {\n		vec3 direction;\n		vec3 color;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n	};\n	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n		directLight.color = directionalLight.color;\n		directLight.direction = directionalLight.direction;\n		directLight.visible = true;\n	}\n#endif\n#if NUM_POINT_LIGHTS > 0\n	struct PointLight {\n		vec3 position;\n		vec3 color;\n		float distance;\n		float decay;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n	};\n	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n		vec3 lVector = pointLight.position - geometry.position;\n		directLight.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		directLight.color = pointLight.color;\n		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n		directLight.visible = ( directLight.color != vec3( 0.0 ) );\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	struct SpotLight {\n		vec3 position;\n		vec3 direction;\n		vec3 color;\n		float distance;\n		float decay;\n		float coneCos;\n		float penumbraCos;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n	};\n	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n		vec3 lVector = spotLight.position - geometry.position;\n		directLight.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		float angleCos = dot( directLight.direction, spotLight.direction );\n		if ( angleCos > spotLight.coneCos ) {\n			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n			directLight.color = spotLight.color;\n			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n			directLight.visible = true;\n		} else {\n			directLight.color = vec3( 0.0 );\n			directLight.visible = false;\n		}\n	}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n	struct RectAreaLight {\n		vec3 color;\n		vec3 position;\n		vec3 halfWidth;\n		vec3 halfHeight;\n	};\n	uniform sampler2D ltcMat;	uniform sampler2D ltcMag;\n	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	struct HemisphereLight {\n		vec3 direction;\n		vec3 skyColor;\n		vec3 groundColor;\n	};\n	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n		float dotNL = dot( geometry.normal, hemiLight.direction );\n		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n		#ifndef PHYSICALLY_CORRECT_LIGHTS\n			irradiance *= PI;\n		#endif\n		return irradiance;\n	}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n		#ifdef ENVMAP_TYPE_CUBE\n			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n			#else\n				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#elif defined( ENVMAP_TYPE_CUBE_UV )\n			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n			vec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n		#else\n			vec4 envMapColor = vec4( 0.0 );\n		#endif\n		return PI * envMapColor.rgb * envMapIntensity;\n	}\n	float getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n		float maxMIPLevelScalar = float( maxMIPLevel );\n		float desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n	}\n	vec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n		#else\n			vec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n		#endif\n		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n		float specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n		#ifdef ENVMAP_TYPE_CUBE\n			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n			#else\n				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#elif defined( ENVMAP_TYPE_CUBE_UV )\n			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n			vec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n		#elif defined( ENVMAP_TYPE_EQUIREC )\n			vec2 sampleUV;\n			sampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n			sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n			#else\n				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#elif defined( ENVMAP_TYPE_SPHERE )\n			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n			#else\n				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#endif\n		return envMapColor.rgb * envMapIntensity;\n	}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n	vec3	diffuseColor;\n	vec3	specularColor;\n	float	specularShininess;\n	float	specularStrength;\n};\n#if NUM_RECT_AREA_LIGHTS > 0\n	void RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n		vec3 matDiffColor = material.diffuseColor;\n		vec3 matSpecColor = material.specularColor;\n		vec3 lightColor   = rectAreaLight.color;\n		float roughness = BlinnExponentToGGXRoughness( material.specularShininess );\n		vec3 spec = Rect_Area_Light_Specular_Reflectance(\n				geometry,\n				rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n				roughness,\n				ltcMat, ltcMag );\n		vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n				geometry,\n				rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n		reflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;\n		reflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;\n	}\n#endif\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	#ifdef TOON\n		vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n	#else\n		float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n		vec3 irradiance = dotNL * directLight.color;\n	#endif\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_BlinnPhong\n#define RE_Direct_RectArea		RE_Direct_RectArea_BlinnPhong\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )	(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n	material.clearCoat = saturate( clearCoat );	material.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n	vec3	diffuseColor;\n	float	specularRoughness;\n	vec3	specularColor;\n	#ifndef STANDARD\n		float clearCoat;\n		float clearCoatRoughness;\n	#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n		vec3 matDiffColor = material.diffuseColor;\n		vec3 matSpecColor = material.specularColor;\n		vec3 lightColor   = rectAreaLight.color;\n		float roughness = material.specularRoughness;\n		vec3 spec = Rect_Area_Light_Specular_Reflectance(\n				geometry,\n				rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n				roughness,\n				ltcMat, ltcMag );\n		vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n				geometry,\n				rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n		reflectedLight.directSpecular += lightColor * matSpecColor * spec;\n		reflectedLight.directDiffuse  += lightColor * matDiffColor * diff;\n	}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	#ifndef STANDARD\n		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n	#else\n		float clearCoatDHR = 0.0;\n	#endif\n	reflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n	reflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n	#ifndef STANDARD\n		reflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n	#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	#ifndef STANDARD\n		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n		float dotNL = dotNV;\n		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n	#else\n		float clearCoatDHR = 0.0;\n	#endif\n	reflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n	#ifndef STANDARD\n		reflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n	#endif\n}\n#define RE_Direct				RE_Direct_Physical\n#define RE_Direct_RectArea		RE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular		RE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n	PointLight pointLight;\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		getPointDirectLightIrradiance( pointLight, geometry, directLight );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n	SpotLight spotLight;\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		getSpotDirectLightIrradiance( spotLight, geometry, directLight );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n	DirectionalLight directionalLight;\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n	RectAreaLight rectAreaLight;\n	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n		rectAreaLight = rectAreaLights[ i ];\n		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n	}\n#endif\n#if defined( RE_IndirectDiffuse )\n	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n	#ifdef USE_LIGHTMAP\n		vec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n		#ifndef PHYSICALLY_CORRECT_LIGHTS\n			lightMapIrradiance *= PI;\n		#endif\n		irradiance += lightMapIrradiance;\n	#endif\n	#if ( NUM_HEMI_LIGHTS > 0 )\n		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n		}\n	#endif\n	#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n		irradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n	#endif\n	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n	vec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n	#ifndef STANDARD\n		vec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n	#else\n		vec3 clearCoatRadiance = vec3( 0.0 );\n	#endif\n	RE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",
logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n	uniform float logDepthBufFC;\n	#ifdef USE_LOGDEPTHBUF_EXT\n		varying float vFragDepth;\n	#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n	#ifdef USE_LOGDEPTHBUF_EXT\n		varying float vFragDepth;\n	#endif\n	uniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n	gl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n	#ifdef USE_LOGDEPTHBUF_EXT\n		vFragDepth = 1.0 + gl_Position.w;\n	#else\n		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n	#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n	vec4 texelColor = texture2D( map, vUv );\n	texelColor = mapTexelToLinear( texelColor );\n	diffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n	uniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n	vec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n	diffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n	uniform vec4 offsetRepeat;\n	uniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n	vec4 texelMetalness = texture2D( metalnessMap, vUv );\n	metalnessFactor *= texelMetalness.r;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n	uniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n	objectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	objectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	objectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	objectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n	#ifndef USE_MORPHNORMALS\n	uniform float morphTargetInfluences[ 8 ];\n	#else\n	uniform float morphTargetInfluences[ 4 ];\n	#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n	transformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	transformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	transformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	transformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n	#ifndef USE_MORPHNORMALS\n	transformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	transformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	transformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	transformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n	#endif\n#endif\n",normal_flip:"#ifdef DOUBLE_SIDED\n	float flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n	float flipNormal = 1.0;\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n#else\n	vec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n	}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n	return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n	return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n	vec4 r = vec4( fract( v * PackFactors ), v );\n	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n	return dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n	return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n	return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n	gl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"#ifdef USE_SKINNING\n	vec4 mvPosition = modelViewMatrix * skinned;\n#else\n	vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n	vec4 texelRoughness = texture2D( roughnessMap, vUv );\n	roughnessFactor *= texelRoughness.r;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n	uniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n	#endif\n	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n	}\n	float texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n		const vec2 offset = vec2( 0.0, 1.0 );\n		vec2 texelSize = vec2( 1.0 ) / size;\n		vec2 centroidUV = floor( uv * size + 0.5 ) / size;\n		float lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n		float lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n		float rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n		float rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n		vec2 f = fract( uv * size + 0.5 );\n		float a = mix( lb, lt, f.y );\n		float b = mix( rb, rt, f.y );\n		float c = mix( a, b, f.x );\n		return c;\n	}\n	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		shadowCoord.xyz /= shadowCoord.w;\n		shadowCoord.z += shadowBias;\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n		bool frustumTest = all( frustumTestVec );\n		if ( frustumTest ) {\n		#if defined( SHADOWMAP_TYPE_PCF )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			return (\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 9.0 );\n		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			return (\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 9.0 );\n		#else\n			return texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#endif\n		}\n		return 1.0;\n	}\n	vec2 cubeToUV( vec3 v, float texelSizeY ) {\n		vec3 absV = abs( v );\n		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n		absV *= scaleToCube;\n		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n		vec2 planar = v.xy;\n		float almostATexel = 1.5 * texelSizeY;\n		float almostOne = 1.0 - almostATexel;\n		if ( absV.z >= almostOne ) {\n			if ( v.z > 0.0 )\n				planar.x = 4.0 - v.x;\n		} else if ( absV.x >= almostOne ) {\n			float signX = sign( v.x );\n			planar.x = v.z * signX + 2.0 * signX;\n		} else if ( absV.y >= almostOne ) {\n			float signY = sign( v.y );\n			planar.x = v.x + 2.0 * signY + 2.0;\n			planar.y = v.z * signY - 2.0;\n		}\n		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n	}\n	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n		vec3 lightToPosition = shadowCoord.xyz;\n		vec3 bd3D = normalize( lightToPosition );\n		float dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n			return (\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n			) * ( 1.0 / 9.0 );\n		#else\n			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n		#endif\n	}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n	#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n	float shadow = 1.0;\n	#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n	DirectionalLight directionalLight;\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		shadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n	}\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n	SpotLight spotLight;\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		shadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n	}\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n	PointLight pointLight;\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		shadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n	}\n	#endif\n	#endif\n	return shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n	#ifdef BONE_TEXTURE\n		uniform sampler2D boneTexture;\n		uniform int boneTextureWidth;\n		uniform int boneTextureHeight;\n		mat4 getBoneMatrix( const in float i ) {\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureWidth ) );\n			float y = floor( j / float( boneTextureWidth ) );\n			float dx = 1.0 / float( boneTextureWidth );\n			float dy = 1.0 / float( boneTextureHeight );\n			y = dy * ( y + 0.5 );\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n			mat4 bone = mat4( v1, v2, v3, v4 );\n			return bone;\n		}\n	#else\n		uniform mat4 boneMatrices[ MAX_BONES ];\n		mat4 getBoneMatrix( const in float i ) {\n			mat4 bone = boneMatrices[ int(i) ];\n			return bone;\n		}\n	#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	skinned  = bindMatrixInverse * skinned;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n#else\n	specularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n	return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	color = max( vec3( 0.0 ), color - 0.004 );\n	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	varying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	varying vec2 vUv;\n	uniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	varying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	attribute vec2 uv2;\n	varying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	vUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n	#ifdef USE_SKINNING\n		vec4 worldPosition = modelMatrix * skinned;\n	#else\n		vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n	#endif\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n	gl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n	vWorldPosition = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n	uniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( 1.0 );\n	#if DEPTH_PACKING == 3200\n		diffuseColor.a = opacity;\n	#endif\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <logdepthbuf_fragment>\n	#if DEPTH_PACKING == 3200\n		gl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n	#elif DEPTH_PACKING == 3201\n		gl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n	#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <skinbase_vertex>\n	#include <begin_vertex>\n	#include <displacementmap_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n	#include <clipping_planes_fragment>\n	gl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",distanceRGBA_vert:"varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <skinbase_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	vWorldPosition = worldPosition;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n	vec3 direction = normalize( vWorldPosition );\n	vec2 sampleUV;\n	sampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n	sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n	gl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n	vWorldPosition = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <color_fragment>\n	outgoingLight = diffuseColor.rgb;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <color_vertex>\n	vLineDistance = scale * lineDistance;\n	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	#ifdef USE_LIGHTMAP\n		reflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n	#else\n		reflectedLight.indirectDiffuse += vec3( 1.0 );\n	#endif\n	#include <aomap_fragment>\n	reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n	vec3 outgoingLight = reflectedLight.indirectDiffuse;\n	#include <normal_flip>\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_ENVMAP\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	#include <envmap_vertex>\n	#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <emissivemap_fragment>\n	reflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n	#include <lightmap_fragment>\n	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n	#ifdef DOUBLE_SIDED\n		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n	#else\n		reflectedLight.directDiffuse = vLightFront;\n	#endif\n	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <normal_flip>\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <lights_lambert_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <normal_flip>\n	#include <normal_fragment>\n	#include <emissivemap_fragment>\n	#include <lights_phong_fragment>\n	#include <lights_template>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n#endif\n	#include <begin_vertex>\n	#include <displacementmap_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}\n",
meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n	uniform float clearCoat;\n	uniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <roughnessmap_fragment>\n	#include <metalnessmap_fragment>\n	#include <normal_flip>\n	#include <normal_fragment>\n	#include <emissivemap_fragment>\n	#include <lights_physical_fragment>\n	#include <lights_template>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n#endif\n	#include <begin_vertex>\n	#include <displacementmap_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n	varying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n	#include <logdepthbuf_fragment>\n	#include <normal_flip>\n	#include <normal_fragment>\n	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n	varying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n#endif\n	#include <begin_vertex>\n	#include <displacementmap_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n	vViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_particle_fragment>\n	#include <color_fragment>\n	#include <alphatest_fragment>\n	outgoingLight = diffuseColor.rgb;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <color_vertex>\n	#include <begin_vertex>\n	#include <project_vertex>\n	#ifdef USE_SIZEATTENUATION\n		gl_PointSize = size * ( scale / - mvPosition.z );\n	#else\n		gl_PointSize = size;\n	#endif\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}\n",shadow_frag:"uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n	gl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0 - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n	#include <begin_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n}\n"};V.prototype={constructor:V,isColor:!0,r:1,g:1,b:1,set:function(e){e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e);return this},setScalar:function(e){this.b=this.g=this.r=e;return this},setHex:function(e){e=Math.floor(e);this.r=(e>>16&255)/255;this.g=(e>>8&255)/255;this.b=(e&255)/255;return this},setRGB:function(e,t,i){this.r=e;this.g=t;this.b=i;return this},setHSL:function(){function e(e,t,i){0>i&&(i+=1);1<i&&--i;return i<1/6?e+6*(t-e)*i:.5>i?t:i<2/3?e+6*(t-e)*(2/3-i):e}return function(t,i,n){t=hr.euclideanModulo(t,1);i=hr.clamp(i,0,1);n=hr.clamp(n,0,1);0===i?this.r=this.g=this.b=n:(i=.5>=n?n*(1+i):n+i-n*i,n=2*n-i,this.r=e(n,i,t+1/3),this.g=e(n,i,t),this.b=e(n,i,t-1/3));return this}}(),setStyle:function(e){function t(t){void 0!==t&&1>parseFloat(t)&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var n=i[2];switch(i[1]){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n)){var n=parseFloat(i[1])/360,r=parseInt(i[2],10)/100,o=parseInt(i[3],10)/100;t(i[5]);return this.setHSL(n,r,o)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(e)){i=i[1];n=i.length;if(3===n)return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,this;if(6===n)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,this}e&&0<e.length&&(i=yr[e],void 0!==i?this.setHex(i):console.warn("THREE.Color: Unknown color "+e));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){this.r=e.r;this.g=e.g;this.b=e.b;return this},copyGammaToLinear:function(e,t){void 0===t&&(t=2);this.r=Math.pow(e.r,t);this.g=Math.pow(e.g,t);this.b=Math.pow(e.b,t);return this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var i=0<t?1/t:1;this.r=Math.pow(e.r,i);this.g=Math.pow(e.g,i);this.b=Math.pow(e.b,i);return this},convertGammaToLinear:function(){var e=this.r,t=this.g,i=this.b;this.r=e*e;this.g=t*t;this.b=i*i;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){e=e||{h:0,s:0,l:0};var t=this.r,i=this.g,n=this.b,r=Math.max(t,i,n),o=Math.min(t,i,n),a,s=(o+r)/2;if(o===r)o=a=0;else{var c=r-o,o=.5>=s?c/(r+o):c/(2-r-o);switch(r){case t:a=(i-n)/c+(i<n?6:0);break;case i:a=(n-t)/c+2;break;case n:a=(t-i)/c+4}a/=6}e.h=a;e.s=o;e.l=s;return e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,i){var n=this.getHSL();n.h+=e;n.s+=t;n.l+=i;this.setHSL(n.h,n.s,n.l);return this},add:function(e){this.r+=e.r;this.g+=e.g;this.b+=e.b;return this},addColors:function(e,t){this.r=e.r+t.r;this.g=e.g+t.g;this.b=e.b+t.b;return this},addScalar:function(e){this.r+=e;this.g+=e;this.b+=e;return this},sub:function(e){this.r=Math.max(0,this.r-e.r);this.g=Math.max(0,this.g-e.g);this.b=Math.max(0,this.b-e.b);return this},multiply:function(e){this.r*=e.r;this.g*=e.g;this.b*=e.b;return this},multiplyScalar:function(e){this.r*=e;this.g*=e;this.b*=e;return this},lerp:function(e,t){this.r+=(e.r-this.r)*t;this.g+=(e.g-this.g)*t;this.b+=(e.b-this.b)*t;return this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){void 0===t&&(t=0);this.r=e[t];this.g=e[t+1];this.b=e[t+2];return this},toArray:function(e,t){void 0===e&&(e=[]);void 0===t&&(t=0);e[t]=this.r;e[t+1]=this.g;e[t+2]=this.b;return e},toJSON:function(){return this.getHex()}};var yr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};k.prototype=Object.create(n.prototype);k.prototype.constructor=k;k.prototype.isDataTexture=!0;var xr={common:{diffuse:{value:new V(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new r(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new i(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new V(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new V(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new r(0,0,1,1)}}},_r={basic:{uniforms:gr.merge([xr.common,xr.aomap,xr.lightmap,xr.fog]),vertexShader:vr.meshbasic_vert,fragmentShader:vr.meshbasic_frag},lambert:{uniforms:gr.merge([xr.common,xr.aomap,xr.lightmap,xr.emissivemap,xr.fog,xr.lights,{emissive:{value:new V(0)}}]),vertexShader:vr.meshlambert_vert,fragmentShader:vr.meshlambert_frag},phong:{uniforms:gr.merge([xr.common,xr.aomap,xr.lightmap,xr.emissivemap,xr.bumpmap,xr.normalmap,xr.displacementmap,xr.gradientmap,xr.fog,xr.lights,{emissive:{value:new V(0)},specular:{value:new V(1118481)},shininess:{value:30}}]),vertexShader:vr.meshphong_vert,fragmentShader:vr.meshphong_frag},standard:{uniforms:gr.merge([xr.common,xr.aomap,xr.lightmap,xr.emissivemap,xr.bumpmap,xr.normalmap,xr.displacementmap,xr.roughnessmap,xr.metalnessmap,xr.fog,xr.lights,{emissive:{value:new V(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:vr.meshphysical_vert,fragmentShader:vr.meshphysical_frag},points:{uniforms:gr.merge([xr.points,xr.fog]),vertexShader:vr.points_vert,fragmentShader:vr.points_frag},dashed:{uniforms:gr.merge([xr.common,xr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:vr.linedashed_vert,fragmentShader:vr.linedashed_frag},depth:{uniforms:gr.merge([xr.common,xr.displacementmap]),vertexShader:vr.depth_vert,fragmentShader:vr.depth_frag},normal:{uniforms:gr.merge([xr.common,xr.bumpmap,xr.normalmap,xr.displacementmap,{opacity:{value:1}}]),vertexShader:vr.normal_vert,fragmentShader:vr.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:vr.cube_vert,fragmentShader:vr.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:vr.equirect_vert,fragmentShader:vr.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new c}},vertexShader:vr.distanceRGBA_vert,fragmentShader:vr.distanceRGBA_frag}};_r.physical={uniforms:gr.merge([_r.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:vr.meshphysical_vert,fragmentShader:vr.meshphysical_frag};j.prototype={constructor:j,set:function(e,t){this.min.copy(e);this.max.copy(t);return this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new i;return function(t,i){var n=e.copy(i).multiplyScalar(.5);this.min.copy(t).sub(n);this.max.copy(t).add(n);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.min.copy(e.min);this.max.copy(e.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){e=e||new i;return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){e=e||new i;return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){this.min.min(e);this.max.max(e);return this},expandByVector:function(e){this.min.sub(e);this.max.add(e);return this},expandByScalar:function(e){this.min.addScalar(-e);this.max.addScalar(e);return this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return(t||new i).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y?!1:!0},clampPoint:function(e,t){return(t||new i).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new i;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){this.min.max(e.min);this.max.min(e.max);return this},union:function(e){this.min.min(e.min);this.max.max(e.max);return this},translate:function(e){this.min.add(e);this.max.add(e);return this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};var br=0;q.prototype={constructor:q,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){!0===e&&this.update();this._needsUpdate=e},setValues:function(e){if(void 0!==e)for(var t in e){var i=e[t];if(void 0===i)console.warn("THREE.Material: '"+t+"' parameter is undefined.");else{var n=this[t];void 0===n?console.warn("THREE."+this.type+": '"+t+"' is not a property of this material."):n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[t]="overdraw"===t?Number(i):i}}},toJSON:function(e){function t(e){var t=[],i;for(i in e){var n=e[i];delete n.metadata;t.push(n)}return t}var i=void 0===e;i&&(e={textures:{},images:{}});var n={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid;n.type=this.type;""!==this.name&&(n.name=this.name);this.color&&this.color.isColor&&(n.color=this.color.getHex());void 0!==this.roughness&&(n.roughness=this.roughness);void 0!==this.metalness&&(n.metalness=this.metalness);this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex());this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex());void 0!==this.shininess&&(n.shininess=this.shininess);void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat);void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness);this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid);this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid);this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid);this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale);this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalScale=this.normalScale.toArray());this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias);this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid);this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid);this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid);this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity);this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid);void 0!==this.size&&(n.size=this.size);void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation);1!==this.blending&&(n.blending=this.blending);2!==this.shading&&(n.shading=this.shading);0!==this.side&&(n.side=this.side);0!==this.vertexColors&&(n.vertexColors=this.vertexColors);1>this.opacity&&(n.opacity=this.opacity);!0===this.transparent&&(n.transparent=this.transparent);n.depthFunc=this.depthFunc;n.depthTest=this.depthTest;n.depthWrite=this.depthWrite;0<this.alphaTest&&(n.alphaTest=this.alphaTest);!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha);!0===this.wireframe&&(n.wireframe=this.wireframe);1<this.wireframeLinewidth&&(n.wireframeLinewidth=this.wireframeLinewidth);"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap);"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin);n.skinning=this.skinning;n.morphTargets=this.morphTargets;i&&(i=t(e.textures),e=t(e.images),0<i.length&&(n.textures=i),0<e.length&&(n.images=e));return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name;this.fog=e.fog;this.lights=e.lights;this.blending=e.blending;this.side=e.side;this.shading=e.shading;this.vertexColors=e.vertexColors;this.opacity=e.opacity;this.transparent=e.transparent;this.blendSrc=e.blendSrc;this.blendDst=e.blendDst;this.blendEquation=e.blendEquation;this.blendSrcAlpha=e.blendSrcAlpha;this.blendDstAlpha=e.blendDstAlpha;this.blendEquationAlpha=e.blendEquationAlpha;this.depthFunc=e.depthFunc;this.depthTest=e.depthTest;this.depthWrite=e.depthWrite;this.colorWrite=e.colorWrite;this.precision=e.precision;this.polygonOffset=e.polygonOffset;this.polygonOffsetFactor=e.polygonOffsetFactor;this.polygonOffsetUnits=e.polygonOffsetUnits;this.alphaTest=e.alphaTest;this.premultipliedAlpha=e.premultipliedAlpha;this.overdraw=e.overdraw;this.visible=e.visible;this.clipShadows=e.clipShadows;this.clipIntersection=e.clipIntersection;e=e.clippingPlanes;var t=null;if(null!==e)for(var i=e.length,t=Array(i),n=0;n!==i;++n)t[n]=e[n].clone();this.clippingPlanes=t;return this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}};Object.assign(q.prototype,t.prototype);Y.prototype=Object.create(q.prototype);Y.prototype.constructor=Y;Y.prototype.isShaderMaterial=!0;Y.prototype.copy=function(e){q.prototype.copy.call(this,e);this.fragmentShader=e.fragmentShader;this.vertexShader=e.vertexShader;this.uniforms=gr.clone(e.uniforms);this.defines=e.defines;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.lights=e.lights;this.clipping=e.clipping;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;this.extensions=e.extensions;return this};Y.prototype.toJSON=function(e){e=q.prototype.toJSON.call(this,e);e.uniforms=this.uniforms;e.vertexShader=this.vertexShader;e.fragmentShader=this.fragmentShader;return e};Z.prototype=Object.create(q.prototype);Z.prototype.constructor=Z;Z.prototype.isMeshDepthMaterial=!0;Z.prototype.copy=function(e){q.prototype.copy.call(this,e);this.depthPacking=e.depthPacking;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.map=e.map;this.alphaMap=e.alphaMap;this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;return this};J.prototype={constructor:J,isBox3:!0,set:function(e,t){this.min.copy(e);this.max.copy(t);return this},setFromArray:function(e){for(var t=Infinity,i=Infinity,n=Infinity,r=-Infinity,o=-Infinity,a=-Infinity,s=0,c=e.length;s<c;s+=3){var h=e[s],l=e[s+1],u=e[s+2];h<t&&(t=h);l<i&&(i=l);u<n&&(n=u);h>r&&(r=h);l>o&&(o=l);u>a&&(a=u)}this.min.set(t,i,n);this.max.set(r,o,a);return this},setFromBufferAttribute:function(e){for(var t=Infinity,i=Infinity,n=Infinity,r=-Infinity,o=-Infinity,a=-Infinity,s=0,c=e.count;s<c;s++){var h=e.getX(s),l=e.getY(s),u=e.getZ(s);h<t&&(t=h);l<i&&(i=l);u<n&&(n=u);h>r&&(r=h);l>o&&(o=l);u>a&&(a=u)}this.min.set(t,i,n);this.max.set(r,o,a);return this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new c;return function(t,i){var n=e.copy(i).multiplyScalar(.5);this.min.copy(t).sub(n);this.max.copy(t).add(n);return this}}(),setFromObject:function(e){this.makeEmpty();return this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.min.copy(e.min);this.max.copy(e.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){e=e||new c;return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){e=e||new c;return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){this.min.min(e);this.max.max(e);return this},expandByVector:function(e){this.min.sub(e);this.max.add(e);return this},expandByScalar:function(e){this.min.addScalar(-e);this.max.addScalar(e);return this},expandByObject:function(){var e=new c;return function(t){var i=this;t.updateMatrixWorld(!0);t.traverse(function(t){var n,r;n=t.geometry;if(void 0!==n)if(n.isGeometry){var o=n.vertices;n=0;for(r=o.length;n<r;n++)e.copy(o[n]),e.applyMatrix4(t.matrixWorld),i.expandByPoint(e)}else if(n.isBufferGeometry&&(o=n.attributes.position,void 0!==o))for(n=0,r=o.count;n<r;n++)e.fromBufferAttribute(o,n).applyMatrix4(t.matrixWorld),i.expandByPoint(e)});return this}}(),containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return(t||new c).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z?!1:!0},intersectsSphere:function(){var e;return function(t){void 0===e&&(e=new c);this.clampPoint(t.center,e);return e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,i;0<e.normal.x?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x);0<e.normal.y?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y);0<e.normal.z?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z);return t<=e.constant&&i>=e.constant},clampPoint:function(e,t){return(t||new c).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new c;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new c;return function(t){t=t||new Q;this.getCenter(t.center);t.radius=.5*this.getSize(e).length();return t}}(),intersect:function(e){this.min.max(e.min);this.max.min(e.max);this.isEmpty()&&this.makeEmpty();return this},union:function(e){this.min.min(e.min);this.max.max(e.max);return this},applyMatrix4:function(){var e=[new c,new c,new c,new c,new c,new c,new c,new c];return function(t){if(this.isEmpty())return this;e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t);e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t);e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t);e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t);e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t);e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t);e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t);e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t);this.setFromPoints(e);return this}}(),translate:function(e){this.min.add(e);this.max.add(e);return this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};Q.prototype={constructor:Q,set:function(e,t){this.center.copy(e);this.radius=t;return this},setFromPoints:function(){var e;return function(t,i){void 0===e&&(e=new J);var n=this.center;void 0!==i?n.copy(i):e.setFromPoints(t).getCenter(n);for(var r=0,o=0,a=t.length;o<a;o++)r=Math.max(r,n.distanceToSquared(t[o]));this.radius=Math.sqrt(r);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.center.copy(e.center);this.radius=e.radius;return this},empty:function(){return 0>=this.radius},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(this.center.dot(e.normal)-e.constant)<=this.radius},clampPoint:function(e,t){var i=this.center.distanceToSquared(e),n=t||new c;n.copy(e);i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center));return n},getBoundingBox:function(e){e=e||new J;e.set(this.center,this.center);e.expandByScalar(this.radius);return e},applyMatrix4:function(e){this.center.applyMatrix4(e);this.radius*=e.getMaxScaleOnAxis();return this},translate:function(e){this.center.add(e);return this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius;
}};K.prototype={constructor:K,isMatrix3:!0,set:function(e,t,i,n,r,o,a,s,c){var h=this.elements;h[0]=e;h[1]=n;h[2]=a;h[3]=t;h[4]=r;h[5]=s;h[6]=i;h[7]=o;h[8]=c;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){e=e.elements;this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]);return this},setFromMatrix4:function(e){e=e.elements;this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]);return this},applyToBufferAttribute:function(){var e;return function(t){void 0===e&&(e=new c);for(var i=0,n=t.count;i<n;i++)e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.applyMatrix3(this),t.setXYZ(i,e.x,e.y,e.z);return t}}(),multiplyScalar:function(e){var t=this.elements;t[0]*=e;t[3]*=e;t[6]*=e;t[1]*=e;t[4]*=e;t[7]*=e;t[2]*=e;t[5]*=e;t[8]*=e;return this},determinant:function(){var e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],o=e[4],a=e[5],s=e[6],c=e[7],e=e[8];return t*o*e-t*a*c-i*r*e+i*a*s+n*r*c-n*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var i=e.elements,n=this.elements,r=i[0],o=i[1],a=i[2],s=i[3],c=i[4],h=i[5],l=i[6],u=i[7],i=i[8],p=i*c-h*u,d=h*l-i*s,f=u*s-c*l,m=r*p+o*d+a*f;if(0===m){if(!0===t)throw Error("THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0");console.warn("THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0");return this.identity()}m=1/m;n[0]=p*m;n[1]=(a*u-i*o)*m;n[2]=(h*o-a*c)*m;n[3]=d*m;n[4]=(i*r-a*l)*m;n[5]=(a*s-h*r)*m;n[6]=f*m;n[7]=(o*l-u*r)*m;n[8]=(c*r-o*s)*m;return this},transpose:function(){var e,t=this.elements;e=t[1];t[1]=t[3];t[3]=e;e=t[2];t[2]=t[6];t[6]=e;e=t[5];t[5]=t[7];t[7]=e;return this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;e[0]=t[0];e[1]=t[3];e[2]=t[6];e[3]=t[1];e[4]=t[4];e[5]=t[7];e[6]=t[2];e[7]=t[5];e[8]=t[8];return this},fromArray:function(e,t){void 0===t&&(t=0);for(var i=0;9>i;i++)this.elements[i]=e[i+t];return this},toArray:function(e,t){void 0===e&&(e=[]);void 0===t&&(t=0);var i=this.elements;e[t]=i[0];e[t+1]=i[1];e[t+2]=i[2];e[t+3]=i[3];e[t+4]=i[4];e[t+5]=i[5];e[t+6]=i[6];e[t+7]=i[7];e[t+8]=i[8];return e}};$.prototype={constructor:$,set:function(e,t){this.normal.copy(e);this.constant=t;return this},setComponents:function(e,t,i,n){this.normal.set(e,t,i);this.constant=n;return this},setFromNormalAndCoplanarPoint:function(e,t){this.normal.copy(e);this.constant=-t.dot(this.normal);return this},setFromCoplanarPoints:function(){var e=new c,t=new c;return function(i,n,r){n=e.subVectors(r,n).cross(t.subVectors(i,n)).normalize();this.setFromNormalAndCoplanarPoint(n,i);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.normal.copy(e.normal);this.constant=e.constant;return this},normalize:function(){var e=1/this.normal.length();this.normal.multiplyScalar(e);this.constant*=e;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var i=this.distanceToPoint(e);return(t||new c).copy(this.normal).multiplyScalar(i)},intersectLine:function(){var e=new c;return function(t,i){var n=i||new c,r=t.delta(e),o=this.normal.dot(r);if(0===o){if(0===this.distanceToPoint(t.start))return n.copy(t.start)}else return o=-(t.start.dot(this.normal)+this.constant)/o,0>o||1<o?void 0:n.copy(r).multiplyScalar(o).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start);e=this.distanceToPoint(e.end);return 0>t&&0<e||0>e&&0<t},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return(e||new c).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new c,t=new K;return function(i,n){var r=this.coplanarPoint(e).applyMatrix4(i),o=n||t.getNormalMatrix(i),o=this.normal.applyMatrix3(o).normalize();this.constant=-r.dot(o);return this}}(),translate:function(e){this.constant-=e.dot(this.normal);return this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}};ee.prototype={constructor:ee,set:function(e,t,i,n,r,o){var a=this.planes;a[0].copy(e);a[1].copy(t);a[2].copy(i);a[3].copy(n);a[4].copy(r);a[5].copy(o);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,i=0;6>i;i++)t[i].copy(e.planes[i]);return this},setFromMatrix:function(e){var t=this.planes,i=e.elements;e=i[0];var n=i[1],r=i[2],o=i[3],a=i[4],s=i[5],c=i[6],h=i[7],l=i[8],u=i[9],p=i[10],d=i[11],f=i[12],m=i[13],g=i[14],i=i[15];t[0].setComponents(o-e,h-a,d-l,i-f).normalize();t[1].setComponents(o+e,h+a,d+l,i+f).normalize();t[2].setComponents(o+n,h+s,d+u,i+m).normalize();t[3].setComponents(o-n,h-s,d-u,i-m).normalize();t[4].setComponents(o-r,h-c,d-p,i-g).normalize();t[5].setComponents(o+r,h+c,d+p,i+g).normalize();return this},intersectsObject:function(){var e=new Q;return function(t){var i=t.geometry;null===i.boundingSphere&&i.computeBoundingSphere();e.copy(i.boundingSphere).applyMatrix4(t.matrixWorld);return this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new Q;return function(t){e.center.set(0,0,0);e.radius=.7071067811865476;e.applyMatrix4(t.matrixWorld);return this.intersectsSphere(e)}}(),intersectsSphere:function(e){var t=this.planes,i=e.center;e=-e.radius;for(var n=0;6>n;n++)if(t[n].distanceToPoint(i)<e)return!1;return!0},intersectsBox:function(){var e=new c,t=new c;return function(i){for(var n=this.planes,r=0;6>r;r++){var o=n[r];e.x=0<o.normal.x?i.min.x:i.max.x;t.x=0<o.normal.x?i.max.x:i.min.x;e.y=0<o.normal.y?i.min.y:i.max.y;t.y=0<o.normal.y?i.max.y:i.min.y;e.z=0<o.normal.z?i.min.z:i.max.z;t.z=0<o.normal.z?i.max.z:i.min.z;var a=o.distanceToPoint(e),o=o.distanceToPoint(t);if(0>a&&0>o)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,i=0;6>i;i++)if(0>t[i].distanceToPoint(e))return!1;return!0}};ie.prototype={constructor:ie,set:function(e,t){this.origin.copy(e);this.direction.copy(t);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.origin.copy(e.origin);this.direction.copy(e.direction);return this},at:function(e,t){return(t||new c).copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){this.direction.copy(e).sub(this.origin).normalize();return this},recast:function(){var e=new c;return function(t){this.origin.copy(this.at(t,e));return this}}(),closestPointToPoint:function(e,t){var i=t||new c;i.subVectors(e,this.origin);var n=i.dot(this.direction);return 0>n?i.copy(this.origin):i.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new c;return function(t){var i=e.subVectors(t,this.origin).dot(this.direction);if(0>i)return this.origin.distanceToSquared(t);e.copy(this.direction).multiplyScalar(i).add(this.origin);return e.distanceToSquared(t)}}(),distanceSqToSegment:function(){var e=new c,t=new c,i=new c;return function(n,r,o,a){e.copy(n).add(r).multiplyScalar(.5);t.copy(r).sub(n).normalize();i.copy(this.origin).sub(e);var s=.5*n.distanceTo(r),c=-this.direction.dot(t),h=i.dot(this.direction),l=-i.dot(t),u=i.lengthSq(),p=Math.abs(1-c*c),d;0<p?(n=c*l-h,r=c*h-l,d=s*p,0<=n?r>=-d?r<=d?(s=1/p,n*=s,r*=s,c=n*(n+c*r+2*h)+r*(c*n+r+2*l)+u):(r=s,n=Math.max(0,-(c*r+h)),c=-n*n+r*(r+2*l)+u):(r=-s,n=Math.max(0,-(c*r+h)),c=-n*n+r*(r+2*l)+u):r<=-d?(n=Math.max(0,-(-c*s+h)),r=0<n?-s:Math.min(Math.max(-s,-l),s),c=-n*n+r*(r+2*l)+u):r<=d?(n=0,r=Math.min(Math.max(-s,-l),s),c=r*(r+2*l)+u):(n=Math.max(0,-(c*s+h)),r=0<n?s:Math.min(Math.max(-s,-l),s),c=-n*n+r*(r+2*l)+u)):(r=0<c?-s:s,n=Math.max(0,-(c*r+h)),c=-n*n+r*(r+2*l)+u);o&&o.copy(this.direction).multiplyScalar(n).add(this.origin);a&&a.copy(t).multiplyScalar(r).add(e);return c}}(),intersectSphere:function(){var e=new c;return function(t,i){e.subVectors(t.center,this.origin);var n=e.dot(this.direction),r=e.dot(e)-n*n,o=t.radius*t.radius;if(r>o)return null;o=Math.sqrt(o-r);r=n-o;n+=o;return 0>r&&0>n?null:0>r?this.at(n,i):this.at(r,i)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;e=-(this.origin.dot(e.normal)+e.constant)/t;return 0<=e?e:null},intersectPlane:function(e,t){var i=this.distanceToPlane(e);return null===i?null:this.at(i,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||0>e.normal.dot(this.direction)*t?!0:!1},intersectBox:function(e,t){var i,n,r,o,a;n=1/this.direction.x;o=1/this.direction.y;a=1/this.direction.z;var s=this.origin;0<=n?(i=(e.min.x-s.x)*n,n*=e.max.x-s.x):(i=(e.max.x-s.x)*n,n*=e.min.x-s.x);0<=o?(r=(e.min.y-s.y)*o,o*=e.max.y-s.y):(r=(e.max.y-s.y)*o,o*=e.min.y-s.y);if(i>o||r>n)return null;if(r>i||i!==i)i=r;if(o<n||n!==n)n=o;0<=a?(r=(e.min.z-s.z)*a,a*=e.max.z-s.z):(r=(e.max.z-s.z)*a,a*=e.min.z-s.z);if(i>a||r>n)return null;if(r>i||i!==i)i=r;if(a<n||n!==n)n=a;return 0>n?null:this.at(0<=i?i:n,t)},intersectsBox:function(){var e=new c;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new c,t=new c,i=new c,n=new c;return function(r,o,a,s,c){t.subVectors(o,r);i.subVectors(a,r);n.crossVectors(t,i);o=this.direction.dot(n);if(0<o){if(s)return null;s=1}else if(0>o)s=-1,o=-o;else return null;e.subVectors(this.origin,r);r=s*this.direction.dot(i.crossVectors(e,i));if(0>r)return null;a=s*this.direction.dot(t.cross(e));if(0>a||r+a>o)return null;r=-s*e.dot(n);return 0>r?null:this.at(r/o,c)}}(),applyMatrix4:function(e){this.direction.add(this.origin).applyMatrix4(e);this.origin.applyMatrix4(e);this.direction.sub(this.origin);this.direction.normalize();return this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}};ne.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");ne.DefaultOrder="XYZ";ne.prototype={constructor:ne,isEuler:!0,get x(){return this._x},set x(e){this._x=e;this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e;this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e;this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e;this.onChangeCallback()},set:function(e,t,i,n){this._x=e;this._y=t;this._z=i;this._order=n||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){this._x=e._x;this._y=e._y;this._z=e._z;this._order=e._order;this.onChangeCallback();return this},setFromRotationMatrix:function(e,t,i){var n=hr.clamp,r=e.elements;e=r[0];var o=r[4],a=r[8],s=r[1],c=r[5],h=r[9],l=r[2],u=r[6],r=r[10];t=t||this._order;"XYZ"===t?(this._y=Math.asin(n(a,-1,1)),.99999>Math.abs(a)?(this._x=Math.atan2(-h,r),this._z=Math.atan2(-o,e)):(this._x=Math.atan2(u,c),this._z=0)):"YXZ"===t?(this._x=Math.asin(-n(h,-1,1)),.99999>Math.abs(h)?(this._y=Math.atan2(a,r),this._z=Math.atan2(s,c)):(this._y=Math.atan2(-l,e),this._z=0)):"ZXY"===t?(this._x=Math.asin(n(u,-1,1)),.99999>Math.abs(u)?(this._y=Math.atan2(-l,r),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(s,e))):"ZYX"===t?(this._y=Math.asin(-n(l,-1,1)),.99999>Math.abs(l)?(this._x=Math.atan2(u,r),this._z=Math.atan2(s,e)):(this._x=0,this._z=Math.atan2(-o,c))):"YZX"===t?(this._z=Math.asin(n(s,-1,1)),.99999>Math.abs(s)?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-l,e)):(this._x=0,this._y=Math.atan2(a,r))):"XZY"===t?(this._z=Math.asin(-n(o,-1,1)),.99999>Math.abs(o)?(this._x=Math.atan2(u,c),this._y=Math.atan2(a,e)):(this._x=Math.atan2(-h,r),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t);this._order=t;if(!1!==i)this.onChangeCallback();return this},setFromQuaternion:function(){var e;return function(t,i,n){void 0===e&&(e=new h);e.makeRotationFromQuaternion(t);return this.setFromRotationMatrix(e,i,n)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new s;return function(t){e.setFromEuler(this);return this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){this._x=e[0];this._y=e[1];this._z=e[2];void 0!==e[3]&&(this._order=e[3]);this.onChangeCallback();return this},toArray:function(e,t){void 0===e&&(e=[]);void 0===t&&(t=0);e[t]=this._x;e[t+1]=this._y;e[t+2]=this._z;e[t+3]=this._order;return e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new c(this._x,this._y,this._z)},onChange:function(e){this.onChangeCallback=e;return this},onChangeCallback:function(){}};re.prototype={constructor:re,set:function(e){this.mask=1<<e},enable:function(e){this.mask|=1<<e},toggle:function(e){this.mask^=1<<e},disable:function(e){this.mask&=~(1<<e)},test:function(e){return 0!==(this.mask&e.mask)}};var wr=0;oe.DefaultUp=new c(0,1,0);oe.DefaultMatrixAutoUpdate=!0;oe.prototype={constructor:oe,isObject3D:!0,applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new s;return function(t,i){e.setFromAxisAngle(t,i);this.quaternion.multiply(e);return this}}(),rotateX:function(){var e=new c(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new c(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new c(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new c;return function(t,i){e.copy(t).applyQuaternion(this.quaternion);this.position.add(e.multiplyScalar(i));return this}}(),translateX:function(){var e=new c(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new c(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new c(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new h;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new h;return function(t){e.lookAt(t,this.position,this.up);this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}if(e===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this;e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e);return this},remove:function(e){if(1<arguments.length)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);t=this.children.indexOf(e);-1!==t&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(t,1))},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var i=0,n=this.children.length;i<n;i++){var r=this.children[i].getObjectByProperty(e,t);if(void 0!==r)return r}},getWorldPosition:function(e){e=e||new c;this.updateMatrixWorld(!0);return e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new c,t=new c;return function(i){i=i||new s;this.updateMatrixWorld(!0);this.matrixWorld.decompose(e,i,t);return i}}(),getWorldRotation:function(){var e=new s;return function(t){t=t||new ne;this.getWorldQuaternion(e);return t.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new c,t=new s;return function(i){i=i||new c;this.updateMatrixWorld(!0);this.matrixWorld.decompose(e,t,i);return i}}(),getWorldDirection:function(){var e=new s;return function(t){t=t||new c;this.getWorldQuaternion(e);return t.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,i=0,n=t.length;i<n;i++)t[i].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,i=0,n=t.length;i<n;i++)t[i].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===e)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0;for(var t=this.children,i=0,n=t.length;i<n;i++)t[i].updateMatrixWorld(e)},toJSON:function(e){function t(e){var t=[],i;for(i in e){var n=e[i];delete n.metadata;t.push(n)}return t}var i=void 0===e||""===e,n={};i&&(e={geometries:{},materials:{},textures:{},images:{}},n.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var r={};r.uuid=this.uuid;r.type=this.type;""!==this.name&&(r.name=this.name);"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData);!0===this.castShadow&&(r.castShadow=!0);!0===this.receiveShadow&&(r.receiveShadow=!0);!1===this.visible&&(r.visible=!1);r.matrix=this.matrix.toArray();void 0!==this.geometry&&(void 0===e.geometries[this.geometry.uuid]&&(e.geometries[this.geometry.uuid]=this.geometry.toJSON(e)),r.geometry=this.geometry.uuid);void 0!==this.material&&(void 0===e.materials[this.material.uuid]&&(e.materials[this.material.uuid]=this.material.toJSON(e)),r.material=this.material.uuid);if(0<this.children.length){r.children=[];for(var o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(i){var i=t(e.geometries),o=t(e.materials),a=t(e.textures);e=t(e.images);0<i.length&&(n.geometries=i);0<o.length&&(n.materials=o);0<a.length&&(n.textures=a);0<e.length&&(n.images=e)}n.object=r;return n},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){void 0===t&&(t=!0);this.name=e.name;this.up.copy(e.up);this.position.copy(e.position);this.quaternion.copy(e.quaternion);this.scale.copy(e.scale);this.matrix.copy(e.matrix);this.matrixWorld.copy(e.matrixWorld);this.matrixAutoUpdate=e.matrixAutoUpdate;this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate;this.layers.mask=e.layers.mask;this.visible=e.visible;this.castShadow=e.castShadow;this.receiveShadow=e.receiveShadow;this.frustumCulled=e.frustumCulled;this.renderOrder=e.renderOrder;this.userData=JSON.parse(JSON.stringify(e.userData));if(!0===t)for(var i=0;i<e.children.length;i++)this.add(e.children[i].clone());return this}};Object.assign(oe.prototype,t.prototype);ae.prototype={constructor:ae,set:function(e,t){this.start.copy(e);this.end.copy(t);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.start.copy(e.start);this.end.copy(e.end);return this},getCenter:function(e){return(e||new c).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return(e||new c).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var i=t||new c;return this.delta(i).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new c,t=new c;return function(i,n){e.subVectors(i,this.start);t.subVectors(this.end,this.start);var r=t.dot(t),r=t.dot(e)/r;n&&(r=hr.clamp(r,0,1));return r}}(),closestPointToPoint:function(e,t,i){e=this.closestPointToPointParameter(e,t);i=i||new c;return this.delta(i).multiplyScalar(e).add(this.start)},applyMatrix4:function(e){this.start.applyMatrix4(e);this.end.applyMatrix4(e);return this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}};se.normal=function(){var e=new c;return function(t,i,n,r){r=r||new c;r.subVectors(n,i);e.subVectors(t,i);r.cross(e);t=r.lengthSq();return 0<t?r.multiplyScalar(1/Math.sqrt(t)):r.set(0,0,0)}}();se.barycoordFromPoint=function(){var e=new c,t=new c,i=new c;return function(n,r,o,a,s){e.subVectors(a,r);t.subVectors(o,r);i.subVectors(n,r);n=e.dot(e);r=e.dot(t);o=e.dot(i);var h=t.dot(t);a=t.dot(i);var l=n*h-r*r;s=s||new c;if(0===l)return s.set(-2,-1,-1);l=1/l;h=(h*o-r*a)*l;n=(n*a-r*o)*l;return s.set(1-h-n,n,h)}}();se.containsPoint=function(){var e=new c;return function(t,i,n,r){t=se.barycoordFromPoint(t,i,n,r,e);return 0<=t.x&&0<=t.y&&1>=t.x+t.y}}();se.prototype={constructor:se,set:function(e,t,i){this.a.copy(e);this.b.copy(t);this.c.copy(i);return this},setFromPointsAndIndices:function(e,t,i,n){this.a.copy(e[t]);this.b.copy(e[i]);this.c.copy(e[n]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a.copy(e.a);this.b.copy(e.b);this.c.copy(e.c);return this},area:function(){var e=new c,t=new c;return function(){e.subVectors(this.c,this.b);t.subVectors(this.a,this.b);return.5*e.cross(t).length()}}(),midpoint:function(e){return(e||new c).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return se.normal(this.a,this.b,this.c,e)},plane:function(e){return(e||new $).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return se.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return se.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var e,t,i,n;return function(r,o){void 0===e&&(e=new $,t=[new ae,new ae,new ae],i=new c,n=new c);var a=o||new c,s=Infinity;e.setFromCoplanarPoints(this.a,this.b,this.c);e.projectPoint(r,i);if(!0===this.containsPoint(i))a.copy(i);else{t[0].set(this.a,this.b);t[1].set(this.b,this.c);t[2].set(this.c,this.a);for(var h=0;h<t.length;h++){t[h].closestPointToPoint(i,!0,n);var l=i.distanceToSquared(n);l<s&&(s=l,a.copy(n))}}return a}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}};ce.prototype={constructor:ce,clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a;this.b=e.b;this.c=e.c;this.normal.copy(e.normal);this.color.copy(e.color);this.materialIndex=e.materialIndex;for(var t=0,i=e.vertexNormals.length;t<i;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();t=0;for(i=e.vertexColors.length;t<i;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}};he.prototype=Object.create(q.prototype);he.prototype.constructor=he;he.prototype.isMeshBasicMaterial=!0;he.prototype.copy=function(e){q.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.specularMap=e.specularMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.combine=e.combine;this.reflectivity=e.reflectivity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;return this};le.prototype={constructor:le,isBufferAttribute:!0,set needsUpdate(e){!0===e&&this.version++},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.itemSize:0;this.array=e},setDynamic:function(e){this.dynamic=e;return this},copy:function(e){this.array=new e.array.constructor(e.array);this.itemSize=e.itemSize;this.count=e.count;this.normalized=e.normalized;this.dynamic=e.dynamic;return this},copyAt:function(e,t,i){e*=this.itemSize;i*=t.itemSize;for(var n=0,r=this.itemSize;n<r;n++)this.array[e+n]=t.array[i+n];return this},copyArray:function(e){this.array.set(e);return this},copyColorsArray:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),o=new V);t[i++]=o.r;t[i++]=o.g;t[i++]=o.b}return this},copyIndicesArray:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var o=e[n];t[i++]=o.a;t[i++]=o.b;t[i++]=o.c}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,o=e.length;r<o;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new i);t[n++]=a.x;t[n++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),o=new c);t[i++]=o.x;t[i++]=o.y;t[i++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,i=0,n=0,o=e.length;n<o;n++){var a=e[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),a=new r);t[i++]=a.x;t[i++]=a.y;t[i++]=a.z;t[i++]=a.w}return this},set:function(e,t){void 0===t&&(t=0);this.array.set(e,t);return this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){this.array[e*this.itemSize]=t;return this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){this.array[e*this.itemSize+1]=t;return this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){this.array[e*this.itemSize+2]=t;return this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){this.array[e*this.itemSize+3]=t;return this},setXY:function(e,t,i){e*=this.itemSize;this.array[e+0]=t;this.array[e+1]=i;return this},setXYZ:function(e,t,i,n){e*=this.itemSize;this.array[e+0]=t;this.array[e+1]=i;this.array[e+2]=n;return this},setXYZW:function(e,t,i,n,r){e*=this.itemSize;this.array[e+0]=t;this.array[e+1]=i;this.array[e+2]=n;this.array[e+3]=r;return this},onUpload:function(e){this.onUploadCallback=e;return this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}};ue.prototype=Object.create(le.prototype);ue.prototype.constructor=ue;pe.prototype=Object.create(le.prototype);pe.prototype.constructor=pe;de.prototype=Object.create(le.prototype);de.prototype.constructor=de;fe.prototype=Object.create(le.prototype);fe.prototype.constructor=fe;me.prototype=Object.create(le.prototype);me.prototype.constructor=me;ge.prototype=Object.create(le.prototype);ge.prototype.constructor=ge;ve.prototype=Object.create(le.prototype);ve.prototype.constructor=ve;ye.prototype=Object.create(le.prototype);ye.prototype.constructor=ye;xe.prototype=Object.create(le.prototype);xe.prototype.constructor=xe;Object.assign(_e.prototype,{computeGroups:function(e){var t,i=[],n=void 0;e=e.faces;for(var r=0;r<e.length;r++){var o=e[r];o.materialIndex!==n&&(n=o.materialIndex,void 0!==t&&(t.count=3*r-t.start,i.push(t)),t={start:3*r,materialIndex:n})}void 0!==t&&(t.count=3*r-t.start,i.push(t));this.groups=i},fromGeometry:function(e){var t=e.faces,n=e.vertices,r=e.faceVertexUvs,o=r[0]&&0<r[0].length,a=r[1]&&0<r[1].length,s=e.morphTargets,c=s.length,h;if(0<c){h=[];for(var l=0;l<c;l++)h[l]=[];this.morphTargets.position=h}var u=e.morphNormals,p=u.length,d;if(0<p){d=[];for(l=0;l<p;l++)d[l]=[];this.morphTargets.normal=d}for(var f=e.skinIndices,m=e.skinWeights,g=f.length===n.length,v=m.length===n.length,l=0;l<t.length;l++){var y=t[l];this.vertices.push(n[y.a],n[y.b],n[y.c]);var x=y.vertexNormals;3===x.length?this.normals.push(x[0],x[1],x[2]):(x=y.normal,this.normals.push(x,x,x));x=y.vertexColors;3===x.length?this.colors.push(x[0],x[1],x[2]):(x=y.color,this.colors.push(x,x,x));!0===o&&(x=r[0][l],void 0!==x?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new i,new i,new i)));!0===a&&(x=r[1][l],void 0!==x?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new i,new i,new i)));for(x=0;x<c;x++){var _=s[x].vertices;h[x].push(_[y.a],_[y.b],_[y.c])}for(x=0;x<p;x++)_=u[x].vertexNormals[l],d[x].push(_.a,_.b,_.c);g&&this.skinIndices.push(f[y.a],f[y.b],f[y.c]);v&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}this.computeGroups(e);this.verticesNeedUpdate=e.verticesNeedUpdate;this.normalsNeedUpdate=e.normalsNeedUpdate;this.colorsNeedUpdate=e.colorsNeedUpdate;this.uvsNeedUpdate=e.uvsNeedUpdate;this.groupsNeedUpdate=e.groupsNeedUpdate;return this}});var Mr=0;we.prototype={constructor:we,isGeometry:!0,applyMatrix:function(e){for(var t=(new K).getNormalMatrix(e),i=0,n=this.vertices.length;i<n;i++)this.vertices[i].applyMatrix4(e);i=0;for(n=this.faces.length;i<n;i++){e=this.faces[i];e.normal.applyMatrix3(t).normalize();for(var r=0,o=e.vertexNormals.length;r<o;r++)e.vertexNormals[r].applyMatrix3(t).normalize()}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();this.normalsNeedUpdate=this.verticesNeedUpdate=!0;return this},rotateX:function(){var e;return function(t){void 0===e&&(e=new h);e.makeRotationX(t);this.applyMatrix(e);return this}}(),rotateY:function(){var e;return function(t){void 0===e&&(e=new h);e.makeRotationY(t);this.applyMatrix(e);return this}}(),rotateZ:function(){var e;return function(t){void 0===e&&(e=new h);e.makeRotationZ(t);this.applyMatrix(e);return this}}(),translate:function(){var e;return function(t,i,n){void 0===e&&(e=new h);e.makeTranslation(t,i,n);this.applyMatrix(e);return this}}(),scale:function(){var e;return function(t,i,n){void 0===e&&(e=new h);e.makeScale(t,i,n);this.applyMatrix(e);return this}}(),lookAt:function(){var e;return function(t){void 0===e&&(e=new oe);e.lookAt(t);e.updateMatrix();this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){function t(e,t,i,r){var o=void 0!==s?[p[e].clone(),p[t].clone(),p[i].clone()]:[],a=void 0!==h?[n.colors[e].clone(),n.colors[t].clone(),n.colors[i].clone()]:[];r=new ce(e,t,i,o,a,r);n.faces.push(r);void 0!==l&&n.faceVertexUvs[0].push([d[e].clone(),d[t].clone(),d[i].clone()]);void 0!==u&&n.faceVertexUvs[1].push([f[e].clone(),f[t].clone(),f[i].clone()])}var n=this,r=null!==e.index?e.index.array:void 0,o=e.attributes,a=o.position.array,s=void 0!==o.normal?o.normal.array:void 0,h=void 0!==o.color?o.color.array:void 0,l=void 0!==o.uv?o.uv.array:void 0,u=void 0!==o.uv2?o.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var p=[],d=[],f=[],m=o=0;o<a.length;o+=3,m+=2)n.vertices.push(new c(a[o],a[o+1],a[o+2])),void 0!==s&&p.push(new c(s[o],s[o+1],s[o+2])),void 0!==h&&n.colors.push(new V(h[o],h[o+1],h[o+2])),void 0!==l&&d.push(new i(l[m],l[m+1])),void 0!==u&&f.push(new i(u[m],u[m+1]));if(void 0!==r)if(a=e.groups,0<a.length)for(o=0;o<a.length;o++)for(var g=a[o],v=g.start,y=g.count,m=v,v=v+y;m<v;m+=3)t(r[m],r[m+1],r[m+2],g.materialIndex);else for(o=0;o<r.length;o+=3)t(r[o],r[o+1],r[o+2]);else for(o=0;o<a.length/3;o+=3)t(o,o+1,o+2);this.computeFaceNormals();null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone());null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone());return this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();this.translate(e.x,e.y,e.z);return e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,t=0===t?1:1/t,i=new h;i.set(t,0,0,-t*e.x,0,t,0,-t*e.y,0,0,t,-t*e.z,0,0,0,1);this.applyMatrix(i);return this},computeFaceNormals:function(){for(var e=new c,t=new c,i=0,n=this.faces.length;i<n;i++){var r=this.faces[i],o=this.vertices[r.a],a=this.vertices[r.b];e.subVectors(this.vertices[r.c],a);
t.subVectors(o,a);e.cross(t);e.normalize();r.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);var t,i,n;n=Array(this.vertices.length);t=0;for(i=this.vertices.length;t<i;t++)n[t]=new c;if(e){var r,o,a,s=new c,h=new c;e=0;for(t=this.faces.length;e<t;e++)i=this.faces[e],r=this.vertices[i.a],o=this.vertices[i.b],a=this.vertices[i.c],s.subVectors(a,o),h.subVectors(r,o),s.cross(h),n[i.a].add(s),n[i.b].add(s),n[i.c].add(s)}else for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++)i=this.faces[e],n[i.a].add(i.normal),n[i.b].add(i.normal),n[i.c].add(i.normal);t=0;for(i=this.vertices.length;t<i;t++)n[t].normalize();e=0;for(t=this.faces.length;e<t;e++)i=this.faces[e],r=i.vertexNormals,3===r.length?(r[0].copy(n[i.a]),r[1].copy(n[i.b]),r[2].copy(n[i.c])):(r[0]=n[i.a].clone(),r[1]=n[i.b].clone(),r[2]=n[i.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,i;this.computeFaceNormals();e=0;for(t=this.faces.length;e<t;e++){i=this.faces[e];var n=i.vertexNormals;3===n.length?(n[0].copy(i.normal),n[1].copy(i.normal),n[2].copy(i.normal)):(n[0]=i.normal.clone(),n[1]=i.normal.clone(),n[2]=i.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,i,n,r;i=0;for(n=this.faces.length;i<n;i++)for(r=this.faces[i],r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),e=0,t=r.vertexNormals.length;e<t;e++)r.__originalVertexNormals[e]?r.__originalVertexNormals[e].copy(r.vertexNormals[e]):r.__originalVertexNormals[e]=r.vertexNormals[e].clone();var o=new we;o.faces=this.faces;e=0;for(t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={};this.morphNormals[e].faceNormals=[];this.morphNormals[e].vertexNormals=[];r=this.morphNormals[e].faceNormals;var a=this.morphNormals[e].vertexNormals,s,h;i=0;for(n=this.faces.length;i<n;i++)s=new c,h={a:new c,b:new c,c:new c},r.push(s),a.push(h)}a=this.morphNormals[e];o.vertices=this.morphTargets[e].vertices;o.computeFaceNormals();o.computeVertexNormals();i=0;for(n=this.faces.length;i<n;i++)r=this.faces[i],s=a.faceNormals[i],h=a.vertexNormals[i],s.copy(r.normal),h.a.copy(r.vertexNormals[0]),h.b.copy(r.vertexNormals[1]),h.c.copy(r.vertexNormals[2])}i=0;for(n=this.faces.length;i<n;i++)r=this.faces[i],r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeLineDistances:function(){for(var e=0,t=this.vertices,i=0,n=t.length;i<n;i++)0<i&&(e+=t[i].distanceTo(t[i-1])),this.lineDistances[i]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new J);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Q);this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,i){if(!1===(e&&e.isGeometry))console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);else{var n,r=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,c=e.faces,h=this.faceVertexUvs[0],l=e.faceVertexUvs[0],u=this.colors,p=e.colors;void 0===i&&(i=0);void 0!==t&&(n=(new K).getNormalMatrix(t));e=0;for(var d=a.length;e<d;e++){var f=a[e].clone();void 0!==t&&f.applyMatrix4(t);o.push(f)}e=0;for(d=p.length;e<d;e++)u.push(p[e].clone());e=0;for(d=c.length;e<d;e++){var a=c[e],m=a.vertexNormals,p=a.vertexColors,u=new ce(a.a+r,a.b+r,a.c+r);u.normal.copy(a.normal);void 0!==n&&u.normal.applyMatrix3(n).normalize();t=0;for(o=m.length;t<o;t++)f=m[t].clone(),void 0!==n&&f.applyMatrix3(n).normalize(),u.vertexNormals.push(f);u.color.copy(a.color);t=0;for(o=p.length;t<o;t++)f=p[t],u.vertexColors.push(f.clone());u.materialIndex=a.materialIndex+i;s.push(u)}e=0;for(d=l.length;e<d;e++)if(i=l[e],n=[],void 0!==i){t=0;for(o=i.length;t<o;t++)n.push(i[t].clone());h.push(n)}}},mergeMesh:function(e){!1===(e&&e.isMesh)?console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e):(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix))},mergeVertices:function(){var e={},t=[],i=[],n,r=Math.pow(10,4),o,a;o=0;for(a=this.vertices.length;o<a;o++)n=this.vertices[o],n=Math.round(n.x*r)+"_"+Math.round(n.y*r)+"_"+Math.round(n.z*r),void 0===e[n]?(e[n]=o,t.push(this.vertices[o]),i[o]=t.length-1):i[o]=i[e[n]];e=[];o=0;for(a=this.faces.length;o<a;o++)for(r=this.faces[o],r.a=i[r.a],r.b=i[r.b],r.c=i[r.c],r=[r.a,r.b,r.c],n=0;3>n;n++)if(r[n]===r[(n+1)%3]){e.push(o);break}for(o=e.length-1;0<=o;o--)for(r=e[o],this.faces.splice(r,1),i=0,a=this.faceVertexUvs.length;i<a;i++)this.faceVertexUvs[i].splice(r,1);o=this.vertices.length-t.length;this.vertices=t;return o},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,i=0;i<t;i++)e[i]._id=i;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var n=this.faceVertexUvs[0],r=this.faceVertexUvs[1],o,a;n&&n.length===t&&(o=[]);r&&r.length===t&&(a=[]);for(i=0;i<t;i++){var s=e[i]._id;o&&o.push(n[s]);a&&a.push(r[s])}o&&(this.faceVertexUvs[0]=o);a&&(this.faceVertexUvs[1]=a)},toJSON:function(){function e(e,t,i){return i?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();if(void 0!==h[t])return h[t];h[t]=c.length/3;c.push(e.x,e.y,e.z);return h[t]}function i(e){var t=e.r.toString()+e.g.toString()+e.b.toString();if(void 0!==u[t])return u[t];u[t]=l.length;l.push(e.getHex());return u[t]}function n(e){var t=e.x.toString()+e.y.toString();if(void 0!==d[t])return d[t];d[t]=p.length/2;p.push(e.x,e.y);return d[t]}var r={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};r.uuid=this.uuid;r.type=this.type;""!==this.name&&(r.name=this.name);if(void 0!==this.parameters){var o=this.parameters,a;for(a in o)void 0!==o[a]&&(r[a]=o[a]);return r}o=[];for(a=0;a<this.vertices.length;a++){var s=this.vertices[a];o.push(s.x,s.y,s.z)}var s=[],c=[],h={},l=[],u={},p=[],d={};for(a=0;a<this.faces.length;a++){var f=this.faces[a],m=void 0!==this.faceVertexUvs[0][a],g=0<f.normal.length(),v=0<f.vertexNormals.length,y=1!==f.color.r||1!==f.color.g||1!==f.color.b,x=0<f.vertexColors.length,_=0,_=e(_,0,0),_=e(_,1,!0),_=e(_,2,!1),_=e(_,3,m),_=e(_,4,g),_=e(_,5,v),_=e(_,6,y),_=e(_,7,x);s.push(_);s.push(f.a,f.b,f.c);s.push(f.materialIndex);m&&(m=this.faceVertexUvs[0][a],s.push(n(m[0]),n(m[1]),n(m[2])));g&&s.push(t(f.normal));v&&(g=f.vertexNormals,s.push(t(g[0]),t(g[1]),t(g[2])));y&&s.push(i(f.color));x&&(f=f.vertexColors,s.push(i(f[0]),i(f[1]),i(f[2])))}r.data={};r.data.vertices=o;r.data.normals=c;0<l.length&&(r.data.colors=l);0<p.length&&(r.data.uvs=[p]);r.data.faces=s;return r},clone:function(){return(new we).copy(this)},copy:function(e){var t,i,n,r,o,a;this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.name=e.name;n=e.vertices;t=0;for(i=n.length;t<i;t++)this.vertices.push(n[t].clone());n=e.colors;t=0;for(i=n.length;t<i;t++)this.colors.push(n[t].clone());n=e.faces;t=0;for(i=n.length;t<i;t++)this.faces.push(n[t].clone());t=0;for(i=e.faceVertexUvs.length;t<i;t++){var s=e.faceVertexUvs[t];void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]);n=0;for(r=s.length;n<r;n++){var c=s[n],h=[];o=0;for(a=c.length;o<a;o++)h.push(c[o].clone());this.faceVertexUvs[t].push(h)}}o=e.morphTargets;t=0;for(i=o.length;t<i;t++){a={};a.name=o[t].name;if(void 0!==o[t].vertices)for(a.vertices=[],n=0,r=o[t].vertices.length;n<r;n++)a.vertices.push(o[t].vertices[n].clone());if(void 0!==o[t].normals)for(a.normals=[],n=0,r=o[t].normals.length;n<r;n++)a.normals.push(o[t].normals[n].clone());this.morphTargets.push(a)}o=e.morphNormals;t=0;for(i=o.length;t<i;t++){a={};if(void 0!==o[t].vertexNormals)for(a.vertexNormals=[],n=0,r=o[t].vertexNormals.length;n<r;n++)s=o[t].vertexNormals[n],c={},c.a=s.a.clone(),c.b=s.b.clone(),c.c=s.c.clone(),a.vertexNormals.push(c);if(void 0!==o[t].faceNormals)for(a.faceNormals=[],n=0,r=o[t].faceNormals.length;n<r;n++)a.faceNormals.push(o[t].faceNormals[n].clone());this.morphNormals.push(a)}n=e.skinWeights;t=0;for(i=n.length;t<i;t++)this.skinWeights.push(n[t].clone());n=e.skinIndices;t=0;for(i=n.length;t<i;t++)this.skinIndices.push(n[t].clone());n=e.lineDistances;t=0;for(i=n.length;t<i;t++)this.lineDistances.push(n[t]);t=e.boundingBox;null!==t&&(this.boundingBox=t.clone());t=e.boundingSphere;null!==t&&(this.boundingSphere=t.clone());this.elementsNeedUpdate=e.elementsNeedUpdate;this.verticesNeedUpdate=e.verticesNeedUpdate;this.uvsNeedUpdate=e.uvsNeedUpdate;this.normalsNeedUpdate=e.normalsNeedUpdate;this.colorsNeedUpdate=e.colorsNeedUpdate;this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate;this.groupsNeedUpdate=e.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}};Object.assign(we.prototype,t.prototype);Me.prototype={constructor:Me,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(65535<be(e)?ve:me)(e,1):this.index=e},addAttribute:function(e,t,i){if(!1===(t&&t.isBufferAttribute)&&!1===(t&&t.isInterleavedBufferAttribute))console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new le(t,i));else if("index"===e)console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t);else return this.attributes[e]=t,this},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){delete this.attributes[e];return this},addGroup:function(e,t,i){this.groups.push({start:e,count:t,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e;this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);t=this.attributes.normal;void 0!==t&&((new K).getNormalMatrix(e).applyToBufferAttribute(t),t.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this},rotateX:function(){var e;return function(t){void 0===e&&(e=new h);e.makeRotationX(t);this.applyMatrix(e);return this}}(),rotateY:function(){var e;return function(t){void 0===e&&(e=new h);e.makeRotationY(t);this.applyMatrix(e);return this}}(),rotateZ:function(){var e;return function(t){void 0===e&&(e=new h);e.makeRotationZ(t);this.applyMatrix(e);return this}}(),translate:function(){var e;return function(t,i,n){void 0===e&&(e=new h);e.makeTranslation(t,i,n);this.applyMatrix(e);return this}}(),scale:function(){var e;return function(t,i,n){void 0===e&&(e=new h);e.makeScale(t,i,n);this.applyMatrix(e);return this}}(),lookAt:function(){var e;return function(t){void 0===e&&(e=new oe);e.lookAt(t);e.updateMatrix();this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();this.translate(e.x,e.y,e.z);return e},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){e=new ye(3*t.vertices.length,3);var i=new ye(3*t.colors.length,3);this.addAttribute("position",e.copyVector3sArray(t.vertices));this.addAttribute("color",i.copyColorsArray(t.colors));t.lineDistances&&t.lineDistances.length===t.vertices.length&&(e=new ye(t.lineDistances.length,1),this.addAttribute("lineDistance",e.copyArray(t.lineDistances)));null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone());null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var i=t.__directGeometry;!0===t.elementsNeedUpdate&&(i=void 0,t.elementsNeedUpdate=!1);if(void 0===i)return this.fromGeometry(t);i.verticesNeedUpdate=t.verticesNeedUpdate;i.normalsNeedUpdate=t.normalsNeedUpdate;i.colorsNeedUpdate=t.colorsNeedUpdate;i.uvsNeedUpdate=t.uvsNeedUpdate;i.groupsNeedUpdate=t.groupsNeedUpdate;t.verticesNeedUpdate=!1;t.normalsNeedUpdate=!1;t.colorsNeedUpdate=!1;t.uvsNeedUpdate=!1;t.groupsNeedUpdate=!1;t=i}!0===t.verticesNeedUpdate&&(i=this.attributes.position,void 0!==i&&(i.copyVector3sArray(t.vertices),i.needsUpdate=!0),t.verticesNeedUpdate=!1);!0===t.normalsNeedUpdate&&(i=this.attributes.normal,void 0!==i&&(i.copyVector3sArray(t.normals),i.needsUpdate=!0),t.normalsNeedUpdate=!1);!0===t.colorsNeedUpdate&&(i=this.attributes.color,void 0!==i&&(i.copyColorsArray(t.colors),i.needsUpdate=!0),t.colorsNeedUpdate=!1);t.uvsNeedUpdate&&(i=this.attributes.uv,void 0!==i&&(i.copyVector2sArray(t.uvs),i.needsUpdate=!0),t.uvsNeedUpdate=!1);t.lineDistancesNeedUpdate&&(i=this.attributes.lineDistance,void 0!==i&&(i.copyArray(t.lineDistances),i.needsUpdate=!0),t.lineDistancesNeedUpdate=!1);t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1);return this},fromGeometry:function(e){e.__directGeometry=(new _e).fromGeometry(e);return this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);this.addAttribute("position",new le(t,3).copyVector3sArray(e.vertices));0<e.normals.length&&(t=new Float32Array(3*e.normals.length),this.addAttribute("normal",new le(t,3).copyVector3sArray(e.normals)));0<e.colors.length&&(t=new Float32Array(3*e.colors.length),this.addAttribute("color",new le(t,3).copyColorsArray(e.colors)));0<e.uvs.length&&(t=new Float32Array(2*e.uvs.length),this.addAttribute("uv",new le(t,2).copyVector2sArray(e.uvs)));0<e.uvs2.length&&(t=new Float32Array(2*e.uvs2.length),this.addAttribute("uv2",new le(t,2).copyVector2sArray(e.uvs2)));0<e.indices.length&&(t=new(65535<be(e.indices)?Uint32Array:Uint16Array)(3*e.indices.length),this.setIndex(new le(t,1).copyIndicesArray(e.indices)));this.groups=e.groups;for(var i in e.morphTargets){for(var t=[],n=e.morphTargets[i],r=0,o=n.length;r<o;r++){var a=n[r],s=new ye(3*a.length,3);t.push(s.copyVector3sArray(a))}this.morphAttributes[i]=t}0<e.skinIndices.length&&(i=new ye(4*e.skinIndices.length,4),this.addAttribute("skinIndex",i.copyVector4sArray(e.skinIndices)));0<e.skinWeights.length&&(i=new ye(4*e.skinWeights.length,4),this.addAttribute("skinWeight",i.copyVector4sArray(e.skinWeights)));null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone());null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone());return this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new J);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new J,t=new c;return function(){null===this.boundingSphere&&(this.boundingSphere=new Q);var i=this.attributes.position;if(i){var n=this.boundingSphere.center;e.setFromBufferAttribute(i);e.getCenter(n);for(var r=0,o=0,a=i.count;o<a;o++)t.x=i.getX(o),t.y=i.getY(o),t.z=i.getZ(o),r=Math.max(r,n.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(r);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,i=this.groups;if(t.position){var n=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new le(new Float32Array(n.length),3));else for(var r=t.normal.array,o=0,a=r.length;o<a;o++)r[o]=0;var r=t.normal.array,s,h,l,u=new c,p=new c,d=new c,f=new c,m=new c;if(e){e=e.array;0===i.length&&this.addGroup(0,e.length);for(var g=0,v=i.length;g<v;++g)for(o=i[g],a=o.start,s=o.count,o=a,a+=s;o<a;o+=3)s=3*e[o+0],h=3*e[o+1],l=3*e[o+2],u.fromArray(n,s),p.fromArray(n,h),d.fromArray(n,l),f.subVectors(d,p),m.subVectors(u,p),f.cross(m),r[s]+=f.x,r[s+1]+=f.y,r[s+2]+=f.z,r[h]+=f.x,r[h+1]+=f.y,r[h+2]+=f.z,r[l]+=f.x,r[l+1]+=f.y,r[l+2]+=f.z}else for(o=0,a=n.length;o<a;o+=9)u.fromArray(n,o),p.fromArray(n,o+3),d.fromArray(n,o+6),f.subVectors(d,p),m.subVectors(u,p),f.cross(m),r[o]=f.x,r[o+1]=f.y,r[o+2]=f.z,r[o+3]=f.x,r[o+4]=f.y,r[o+5]=f.z,r[o+6]=f.x,r[o+7]=f.y,r[o+8]=f.z;this.normalizeNormals();t.normal.needsUpdate=!0}},merge:function(e,t){if(!1===(e&&e.isBufferGeometry))console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);else{void 0===t&&(t=0);var i=this.attributes,n;for(n in i)if(void 0!==e.attributes[n])for(var r=i[n].array,o=e.attributes[n],a=o.array,s=0,o=o.itemSize*t;s<a.length;s++,o++)r[o]=a[s];return this}},normalizeNormals:function(){for(var e=this.attributes.normal.array,t,i,n,r=0,o=e.length;r<o;r+=3)t=e[r],i=e[r+1],n=e[r+2],t=1/Math.sqrt(t*t+i*i+n*n),e[r]*=t,e[r+1]*=t,e[r+2]*=t},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Me,t=this.index.array,i=this.attributes,n;for(n in i){for(var r=i[n],o=r.array,r=r.itemSize,a=new o.constructor(t.length*r),s,c=0,h=0,l=t.length;h<l;h++){s=t[h]*r;for(var u=0;u<r;u++)a[c++]=o[s++]}e.addAttribute(n,new le(a,r))}return e},toJSON:function(){var e={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};e.uuid=this.uuid;e.type=this.type;""!==this.name&&(e.name=this.name);if(void 0!==this.parameters){var t=this.parameters,i;for(i in t)void 0!==t[i]&&(e[i]=t[i]);return e}e.data={attributes:{}};var n=this.index;null!==n&&(t=Array.prototype.slice.call(n.array),e.data.index={type:n.array.constructor.name,array:t});n=this.attributes;for(i in n){var r=n[i],t=Array.prototype.slice.call(r.array);e.data.attributes[i]={itemSize:r.itemSize,type:r.array.constructor.name,array:t,normalized:r.normalized}}i=this.groups;0<i.length&&(e.data.groups=JSON.parse(JSON.stringify(i)));i=this.boundingSphere;null!==i&&(e.data.boundingSphere={center:i.center.toArray(),radius:i.radius});return e},clone:function(){return(new Me).copy(this)},copy:function(e){var t,i,n;this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.name=e.name;i=e.index;null!==i&&this.setIndex(i.clone());i=e.attributes;for(t in i)this.addAttribute(t,i[t].clone());var r=e.morphAttributes;for(t in r){var o=[],a=r[t];i=0;for(n=a.length;i<n;i++)o.push(a[i].clone());this.morphAttributes[t]=o}t=e.groups;i=0;for(n=t.length;i<n;i++)r=t[i],this.addGroup(r.start,r.count,r.materialIndex);t=e.boundingBox;null!==t&&(this.boundingBox=t.clone());t=e.boundingSphere;null!==t&&(this.boundingSphere=t.clone());this.drawRange.start=e.drawRange.start;this.drawRange.count=e.drawRange.count;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}};Me.MaxIndex=65535;Object.assign(Me.prototype,t.prototype);Ee.prototype=Object.assign(Object.create(oe.prototype),{constructor:Ee,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){oe.prototype.copy.call(this,e);this.drawMode=e.drawMode;return this},updateMorphTargets:function(){var e=this.geometry.morphTargets;if(void 0!==e&&0<e.length){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var t=0,i=e.length;t<i;t++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[e[t].name]=t}},raycast:function(){function e(e,t,i,n,r,o,a){se.barycoordFromPoint(e,t,i,n,y);r.multiplyScalar(y.x);o.multiplyScalar(y.y);a.multiplyScalar(y.z);r.add(o).add(a);return r.clone()}function t(e,t,i,n,r,o,a){var s=e.material;if(null===(1===s.side?i.intersectTriangle(o,r,n,!0,a):i.intersectTriangle(n,r,o,2!==s.side,a)))return null;_.copy(a);_.applyMatrix4(e.matrixWorld);i=t.ray.origin.distanceTo(_);return i<t.near||i>t.far?null:{distance:i,point:_.clone(),object:e}}function n(i,n,r,o,a,c,h,p){s.fromBufferAttribute(o,c);l.fromBufferAttribute(o,h);u.fromBufferAttribute(o,p);if(i=t(i,n,r,s,l,u,x))a&&(m.fromBufferAttribute(a,c),g.fromBufferAttribute(a,h),v.fromBufferAttribute(a,p),i.uv=e(x,s,l,u,m,g,v)),i.face=new ce(c,h,p,se.normal(s,l,u)),i.faceIndex=c;return i}var r=new h,o=new ie,a=new Q,s=new c,l=new c,u=new c,p=new c,d=new c,f=new c,m=new i,g=new i,v=new i,y=new c,x=new c,_=new c;return function(i,c){var h=this.geometry,y=this.material,_=this.matrixWorld;if(void 0!==y&&(null===h.boundingSphere&&h.computeBoundingSphere(),a.copy(h.boundingSphere),a.applyMatrix4(_),!1!==i.ray.intersectsSphere(a)&&(r.getInverse(_),o.copy(i.ray).applyMatrix4(r),null===h.boundingBox||!1!==o.intersectsBox(h.boundingBox)))){var b;if(h.isBufferGeometry){var w,M,y=h.index,E=h.attributes.position,_=h.attributes.uv,T,S;if(null!==y)for(T=0,S=y.count;T<S;T+=3){if(h=y.getX(T),w=y.getX(T+1),M=y.getX(T+2),b=n(this,i,o,E,_,h,w,M))b.faceIndex=Math.floor(T/3),c.push(b)}else for(T=0,S=E.count;T<S;T+=3)if(h=T,w=T+1,M=T+2,b=n(this,i,o,E,_,h,w,M))b.index=h,c.push(b)}else if(h.isGeometry){var A,L,_=y&&y.isMultiMaterial;T=!0===_?y.materials:null;S=h.vertices;w=h.faces;M=h.faceVertexUvs[0];0<M.length&&(E=M);for(var R=0,P=w.length;R<P;R++){var C=w[R];b=!0===_?T[C.materialIndex]:y;if(void 0!==b){M=S[C.a];A=S[C.b];L=S[C.c];if(!0===b.morphTargets){b=h.morphTargets;var I=this.morphTargetInfluences;s.set(0,0,0);l.set(0,0,0);u.set(0,0,0);for(var U=0,N=b.length;U<N;U++){var D=I[U];if(0!==D){var O=b[U].vertices;s.addScaledVector(p.subVectors(O[C.a],M),D);l.addScaledVector(d.subVectors(O[C.b],A),D);u.addScaledVector(f.subVectors(O[C.c],L),D)}}s.add(M);l.add(A);u.add(L);M=s;A=l;L=u}if(b=t(this,i,o,M,A,L,x))E&&(I=E[R],m.copy(I[0]),g.copy(I[1]),v.copy(I[2]),b.uv=e(x,M,A,L,m,g,v)),b.face=C,b.faceIndex=R,c.push(b)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});Te.prototype=Object.create(we.prototype);Te.prototype.constructor=Te;Se.prototype=Object.create(Me.prototype);Se.prototype.constructor=Se;Ae.prototype=Object.create(we.prototype);Ae.prototype.constructor=Ae;Le.prototype=Object.create(Me.prototype);Le.prototype.constructor=Le;Re.prototype=Object.create(oe.prototype);Re.prototype.constructor=Re;Re.prototype.isCamera=!0;Re.prototype.getWorldDirection=function(){var e=new s;return function(t){t=t||new c;this.getWorldQuaternion(e);return t.set(0,0,-1).applyQuaternion(e)}}();Re.prototype.lookAt=function(){var e=new h;return function(t){e.lookAt(this.position,t,this.up);this.quaternion.setFromRotationMatrix(e)}}();Re.prototype.clone=function(){return(new this.constructor).copy(this)};Re.prototype.copy=function(e){oe.prototype.copy.call(this,e);this.matrixWorldInverse.copy(e.matrixWorldInverse);this.projectionMatrix.copy(e.projectionMatrix);return this};Pe.prototype=Object.assign(Object.create(Re.prototype),{constructor:Pe,isPerspectiveCamera:!0,copy:function(e){Re.prototype.copy.call(this,e);this.fov=e.fov;this.zoom=e.zoom;this.near=e.near;this.far=e.far;this.focus=e.focus;this.aspect=e.aspect;this.view=null===e.view?null:Object.assign({},e.view);this.filmGauge=e.filmGauge;this.filmOffset=e.filmOffset;return this},setFocalLength:function(e){e=.5*this.getFilmHeight()/e;this.fov=2*hr.RAD2DEG*Math.atan(e);this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*hr.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*hr.RAD2DEG*Math.atan(Math.tan(.5*hr.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,i,n,r,o){this.aspect=e/t;this.view={fullWidth:e,fullHeight:t,offsetX:i,offsetY:n,width:r,height:o};this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*hr.DEG2RAD*this.fov)/this.zoom,i=2*t,n=this.aspect*i,r=-.5*n,o=this.view;if(null!==o)var a=o.fullWidth,s=o.fullHeight,r=r+o.offsetX*n/a,t=t-o.offsetY*i/s,n=o.width/a*n,i=o.height/s*i;o=this.filmOffset;0!==o&&(r+=e*o/this.getFilmWidth());this.projectionMatrix.makePerspective(r,r+n,t,t-i,e,this.far)},toJSON:function(e){e=oe.prototype.toJSON.call(this,e);e.object.fov=this.fov;e.object.zoom=this.zoom;e.object.near=this.near;e.object.far=this.far;e.object.focus=this.focus;e.object.aspect=this.aspect;null!==this.view&&(e.object.view=Object.assign({},this.view));e.object.filmGauge=this.filmGauge;e.object.filmOffset=this.filmOffset;return e}});Ce.prototype=Object.assign(Object.create(Re.prototype),{constructor:Ce,isOrthographicCamera:!0,copy:function(e){Re.prototype.copy.call(this,e);this.left=e.left;this.right=e.right;this.top=e.top;this.bottom=e.bottom;this.near=e.near;this.far=e.far;this.zoom=e.zoom;this.view=null===e.view?null:Object.assign({},e.view);return this},setViewOffset:function(e,t,i,n,r,o){this.view={fullWidth:e,fullHeight:t,offsetX:i,offsetY:n,width:r,height:o};this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-e,i=i+e,e=n+t,t=n-t;if(null!==this.view)var i=this.zoom/(this.view.width/this.view.fullWidth),t=this.zoom/(this.view.height/this.view.fullHeight),o=(this.right-this.left)/this.view.width,n=(this.top-this.bottom)/this.view.height,r=r+this.view.offsetX/i*o,i=r+this.view.width/i*o,e=e-this.view.offsetY/t*n,t=e-this.view.height/t*n;this.projectionMatrix.makeOrthographic(r,i,e,t,this.near,this.far)},toJSON:function(e){e=oe.prototype.toJSON.call(this,e);e.object.zoom=this.zoom;e.object.left=this.left;e.object.right=this.right;e.object.top=this.top;e.object.bottom=this.bottom;e.object.near=this.near;e.object.far=this.far;null!==this.view&&(e.object.view=Object.assign({},this.view));return e}});var Er=0;rt.prototype.isFogExp2=!0;rt.prototype.clone=function(){return new rt(this.color.getHex(),this.density)};rt.prototype.toJSON=function(e){return{type:"FogExp2",color:this.color.getHex(),density:this.density}};ot.prototype.isFog=!0;ot.prototype.clone=function(){return new ot(this.color.getHex(),this.near,this.far)};ot.prototype.toJSON=function(e){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}};at.prototype=Object.create(oe.prototype);at.prototype.constructor=at;at.prototype.copy=function(e,t){oe.prototype.copy.call(this,e,t);null!==e.background&&(this.background=e.background.clone());null!==e.fog&&(this.fog=e.fog.clone());null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone());this.autoUpdate=e.autoUpdate;this.matrixAutoUpdate=e.matrixAutoUpdate;return this};at.prototype.toJSON=function(e){var t=oe.prototype.toJSON.call(this,e);null!==this.background&&(t.object.background=this.background.toJSON(e));null!==this.fog&&(t.object.fog=this.fog.toJSON());return t};st.prototype=Object.assign(Object.create(oe.prototype),{constructor:st,isLensFlare:!0,copy:function(e){oe.prototype.copy.call(this,e);this.positionScreen.copy(e.positionScreen);this.customUpdateCallback=e.customUpdateCallback;for(var t=0,i=e.lensFlares.length;t<i;t++)this.lensFlares.push(e.lensFlares[t]);return this},add:function(e,t,i,n,r,o){void 0===t&&(t=-1);void 0===i&&(i=0);void 0===o&&(o=1);void 0===r&&(r=new V(16777215));void 0===n&&(n=1);i=Math.min(i,Math.max(0,i));this.lensFlares.push({texture:e,size:t,distance:i,x:0,y:0,z:0,scale:1,rotation:0,opacity:o,color:r,blending:n})},updateLensFlares:function(){var e,t=this.lensFlares.length,i,n=2*-this.positionScreen.x,r=2*-this.positionScreen.y;for(e=0;e<t;e++)i=this.lensFlares[e],i.x=this.positionScreen.x+n*i.distance,i.y=this.positionScreen.y+r*i.distance,i.wantedRotation=i.x*Math.PI*.25,i.rotation+=.25*(i.wantedRotation-i.rotation)}});ct.prototype=Object.create(q.prototype);ct.prototype.constructor=ct;ct.prototype.copy=function(e){q.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.rotation=e.rotation;return this};ht.prototype=Object.assign(Object.create(oe.prototype),{constructor:ht,isSprite:!0,raycast:function(){var e=new c;return function(t,i){e.setFromMatrixPosition(this.matrixWorld);var n=t.ray.distanceSqToPoint(e);n>this.scale.x*this.scale.y/4||i.push({distance:Math.sqrt(n),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}});lt.prototype=Object.assign(Object.create(oe.prototype),{constructor:lt,copy:function(e){oe.prototype.copy.call(this,e,!1);e=e.levels;for(var t=0,i=e.length;t<i;t++){var n=e[t];this.addLevel(n.object.clone(),n.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0);t=Math.abs(t);for(var i=this.levels,n=0;n<i.length&&!(t<i[n].distance);n++);i.splice(n,0,{distance:t,object:e});this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,i=1,n=t.length;i<n&&!(e<t[i].distance);i++);return t[i-1].object},raycast:function(){var e=new c;return function(t,i){e.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(e);this.getObjectForDistance(n).raycast(t,i)}}(),update:function(){var e=new c,t=new c;return function(i){var n=this.levels;if(1<n.length){e.setFromMatrixPosition(i.matrixWorld);t.setFromMatrixPosition(this.matrixWorld);i=e.distanceTo(t);n[0].object.visible=!0;for(var r=1,o=n.length;r<o;r++)if(i>=n[r].distance)n[r-1].object.visible=!1,n[r].object.visible=!0;else break;for(;r<o;r++)n[r].object.visible=!1}}}(),toJSON:function(e){e=oe.prototype.toJSON.call(this,e);e.object.levels=[];for(var t=this.levels,i=0,n=t.length;i<n;i++){var r=t[i];e.object.levels.push({object:r.object.uuid,distance:r.distance})}return e}});Object.assign(ut.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var i=new h;this.bones[e]&&i.getInverse(this.bones[e].matrixWorld);this.boneInverses.push(i)}},pose:function(){for(var e,t=0,i=this.bones.length;t<i;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);t=0;for(i=this.bones.length;t<i;t++)if(e=this.bones[t])e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale)},update:function(){var e=new h;return function(){for(var t=0,i=this.bones.length;t<i;t++)e.multiplyMatrices(this.bones[t]?this.bones[t].matrixWorld:this.identityMatrix,this.boneInverses[t]),e.toArray(this.boneMatrices,16*t);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new ut(this.bones,this.boneInverses,this.useVertexTexture)}});pt.prototype=Object.assign(Object.create(oe.prototype),{constructor:pt,isBone:!0});dt.prototype=Object.assign(Object.create(Ee.prototype),{constructor:dt,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e;void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld);this.bindMatrix.copy(t);this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var e=0;e<this.geometry.skinWeights.length;e++){var t=this.geometry.skinWeights[e],i=1/t.lengthManhattan();Infinity!==i?t.multiplyScalar(i):t.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry)for(var t=new r,n=this.geometry.attributes.skinWeight,e=0;e<n.count;e++)t.x=n.getX(e),t.y=n.getY(e),t.z=n.getZ(e),t.w=n.getW(e),i=1/t.lengthManhattan(),Infinity!==i?t.multiplyScalar(i):t.set(1,0,0,0),n.setXYZW(e,t.x,t.y,t.z,t.w)},updateMatrixWorld:function(e){Ee.prototype.updateMatrixWorld.call(this,!0);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this);
}});ft.prototype=Object.create(q.prototype);ft.prototype.constructor=ft;ft.prototype.isLineBasicMaterial=!0;ft.prototype.copy=function(e){q.prototype.copy.call(this,e);this.color.copy(e.color);this.linewidth=e.linewidth;this.linecap=e.linecap;this.linejoin=e.linejoin;return this};mt.prototype=Object.assign(Object.create(oe.prototype),{constructor:mt,isLine:!0,raycast:function(){var e=new h,t=new ie,i=new Q;return function(n,r){var o=n.linePrecision,o=o*o,a=this.geometry,s=this.matrixWorld;null===a.boundingSphere&&a.computeBoundingSphere();i.copy(a.boundingSphere);i.applyMatrix4(s);if(!1!==n.ray.intersectsSphere(i)){e.getInverse(s);t.copy(n.ray).applyMatrix4(e);var h=new c,l=new c,s=new c,u=new c,p=this&&this.isLineSegments?2:1;if(a.isBufferGeometry){var d=a.index,f=a.attributes.position.array;if(null!==d)for(var d=d.array,a=0,m=d.length-1;a<m;a+=p){var g=d[a+1];h.fromArray(f,3*d[a]);l.fromArray(f,3*g);g=t.distanceSqToSegment(h,l,u,s);g>o||(u.applyMatrix4(this.matrixWorld),g=n.ray.origin.distanceTo(u),g<n.near||g>n.far||r.push({distance:g,point:s.clone().applyMatrix4(this.matrixWorld),index:a,face:null,faceIndex:null,object:this}))}else for(a=0,m=f.length/3-1;a<m;a+=p)h.fromArray(f,3*a),l.fromArray(f,3*a+3),g=t.distanceSqToSegment(h,l,u,s),g>o||(u.applyMatrix4(this.matrixWorld),g=n.ray.origin.distanceTo(u),g<n.near||g>n.far||r.push({distance:g,point:s.clone().applyMatrix4(this.matrixWorld),index:a,face:null,faceIndex:null,object:this}))}else if(a.isGeometry)for(h=a.vertices,l=h.length,a=0;a<l-1;a+=p)g=t.distanceSqToSegment(h[a],h[a+1],u,s),g>o||(u.applyMatrix4(this.matrixWorld),g=n.ray.origin.distanceTo(u),g<n.near||g>n.far||r.push({distance:g,point:s.clone().applyMatrix4(this.matrixWorld),index:a,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});gt.prototype=Object.assign(Object.create(mt.prototype),{constructor:gt,isLineSegments:!0});vt.prototype=Object.create(q.prototype);vt.prototype.constructor=vt;vt.prototype.isPointsMaterial=!0;vt.prototype.copy=function(e){q.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.size=e.size;this.sizeAttenuation=e.sizeAttenuation;return this};yt.prototype=Object.assign(Object.create(oe.prototype),{constructor:yt,isPoints:!0,raycast:function(){var e=new h,t=new ie,i=new Q;return function(n,r){function o(e,i){var o=t.distanceSqToPoint(e);if(o<u){var s=t.closestPointToPoint(e);s.applyMatrix4(h);var c=n.ray.origin.distanceTo(s);c<n.near||c>n.far||r.push({distance:c,distanceToRay:Math.sqrt(o),point:s.clone(),index:i,face:null,object:a})}}var a=this,s=this.geometry,h=this.matrixWorld,l=n.params.Points.threshold;null===s.boundingSphere&&s.computeBoundingSphere();i.copy(s.boundingSphere);i.applyMatrix4(h);if(!1!==n.ray.intersectsSphere(i)){e.getInverse(h);t.copy(n.ray).applyMatrix4(e);var l=l/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,l=new c;if(s.isBufferGeometry){var p=s.index,s=s.attributes.position.array;if(null!==p)for(var d=p.array,p=0,f=d.length;p<f;p++){var m=d[p];l.fromArray(s,3*m);o(l,m)}else for(p=0,d=s.length/3;p<d;p++)l.fromArray(s,3*p),o(l,p)}else for(l=s.vertices,p=0,d=l.length;p<d;p++)o(l[p],p)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});xt.prototype=Object.assign(Object.create(oe.prototype),{constructor:xt});_t.prototype=Object.create(n.prototype);_t.prototype.constructor=_t;bt.prototype=Object.create(n.prototype);bt.prototype.constructor=bt;bt.prototype.isCompressedTexture=!0;wt.prototype=Object.create(n.prototype);wt.prototype.constructor=wt;Mt.prototype=Object.create(n.prototype);Mt.prototype.constructor=Mt;Mt.prototype.isDepthTexture=!0;Et.prototype=Object.create(Me.prototype);Et.prototype.constructor=Et;Tt.prototype=Object.create(we.prototype);Tt.prototype.constructor=Tt;St.prototype=Object.create(Me.prototype);St.prototype.constructor=St;At.prototype=Object.create(we.prototype);At.prototype.constructor=At;Lt.prototype=Object.create(Me.prototype);Lt.prototype.constructor=Lt;Rt.prototype=Object.create(we.prototype);Rt.prototype.constructor=Rt;Pt.prototype=Object.create(Lt.prototype);Pt.prototype.constructor=Pt;Ct.prototype=Object.create(we.prototype);Ct.prototype.constructor=Ct;It.prototype=Object.create(Lt.prototype);It.prototype.constructor=It;Ut.prototype=Object.create(we.prototype);Ut.prototype.constructor=Ut;Nt.prototype=Object.create(Lt.prototype);Nt.prototype.constructor=Nt;Dt.prototype=Object.create(we.prototype);Dt.prototype.constructor=Dt;Ot.prototype=Object.create(Lt.prototype);Ot.prototype.constructor=Ot;Bt.prototype=Object.create(we.prototype);Bt.prototype.constructor=Bt;Ft.prototype=Object.create(Me.prototype);Ft.prototype.constructor=Ft;zt.prototype=Object.create(we.prototype);zt.prototype.constructor=zt;Gt.prototype=Object.create(Me.prototype);Gt.prototype.constructor=Gt;Ht.prototype=Object.create(we.prototype);Ht.prototype.constructor=Ht;Vt.prototype=Object.create(Me.prototype);Vt.prototype.constructor=Vt;var Tr={area:function(e){for(var t=e.length,i=0,n=t-1,r=0;r<t;n=r++)i+=e[n].x*e[r].y-e[r].x*e[n].y;return.5*i},triangulate:function(){return function(e,t){var i=e.length;if(3>i)return null;var n=[],r=[],o=[],a,s,c;if(0<Tr.area(e))for(s=0;s<i;s++)r[s]=s;else for(s=0;s<i;s++)r[s]=i-1-s;var h=2*i;for(s=i-1;2<i;){if(0>=h--){console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()");break}a=s;i<=a&&(a=0);s=a+1;i<=s&&(s=0);c=s+1;i<=c&&(c=0);var l;e:{var u,p,d,f,m,g,v,y;u=e[r[a]].x;p=e[r[a]].y;d=e[r[s]].x;f=e[r[s]].y;m=e[r[c]].x;g=e[r[c]].y;if(0>=(d-u)*(g-p)-(f-p)*(m-u))l=!1;else{var x,_,b,w,M,E,T,S,A,L;x=m-d;_=g-f;b=u-m;w=p-g;M=d-u;E=f-p;for(l=0;l<i;l++)if(v=e[r[l]].x,y=e[r[l]].y,!(v===u&&y===p||v===d&&y===f||v===m&&y===g)&&(T=v-u,S=y-p,A=v-d,L=y-f,v-=m,y-=g,A=x*L-_*A,T=M*S-E*T,S=b*y-w*v,A>=-Number.EPSILON&&S>=-Number.EPSILON&&T>=-Number.EPSILON)){l=!1;break e}l=!0}}if(l){n.push([e[r[a]],e[r[s]],e[r[c]]]);o.push([r[a],r[s],r[c]]);a=s;for(c=s+1;c<i;a++,c++)r[a]=r[c];i--;h=2*i}}return t?o:n}}(),triangulateShape:function(e,t){function i(e){var t=e.length;2<t&&e[t-1].equals(e[0])&&e.pop()}function n(e,t,i){return e.x!==t.x?e.x<t.x?e.x<=i.x&&i.x<=t.x:t.x<=i.x&&i.x<=e.x:e.y<t.y?e.y<=i.y&&i.y<=t.y:t.y<=i.y&&i.y<=e.y}function r(e,t,i,r,o){var a=t.x-e.x,s=t.y-e.y,c=r.x-i.x,h=r.y-i.y,l=e.x-i.x,u=e.y-i.y,p=s*c-a*h,d=s*l-a*u;if(Math.abs(p)>Number.EPSILON){if(0<p){if(0>d||d>p)return[];c=h*l-c*u;if(0>c||c>p)return[]}else{if(0<d||d<p)return[];c=h*l-c*u;if(0<c||c<p)return[]}if(0===c)return!o||0!==d&&d!==p?[e]:[];if(c===p)return!o||0!==d&&d!==p?[t]:[];if(0===d)return[i];if(d===p)return[r];o=c/p;return[{x:e.x+o*a,y:e.y+o*s}]}if(0!==d||h*l!==c*u)return[];s=0===a&&0===s;c=0===c&&0===h;if(s&&c)return e.x!==i.x||e.y!==i.y?[]:[e];if(s)return n(i,r,e)?[e]:[];if(c)return n(e,t,i)?[i]:[];0!==a?(e.x<t.x?(a=e,c=e.x,s=t,e=t.x):(a=t,c=t.x,s=e,e=e.x),i.x<r.x?(t=i,p=i.x,h=r,i=r.x):(t=r,p=r.x,h=i,i=i.x)):(e.y<t.y?(a=e,c=e.y,s=t,e=t.y):(a=t,c=t.y,s=e,e=e.y),i.y<r.y?(t=i,p=i.y,h=r,i=r.y):(t=r,p=r.y,h=i,i=i.y));return c<=p?e<p?[]:e===p?o?[]:[t]:e<=i?[t,s]:[t,h]:c>i?[]:c===i?o?[]:[a]:e<=i?[a,s]:[a,h]}function o(e,t,i,n){var r=t.x-e.x,o=t.y-e.y;t=i.x-e.x;i=i.y-e.y;var a=n.x-e.x;n=n.y-e.y;e=r*i-o*t;r=r*n-o*a;return Math.abs(e)>Number.EPSILON?(t=a*i-n*t,0<e?0<=r&&0<=t:0<=r||0<=t):0<r}i(e);t.forEach(i);var a,s,c,h,l,u={};c=e.concat();a=0;for(s=t.length;a<s;a++)Array.prototype.push.apply(c,t[a]);a=0;for(s=c.length;a<s;a++)l=c[a].x+":"+c[a].y,void 0!==u[l]&&console.warn("THREE.ShapeUtils: Duplicate point",l,a),u[l]=a;a=function(e,t){function i(e,t){var i=s.length-1,n=e-1;0>n&&(n=i);var r=e+1;r>i&&(r=0);i=o(s[e],s[n],s[r],c[t]);if(!i)return!1;i=c.length-1;n=t-1;0>n&&(n=i);r=t+1;r>i&&(r=0);return(i=o(c[t],c[n],c[r],s[e]))?!0:!1}function n(e,t){var i,n;for(i=0;i<s.length;i++)if(n=i+1,n%=s.length,n=r(e,t,s[i],s[n],!0),0<n.length)return!0;return!1}function a(e,i){var n,o,a,s;for(n=0;n<h.length;n++)for(o=t[h[n]],a=0;a<o.length;a++)if(s=a+1,s%=o.length,s=r(e,i,o[a],o[s],!0),0<s.length)return!0;return!1}var s=e.concat(),c,h=[],l,u,p,d,f,m=[],g,v,y,x=0;for(l=t.length;x<l;x++)h.push(x);g=0;for(var _=2*h.length;0<h.length;){_--;if(0>_){console.log("Infinite Loop! Holes left:"+h.length+", Probably Hole outside Shape!");break}for(u=g;u<s.length;u++){p=s[u];l=-1;for(x=0;x<h.length;x++)if(d=h[x],f=p.x+":"+p.y+":"+d,void 0===m[f]){c=t[d];for(v=0;v<c.length;v++)if(d=c[v],i(u,v)&&!n(p,d)&&!a(p,d)){l=v;h.splice(x,1);g=s.slice(0,u+1);d=s.slice(u);v=c.slice(l);y=c.slice(0,l+1);s=g.concat(v).concat(y).concat(d);g=u;break}if(0<=l)break;m[f]=!0}if(0<=l)break}}return s}(e,t);var p=Tr.triangulate(a,!1);a=0;for(s=p.length;a<s;a++)for(h=p[a],c=0;3>c;c++)l=h[c].x+":"+h[c].y,l=u[l],void 0!==l&&(h[c]=l);return p.concat()},isClockWise:function(e){return 0>Tr.area(e)}};kt.prototype=Object.create(we.prototype);kt.prototype.constructor=kt;kt.prototype.addShapeList=function(e,t){for(var i=e.length,n=0;n<i;n++)this.addShape(e[n],t)};kt.prototype.addShape=function(e,t){function n(e,t,i){t||console.error("THREE.ExtrudeGeometry: vec does not exist");return t.clone().multiplyScalar(i).add(e)}function r(e,t,n){var r,o,a;o=e.x-t.x;a=e.y-t.y;r=n.x-e.x;var s=n.y-e.y,c=o*o+a*a;if(Math.abs(o*s-a*r)>Number.EPSILON){var h=Math.sqrt(c),l=Math.sqrt(r*r+s*s),c=t.x-a/h;t=t.y+o/h;s=((n.x-s/l-c)*s-(n.y+r/l-t)*r)/(o*s-a*r);r=c+o*s-e.x;o=t+a*s-e.y;a=r*r+o*o;if(2>=a)return new i(r,o);a=Math.sqrt(a/2)}else e=!1,o>Number.EPSILON?r>Number.EPSILON&&(e=!0):o<-Number.EPSILON?r<-Number.EPSILON&&(e=!0):Math.sign(a)===Math.sign(s)&&(e=!0),e?(r=-a,a=Math.sqrt(c)):(r=o,o=a,a=Math.sqrt(c/2));return new i(r/a,o/a)}function o(e,t){var i,n;for(G=e.length;0<=--G;){i=G;n=G-1;0>n&&(n=e.length-1);var r,o=m+2*p;for(r=0;r<o;r++){var a=B*r,s=B*(r+1),c=t+i+a,a=t+n+a,h=t+n+s,s=t+i+s,c=c+L,a=a+L,h=h+L,s=s+L;A.faces.push(new ce(c,a,s,null,null,1));A.faces.push(new ce(a,h,s,null,null,1));c=x.generateSideWallUV(A,c,a,h,s);A.faceVertexUvs[0].push([c[0],c[1],c[3]]);A.faceVertexUvs[0].push([c[1],c[2],c[3]])}}}function a(e,t,i){A.vertices.push(new c(e,t,i))}function s(e,t,i){e+=L;t+=L;i+=L;A.faces.push(new ce(e,t,i,null,null,0));e=x.generateTopUV(A,e,t,i);A.faceVertexUvs[0].push(e)}var h=void 0!==t.amount?t.amount:100,l=void 0!==t.bevelThickness?t.bevelThickness:6,u=void 0!==t.bevelSize?t.bevelSize:l-2,p=void 0!==t.bevelSegments?t.bevelSegments:3,d=void 0!==t.bevelEnabled?t.bevelEnabled:!0,f=void 0!==t.curveSegments?t.curveSegments:12,m=void 0!==t.steps?t.steps:1,g=t.extrudePath,v,y=!1,x=void 0!==t.UVGenerator?t.UVGenerator:kt.WorldUVGenerator,_,b,w,M;g&&(v=g.getSpacedPoints(m),y=!0,d=!1,_=void 0!==t.frames?t.frames:g.computeFrenetFrames(m,!1),b=new c,w=new c,M=new c);d||(u=l=p=0);var E,T,S,A=this,L=this.vertices.length,g=e.extractPoints(f),f=g.shape,R=g.holes;if(g=!Tr.isClockWise(f)){f=f.reverse();T=0;for(S=R.length;T<S;T++)E=R[T],Tr.isClockWise(E)&&(R[T]=E.reverse());g=!1}var P=Tr.triangulateShape(f,R),C=f;T=0;for(S=R.length;T<S;T++)E=R[T],f=f.concat(E);var I,U,N,D,O,B=f.length,F,z=P.length,g=[],G=0;N=C.length;I=N-1;for(U=G+1;G<N;G++,I++,U++)I===N&&(I=0),U===N&&(U=0),g[G]=r(C[G],C[I],C[U]);var H=[],V,k=g.concat();T=0;for(S=R.length;T<S;T++){E=R[T];V=[];G=0;N=E.length;I=N-1;for(U=G+1;G<N;G++,I++,U++)I===N&&(I=0),U===N&&(U=0),V[G]=r(E[G],E[I],E[U]);H.push(V);k=k.concat(V)}for(I=0;I<p;I++){N=I/p;D=l*Math.cos(N*Math.PI/2);U=u*Math.sin(N*Math.PI/2);G=0;for(N=C.length;G<N;G++)O=n(C[G],g[G],U),a(O.x,O.y,-D);T=0;for(S=R.length;T<S;T++)for(E=R[T],V=H[T],G=0,N=E.length;G<N;G++)O=n(E[G],V[G],U),a(O.x,O.y,-D)}U=u;for(G=0;G<B;G++)O=d?n(f[G],k[G],U):f[G],y?(w.copy(_.normals[0]).multiplyScalar(O.x),b.copy(_.binormals[0]).multiplyScalar(O.y),M.copy(v[0]).add(w).add(b),a(M.x,M.y,M.z)):a(O.x,O.y,0);for(N=1;N<=m;N++)for(G=0;G<B;G++)O=d?n(f[G],k[G],U):f[G],y?(w.copy(_.normals[N]).multiplyScalar(O.x),b.copy(_.binormals[N]).multiplyScalar(O.y),M.copy(v[N]).add(w).add(b),a(M.x,M.y,M.z)):a(O.x,O.y,h/m*N);for(I=p-1;0<=I;I--){N=I/p;D=l*Math.cos(N*Math.PI/2);U=u*Math.sin(N*Math.PI/2);G=0;for(N=C.length;G<N;G++)O=n(C[G],g[G],U),a(O.x,O.y,h+D);T=0;for(S=R.length;T<S;T++)for(E=R[T],V=H[T],G=0,N=E.length;G<N;G++)O=n(E[G],V[G],U),y?a(O.x,O.y+v[m-1].y,v[m-1].x+D):a(O.x,O.y,h+D)}(function(){if(d){var e=0*B;for(G=0;G<z;G++)F=P[G],s(F[2]+e,F[1]+e,F[0]+e);e=B*(m+2*p);for(G=0;G<z;G++)F=P[G],s(F[0]+e,F[1]+e,F[2]+e)}else{for(G=0;G<z;G++)F=P[G],s(F[2],F[1],F[0]);for(G=0;G<z;G++)F=P[G],s(F[0]+B*m,F[1]+B*m,F[2]+B*m)}})();(function(){var e=0;o(C,e);e+=C.length;T=0;for(S=R.length;T<S;T++)E=R[T],o(E,e),e+=E.length})()};kt.WorldUVGenerator={generateTopUV:function(e,t,n,r){e=e.vertices;t=e[t];n=e[n];r=e[r];return[new i(t.x,t.y),new i(n.x,n.y),new i(r.x,r.y)]},generateSideWallUV:function(e,t,n,r,o){e=e.vertices;t=e[t];n=e[n];r=e[r];o=e[o];return.01>Math.abs(t.y-n.y)?[new i(t.x,1-t.z),new i(n.x,1-n.z),new i(r.x,1-r.z),new i(o.x,1-o.z)]:[new i(t.y,1-t.z),new i(n.y,1-n.z),new i(r.y,1-r.z),new i(o.y,1-o.z)]}};jt.prototype=Object.create(kt.prototype);jt.prototype.constructor=jt;Wt.prototype=Object.create(we.prototype);Wt.prototype.constructor=Wt;Xt.prototype=Object.create(Me.prototype);Xt.prototype.constructor=Xt;qt.prototype=Object.create(we.prototype);qt.prototype.constructor=qt;Yt.prototype=Object.create(Me.prototype);Yt.prototype.constructor=Yt;Zt.prototype=Object.create(we.prototype);Zt.prototype.constructor=Zt;Jt.prototype=Object.create(Me.prototype);Jt.prototype.constructor=Jt;Qt.prototype=Object.create(we.prototype);Qt.prototype.constructor=Qt;Kt.prototype=Object.create(Me.prototype);Kt.prototype.constructor=Kt;$t.prototype=Object.create(Me.prototype);$t.prototype.constructor=$t;ei.prototype=Object.create(we.prototype);ei.prototype.constructor=ei;ti.prototype=Object.create(Me.prototype);ti.prototype.constructor=ti;ii.prototype=Object.create(ei.prototype);ii.prototype.constructor=ii;ni.prototype=Object.create(ti.prototype);ni.prototype.constructor=ni;ri.prototype=Object.create(we.prototype);ri.prototype.constructor=ri;oi.prototype=Object.create(Me.prototype);oi.prototype.constructor=oi;var Sr=Object.freeze({WireframeGeometry:Et,ParametricGeometry:Tt,ParametricBufferGeometry:St,TetrahedronGeometry:Rt,TetrahedronBufferGeometry:Pt,OctahedronGeometry:Ct,OctahedronBufferGeometry:It,IcosahedronGeometry:Ut,IcosahedronBufferGeometry:Nt,DodecahedronGeometry:Dt,DodecahedronBufferGeometry:Ot,PolyhedronGeometry:At,PolyhedronBufferGeometry:Lt,TubeGeometry:Bt,TubeBufferGeometry:Ft,TorusKnotGeometry:zt,TorusKnotBufferGeometry:Gt,TorusGeometry:Ht,TorusBufferGeometry:Vt,TextGeometry:jt,SphereGeometry:Wt,SphereBufferGeometry:Xt,RingGeometry:qt,RingBufferGeometry:Yt,PlaneGeometry:Ae,PlaneBufferGeometry:Le,LatheGeometry:Zt,LatheBufferGeometry:Jt,ShapeGeometry:Qt,ShapeBufferGeometry:Kt,ExtrudeGeometry:kt,EdgesGeometry:$t,ConeGeometry:ii,ConeBufferGeometry:ni,CylinderGeometry:ei,CylinderBufferGeometry:ti,CircleGeometry:ri,CircleBufferGeometry:oi,BoxGeometry:Te,BoxBufferGeometry:Se});ai.prototype=Object.create(Y.prototype);ai.prototype.constructor=ai;ai.prototype.isShadowMaterial=!0;si.prototype=Object.create(Y.prototype);si.prototype.constructor=si;si.prototype.isRawShaderMaterial=!0;ci.prototype={constructor:ci,isMultiMaterial:!0,toJSON:function(e){for(var t={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},i=this.materials,n=0,r=i.length;n<r;n++){var o=i[n].toJSON(e);delete o.metadata;t.materials.push(o)}t.visible=this.visible;return t},clone:function(){for(var e=new this.constructor,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());e.visible=this.visible;return e}};hi.prototype=Object.create(q.prototype);hi.prototype.constructor=hi;hi.prototype.isMeshStandardMaterial=!0;hi.prototype.copy=function(e){q.prototype.copy.call(this,e);this.defines={STANDARD:""};this.color.copy(e.color);this.roughness=e.roughness;this.metalness=e.metalness;this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.emissive.copy(e.emissive);this.emissiveMap=e.emissiveMap;this.emissiveIntensity=e.emissiveIntensity;this.bumpMap=e.bumpMap;this.bumpScale=e.bumpScale;this.normalMap=e.normalMap;this.normalScale.copy(e.normalScale);this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.roughnessMap=e.roughnessMap;this.metalnessMap=e.metalnessMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.envMapIntensity=e.envMapIntensity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};li.prototype=Object.create(hi.prototype);li.prototype.constructor=li;li.prototype.isMeshPhysicalMaterial=!0;li.prototype.copy=function(e){hi.prototype.copy.call(this,e);this.defines={PHYSICAL:""};this.reflectivity=e.reflectivity;this.clearCoat=e.clearCoat;this.clearCoatRoughness=e.clearCoatRoughness;return this};ui.prototype=Object.create(q.prototype);ui.prototype.constructor=ui;ui.prototype.isMeshPhongMaterial=!0;ui.prototype.copy=function(e){q.prototype.copy.call(this,e);this.color.copy(e.color);this.specular.copy(e.specular);this.shininess=e.shininess;this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.emissive.copy(e.emissive);this.emissiveMap=e.emissiveMap;this.emissiveIntensity=e.emissiveIntensity;this.bumpMap=e.bumpMap;this.bumpScale=e.bumpScale;this.normalMap=e.normalMap;this.normalScale.copy(e.normalScale);this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.specularMap=e.specularMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.combine=e.combine;this.reflectivity=e.reflectivity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};pi.prototype=Object.create(ui.prototype);pi.prototype.constructor=pi;pi.prototype.isMeshToonMaterial=!0;pi.prototype.copy=function(e){ui.prototype.copy.call(this,e);this.gradientMap=e.gradientMap;return this};di.prototype=Object.create(q.prototype);di.prototype.constructor=di;di.prototype.isMeshNormalMaterial=!0;di.prototype.copy=function(e){q.prototype.copy.call(this,e);this.bumpMap=e.bumpMap;this.bumpScale=e.bumpScale;this.normalMap=e.normalMap;this.normalScale.copy(e.normalScale);this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};fi.prototype=Object.create(q.prototype);fi.prototype.constructor=fi;fi.prototype.isMeshLambertMaterial=!0;fi.prototype.copy=function(e){q.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.emissive.copy(e.emissive);this.emissiveMap=e.emissiveMap;this.emissiveIntensity=e.emissiveIntensity;this.specularMap=e.specularMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.combine=e.combine;this.reflectivity=e.reflectivity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};mi.prototype=Object.create(q.prototype);mi.prototype.constructor=mi;mi.prototype.isLineDashedMaterial=!0;mi.prototype.copy=function(e){q.prototype.copy.call(this,e);this.color.copy(e.color);this.linewidth=e.linewidth;this.scale=e.scale;this.dashSize=e.dashSize;this.gapSize=e.gapSize;return this};var Ar=Object.freeze({ShadowMaterial:ai,SpriteMaterial:ct,RawShaderMaterial:si,ShaderMaterial:Y,PointsMaterial:vt,MultiMaterial:ci,MeshPhysicalMaterial:li,MeshStandardMaterial:hi,MeshPhongMaterial:ui,MeshToonMaterial:pi,MeshNormalMaterial:di,MeshLambertMaterial:fi,MeshDepthMaterial:Z,MeshBasicMaterial:he,LineDashedMaterial:mi,LineBasicMaterial:ft,Material:q}),Lr={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Rr=new gi;Object.assign(vi.prototype,{load:function(e,t,i,n){void 0===e&&(e="");void 0!==this.path&&(e=this.path+e);var r=this,o=Lr.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o);r.manager.itemEnd(e)},0),o;var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],c=!!a[2],a=a[3],a=window.decodeURIComponent(a);c&&(a=window.atob(a));try{var h,l=(this.responseType||"").toLowerCase();switch(l){case"arraybuffer":case"blob":h=new ArrayBuffer(a.length);for(var u=new Uint8Array(h),c=0;c<a.length;c++)u[c]=a.charCodeAt(c);"blob"===l&&(h=new Blob([h],{type:s}));break;case"document":h=(new DOMParser).parseFromString(a,s);break;case"json":h=JSON.parse(a);break;default:h=a}window.setTimeout(function(){t&&t(h);r.manager.itemEnd(e)},0)}catch(p){window.setTimeout(function(){n&&n(p);r.manager.itemError(e)},0)}}else{var d=new XMLHttpRequest;d.open("GET",e,!0);d.addEventListener("load",function(i){var o=i.target.response;Lr.add(e,o);200===this.status?(t&&t(o),r.manager.itemEnd(e)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),t&&t(o),r.manager.itemEnd(e)):(n&&n(i),r.manager.itemError(e))},!1);void 0!==i&&d.addEventListener("progress",function(e){i(e)},!1);d.addEventListener("error",function(t){n&&n(t);r.manager.itemError(e)},!1);void 0!==this.responseType&&(d.responseType=this.responseType);void 0!==this.withCredentials&&(d.withCredentials=this.withCredentials);d.overrideMimeType&&d.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");d.send(null)}r.manager.itemStart(e);return d},setPath:function(e){this.path=e;return this},setResponseType:function(e){this.responseType=e;return this},setWithCredentials:function(e){this.withCredentials=e;return this},setMimeType:function(e){this.mimeType=e;return this}});Object.assign(yi.prototype,{load:function(e,t,i,n){function r(r){c.load(e[r],function(e){e=o._parser(e,!0);a[r]={width:e.width,height:e.height,format:e.format,mipmaps:e.mipmaps};h+=1;6===h&&(1===e.mipmapCount&&(s.minFilter=1006),s.format=e.format,s.needsUpdate=!0,t&&t(s))},i,n)}var o=this,a=[],s=new bt;s.image=a;var c=new vi(this.manager);c.setPath(this.path);c.setResponseType("arraybuffer");if(Array.isArray(e))for(var h=0,l=0,u=e.length;l<u;++l)r(l);else c.load(e,function(e){e=o._parser(e,!0);if(e.isCubemap)for(var i=e.mipmaps.length/e.mipmapCount,n=0;n<i;n++){a[n]={mipmaps:[]};for(var r=0;r<e.mipmapCount;r++)a[n].mipmaps.push(e.mipmaps[n*e.mipmapCount+r]),a[n].format=e.format,a[n].width=e.width,a[n].height=e.height}else s.image.width=e.width,s.image.height=e.height,s.mipmaps=e.mipmaps;1===e.mipmapCount&&(s.minFilter=1006);s.format=e.format;s.needsUpdate=!0;t&&t(s)},i,n);return s},setPath:function(e){this.path=e;return this}});Object.assign(xi.prototype,{load:function(e,t,i,n){var r=this,o=new k,a=new vi(this.manager);a.setResponseType("arraybuffer");a.load(e,function(e){if(e=r._parser(e))void 0!==e.image?o.image=e.image:void 0!==e.data&&(o.image.width=e.width,o.image.height=e.height,o.image.data=e.data),o.wrapS=void 0!==e.wrapS?e.wrapS:1001,o.wrapT=void 0!==e.wrapT?e.wrapT:1001,o.magFilter=void 0!==e.magFilter?e.magFilter:1006,o.minFilter=void 0!==e.minFilter?e.minFilter:1008,o.anisotropy=void 0!==e.anisotropy?e.anisotropy:1,void 0!==e.format&&(o.format=e.format),void 0!==e.type&&(o.type=e.type),void 0!==e.mipmaps&&(o.mipmaps=e.mipmaps),1===e.mipmapCount&&(o.minFilter=1006),o.needsUpdate=!0,t&&t(o,e)},i,n);return o}});Object.assign(_i.prototype,{load:function(e,t,i,n){void 0===e&&(e="");void 0!==this.path&&(e=this.path+e);var r=this,o=Lr.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o);r.manager.itemEnd(e)},0),o;i=document.createElementNS("http://www.w3.org/1999/xhtml","img");i.addEventListener("load",function(){Lr.add(e,this);t&&t(this);r.manager.itemEnd(e)},!1);i.addEventListener("error",function(t){n&&n(t);r.manager.itemError(e)},!1);void 0!==this.crossOrigin&&(i.crossOrigin=this.crossOrigin);r.manager.itemStart(e);i.src=e;return i},setCrossOrigin:function(e){this.crossOrigin=e;return this},setPath:function(e){this.path=e;return this}});Object.assign(bi.prototype,{load:function(e,t,i,n){function r(i){a.load(e[i],function(e){o.images[i]=e;s++;6===s&&(o.needsUpdate=!0,t&&t(o))},void 0,n)}var o=new l,a=new _i(this.manager);a.setCrossOrigin(this.crossOrigin);a.setPath(this.path);var s=0;for(i=0;i<e.length;++i)r(i);return o},setCrossOrigin:function(e){this.crossOrigin=e;return this},setPath:function(e){this.path=e;return this}});Object.assign(wi.prototype,{load:function(e,t,i,r){var o=new n,a=new _i(this.manager);a.setCrossOrigin(this.crossOrigin);a.setPath(this.path);a.load(e,function(i){var n=0<e.search(/\.(jpg|jpeg)$/)||0===e.search(/^data\:image\/jpeg/);o.format=n?1022:1023;o.image=i;o.needsUpdate=!0;void 0!==t&&t(o)},i,r);return o},setCrossOrigin:function(e){this.crossOrigin=e;return this},setPath:function(e){this.path=e;return this}});Mi.prototype=Object.assign(Object.create(oe.prototype),{constructor:Mi,isLight:!0,copy:function(e){oe.prototype.copy.call(this,e);this.color.copy(e.color);this.intensity=e.intensity;return this},toJSON:function(e){e=oe.prototype.toJSON.call(this,e);e.object.color=this.color.getHex();e.object.intensity=this.intensity;void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex());void 0!==this.distance&&(e.object.distance=this.distance);void 0!==this.angle&&(e.object.angle=this.angle);void 0!==this.decay&&(e.object.decay=this.decay);void 0!==this.penumbra&&(e.object.penumbra=this.penumbra);void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON());return e}});Ei.prototype=Object.assign(Object.create(Mi.prototype),{constructor:Ei,isHemisphereLight:!0,copy:function(e){Mi.prototype.copy.call(this,e);this.groundColor.copy(e.groundColor);return this}});Object.assign(Ti.prototype,{copy:function(e){this.camera=e.camera.clone();this.bias=e.bias;this.radius=e.radius;this.mapSize.copy(e.mapSize);return this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};0!==this.bias&&(e.bias=this.bias);1!==this.radius&&(e.radius=this.radius);if(512!==this.mapSize.x||512!==this.mapSize.y)e.mapSize=this.mapSize.toArray();e.camera=this.camera.toJSON(!1).object;delete e.camera.matrix;return e}});Si.prototype=Object.assign(Object.create(Ti.prototype),{constructor:Si,isSpotLightShadow:!0,update:function(e){var t=2*hr.RAD2DEG*e.angle,i=this.mapSize.width/this.mapSize.height;e=e.distance||500;var n=this.camera;if(t!==n.fov||i!==n.aspect||e!==n.far)n.fov=t,n.aspect=i,n.far=e,n.updateProjectionMatrix()}});Ai.prototype=Object.assign(Object.create(Mi.prototype),{constructor:Ai,isSpotLight:!0,copy:function(e){Mi.prototype.copy.call(this,e);this.distance=e.distance;this.angle=e.angle;this.penumbra=e.penumbra;this.decay=e.decay;this.target=e.target.clone();this.shadow=e.shadow.clone();return this}});Li.prototype=Object.assign(Object.create(Mi.prototype),{constructor:Li,isPointLight:!0,copy:function(e){Mi.prototype.copy.call(this,e);this.distance=e.distance;this.decay=e.decay;this.shadow=e.shadow.clone();return this}});Ri.prototype=Object.assign(Object.create(Ti.prototype),{constructor:Ri});Pi.prototype=Object.assign(Object.create(Mi.prototype),{constructor:Pi,isDirectionalLight:!0,copy:function(e){Mi.prototype.copy.call(this,e);this.target=e.target.clone();this.shadow=e.shadow.clone();return this}});Ci.prototype=Object.assign(Object.create(Mi.prototype),{constructor:Ci,isAmbientLight:!0});var Pr={arraySlice:function(e,t,i){return Pr.isTypedArray(e)?new e.constructor(e.subarray(t,i)):e.slice(t,i)},convertArray:function(e,t,i){return!e||!i&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,i=Array(t),n=0;n!==t;++n)i[n]=n;i.sort(function(t,i){return e[t]-e[i]});return i},sortedArray:function(e,t,i){for(var n=e.length,r=new e.constructor(n),o=0,a=0;a!==n;++o)for(var s=i[o]*t,c=0;c!==t;++c)r[a++]=e[s+c];return r},flattenJSON:function(e,t,i,n){for(var r=1,o=e[0];void 0!==o&&void 0===o[n];)o=e[r++];if(void 0!==o){var a=o[n];if(void 0!==a)if(Array.isArray(a)){do a=o[n],void 0!==a&&(t.push(o.time),i.push.apply(i,a)),o=e[r++];while(void 0!==o)}else if(void 0!==a.toArray){do a=o[n],void 0!==a&&(t.push(o.time),a.toArray(i,i.length)),o=e[r++];while(void 0!==o)}else{do a=o[n],void 0!==a&&(t.push(o.time),i.push(a)),o=e[r++];while(void 0!==o)}}}};Ii.prototype={constructor:Ii,evaluate:function(e){var t=this.parameterPositions,i=this._cachedIndex,n=t[i],r=t[i-1];e:{t:{i:{n:if(!(e<n)){for(var o=i+2;;){if(void 0===n){if(e<r)break n;this._cachedIndex=i=t.length;return this.afterEnd_(i-1,e,r)}if(i===o)break;r=n;n=t[++i];if(e<n)break t}n=t.length;break i}if(e>=r)break e;else{o=t[1];e<o&&(i=2,r=o);for(o=i-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(i===o)break;n=r;r=t[--i-1];if(e>=r)break t}n=i;i=0}}for(;i<n;)r=i+n>>>1,e<t[r]?n=r:i=r+1;n=t[i];r=t[i-1];if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(void 0===n)return this._cachedIndex=i=t.length,this.afterEnd_(i-1,r,e)}this._cachedIndex=i;this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,e,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){var t=this.resultBuffer,i=this.sampleValues,n=this.valueSize;e*=n;for(var r=0;r!==n;++r)t[r]=i[e+r];return t},interpolate_:function(e,t,i,n){throw Error("call to abstract method")},intervalChanged_:function(e,t,i){}};Object.assign(Ii.prototype,{beforeStart_:Ii.prototype.copySampleValue_,afterEnd_:Ii.prototype.copySampleValue_});Ui.prototype=Object.assign(Object.create(Ii.prototype),{constructor:Ui,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(e,t,i){var n=this.parameterPositions,r=e-2,o=e+1,a=n[r],s=n[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:r=e;a=2*t-i;break;case 2402:r=n.length-2;a=t+n[r]-n[r+1];break;default:r=e,a=i}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=e;s=2*i-t;break;case 2402:o=1;s=i+n[1]-n[0];break;default:o=e-1,s=t}e=.5*(i-t);n=this.valueSize;this._weightPrev=e/(t-a);this._weightNext=e/(s-i);this._offsetPrev=r*n;this._offsetNext=o*n},interpolate_:function(e,t,i,n){var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize;e*=a;var s=e-a,c=this._offsetPrev,h=this._offsetNext,l=this._weightPrev,u=this._weightNext,p=(i-t)/(n-t);i=p*p;n=i*p;t=-l*n+2*l*i-l*p;l=(1+l)*n+(-1.5-2*l)*i+(-.5+l)*p+1;p=(-1-u)*n+(1.5+u)*i+.5*p;u=u*n-u*i;for(i=0;i!==a;++i)r[i]=t*o[c+i]+l*o[s+i]+p*o[e+i]+u*o[h+i];return r}});Ni.prototype=Object.assign(Object.create(Ii.prototype),{constructor:Ni,interpolate_:function(e,t,i,n){var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize;e*=a;var s=e-a;t=(i-t)/(n-t);i=1-t;for(n=0;n!==a;++n)r[n]=o[s+n]*i+o[e+n]*t;return r}});Di.prototype=Object.assign(Object.create(Ii.prototype),{constructor:Di,interpolate_:function(e,t,i,n){return this.copySampleValue_(e-1)}});var Cr;Cr={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){
return new Di(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Ni(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Ui(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(t);console.warn(t)}else this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,i=0,n=t.length;i!==n;++i)t[i]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,i=0,n=t.length;i!==n;++i)t[i]*=e;return this},trim:function(e,t){for(var i=this.times,n=i.length,r=0,o=n-1;r!==n&&i[r]<e;)++r;for(;-1!==o&&i[o]>t;)--o;++o;if(0!==r||o!==n)r>=o&&(o=Math.max(o,1),r=o-1),n=this.getValueSize(),this.times=Pr.arraySlice(i,r,o),this.values=Pr.arraySlice(this.values,r*n,o*n);return this},validate:function(){var e=!0,t=this.getValueSize();0!==t-Math.floor(t)&&(console.error("invalid value size in track",this),e=!1);var i=this.times,t=this.values,n=i.length;0===n&&(console.error("track is empty",this),e=!1);for(var r=null,o=0;o!==n;o++){var a=i[o];if("number"===typeof a&&isNaN(a)){console.error("time is not a valid number",this,o,a);e=!1;break}if(null!==r&&r>a){console.error("out of order keys",this,o,a,r);e=!1;break}r=a}if(void 0!==t&&Pr.isTypedArray(t))for(o=0,i=t.length;o!==i;++o)if(n=t[o],isNaN(n)){console.error("value is not a valid number",this,o,n);e=!1;break}return e},optimize:function(){for(var e=this.times,t=this.values,i=this.getValueSize(),n=2302===this.getInterpolation(),r=1,o=e.length-1,a=1;a<o;++a){var s=!1,c=e[a];if(c!==e[a+1]&&(1!==a||c!==c[0]))if(n)s=!0;else for(var h=a*i,l=h-i,u=h+i,c=0;c!==i;++c){var p=t[h+c];if(p!==t[l+c]||p!==t[u+c]){s=!0;break}}if(s){if(a!==r)for(e[r]=e[a],s=a*i,h=r*i,c=0;c!==i;++c)t[h+c]=t[s+c];++r}}if(0<o){e[r]=e[o];s=o*i;h=r*i;for(c=0;c!==i;++c)t[h+c]=t[s+c];++r}r!==e.length&&(this.times=Pr.arraySlice(e,0,r),this.values=Pr.arraySlice(t,0,r*i));return this}};Bi.prototype=Object.assign(Object.create(Cr),{constructor:Bi,ValueTypeName:"vector"});Fi.prototype=Object.assign(Object.create(Ii.prototype),{constructor:Fi,interpolate_:function(e,t,i,n){var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize;e*=a;t=(i-t)/(n-t);for(i=e+a;e!==i;e+=4)s.slerpFlat(r,0,o,e-a,o,e,t);return r}});zi.prototype=Object.assign(Object.create(Cr),{constructor:zi,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new Fi(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0});Gi.prototype=Object.assign(Object.create(Cr),{constructor:Gi,ValueTypeName:"number"});Hi.prototype=Object.assign(Object.create(Cr),{constructor:Hi,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});Vi.prototype=Object.assign(Object.create(Cr),{constructor:Vi,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});ki.prototype=Object.assign(Object.create(Cr),{constructor:ki,ValueTypeName:"color"});ji.prototype=Cr;Cr.constructor=ji;Object.assign(ji,{parse:function(e){if(void 0===e.type)throw Error("track type undefined, can not parse");var t=ji._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var i=[],n=[];Pr.flattenJSON(e.keys,i,n,"value");e.times=i;e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t=e.constructor;if(void 0!==t.toJSON)t=t.toJSON(e);else{var t={name:e.name,times:Pr.convertArray(e.times,Array),values:Pr.convertArray(e.values,Array)},i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}t.type=e.ValueTypeName;return t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Gi;case"vector":case"vector2":case"vector3":case"vector4":return Bi;case"color":return ki;case"quaternion":return zi;case"bool":case"boolean":return Vi;case"string":return Hi}throw Error("Unsupported typeName: "+e)}});Wi.prototype={constructor:Wi,resetDuration:function(){for(var e=0,t=0,i=this.tracks.length;t!==i;++t)var n=this.tracks[t],e=Math.max(e,n.times[n.times.length-1]);this.duration=e},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}};Object.assign(Wi,{parse:function(e){for(var t=[],i=e.tracks,n=1/(e.fps||1),r=0,o=i.length;r!==o;++r)t.push(ji.parse(i[r]).scale(n));return new Wi(e.name,e.duration,t)},toJSON:function(e){var t=[],i=e.tracks;e={name:e.name,duration:e.duration,tracks:t};for(var n=0,r=i.length;n!==r;++n)t.push(ji.toJSON(i[n]));return e},CreateFromMorphTargetSequence:function(e,t,i,n){for(var r=t.length,o=[],a=0;a<r;a++){var s=[],c=[];s.push((a+r-1)%r,a,(a+1)%r);c.push(0,1,0);var h=Pr.getKeyframeOrder(s),s=Pr.sortedArray(s,1,h),c=Pr.sortedArray(c,1,h);n||0!==s[0]||(s.push(r),c.push(c[0]));o.push(new Gi(".morphTargetInfluences["+t[a].name+"]",s,c).scale(1/i))}return new Wi(e,-1,o)},findByName:function(e,t){var i=e;Array.isArray(e)||(i=e.geometry&&e.geometry.animations||e.animations);for(var n=0;n<i.length;n++)if(i[n].name===t)return i[n];return null},CreateClipsFromMorphTargetSequences:function(e,t,i){for(var n={},r=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],c=s.name.match(r);if(c&&1<c.length){var h=c[1];(c=n[h])||(n[h]=c=[]);c.push(s)}}e=[];for(h in n)e.push(Wi.CreateFromMorphTargetSequence(h,n[h],t,i));return e},parseAnimation:function(e,t){if(!e)return console.error("  no animation in JSONLoader data"),null;for(var i=function(e,t,i,n,r){if(0!==i.length){var o=[],a=[];Pr.flattenJSON(i,o,a,n);0!==o.length&&r.push(new e(t,o,a))}},n=[],r=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],c=0;c<s.length;c++){var h=s[c].keys;if(h&&0!==h.length)if(h[0].morphTargets){for(var o={},l=0;l<h.length;l++)if(h[l].morphTargets)for(var u=0;u<h[l].morphTargets.length;u++)o[h[l].morphTargets[u]]=-1;for(var p in o){for(var d=[],f=[],u=0;u!==h[l].morphTargets.length;++u){var m=h[l];d.push(m.time);f.push(m.morphTarget===p?1:0)}n.push(new Gi(".morphTargetInfluence["+p+"]",d,f))}o=o.length*(a||1)}else l=".bones["+t[c].name+"]",i(Bi,l+".position",h,"pos",n),i(zi,l+".quaternion",h,"rot",n),i(Bi,l+".scale",h,"scl",n)}return 0===n.length?null:new Wi(r,o,n)}});Object.assign(Xi.prototype,{load:function(e,t,i,n){var r=this;new vi(r.manager).load(e,function(e){t(r.parse(JSON.parse(e)))},i,n)},setTextures:function(e){this.textures=e},parse:function(e){function t(e){void 0===n[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e);return n[e]}var n=this.textures,r=new Ar[e.type];void 0!==e.uuid&&(r.uuid=e.uuid);void 0!==e.name&&(r.name=e.name);void 0!==e.color&&r.color.setHex(e.color);void 0!==e.roughness&&(r.roughness=e.roughness);void 0!==e.metalness&&(r.metalness=e.metalness);void 0!==e.emissive&&r.emissive.setHex(e.emissive);void 0!==e.specular&&r.specular.setHex(e.specular);void 0!==e.shininess&&(r.shininess=e.shininess);void 0!==e.clearCoat&&(r.clearCoat=e.clearCoat);void 0!==e.clearCoatRoughness&&(r.clearCoatRoughness=e.clearCoatRoughness);void 0!==e.uniforms&&(r.uniforms=e.uniforms);void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader);void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader);void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors);void 0!==e.fog&&(r.fog=e.fog);void 0!==e.shading&&(r.shading=e.shading);void 0!==e.blending&&(r.blending=e.blending);void 0!==e.side&&(r.side=e.side);void 0!==e.opacity&&(r.opacity=e.opacity);void 0!==e.transparent&&(r.transparent=e.transparent);void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest);void 0!==e.depthTest&&(r.depthTest=e.depthTest);void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite);void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite);void 0!==e.wireframe&&(r.wireframe=e.wireframe);void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth);void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap);void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin);void 0!==e.skinning&&(r.skinning=e.skinning);void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets);void 0!==e.size&&(r.size=e.size);void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation);void 0!==e.map&&(r.map=t(e.map));void 0!==e.alphaMap&&(r.alphaMap=t(e.alphaMap),r.transparent=!0);void 0!==e.bumpMap&&(r.bumpMap=t(e.bumpMap));void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale);void 0!==e.normalMap&&(r.normalMap=t(e.normalMap));if(void 0!==e.normalScale){var o=e.normalScale;!1===Array.isArray(o)&&(o=[o,o]);r.normalScale=(new i).fromArray(o)}void 0!==e.displacementMap&&(r.displacementMap=t(e.displacementMap));void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale);void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias);void 0!==e.roughnessMap&&(r.roughnessMap=t(e.roughnessMap));void 0!==e.metalnessMap&&(r.metalnessMap=t(e.metalnessMap));void 0!==e.emissiveMap&&(r.emissiveMap=t(e.emissiveMap));void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity);void 0!==e.specularMap&&(r.specularMap=t(e.specularMap));void 0!==e.envMap&&(r.envMap=t(e.envMap));void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity);void 0!==e.lightMap&&(r.lightMap=t(e.lightMap));void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity);void 0!==e.aoMap&&(r.aoMap=t(e.aoMap));void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity);void 0!==e.gradientMap&&(r.gradientMap=t(e.gradientMap));if(void 0!==e.materials)for(var o=0,a=e.materials.length;o<a;o++)r.materials.push(this.parse(e.materials[o]));return r}});Object.assign(qi.prototype,{load:function(e,t,i,n){var r=this;new vi(r.manager).load(e,function(e){t(r.parse(JSON.parse(e)))},i,n)},parse:function(e){var t=new Me,i=e.data.index,n={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};void 0!==i&&(i=new n[i.type](i.array),t.setIndex(new le(i,1)));var r=e.data.attributes,o;for(o in r){var a=r[o],i=new n[a.type](a.array);t.addAttribute(o,new le(i,a.itemSize,a.normalized))}n=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==n)for(o=0,i=n.length;o!==i;++o)r=n[o],t.addGroup(r.start,r.count,r.materialIndex);e=e.data.boundingSphere;void 0!==e&&(n=new c,void 0!==e.center&&n.fromArray(e.center),t.boundingSphere=new Q(n,e.radius));return t}});Yi.prototype={constructor:Yi,crossOrigin:void 0,extractUrlBase:function(e){e=e.split("/");if(1===e.length)return"./";e.pop();return e.join("/")+"/"},initMaterials:function(e,t,i){for(var n=[],r=0;r<e.length;++r)n[r]=this.createMaterial(e[r],t,i);return n},createMaterial:function(){var e={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},t,i,n;return function(r,o,a){function s(e,t,n,r,s){e=o+e;var h=Yi.Handlers.get(e);null!==h?e=h.load(e):(i.setCrossOrigin(a),e=i.load(e));void 0!==t&&(e.repeat.fromArray(t),1!==t[0]&&(e.wrapS=1e3),1!==t[1]&&(e.wrapT=1e3));void 0!==n&&e.offset.fromArray(n);void 0!==r&&("repeat"===r[0]&&(e.wrapS=1e3),"mirror"===r[0]&&(e.wrapS=1002),"repeat"===r[1]&&(e.wrapT=1e3),"mirror"===r[1]&&(e.wrapT=1002));void 0!==s&&(e.anisotropy=s);t=hr.generateUUID();c[t]=e;return t}void 0===t&&(t=new V);void 0===i&&(i=new wi);void 0===n&&(n=new Xi);var c={},h={uuid:hr.generateUUID(),type:"MeshLambertMaterial"},l;for(l in r){var u=r[l];switch(l){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":h.name=u;break;case"blending":h.blending=e[u];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",l,"is no longer supported.");break;case"colorDiffuse":h.color=t.fromArray(u).getHex();break;case"colorSpecular":h.specular=t.fromArray(u).getHex();break;case"colorEmissive":h.emissive=t.fromArray(u).getHex();break;case"specularCoef":h.shininess=u;break;case"shading":"basic"===u.toLowerCase()&&(h.type="MeshBasicMaterial");"phong"===u.toLowerCase()&&(h.type="MeshPhongMaterial");"standard"===u.toLowerCase()&&(h.type="MeshStandardMaterial");break;case"mapDiffuse":h.map=s(u,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":h.emissiveMap=s(u,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":h.lightMap=s(u,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":h.aoMap=s(u,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":h.bumpMap=s(u,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":h.bumpScale=u;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":h.normalMap=s(u,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":h.normalScale=[u,u];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":h.specularMap=s(u,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":h.metalnessMap=s(u,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":h.roughnessMap=s(u,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":h.alphaMap=s(u,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":h.side=1;break;case"doubleSided":h.side=2;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity");h.opacity=u;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":h[l]=u;break;case"vertexColors":!0===u&&(h.vertexColors=2);"face"===u&&(h.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",l,u)}}"MeshBasicMaterial"===h.type&&delete h.emissive;"MeshPhongMaterial"!==h.type&&delete h.specular;1>h.opacity&&(h.transparent=!0);n.setTextures(c);return n.parse(h)}}()};Yi.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,i=0,n=t.length;i<n;i+=2){var r=t[i+1];if(t[i].test(e))return r}return null}};Object.assign(Zi.prototype,{load:function(e,t,i,n){var r=this,o=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:Yi.prototype.extractUrlBase(e),a=new vi(this.manager);a.setWithCredentials(this.withCredentials);a.load(e,function(i){i=JSON.parse(i);var n=i.metadata;if(void 0!==n&&(n=n.type,void 0!==n)){if("object"===n.toLowerCase()){console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");return}if("scene"===n.toLowerCase()){console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.");return}}i=r.parse(i,o);t(i.geometry,i.materials)},i,n)},setTexturePath:function(e){this.texturePath=e},parse:function(e,t){var n=new we,o=void 0!==e.scale?1/e.scale:1;(function(t){var r,o,a,s,h,l,u,p,d,f,m,g,v,y=e.faces;l=e.vertices;var x=e.normals,_=e.colors,b=0;if(void 0!==e.uvs){for(r=0;r<e.uvs.length;r++)e.uvs[r].length&&b++;for(r=0;r<b;r++)n.faceVertexUvs[r]=[]}s=0;for(h=l.length;s<h;)r=new c,r.x=l[s++]*t,r.y=l[s++]*t,r.z=l[s++]*t,n.vertices.push(r);s=0;for(h=y.length;s<h;)if(t=y[s++],d=t&1,a=t&2,r=t&8,u=t&16,f=t&32,l=t&64,t&=128,d){d=new ce;d.a=y[s];d.b=y[s+1];d.c=y[s+3];m=new ce;m.a=y[s+1];m.b=y[s+2];m.c=y[s+3];s+=4;a&&(a=y[s++],d.materialIndex=a,m.materialIndex=a);a=n.faces.length;if(r)for(r=0;r<b;r++)for(g=e.uvs[r],n.faceVertexUvs[r][a]=[],n.faceVertexUvs[r][a+1]=[],o=0;4>o;o++)p=y[s++],v=g[2*p],p=g[2*p+1],v=new i(v,p),2!==o&&n.faceVertexUvs[r][a].push(v),0!==o&&n.faceVertexUvs[r][a+1].push(v);u&&(u=3*y[s++],d.normal.set(x[u++],x[u++],x[u]),m.normal.copy(d.normal));if(f)for(r=0;4>r;r++)u=3*y[s++],f=new c(x[u++],x[u++],x[u]),2!==r&&d.vertexNormals.push(f),0!==r&&m.vertexNormals.push(f);l&&(l=y[s++],l=_[l],d.color.setHex(l),m.color.setHex(l));if(t)for(r=0;4>r;r++)l=y[s++],l=_[l],2!==r&&d.vertexColors.push(new V(l)),0!==r&&m.vertexColors.push(new V(l));n.faces.push(d);n.faces.push(m)}else{d=new ce;d.a=y[s++];d.b=y[s++];d.c=y[s++];a&&(a=y[s++],d.materialIndex=a);a=n.faces.length;if(r)for(r=0;r<b;r++)for(g=e.uvs[r],n.faceVertexUvs[r][a]=[],o=0;3>o;o++)p=y[s++],v=g[2*p],p=g[2*p+1],v=new i(v,p),n.faceVertexUvs[r][a].push(v);u&&(u=3*y[s++],d.normal.set(x[u++],x[u++],x[u]));if(f)for(r=0;3>r;r++)u=3*y[s++],f=new c(x[u++],x[u++],x[u]),d.vertexNormals.push(f);l&&(l=y[s++],d.color.setHex(_[l]));if(t)for(r=0;3>r;r++)l=y[s++],d.vertexColors.push(new V(_[l]));n.faces.push(d)}})(o);(function(){var t=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var i=0,o=e.skinWeights.length;i<o;i+=t)n.skinWeights.push(new r(e.skinWeights[i],1<t?e.skinWeights[i+1]:0,2<t?e.skinWeights[i+2]:0,3<t?e.skinWeights[i+3]:0));if(e.skinIndices)for(i=0,o=e.skinIndices.length;i<o;i+=t)n.skinIndices.push(new r(e.skinIndices[i],1<t?e.skinIndices[i+1]:0,2<t?e.skinIndices[i+2]:0,3<t?e.skinIndices[i+3]:0));n.bones=e.bones;n.bones&&0<n.bones.length&&(n.skinWeights.length!==n.skinIndices.length||n.skinIndices.length!==n.vertices.length)&&console.warn("When skinning, number of vertices ("+n.vertices.length+"), skinIndices ("+n.skinIndices.length+"), and skinWeights ("+n.skinWeights.length+") should match.")})();(function(t){if(void 0!==e.morphTargets)for(var i=0,r=e.morphTargets.length;i<r;i++){n.morphTargets[i]={};n.morphTargets[i].name=e.morphTargets[i].name;n.morphTargets[i].vertices=[];for(var o=n.morphTargets[i].vertices,a=e.morphTargets[i].vertices,s=0,h=a.length;s<h;s+=3){var l=new c;l.x=a[s]*t;l.y=a[s+1]*t;l.z=a[s+2]*t;o.push(l)}}if(void 0!==e.morphColors&&0<e.morphColors.length)for(console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.'),t=n.faces,o=e.morphColors[0].colors,i=0,r=t.length;i<r;i++)t[i].color.fromArray(o,3*i)})(o);(function(){var t=[],i=[];void 0!==e.animation&&i.push(e.animation);void 0!==e.animations&&(e.animations.length?i=i.concat(e.animations):i.push(e.animations));for(var r=0;r<i.length;r++){var o=Wi.parseAnimation(i[r],n.bones);o&&t.push(o)}n.morphTargets&&(i=Wi.CreateClipsFromMorphTargetSequences(n.morphTargets,10),t=t.concat(i));0<t.length&&(n.animations=t)})();n.computeFaceNormals();n.computeBoundingSphere();if(void 0===e.materials||0===e.materials.length)return{geometry:n};o=Yi.prototype.initMaterials(e.materials,t,this.crossOrigin);return{geometry:n,materials:o}}});Object.assign(Ji.prototype,{load:function(e,t,i,n){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var r=this;new vi(r.manager).load(e,function(i){var o=null;try{o=JSON.parse(i)}catch(a){void 0!==n&&n(a);console.error("THREE:ObjectLoader: Can't parse "+e+".",a.message);return}i=o.metadata;void 0===i||void 0===i.type||"geometry"===i.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead."):r.parse(o,t)},i,n)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var i=this.parseGeometries(e.geometries),n=this.parseImages(e.images,function(){void 0!==t&&t(r)}),n=this.parseTextures(e.textures,n),n=this.parseMaterials(e.materials,n),r=this.parseObject(e.object,i,n);e.animations&&(r.animations=this.parseAnimations(e.animations));void 0!==e.images&&0!==e.images.length||void 0===t||t(r);return r},parseGeometries:function(e){var t={};if(void 0!==e)for(var i=new Zi,n=new qi,r=0,o=e.length;r<o;r++){var a,s=e[r];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Sr[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new Sr[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new Sr[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new Sr[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new Sr[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new Sr[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":a=new Sr[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new Sr[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new Sr[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new Sr[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":a=new Sr[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"BufferGeometry":a=n.parse(s);break;case"Geometry":a=i.parse(s.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid;void 0!==s.name&&(a.name=s.name);t[s.uuid]=a}return t},parseMaterials:function(e,t){var i={};if(void 0!==e){var n=new Xi;n.setTextures(t);for(var r=0,o=e.length;r<o;r++){var a=n.parse(e[r]);i[a.uuid]=a}}return i},parseAnimations:function(e){for(var t=[],i=0;i<e.length;i++){var n=Wi.parse(e[i]);t.push(n)}return t},parseImages:function(e,t){function i(e){n.manager.itemStart(e);return a.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemError(e)})}var n=this,r={};if(void 0!==e&&0<e.length){var o=new gi(t),a=new _i(o);a.setCrossOrigin(this.crossOrigin);for(var o=0,s=e.length;o<s;o++){var c=e[o],h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:n.texturePath+c.url;r[c.uuid]=i(h)}}return r},parseTextures:function(e,t){function i(e,t){if("number"===typeof e)return e;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e);return t[e]}var r={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},o={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},a={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008},s={};if(void 0!==e)for(var c=0,h=e.length;c<h;c++){var l=e[c];void 0===l.image&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid);void 0===t[l.image]&&console.warn("THREE.ObjectLoader: Undefined image",l.image);var u=new n(t[l.image]);u.needsUpdate=!0;u.uuid=l.uuid;void 0!==l.name&&(u.name=l.name);void 0!==l.mapping&&(u.mapping=i(l.mapping,r));void 0!==l.offset&&u.offset.fromArray(l.offset);void 0!==l.repeat&&u.repeat.fromArray(l.repeat);void 0!==l.wrap&&(u.wrapS=i(l.wrap[0],o),u.wrapT=i(l.wrap[1],o));void 0!==l.minFilter&&(u.minFilter=i(l.minFilter,a));void 0!==l.magFilter&&(u.magFilter=i(l.magFilter,a));void 0!==l.anisotropy&&(u.anisotropy=l.anisotropy);void 0!==l.flipY&&(u.flipY=l.flipY);s[l.uuid]=u}return s},parseObject:function(){var e=new h;return function(t,i,n){function r(e){void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e);return i[e]}function o(e){if(void 0!==e)return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}var a;switch(t.type){case"Scene":a=new at;void 0!==t.background&&Number.isInteger(t.background)&&(a.background=new V(t.background));void 0!==t.fog&&("Fog"===t.fog.type?a.fog=new ot(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(a.fog=new rt(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":a=new Pe(t.fov,t.aspect,t.near,t.far);void 0!==t.focus&&(a.focus=t.focus);void 0!==t.zoom&&(a.zoom=t.zoom);void 0!==t.filmGauge&&(a.filmGauge=t.filmGauge);void 0!==t.filmOffset&&(a.filmOffset=t.filmOffset);void 0!==t.view&&(a.view=Object.assign({},t.view));break;case"OrthographicCamera":a=new Ce(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":a=new Ci(t.color,t.intensity);break;case"DirectionalLight":a=new Pi(t.color,t.intensity);break;case"PointLight":a=new Li(t.color,t.intensity,t.distance,t.decay);break;case"SpotLight":a=new Ai(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":a=new Ei(t.color,t.groundColor,t.intensity);break;case"Mesh":a=r(t.geometry);var s=o(t.material);a=a.bones&&0<a.bones.length?new dt(a,s):new Ee(a,s);break;case"LOD":a=new lt;break;case"Line":a=new mt(r(t.geometry),o(t.material),t.mode);break;case"LineSegments":a=new gt(r(t.geometry),o(t.material));break;case"PointCloud":case"Points":a=new yt(r(t.geometry),o(t.material));break;case"Sprite":a=new ht(o(t.material));break;case"Group":a=new xt;break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh type. Instantiates Object3D instead.");default:a=new oe}a.uuid=t.uuid;void 0!==t.name&&(a.name=t.name);void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(a.position,a.quaternion,a.scale)):(void 0!==t.position&&a.position.fromArray(t.position),void 0!==t.rotation&&a.rotation.fromArray(t.rotation),void 0!==t.quaternion&&a.quaternion.fromArray(t.quaternion),void 0!==t.scale&&a.scale.fromArray(t.scale));void 0!==t.castShadow&&(a.castShadow=t.castShadow);void 0!==t.receiveShadow&&(a.receiveShadow=t.receiveShadow);t.shadow&&(void 0!==t.shadow.bias&&(a.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(a.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&a.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(a.shadow.camera=this.parseObject(t.shadow.camera)));void 0!==t.visible&&(a.visible=t.visible);void 0!==t.userData&&(a.userData=t.userData);if(void 0!==t.children)for(var c in t.children)a.add(this.parseObject(t.children[c],i,n));if("LOD"===t.type)for(t=t.levels,s=0;s<t.length;s++){var h=t[s];c=a.getObjectByProperty("uuid",h.object);void 0!==c&&a.addLevel(c,h.distance)}return a}}()});en.prototype={constructor:en,getPoint:function(e){console.warn("THREE.Curve: Warning, getPoint() not implemented!");return null},getPointAt:function(e){e=this.getUtoTmapping(e);return this.getPoint(e)},getPoints:function(e){isNaN(e)&&(e=5);for(var t=[],i=0;i<=e;i++)t.push(this.getPoint(i/e));return t},getSpacedPoints:function(e){isNaN(e)&&(e=5);for(var t=[],i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){isNaN(e)&&(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200);if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t=[],i,n=this.getPoint(0),r,o=0;t.push(0);for(r=1;r<=e;r++)i=this.getPoint(r/e),o+=i.distanceTo(n),t.push(o),n=i;return this.cacheArcLengths=t},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function(e,t){var i=this.getLengths(),n,r=i.length,o;o=t?t:e*i[r-1];for(var a=0,s=r-1,c;a<=s;)if(n=Math.floor(a+(s-a)/2),c=i[n]-o,0>c)a=n+1;else if(0<c)s=n-1;else{s=n;break}n=s;if(i[n]===o)return n/(r-1);a=i[n];return(n+(o-a)/(i[n+1]-a))/(r-1)},getTangent:function(e){var t=e-1e-4;e+=1e-4;0>t&&(t=0);1<e&&(e=1);t=this.getPoint(t);return this.getPoint(e).clone().sub(t).normalize()},getTangentAt:function(e){e=this.getUtoTmapping(e);return this.getTangent(e)},computeFrenetFrames:function(e,t){var i=new c,n=[],r=[],o=[],a=new c,s=new h,l,u;for(l=0;l<=e;l++)u=l/e,n[l]=this.getTangentAt(u),n[l].normalize();r[0]=new c;o[0]=new c;l=Number.MAX_VALUE;u=Math.abs(n[0].x);var p=Math.abs(n[0].y),d=Math.abs(n[0].z);u<=l&&(l=u,i.set(1,0,0));p<=l&&(l=p,i.set(0,1,0));d<=l&&i.set(0,0,1);a.crossVectors(n[0],i).normalize();r[0].crossVectors(n[0],a);o[0].crossVectors(n[0],r[0]);for(l=1;l<=e;l++)r[l]=r[l-1].clone(),o[l]=o[l-1].clone(),a.crossVectors(n[l-1],n[l]),a.length()>Number.EPSILON&&(a.normalize(),i=Math.acos(hr.clamp(n[l-1].dot(n[l]),-1,1)),r[l].applyMatrix4(s.makeRotationAxis(a,i))),o[l].crossVectors(n[l],r[l]);if(!0===t)for(i=Math.acos(hr.clamp(r[0].dot(r[e]),-1,1)),i/=e,0<n[0].dot(a.crossVectors(r[0],r[e]))&&(i=-i),l=1;l<=e;l++)r[l].applyMatrix4(s.makeRotationAxis(n[l],i*l)),o[l].crossVectors(n[l],r[l]);return{tangents:n,normals:r,binormals:o}}};tn.prototype=Object.create(en.prototype);tn.prototype.constructor=tn;tn.prototype.isLineCurve=!0;tn.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=this.v2.clone().sub(this.v1);t.multiplyScalar(e).add(this.v1);return t};tn.prototype.getPointAt=function(e){return this.getPoint(e)};tn.prototype.getTangent=function(e){return this.v2.clone().sub(this.v1).normalize()};nn.prototype=Object.assign(Object.create(en.prototype),{constructor:nn,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new tn(t,e))},getPoint:function(e){var t=e*this.getLength(),i=this.getCurveLengths();for(e=0;e<i.length;){if(i[e]>=t)return t=i[e]-t,e=this.curves[e],i=e.getLength(),e.getPointAt(0===i?0:1-t/i);e++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0;this.cacheLengths=null;this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,i=0,n=this.curves.length;i<n;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e},getSpacedPoints:function(e){isNaN(e)&&(e=40);for(var t=[],i=0;i<=e;i++)t.push(this.getPoint(i/e));this.autoClose&&t.push(t[0]);return t},getPoints:function(e){e=e||12;for(var t=[],i,n=0,r=this.curves;n<r.length;n++)for(var o=r[n],o=o.getPoints(o&&o.isEllipseCurve?2*e:o&&o.isLineCurve?1:o&&o.isSplineCurve?e*o.points.length:e),a=0;a<o.length;a++){
var s=o[a];i&&i.equals(s)||(t.push(s),i=s)}this.autoClose&&1<t.length&&!t[t.length-1].equals(t[0])&&t.push(t[0]);return t},createPointsGeometry:function(e){e=this.getPoints(e);return this.createGeometry(e)},createSpacedPointsGeometry:function(e){e=this.getSpacedPoints(e);return this.createGeometry(e)},createGeometry:function(e){for(var t=new we,i=0,n=e.length;i<n;i++){var r=e[i];t.vertices.push(new c(r.x,r.y,r.z||0))}return t}});rn.prototype=Object.create(en.prototype);rn.prototype.constructor=rn;rn.prototype.isEllipseCurve=!0;rn.prototype.getPoint=function(e){for(var t=2*Math.PI,n=this.aEndAngle-this.aStartAngle,r=Math.abs(n)<Number.EPSILON;0>n;)n+=t;for(;n>t;)n-=t;n<Number.EPSILON&&(n=r?0:t);!0!==this.aClockwise||r||(n=n===t?-t:n-t);t=this.aStartAngle+e*n;e=this.aX+this.xRadius*Math.cos(t);var o=this.aY+this.yRadius*Math.sin(t);0!==this.aRotation&&(t=Math.cos(this.aRotation),n=Math.sin(this.aRotation),r=e-this.aX,o-=this.aY,e=r*t-o*n+this.aX,o=r*n+o*t+this.aY);return new i(e,o)};on.prototype=Object.create(en.prototype);on.prototype.constructor=on;on.prototype.isSplineCurve=!0;on.prototype.getPoint=function(e){var t=this.points,n=(t.length-1)*e;e=Math.floor(n);var n=n-e,r=t[0===e?e:e-1],o=t[e],a=t[e>t.length-2?t.length-1:e+1],t=t[e>t.length-3?t.length-1:e+2];return new i(Qi(n,r.x,o.x,a.x,t.x),Qi(n,r.y,o.y,a.y,t.y))};an.prototype=Object.create(en.prototype);an.prototype.constructor=an;an.prototype.getPoint=function(e){var t=this.v0,n=this.v1,r=this.v2,o=this.v3;return new i($i(e,t.x,n.x,r.x,o.x),$i(e,t.y,n.y,r.y,o.y))};sn.prototype=Object.create(en.prototype);sn.prototype.constructor=sn;sn.prototype.getPoint=function(e){var t=this.v0,n=this.v1,r=this.v2;return new i(Ki(e,t.x,n.x,r.x),Ki(e,t.y,n.y,r.y))};var Ir=Object.assign(Object.create(nn.prototype),{fromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new tn(this.currentPoint.clone(),new i(e,t));this.curves.push(n);this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){e=new sn(this.currentPoint.clone(),new i(e,t),new i(n,r));this.curves.push(e);this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,o,a){e=new an(this.currentPoint.clone(),new i(e,t),new i(n,r),new i(o,a));this.curves.push(e);this.currentPoint.set(o,a)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e),t=new on(t);this.curves.push(t);this.currentPoint.copy(e[e.length-1])},arc:function(e,t,i,n,r,o){this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,i,n,r,o)},absarc:function(e,t,i,n,r,o){this.absellipse(e,t,i,i,n,r,o)},ellipse:function(e,t,i,n,r,o,a,s){this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,i,n,r,o,a,s)},absellipse:function(e,t,i,n,r,o,a,s){e=new rn(e,t,i,n,r,o,a,s);0<this.curves.length&&(t=e.getPoint(0),t.equals(this.currentPoint)||this.lineTo(t.x,t.y));this.curves.push(e);e=e.getPoint(1);this.currentPoint.copy(e)}});cn.prototype=Ir;Ir.constructor=cn;hn.prototype=Object.assign(Object.create(Ir),{constructor:hn,getPointsHoles:function(e){for(var t=[],i=0,n=this.holes.length;i<n;i++)t[i]=this.holes[i].getPoints(e);return t},extractAllPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},extractPoints:function(e){return this.extractAllPoints(e)}});ln.prototype={moveTo:function(e,t){this.currentPath=new cn;this.subPaths.push(this.currentPath);this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,i,n){this.currentPath.quadraticCurveTo(e,t,i,n)},bezierCurveTo:function(e,t,i,n,r,o){this.currentPath.bezierCurveTo(e,t,i,n,r,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function i(e){for(var t=[],i=0,n=e.length;i<n;i++){var r=e[i],o=new hn;o.curves=r.curves;t.push(o)}return t}function n(e,t){for(var i=t.length,n=!1,r=i-1,o=0;o<i;r=o++){var a=t[r],s=t[o],c=s.x-a.x,h=s.y-a.y;if(Math.abs(h)>Number.EPSILON){if(0>h&&(a=t[o],c=-c,s=t[r],h=-h),!(e.y<a.y||e.y>s.y))if(e.y===a.y){if(e.x===a.x)return!0}else{r=h*(e.x-a.x)-c*(e.y-a.y);if(0===r)return!0;0>r||(n=!n)}}else if(e.y===a.y&&(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x))return!0}return n}var r=Tr.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return i(o);var a,s,c,h=[];if(1===o.length)return s=o[0],c=new hn,c.curves=s.curves,h.push(c),h;var l=!r(o[0].getPoints()),l=e?!l:l;c=[];var u=[],p=[],d=0,f;u[d]=void 0;p[d]=[];for(var m=0,g=o.length;m<g;m++)s=o[m],f=s.getPoints(),a=r(f),(a=e?!a:a)?(!l&&u[d]&&d++,u[d]={s:new hn,p:f},u[d].s.curves=s.curves,l&&d++,p[d]=[]):p[d].push({h:s,p:f[0]});if(!u[0])return i(o);if(1<u.length){m=!1;s=[];r=0;for(o=u.length;r<o;r++)c[r]=[];r=0;for(o=u.length;r<o;r++)for(a=p[r],l=0;l<a.length;l++){d=a[l];f=!0;for(g=0;g<u.length;g++)n(d.p,u[g].p)&&(r!==g&&s.push({froms:r,tos:g,hole:l}),f?(f=!1,c[g].push(d)):m=!0);f&&c[r].push(d)}0<s.length&&(m||(p=c))}m=0;for(r=u.length;m<r;m++)for(c=u[m].s,h.push(c),s=p[m],o=0,a=s.length;o<a;o++)c.holes.push(s[o].h);return h}};Object.assign(un.prototype,{isFont:!0,generateShapes:function(e,t,i){void 0===t&&(t=100);void 0===i&&(i=4);var n=this.data;e=String(e).split("");var r=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,a=0,s=0;t=[];for(var c=0;c<e.length;c++){var h=e[c];if("\n"===h)a=0,s-=o;else{var l;l=r;var u=a,p=s;if(h=n.glyphs[h]||n.glyphs["?"]){var d=new ln,f=[],m,g,v,y,x,_,b,w;if(h.o)for(var M=h._cachedOutline||(h._cachedOutline=h.o.split(" ")),E=0,T=M.length;E<T;)switch(M[E++]){case"m":m=M[E++]*l+u;g=M[E++]*l+p;d.moveTo(m,g);break;case"l":m=M[E++]*l+u;g=M[E++]*l+p;d.lineTo(m,g);break;case"q":m=M[E++]*l+u;g=M[E++]*l+p;x=M[E++]*l+u;_=M[E++]*l+p;d.quadraticCurveTo(x,_,m,g);if(y=f[f.length-1]){v=y.x;y=y.y;for(var S=1;S<=i;S++){var A=S/i;Ki(A,v,x,m);Ki(A,y,_,g)}}break;case"b":if(m=M[E++]*l+u,g=M[E++]*l+p,x=M[E++]*l+u,_=M[E++]*l+p,b=M[E++]*l+u,w=M[E++]*l+p,d.bezierCurveTo(x,_,b,w,m,g),y=f[f.length-1])for(v=y.x,y=y.y,S=1;S<=i;S++)A=S/i,$i(A,v,x,b,m),$i(A,y,_,w,g)}l={offsetX:h.ha*l,path:d}}else l=void 0;a+=l.offsetX;t.push(l.path)}}i=[];n=0;for(e=t.length;n<e;n++)Array.prototype.push.apply(i,t[n].toShapes());return i}});Object.assign(pn.prototype,{load:function(e,t,i,n){var r=this;new vi(this.manager).load(e,function(e){var i;try{i=JSON.parse(e)}catch(n){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(e.substring(65,e.length-2))}e=r.parse(i);t&&t(e)},i,n)},parse:function(e){return new un(e)}});var Ur,Nr={getContext:function(){void 0===Ur&&(Ur=new(window.AudioContext||window.webkitAudioContext));return Ur},setContext:function(e){Ur=e}};Object.assign(dn.prototype,{load:function(e,t,i,n){var r=new vi(this.manager);r.setResponseType("arraybuffer");r.load(e,function(e){Nr.getContext().decodeAudioData(e,function(e){t(e)})},i,n)}});fn.prototype=Object.assign(Object.create(Mi.prototype),{constructor:fn,isRectAreaLight:!0,copy:function(e){Mi.prototype.copy.call(this,e);this.width=e.width;this.height=e.height;return this}});Object.assign(mn.prototype,{update:function(){var e,t,i,n,r,o,a,s=new h,c=new h;return function(h){if(e!==this||t!==h.focus||i!==h.fov||n!==h.aspect*this.aspect||r!==h.near||o!==h.far||a!==h.zoom){e=this;t=h.focus;i=h.fov;n=h.aspect*this.aspect;r=h.near;o=h.far;a=h.zoom;var l=h.projectionMatrix.clone(),u=this.eyeSep/2,p=u*r/t,d=r*Math.tan(hr.DEG2RAD*i*.5)/a,f;c.elements[12]=-u;s.elements[12]=u;u=-d*n+p;f=d*n+p;l.elements[0]=2*r/(f-u);l.elements[8]=(f+u)/(f-u);this.cameraL.projectionMatrix.copy(l);u=-d*n-p;f=d*n-p;l.elements[0]=2*r/(f-u);l.elements[8]=(f+u)/(f-u);this.cameraR.projectionMatrix.copy(l)}this.cameraL.matrixWorld.copy(h.matrixWorld).multiply(c);this.cameraR.matrixWorld.copy(h.matrixWorld).multiply(s)}}()});gn.prototype=Object.create(oe.prototype);gn.prototype.constructor=gn;vn.prototype=Object.assign(Object.create(oe.prototype),{constructor:vn,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination);this.filter=e;this.gain.connect(this.filter);this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new c,t=new s,i=new c,n=new c;return function(r){oe.prototype.updateMatrixWorld.call(this,r);r=this.context.listener;var o=this.up;this.matrixWorld.decompose(e,t,i);n.set(0,0,-1).applyQuaternion(t);r.positionX?(r.positionX.setValueAtTime(e.x,this.context.currentTime),r.positionY.setValueAtTime(e.y,this.context.currentTime),r.positionZ.setValueAtTime(e.z,this.context.currentTime),r.forwardX.setValueAtTime(n.x,this.context.currentTime),r.forwardY.setValueAtTime(n.y,this.context.currentTime),r.forwardZ.setValueAtTime(n.z,this.context.currentTime),r.upX.setValueAtTime(o.x,this.context.currentTime),r.upY.setValueAtTime(o.y,this.context.currentTime),r.upZ.setValueAtTime(o.z,this.context.currentTime)):(r.setPosition(e.x,e.y,e.z),r.setOrientation(n.x,n.y,n.z,o.x,o.y,o.z))}}()});yn.prototype=Object.assign(Object.create(oe.prototype),{constructor:yn,getOutput:function(){return this.gain},setNodeSource:function(e){this.hasPlaybackControl=!1;this.sourceType="audioNode";this.source=e;this.connect();return this},setBuffer:function(e){this.buffer=e;this.sourceType="buffer";this.autoplay&&this.play();return this},play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else{var e=this.context.createBufferSource();e.buffer=this.buffer;e.loop=this.loop;e.onended=this.onEnded.bind(this);e.playbackRate.setValueAtTime(this.playbackRate,this.startTime);e.start(0,this.startTime);this.isPlaying=!0;this.source=e;return this.connect()}},pause:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this},stop:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.source.stop(),this.startTime=0,this.isPlaying=!1,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){e||(e=[]);!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e;return this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){this.gain.gain.value=e;return this}});xn.prototype=Object.assign(Object.create(yn.prototype),{constructor:xn,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new c;return function(t){oe.prototype.updateMatrixWorld.call(this,t);e.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(e.x,e.y,e.z)}}()});Object.assign(_n.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);return this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),i=0;i<t.length;i++)e+=t[i];return e/t.length}});bn.prototype={constructor:bn,accumulate:function(e,t){var i=this.buffer,n=this.valueSize,r=e*n+n,o=this.cumulativeWeight;if(0===o){for(o=0;o!==n;++o)i[r+o]=i[o];o=t}else o+=t,this._mixBufferRegion(i,r,0,t/o,n);this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,i=this.buffer;e=e*t+t;var n=this.cumulativeWeight,r=this.binding;this.cumulativeWeight=0;1>n&&this._mixBufferRegion(i,e,3*t,1-n,t);for(var n=t,o=t+t;n!==o;++n)if(i[n]!==i[n+t]){r.setValue(i,e);break}},saveOriginalState:function(){var e=this.buffer,t=this.valueSize,i=3*t;this.binding.getValue(e,i);for(var n=t;n!==i;++n)e[n]=e[i+n%t];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(e,t,i,n,r){if(.5<=n)for(n=0;n!==r;++n)e[t+n]=e[i+n]},_slerp:function(e,t,i,n,r){s.slerpFlat(e,t,e,t,e,i,n)},_lerp:function(e,t,i,n,r){for(var o=1-n,a=0;a!==r;++a){var s=t+a;e[s]=e[s]*o+e[i+a]*n}}};wn.prototype={constructor:wn,getValue:function(e,t){this.bind();this.getValue(e,t)},setValue:function(e,t){this.bind();this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,i=t.objectName,n=t.propertyName,r=t.propertyIndex;e||(this.node=e=wn.findNode(this.rootNode,t.nodeName)||this.rootNode);this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(e){if(i){var o=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("  can not bind to material as node does not have a material",this);return}if(!e.material.materials){console.error("  can not bind to material.materials as node.material does not have a materials array",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("  can not bind to bones as node does not have a skeleton",this);return}e=e.skeleton.bones;for(i=0;i<e.length;i++)if(e[i].name===o){o=i;break}break;default:if(void 0===e[i]){console.error("  can not bind to objectName of node, undefined",this);return}e=e[i]}if(void 0!==o){if(void 0===e[o]){console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,e);return}e=e[o]}}o=e[n];if(void 0===o)console.error("  trying to update property for track: "+t.nodeName+"."+n+" but it wasn't found.",e);else{t=this.Versioning.None;void 0!==e.needsUpdate?(t=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(t=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);i=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===n){if(!e.geometry){console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);return}if(!e.geometry.morphTargets){console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);return}for(i=0;i<this.node.geometry.morphTargets.length;i++)if(e.geometry.morphTargets[i].name===r){r=i;break}}i=this.BindingType.ArrayElement;this.resolvedProperty=o;this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(i=this.BindingType.HasFromToArray,this.resolvedProperty=o):void 0!==o.length?(i=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=n;this.getValue=this.GetterByBindingType[i];this.setValue=this.SetterByBindingTypeAndVersioning[i][t]}}else console.error("  trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}};Object.assign(wn.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:wn.prototype.getValue,_setValue_unbound:wn.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)e[t++]=i[n]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.node[this.propertyName]=e[t]},function(e,t){this.node[this.propertyName]=e[t];this.targetObject.needsUpdate=!0},function(e,t){this.node[this.propertyName]=e[t];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=e[t++]},function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t];this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t);this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t);this.targetObject.matrixWorldNeedsUpdate=!0}]]});wn.Composite=function(e,t,i){i=i||wn.parseTrackName(t);this._targetGroup=e;this._bindings=e.subscribe_(t,i)};wn.Composite.prototype={constructor:wn.Composite,getValue:function(e,t){this.bind();var i=this._bindings[this._targetGroup.nCachedObjects_];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){for(var i=this._bindings,n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}};wn.create=function(e,t,i){return e&&e.isAnimationObjectGroup?new wn.Composite(e,t,i):new wn(e,t,i)};wn.parseTrackName=function(e){var t=/^((?:[\w-]+[\/:])*)([\w-]+)?(?:\.([\w-]+)(?:\[(.+)\])?)?\.([\w-]+)(?:\[(.+)\])?$/.exec(e);if(!t)throw Error("cannot parse trackName at all: "+e);t={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]};if(null===t.propertyName||0===t.propertyName.length)throw Error("can not parse propertyName from trackName: "+e);return t};wn.findNode=function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var i=function(e){for(var i=0;i<e.bones.length;i++){var n=e.bones[i];if(n.name===t)return n}return null}(e.skeleton);if(i)return i}if(e.children){var n=function(e){for(var i=0;i<e.length;i++){var r=e[i];if(r.name===t||r.uuid===t||(r=n(r.children)))return r}return null};if(i=n(e.children))return i}return null};Mn.prototype={constructor:Mn,isAnimationObjectGroup:!0,add:function(e){for(var t=this._objects,i=t.length,n=this.nCachedObjects_,r=this._indicesByUUID,o=this._paths,a=this._parsedPaths,s=this._bindings,c=s.length,h=0,l=arguments.length;h!==l;++h){var u=arguments[h],p=u.uuid,d=r[p];if(void 0===d){d=i++;r[p]=d;t.push(u);for(var p=0,f=c;p!==f;++p)s[p].push(new wn(u,o[p],a[p]))}else if(d<n){var m=--n,f=t[m];r[f.uuid]=d;t[d]=f;r[p]=m;t[m]=u;p=0;for(f=c;p!==f;++p){var g=s[p],v=g[d];g[d]=g[m];void 0===v&&(v=new wn(u,o[p],a[p]));g[m]=v}}else void 0!==t[d]&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=n},remove:function(e){for(var t=this._objects,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,o=r.length,a=0,s=arguments.length;a!==s;++a){var c=arguments[a],h=c.uuid,l=n[h];if(void 0!==l&&l>=i){var u=i++,p=t[u];n[p.uuid]=l;t[l]=p;n[h]=u;t[u]=c;c=0;for(h=o;c!==h;++c){var p=r[c],d=p[l];p[l]=p[u];p[u]=d}}}this.nCachedObjects_=i},uncache:function(e){for(var t=this._objects,i=t.length,n=this.nCachedObjects_,r=this._indicesByUUID,o=this._bindings,a=o.length,s=0,c=arguments.length;s!==c;++s){var h=arguments[s].uuid,l=r[h];if(void 0!==l)if(delete r[h],l<n){var h=--n,u=t[h],p=--i,d=t[p];r[u.uuid]=l;t[l]=u;r[d.uuid]=h;t[h]=d;t.pop();u=0;for(d=a;u!==d;++u){var f=o[u],m=f[p];f[l]=f[h];f[h]=m;f.pop()}}else for(p=--i,d=t[p],r[d.uuid]=l,t[l]=d,t.pop(),u=0,d=a;u!==d;++u)f=o[u],f[l]=f[p],f.pop()}this.nCachedObjects_=n},subscribe_:function(e,t){var i=this._bindingsIndicesByPath,n=i[e],r=this._bindings;if(void 0!==n)return r[n];var o=this._paths,a=this._parsedPaths,s=this._objects,c=this.nCachedObjects_,h=Array(s.length),n=r.length;i[e]=n;o.push(e);a.push(t);r.push(h);i=c;for(n=s.length;i!==n;++i)h[i]=new wn(s[i],e,t);return h},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,i=t[e];if(void 0!==i){var n=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=i;o[i]=s;o.pop();r[i]=r[a];r.pop();n[i]=n[a];n.pop()}}};En.prototype={constructor:En,play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},reset:function(){this.paused=!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){this._startTime=e;return this},setLoop:function(e,t){this.loop=e;this.repetitions=t;return this},setEffectiveWeight:function(e){this.weight=e;this._effectiveWeight=this.enabled?e:0;return this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,i){e.fadeOut(t);this.fadeIn(t);if(i){i=this._clip.duration;var n=e._clip.duration,r=i/n;e.warp(1,n/i,t);this.warp(r,1,t)}return this},crossFadeTo:function(e,t,i){return e.crossFadeFrom(this,t,i)},stopFading:function(){var e=this._weightInterpolant;null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e));return this},setEffectiveTimeScale:function(e){this.timeScale=e;this._effectiveTimeScale=this.paused?0:e;return this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){this.timeScale=this._clip.duration/e;return this.stopWarping()},syncWith:function(e){this.time=e.time;this.timeScale=e.timeScale;return this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,i){var n=this._mixer,r=n.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(this._timeScaleInterpolant=o=n._lendControlInterpolant());n=o.parameterPositions;o=o.sampleValues;n[0]=r;n[1]=r+i;o[0]=e/a;o[1]=t/a;return this},stopWarping:function(){var e=this._timeScaleInterpolant;null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e));return this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,i,n){var r=this._startTime;if(null!==r){t=(e-r)*i;if(0>t||0===i)return;this._startTime=null;t*=i}t*=this._updateTimeScale(e);i=this._updateTime(t);e=this._updateWeight(e);if(0<e){t=this._interpolants;for(var r=this._propertyBindings,o=0,a=t.length;o!==a;++o)t[o].evaluate(i),r[o].accumulate(n,e)}},_updateWeight:function(e){var t=0;if(this.enabled){var t=this.weight,i=this._weightInterpolant;if(null!==i){var n=i.evaluate(e)[0],t=t*n;e>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t},_updateTimeScale:function(e){var t=0;if(!this.paused){var t=this.timeScale,i=this._timeScaleInterpolant;if(null!==i){var n=i.evaluate(e)[0],t=t*n;e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var i=this._clip.duration,n=this.loop,r=this._loopCount;if(2200===n)e:{if(-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1)),t>=i)t=i;else if(0>t)t=0;else break e;this.clampWhenFinished?this.paused=!0:this.enabled=!1;this._mixer.dispatchEvent({type:"finished",action:this,direction:0>e?-1:1})}else{n=2202===n;-1===r&&(0<=e?(r=0,this._setEndings(!0,0===this.repetitions,n)):this._setEndings(0===this.repetitions,!0,n));if(t>=i||0>t){var o=Math.floor(t/i),t=t-i*o,r=r+Math.abs(o),a=this.repetitions-r;0>a?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=0<e?i:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<e?1:-1})):(0===a?(e=0>e,this._setEndings(e,!e,n)):this._setEndings(!1,!1,n),this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o}))}if(n&&1===(r&1))return this.time=t,i-t}return this.time=t},_setEndings:function(e,t,i){var n=this._interpolantSettings;i?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,n.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(e,t,i){var n=this._mixer,r=n.time,o=this._weightInterpolant;null===o&&(this._weightInterpolant=o=n._lendControlInterpolant());n=o.parameterPositions;o=o.sampleValues;n[0]=r;o[0]=t;n[1]=r+e;o[1]=i;return this}};Tn.prototype={constructor:Tn,clipAction:function(e,t){var i=t||this._root,n=i.uuid,r="string"===typeof e?Wi.findByName(i,e):e,i=null!==r?r.uuid:e,o=this._actionsByClip[i],a=null;if(void 0!==o){a=o.actionByRoot[n];if(void 0!==a)return a;a=o.knownActions[0];null===r&&(r=a._clip)}if(null===r)return null;r=new En(this,r,t);this._bindAction(r,a);this._addInactiveAction(r,i,n);return r},existingAction:function(e,t){var i=t||this._root,n=i.uuid,i="string"===typeof e?Wi.findByName(i,e):e,i=this._actionsByClip[i?i.uuid:e];return void 0!==i?i.actionByRoot[n]||null:null},stopAllAction:function(){for(var e=this._actions,t=this._nActiveActions,i=this._bindings,n=this._nActiveBindings,r=this._nActiveBindings=this._nActiveActions=0;r!==t;++r)e[r].reset();for(r=0;r!==n;++r)i[r].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,i=this._nActiveActions,n=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1,a=0;a!==i;++a){var s=t[a];s.enabled&&s._update(n,e,r,o)}e=this._bindings;t=this._nActiveBindings;for(a=0;a!==t;++a)e[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions;e=e.uuid;var i=this._actionsByClip,n=i[e];if(void 0!==n){for(var n=n.knownActions,r=0,o=n.length;r!==o;++r){var a=n[r];this._deactivateAction(a);var s=a._cacheIndex,c=t[t.length-1];a._cacheIndex=null;a._byClipCacheIndex=null;c._cacheIndex=s;t[s]=c;t.pop();this._removeInactiveBindingsForAction(a)}delete i[e]}},uncacheRoot:function(e){e=e.uuid;var t=this._actionsByClip,i;for(i in t){var n=t[i].actionByRoot[e];void 0!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}i=this._bindingsByRootAndName[e];if(void 0!==i)for(var r in i)e=i[r],e.restoreOriginalState(),this._removeInactiveBinding(e)},uncacheAction:function(e,t){var i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}};Object.assign(Tn.prototype,{_bindAction:function(e,t){var i=e._localRoot||this._root,n=e._clip.tracks,r=n.length,o=e._propertyBindings,a=e._interpolants,s=i.uuid,c=this._bindingsByRootAndName,h=c[s];void 0===h&&(h={},c[s]=h);for(c=0;c!==r;++c){var l=n[c],u=l.name,p=h[u];if(void 0===p){p=o[c];if(void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,u));continue}p=new bn(wn.create(i,u,t&&t._propertyBindings[c].binding.parsedPath),l.ValueTypeName,l.getValueSize());++p.referenceCount;this._addInactiveBinding(p,s,u)}o[c]=p;a[c].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,i=e._clip.uuid,n=this._actionsByClip[i];this._bindAction(e,n&&n.knownActions[0]);this._addInactiveAction(e,i,t)}t=e._propertyBindings;i=0;for(n=t.length;i!==n;++i){var r=t[i];0===r.useCount++&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,i=0,n=t.length;i!==n;++i){var r=t[i];0===--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){e=e._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(e,t,i){var n=this._actions,r=this._actionsByClip,o=r[t];void 0===o?(o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o):(t=o.knownActions,e._byClipCacheIndex=t.length,t.push(e));e._cacheIndex=n.length;n.push(e);o.actionByRoot[i]=e},_removeInactiveAction:function(e){var t=this._actions,i=t[t.length-1],n=e._cacheIndex;i._cacheIndex=n;t[n]=i;t.pop();e._cacheIndex=null;var i=e._clip.uuid,n=this._actionsByClip,r=n[i],o=r.knownActions,a=o[o.length-1],s=e._byClipCacheIndex;a._byClipCacheIndex=s;o[s]=a;o.pop();e._byClipCacheIndex=null;delete r.actionByRoot[(t._localRoot||this._root).uuid];0===o.length&&delete n[i];this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){e=e._propertyBindings;for(var t=0,i=e.length;t!==i;++t){var n=e[t];0===--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(e){var t=this._actions,i=e._cacheIndex,n=this._nActiveActions++,r=t[n];e._cacheIndex=n;t[n]=e;r._cacheIndex=i;t[i]=r},_takeBackAction:function(e){var t=this._actions,i=e._cacheIndex,n=--this._nActiveActions,r=t[n];e._cacheIndex=n;t[n]=e;r._cacheIndex=i;t[i]=r},_addInactiveBinding:function(e,t,i){var n=this._bindingsByRootAndName,r=n[t],o=this._bindings;void 0===r&&(r={},n[t]=r);r[i]=e;e._cacheIndex=o.length;o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,i=e.binding,n=i.rootNode.uuid,i=i.path,r=this._bindingsByRootAndName,o=r[n],a=t[t.length-1];e=e._cacheIndex;a._cacheIndex=e;t[e]=a;t.pop();delete o[i];e:{for(var s in o)break e;delete r[n]}},_lendBinding:function(e){var t=this._bindings,i=e._cacheIndex,n=this._nActiveBindings++,r=t[n];e._cacheIndex=n;t[n]=e;r._cacheIndex=i;t[i]=r},_takeBackBinding:function(e){var t=this._bindings,i=e._cacheIndex,n=--this._nActiveBindings,r=t[n];e._cacheIndex=n;t[n]=e;r._cacheIndex=i;t[i]=r},_lendControlInterpolant:function(){
var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,i=e[t];void 0===i&&(i=new Ni(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=t,e[t]=i);return i},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,i=e.__cacheIndex,n=--this._nActiveControlInterpolants,r=t[n];e.__cacheIndex=n;t[n]=e;r.__cacheIndex=i;t[i]=r},_controlInterpolantsResultBuffer:new Float32Array(1)});Object.assign(Tn.prototype,t.prototype);Sn.prototype.clone=function(){return new Sn(void 0===this.value.clone?this.value:this.value.clone())};An.prototype=Object.create(Me.prototype);An.prototype.constructor=An;An.prototype.isInstancedBufferGeometry=!0;An.prototype.addGroup=function(e,t,i){this.groups.push({start:e,count:t,materialIndex:i})};An.prototype.copy=function(e){var t=e.index;null!==t&&this.setIndex(t.clone());var t=e.attributes,i;for(i in t)this.addAttribute(i,t[i].clone());e=e.groups;i=0;for(t=e.length;i<t;i++){var n=e[i];this.addGroup(n.start,n.count,n.materialIndex)}return this};Ln.prototype={constructor:Ln,isInterleavedBufferAttribute:!0,get count(){return this.data.count},get array(){return this.data.array},setX:function(e,t){this.data.array[e*this.data.stride+this.offset]=t;return this},setY:function(e,t){this.data.array[e*this.data.stride+this.offset+1]=t;return this},setZ:function(e,t){this.data.array[e*this.data.stride+this.offset+2]=t;return this},setW:function(e,t){this.data.array[e*this.data.stride+this.offset+3]=t;return this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,i){e=e*this.data.stride+this.offset;this.data.array[e+0]=t;this.data.array[e+1]=i;return this},setXYZ:function(e,t,i,n){e=e*this.data.stride+this.offset;this.data.array[e+0]=t;this.data.array[e+1]=i;this.data.array[e+2]=n;return this},setXYZW:function(e,t,i,n,r){e=e*this.data.stride+this.offset;this.data.array[e+0]=t;this.data.array[e+1]=i;this.data.array[e+2]=n;this.data.array[e+3]=r;return this}};Rn.prototype={constructor:Rn,isInterleavedBuffer:!0,set needsUpdate(e){!0===e&&this.version++},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.stride:0;this.array=e},setDynamic:function(e){this.dynamic=e;return this},copy:function(e){this.array=new e.array.constructor(e.array);this.count=e.count;this.stride=e.stride;this.dynamic=e.dynamic;return this},copyAt:function(e,t,i){e*=this.stride;i*=t.stride;for(var n=0,r=this.stride;n<r;n++)this.array[e+n]=t.array[i+n];return this},set:function(e,t){void 0===t&&(t=0);this.array.set(e,t);return this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){this.onUploadCallback=e;return this}};Pn.prototype=Object.create(Rn.prototype);Pn.prototype.constructor=Pn;Pn.prototype.isInstancedInterleavedBuffer=!0;Pn.prototype.copy=function(e){Rn.prototype.copy.call(this,e);this.meshPerAttribute=e.meshPerAttribute;return this};Cn.prototype=Object.create(le.prototype);Cn.prototype.constructor=Cn;Cn.prototype.isInstancedBufferAttribute=!0;Cn.prototype.copy=function(e){le.prototype.copy.call(this,e);this.meshPerAttribute=e.meshPerAttribute;return this};In.prototype={constructor:In,linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t){var i=[];Nn(e,this,i,t);i.sort(Un);return i},intersectObjects:function(e,t){var i=[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var n=0,r=e.length;n<r;n++)Nn(e[n],this,i,t);i.sort(Un);return i}};Dn.prototype={constructor:Dn,start:function(){this.oldTime=this.startTime=(performance||Date).now();this.elapsedTime=0;this.running=!0},stop:function(){this.getElapsedTime();this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var e=0;this.autoStart&&!this.running&&this.start();if(this.running){var t=(performance||Date).now(),e=(t-this.oldTime)/1e3;this.oldTime=t;this.elapsedTime+=e}return e}};On.prototype={constructor:On,set:function(e,t,i){this.radius=e;this.phi=t;this.theta=i;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.radius=e.radius;this.phi=e.phi;this.theta=e.theta;return this},makeSafe:function(){this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi));return this},setFromVector3:function(e){this.radius=e.length();0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(hr.clamp(e.y/this.radius,-1,1)));return this}};Bn.prototype={constructor:Bn,set:function(e,t,i){this.radius=e;this.theta=t;this.y=i;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.radius=e.radius;this.theta=e.theta;this.y=e.y;return this},setFromVector3:function(e){this.radius=Math.sqrt(e.x*e.x+e.z*e.z);this.theta=Math.atan2(e.x,e.z);this.y=e.y;return this}};Fn.prototype=Object.create(Ee.prototype);Fn.prototype.constructor=Fn;Fn.prototype.createAnimation=function(e,t,i,n){t={start:t,end:i,length:i-t+1,fps:n,duration:(i-t)/n,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=t;this.animationsList.push(t)};Fn.prototype.autoCreateAnimations=function(e){for(var t=/([a-z]+)_?(\d+)/i,i,n={},r=this.geometry,o=0,a=r.morphTargets.length;o<a;o++){var s=r.morphTargets[o].name.match(t);if(s&&1<s.length){var c=s[1];n[c]||(n[c]={start:Infinity,end:-Infinity});s=n[c];o<s.start&&(s.start=o);o>s.end&&(s.end=o);i||(i=c)}}for(c in n)s=n[c],this.createAnimation(c,s.start,s.end,e);this.firstAnimation=i};Fn.prototype.setAnimationDirectionForward=function(e){if(e=this.animationsMap[e])e.direction=1,e.directionBackwards=!1};Fn.prototype.setAnimationDirectionBackward=function(e){if(e=this.animationsMap[e])e.direction=-1,e.directionBackwards=!0};Fn.prototype.setAnimationFPS=function(e,t){var i=this.animationsMap[e];i&&(i.fps=t,i.duration=(i.end-i.start)/i.fps)};Fn.prototype.setAnimationDuration=function(e,t){var i=this.animationsMap[e];i&&(i.duration=t,i.fps=(i.end-i.start)/i.duration)};Fn.prototype.setAnimationWeight=function(e,t){var i=this.animationsMap[e];i&&(i.weight=t)};Fn.prototype.setAnimationTime=function(e,t){var i=this.animationsMap[e];i&&(i.time=t)};Fn.prototype.getAnimationTime=function(e){var t=0;if(e=this.animationsMap[e])t=e.time;return t};Fn.prototype.getAnimationDuration=function(e){var t=-1;if(e=this.animationsMap[e])t=e.duration;return t};Fn.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("THREE.MorphBlendMesh: animation["+e+"] undefined in .playAnimation()")};Fn.prototype.stopAnimation=function(e){if(e=this.animationsMap[e])e.active=!1};Fn.prototype.update=function(e){for(var t=0,i=this.animationsList.length;t<i;t++){var n=this.animationsList[t];if(n.active){var r=n.duration/n.length;n.time+=n.direction*e;if(n.mirroredLoop){if(n.time>n.duration||0>n.time)n.direction*=-1,n.time>n.duration&&(n.time=n.duration,n.directionBackwards=!0),0>n.time&&(n.time=0,n.directionBackwards=!1)}else n.time%=n.duration,0>n.time&&(n.time+=n.duration);var o=n.start+hr.clamp(Math.floor(n.time/r),0,n.length-1),a=n.weight;o!==n.currentFrame&&(this.morphTargetInfluences[n.lastFrame]=0,this.morphTargetInfluences[n.currentFrame]=1*a,this.morphTargetInfluences[o]=0,n.lastFrame=n.currentFrame,n.currentFrame=o);r=n.time%r/r;n.directionBackwards&&(r=1-r);n.currentFrame!==n.lastFrame?(this.morphTargetInfluences[n.currentFrame]=r*a,this.morphTargetInfluences[n.lastFrame]=(1-r)*a):this.morphTargetInfluences[n.currentFrame]=a}}};zn.prototype=Object.create(oe.prototype);zn.prototype.constructor=zn;zn.prototype.isImmediateRenderObject=!0;Gn.prototype=Object.create(gt.prototype);Gn.prototype.constructor=Gn;Gn.prototype.update=function(){var e=new c,t=new c,i=new K;return function(){var n=["a","b","c"];this.object.updateMatrixWorld(!0);i.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,c=a.faces,h=a=0,l=c.length;h<l;h++)for(var u=c[h],p=0,d=u.vertexNormals.length;p<d;p++){var f=u.vertexNormals[p];e.copy(s[u[n[p]]]).applyMatrix4(r);t.copy(f).applyMatrix3(i).normalize().multiplyScalar(this.size).add(e);o.setXYZ(a,e.x,e.y,e.z);a+=1;o.setXYZ(a,t.x,t.y,t.z);a+=1}else if(a&&a.isBufferGeometry)for(n=a.attributes.position,s=a.attributes.normal,p=a=0,d=n.count;p<d;p++)e.set(n.getX(p),n.getY(p),n.getZ(p)).applyMatrix4(r),t.set(s.getX(p),s.getY(p),s.getZ(p)),t.applyMatrix3(i).normalize().multiplyScalar(this.size).add(e),o.setXYZ(a,e.x,e.y,e.z),a+=1,o.setXYZ(a,t.x,t.y,t.z),a+=1;o.needsUpdate=!0;return this}}();Hn.prototype=Object.create(oe.prototype);Hn.prototype.constructor=Hn;Hn.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};Hn.prototype.update=function(){var e=new c,t=new c;return function(){var i=this.light.distance?this.light.distance:1e3,n=i*Math.tan(this.light.angle);this.cone.scale.set(n,n,i);e.setFromMatrixPosition(this.light.matrixWorld);t.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(t.sub(e));this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}();Vn.prototype=Object.create(gt.prototype);Vn.prototype.constructor=Vn;Vn.prototype.getBoneList=function(e){var t=[];e&&e.isBone&&t.push(e);for(var i=0;i<e.children.length;i++)t.push.apply(t,this.getBoneList(e.children[i]));return t};Vn.prototype.update=function(){var e=new c,t=new h,i=new h;return function(){var n=this.geometry,r=n.getAttribute("position");i.getInverse(this.root.matrixWorld);for(var o=0,a=0;o<this.bones.length;o++){var s=this.bones[o];s.parent&&s.parent.isBone&&(t.multiplyMatrices(i,s.matrixWorld),e.setFromMatrixPosition(t),r.setXYZ(a,e.x,e.y,e.z),t.multiplyMatrices(i,s.parent.matrixWorld),e.setFromMatrixPosition(t),r.setXYZ(a+1,e.x,e.y,e.z),a+=2)}n.getAttribute("position").needsUpdate=!0}}();kn.prototype=Object.create(Ee.prototype);kn.prototype.constructor=kn;kn.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};kn.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};jn.prototype=Object.create(oe.prototype);jn.prototype.constructor=jn;jn.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose();this.children[1].geometry.dispose();this.children[1].material.dispose()};jn.prototype.update=function(){var e=new c,t=new c;return function(){var i=this.children[0],n=this.children[1];if(this.light.target){e.setFromMatrixPosition(this.light.matrixWorld);t.setFromMatrixPosition(this.light.target.matrixWorld);var r=t.clone().sub(e);i.lookAt(r);n.lookAt(r)}i.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);n.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var n=.5*this.light.width,r=.5*this.light.height,i=i.geometry.getAttribute("position"),o=i.array;o[0]=n;o[1]=-r;o[2]=0;o[3]=n;o[4]=r;o[5]=0;o[6]=-n;o[7]=r;o[8]=0;o[9]=-n;o[10]=r;o[11]=0;o[12]=-n;o[13]=-r;o[14]=0;o[15]=n;o[16]=-r;o[17]=0;i.needsUpdate=!0}}();Wn.prototype=Object.create(oe.prototype);Wn.prototype.constructor=Wn;Wn.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};Wn.prototype.update=function(){var e=new c,t=new V,i=new V;return function(){var n=this.children[0],r=n.geometry.getAttribute("color");t.copy(this.light.color).multiplyScalar(this.light.intensity);i.copy(this.light.groundColor).multiplyScalar(this.light.intensity);for(var o=0,a=r.count;o<a;o++){var s=o<a/2?t:i;r.setXYZ(o,s.r,s.g,s.b)}n.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate());r.needsUpdate=!0}}();Xn.prototype=Object.create(gt.prototype);Xn.prototype.constructor=Xn;qn.prototype=Object.create(gt.prototype);qn.prototype.constructor=qn;Yn.prototype=Object.create(gt.prototype);Yn.prototype.constructor=Yn;Yn.prototype.update=function(){var e=new c,t=new c,i=new K;return function(){this.object.updateMatrixWorld(!0);i.getNormalMatrix(this.object.matrixWorld);for(var n=this.object.matrixWorld,r=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,o=o.faces,s=0,c=0,h=o.length;c<h;c++){var l=o[c],u=l.normal;e.copy(a[l.a]).add(a[l.b]).add(a[l.c]).divideScalar(3).applyMatrix4(n);t.copy(u).applyMatrix3(i).normalize().multiplyScalar(this.size).add(e);r.setXYZ(s,e.x,e.y,e.z);s+=1;r.setXYZ(s,t.x,t.y,t.z);s+=1}r.needsUpdate=!0;return this}}();Zn.prototype=Object.create(oe.prototype);Zn.prototype.constructor=Zn;Zn.prototype.dispose=function(){var e=this.children[0],t=this.children[1];e.geometry.dispose();e.material.dispose();t.geometry.dispose();t.material.dispose()};Zn.prototype.update=function(){var e=new c,t=new c,i=new c;return function(){e.setFromMatrixPosition(this.light.matrixWorld);t.setFromMatrixPosition(this.light.target.matrixWorld);i.subVectors(t,e);var n=this.children[0],r=this.children[1];n.lookAt(i);n.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);r.lookAt(i);r.scale.z=i.length()}}();Jn.prototype=Object.create(gt.prototype);Jn.prototype.constructor=Jn;Jn.prototype.update=function(){function e(e,o,a,s){n.set(o,a,s).unproject(r);e=i[e];if(void 0!==e)for(o=t.getAttribute("position"),a=0,s=e.length;a<s;a++)o.setXYZ(e[a],n.x,n.y,n.z)}var t,i,n=new c,r=new Re;return function(){t=this.geometry;i=this.pointMap;r.projectionMatrix.copy(this.camera.projectionMatrix);e("c",0,0,-1);e("t",0,0,1);e("n1",-1,-1,-1);e("n2",1,-1,-1);e("n3",-1,1,-1);e("n4",1,1,-1);e("f1",-1,-1,1);e("f2",1,-1,1);e("f3",-1,1,1);e("f4",1,1,1);e("u1",.7,1.1,-1);e("u2",-.7,1.1,-1);e("u3",0,2,-1);e("cf1",-1,0,1);e("cf2",1,0,1);e("cf3",0,-1,1);e("cf4",0,1,1);e("cn1",-1,0,-1);e("cn2",1,0,-1);e("cn3",0,-1,-1);e("cn4",0,1,-1);t.getAttribute("position").needsUpdate=!0}}();Qn.prototype=Object.create(gt.prototype);Qn.prototype.constructor=Qn;Qn.prototype.update=function(){var e=new J;return function(t){t&&t.isBox3?e.copy(t):e.setFromObject(t);if(!e.isEmpty()){t=e.min;var i=e.max,n=this.geometry.attributes.position,r=n.array;r[0]=i.x;r[1]=i.y;r[2]=i.z;r[3]=t.x;r[4]=i.y;r[5]=i.z;r[6]=t.x;r[7]=t.y;r[8]=i.z;r[9]=i.x;r[10]=t.y;r[11]=i.z;r[12]=i.x;r[13]=i.y;r[14]=t.z;r[15]=t.x;r[16]=i.y;r[17]=t.z;r[18]=t.x;r[19]=t.y;r[20]=t.z;r[21]=i.x;r[22]=t.y;r[23]=t.z;n.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();var Dr,Or;Kn.prototype=Object.create(oe.prototype);Kn.prototype.constructor=Kn;Kn.prototype.setDirection=function(){var e=new c,t;return function(i){.99999<i.y?this.quaternion.set(0,0,0,1):-.99999>i.y?this.quaternion.set(1,0,0,0):(e.set(i.z,0,-i.x).normalize(),t=Math.acos(i.y),this.quaternion.setFromAxisAngle(e,t))}}();Kn.prototype.setLength=function(e,t,i){void 0===t&&(t=.2*e);void 0===i&&(i=.2*t);this.line.scale.set(1,Math.max(0,e-t),1);this.line.updateMatrix();this.cone.scale.set(i,t,i);this.cone.position.y=e;this.cone.updateMatrix()};Kn.prototype.setColor=function(e){this.line.material.color.copy(e);this.cone.material.color.copy(e)};$n.prototype=Object.create(gt.prototype);$n.prototype.constructor=$n;var Br=new c,Fr=new er,zr=new er,Gr=new er;tr.prototype=Object.create(en.prototype);tr.prototype.constructor=tr;tr.prototype.getPoint=function(e){var t=this.points,i=t.length;2>i&&console.log("duh, you need at least 2 points");e*=i-(this.closed?0:1);var n=Math.floor(e);e-=n;this.closed?n+=0<n?0:(Math.floor(Math.abs(n)/t.length)+1)*t.length:0===e&&n===i-1&&(n=i-2,e=1);var r,o,a;this.closed||0<n?r=t[(n-1)%i]:(Br.subVectors(t[0],t[1]).add(t[0]),r=Br);o=t[n%i];a=t[(n+1)%i];this.closed||n+2<i?t=t[(n+2)%i]:(Br.subVectors(t[i-1],t[i-2]).add(t[i-1]),t=Br);if(void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var s="chordal"===this.type?.5:.25,i=Math.pow(r.distanceToSquared(o),s),n=Math.pow(o.distanceToSquared(a),s),s=Math.pow(a.distanceToSquared(t),s);1e-4>n&&(n=1);1e-4>i&&(i=n);1e-4>s&&(s=n);Fr.initNonuniformCatmullRom(r.x,o.x,a.x,t.x,i,n,s);zr.initNonuniformCatmullRom(r.y,o.y,a.y,t.y,i,n,s);Gr.initNonuniformCatmullRom(r.z,o.z,a.z,t.z,i,n,s)}else"catmullrom"===this.type&&(i=void 0!==this.tension?this.tension:.5,Fr.initCatmullRom(r.x,o.x,a.x,t.x,i),zr.initCatmullRom(r.y,o.y,a.y,t.y,i),Gr.initCatmullRom(r.z,o.z,a.z,t.z,i));return new c(Fr.calc(e),zr.calc(e),Gr.calc(e))};ir.prototype=Object.create(en.prototype);ir.prototype.constructor=ir;ir.prototype.getPoint=function(e){var t=this.v0,i=this.v1,n=this.v2,r=this.v3;return new c($i(e,t.x,i.x,n.x,r.x),$i(e,t.y,i.y,n.y,r.y),$i(e,t.z,i.z,n.z,r.z))};nr.prototype=Object.create(en.prototype);nr.prototype.constructor=nr;nr.prototype.getPoint=function(e){var t=this.v0,i=this.v1,n=this.v2;return new c(Ki(e,t.x,i.x,n.x),Ki(e,t.y,i.y,n.y),Ki(e,t.z,i.z,n.z))};rr.prototype=Object.create(en.prototype);rr.prototype.constructor=rr;rr.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=new c;t.subVectors(this.v2,this.v1);t.multiplyScalar(e);t.add(this.v1);return t};or.prototype=Object.create(rn.prototype);or.prototype.constructor=or;en.create=function(e,t){console.log("THREE.Curve.create() has been deprecated");e.prototype=Object.create(en.prototype);e.prototype.constructor=e;e.prototype.getPoint=t;return e};ar.prototype=Object.create(tr.prototype);sr.prototype=Object.create(tr.prototype);cr.prototype=Object.create(tr.prototype);Object.assign(cr.prototype,{initFromArray:function(e){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(e){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(e){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});Xn.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};Object.assign(j.prototype,{center:function(e){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");return this.getCenter(e)},empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(e){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(e)},size:function(e){console.warn("THREE.Box2: .size() has been renamed to .getSize().");return this.getSize(e)}});Object.assign(J.prototype,{center:function(e){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");return this.getCenter(e)},empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(e){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(e)},isIntersectionSphere:function(e){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(e)},size:function(e){console.warn("THREE.Box3: .size() has been renamed to .getSize().");return this.getSize(e)}});ae.prototype.center=function(e){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");return this.getCenter(e)};hr.random16=function(){console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead.");return Math.random()};Object.assign(K.prototype,{flattenToArrayOffset:function(e,t){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(e,t)},multiplyVector3:function(e){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return e.applyMatrix3(this)},multiplyVector3Array:function(e){console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(e)},applyToBuffer:function(e,t,i){console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,i){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(h.prototype,{extractPosition:function(e){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(e)},flattenToArrayOffset:function(e,t){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(e,t)},getPosition:function(){var e;return function(){void 0===e&&(e=new c);console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(e)},multiplyVector3:function(e){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},multiplyVector4:function(e){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},multiplyVector3Array:function(e){console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(e)},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");e.transformDirection(this)},crossVector:function(e){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e,t,i){console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,i){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,i,n,r,o){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");return this.makePerspective(e,t,n,i,r,o)}});$.prototype.isIntersectionLine=function(e){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(e)};s.prototype.multiplyVector3=function(e){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return e.applyQuaternion(this)};Object.assign(ie.prototype,{isIntersectionBox:function(e){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(e)},isIntersectionPlane:function(e){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(e)},isIntersectionSphere:function(e){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(e)}});Object.assign(hn.prototype,{extrude:function(e){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new kt(this,e)},makeGeometry:function(e){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new Qt(this,e)}});Object.assign(i.prototype,{fromAttribute:function(e,t,i){console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(e,t,i)}});Object.assign(c.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(t,e)},applyProjection:function(e){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(e)},fromAttribute:function(e,t,i){console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(e,t,i)}});Object.assign(r.prototype,{fromAttribute:function(e,t,i){console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(e,t,i)}});we.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")};Object.assign(oe.prototype,{getChildByName:function(e){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(t,e)}});Object.defineProperties(oe.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.defineProperties(lt.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return this.levels}}});Pe.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==t&&(this.filmGauge=t);this.setFocalLength(e)};Object.defineProperties(Mi.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=e}}});Object.defineProperties(le.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");return this.array.length}}});Object.assign(Me.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(e)},addDrawCall:function(e,t,i){void 0!==i&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(Me.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups}}});Object.defineProperties(Sn.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this}}});Object.defineProperties(q.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){console.warn("THREE."+this.type+": .wrapRGB has been removed.");return new V}}});Object.defineProperties(ui.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");return!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(Y.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=e}}});Object.assign(nt.prototype,{supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");
return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}});Object.defineProperties(nt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.");this.shadowMap.cullFace=e}}});Object.defineProperties(te.prototype,{cullFace:{get:function(){return this.renderReverseSided?2:1},set:function(e){e=1!==e;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+e+".");this.renderReverseSided=e}}});Object.defineProperties(o.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=e}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=e}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=e}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=e}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=e}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=e}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=e}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=e}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");this.texture.type=e}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=e}}});yn.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;(new dn).load(e,function(e){t.setBuffer(e)});return this};_n.prototype.getData=function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};e.WebGLRenderTargetCube=a;e.WebGLRenderTarget=o;e.WebGLRenderer=nt;e.ShaderLib=_r;e.UniformsLib=xr;e.UniformsUtils=gr;e.ShaderChunk=vr;e.FogExp2=rt;e.Fog=ot;e.Scene=at;e.LensFlare=st;e.Sprite=ht;e.LOD=lt;e.SkinnedMesh=dt;e.Skeleton=ut;e.Bone=pt;e.Mesh=Ee;e.LineSegments=gt;e.Line=mt;e.Points=yt;e.Group=xt;e.VideoTexture=_t;e.DataTexture=k;e.CompressedTexture=bt;e.CubeTexture=l;e.CanvasTexture=wt;e.DepthTexture=Mt;e.Texture=n;e.CompressedTextureLoader=yi;e.DataTextureLoader=xi;e.CubeTextureLoader=bi;e.TextureLoader=wi;e.ObjectLoader=Ji;e.MaterialLoader=Xi;e.BufferGeometryLoader=qi;e.DefaultLoadingManager=Rr;e.LoadingManager=gi;e.JSONLoader=Zi;e.ImageLoader=_i;e.FontLoader=pn;e.FileLoader=vi;e.Loader=Yi;e.Cache=Lr;e.AudioLoader=dn;e.SpotLightShadow=Si;e.SpotLight=Ai;e.PointLight=Li;e.RectAreaLight=fn;e.HemisphereLight=Ei;e.DirectionalLightShadow=Ri;e.DirectionalLight=Pi;e.AmbientLight=Ci;e.LightShadow=Ti;e.Light=Mi;e.StereoCamera=mn;e.PerspectiveCamera=Pe;e.OrthographicCamera=Ce;e.CubeCamera=gn;e.Camera=Re;e.AudioListener=vn;e.PositionalAudio=xn;e.AudioContext=Nr;e.AudioAnalyser=_n;e.Audio=yn;e.VectorKeyframeTrack=Bi;e.StringKeyframeTrack=Hi;e.QuaternionKeyframeTrack=zi;e.NumberKeyframeTrack=Gi;e.ColorKeyframeTrack=ki;e.BooleanKeyframeTrack=Vi;e.PropertyMixer=bn;e.PropertyBinding=wn;e.KeyframeTrack=ji;e.AnimationUtils=Pr;e.AnimationObjectGroup=Mn;e.AnimationMixer=Tn;e.AnimationClip=Wi;e.Uniform=Sn;e.InstancedBufferGeometry=An;e.BufferGeometry=Me;e.GeometryIdCount=function(){return Mr++};e.Geometry=we;e.InterleavedBufferAttribute=Ln;e.InstancedInterleavedBuffer=Pn;e.InterleavedBuffer=Rn;e.InstancedBufferAttribute=Cn;e.Face3=ce;e.Object3D=oe;e.Raycaster=In;e.Layers=re;e.EventDispatcher=t;e.Clock=Dn;e.QuaternionLinearInterpolant=Fi;e.LinearInterpolant=Ni;e.DiscreteInterpolant=Di;e.CubicInterpolant=Ui;e.Interpolant=Ii;e.Triangle=se;e.Math=hr;e.Spherical=On;e.Cylindrical=Bn;e.Plane=$;e.Frustum=ee;e.Sphere=Q;e.Ray=ie;e.Matrix4=h;e.Matrix3=K;e.Box3=J;e.Box2=j;e.Line3=ae;e.Euler=ne;e.Vector4=r;e.Vector3=c;e.Vector2=i;e.Quaternion=s;e.Color=V;e.MorphBlendMesh=Fn;e.ImmediateRenderObject=zn;e.VertexNormalsHelper=Gn;e.SpotLightHelper=Hn;e.SkeletonHelper=Vn;e.PointLightHelper=kn;e.RectAreaLightHelper=jn;e.HemisphereLightHelper=Wn;e.GridHelper=Xn;e.PolarGridHelper=qn;e.FaceNormalsHelper=Yn;e.DirectionalLightHelper=Zn;e.CameraHelper=Jn;e.BoxHelper=Qn;e.ArrowHelper=Kn;e.AxisHelper=$n;e.CatmullRomCurve3=tr;e.CubicBezierCurve3=ir;e.QuadraticBezierCurve3=nr;e.LineCurve3=rr;e.ArcCurve=or;e.EllipseCurve=rn;e.SplineCurve=on;e.CubicBezierCurve=an;e.QuadraticBezierCurve=sn;e.LineCurve=tn;e.Shape=hn;e.Path=cn;e.ShapePath=ln;e.Font=un;e.CurvePath=nn;e.Curve=en;e.ShapeUtils=Tr;e.SceneUtils={createMultiMaterialObject:function(e,t){for(var i=new xt,n=0,r=t.length;n<r;n++)i.add(new Ee(e,t[n]));return i},detach:function(e,t,i){e.applyMatrix(t.matrixWorld);t.remove(e);i.add(e)},attach:function(e,t,i){var n=new h;n.getInverse(i.matrixWorld);e.applyMatrix(n);t.remove(e);i.add(e)}};e.WireframeGeometry=Et;e.ParametricGeometry=Tt;e.ParametricBufferGeometry=St;e.TetrahedronGeometry=Rt;e.TetrahedronBufferGeometry=Pt;e.OctahedronGeometry=Ct;e.OctahedronBufferGeometry=It;e.IcosahedronGeometry=Ut;e.IcosahedronBufferGeometry=Nt;e.DodecahedronGeometry=Dt;e.DodecahedronBufferGeometry=Ot;e.PolyhedronGeometry=At;e.PolyhedronBufferGeometry=Lt;e.TubeGeometry=Bt;e.TubeBufferGeometry=Ft;e.TorusKnotGeometry=zt;e.TorusKnotBufferGeometry=Gt;e.TorusGeometry=Ht;e.TorusBufferGeometry=Vt;e.TextGeometry=jt;e.SphereGeometry=Wt;e.SphereBufferGeometry=Xt;e.RingGeometry=qt;e.RingBufferGeometry=Yt;e.PlaneGeometry=Ae;e.PlaneBufferGeometry=Le;e.LatheGeometry=Zt;e.LatheBufferGeometry=Jt;e.ShapeGeometry=Qt;e.ShapeBufferGeometry=Kt;e.ExtrudeGeometry=kt;e.EdgesGeometry=$t;e.ConeGeometry=ii;e.ConeBufferGeometry=ni;e.CylinderGeometry=ei;e.CylinderBufferGeometry=ti;e.CircleGeometry=ri;e.CircleBufferGeometry=oi;e.BoxGeometry=Te;e.BoxBufferGeometry=Se;e.ShadowMaterial=ai;e.SpriteMaterial=ct;e.RawShaderMaterial=si;e.ShaderMaterial=Y;e.PointsMaterial=vt;e.MultiMaterial=ci;e.MeshPhysicalMaterial=li;e.MeshStandardMaterial=hi;e.MeshPhongMaterial=ui;e.MeshToonMaterial=pi;e.MeshNormalMaterial=di;e.MeshLambertMaterial=fi;e.MeshDepthMaterial=Z;e.MeshBasicMaterial=he;e.LineDashedMaterial=mi;e.LineBasicMaterial=ft;e.Material=q;e.Float64BufferAttribute=xe;e.Float32BufferAttribute=ye;e.Uint32BufferAttribute=ve;e.Int32BufferAttribute=ge;e.Uint16BufferAttribute=me;e.Int16BufferAttribute=fe;e.Uint8ClampedBufferAttribute=de;e.Uint8BufferAttribute=pe;e.Int8BufferAttribute=ue;e.BufferAttribute=le;e.REVISION="84";e.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2};e.CullFaceNone=0;e.CullFaceBack=1;e.CullFaceFront=2;e.CullFaceFrontBack=3;e.FrontFaceDirectionCW=0;e.FrontFaceDirectionCCW=1;e.BasicShadowMap=0;e.PCFShadowMap=1;e.PCFSoftShadowMap=2;e.FrontSide=0;e.BackSide=1;e.DoubleSide=2;e.FlatShading=1;e.SmoothShading=2;e.NoColors=0;e.FaceColors=1;e.VertexColors=2;e.NoBlending=0;e.NormalBlending=1;e.AdditiveBlending=2;e.SubtractiveBlending=3;e.MultiplyBlending=4;e.CustomBlending=5;e.AddEquation=100;e.SubtractEquation=101;e.ReverseSubtractEquation=102;e.MinEquation=103;e.MaxEquation=104;e.ZeroFactor=200;e.OneFactor=201;e.SrcColorFactor=202;e.OneMinusSrcColorFactor=203;e.SrcAlphaFactor=204;e.OneMinusSrcAlphaFactor=205;e.DstAlphaFactor=206;e.OneMinusDstAlphaFactor=207;e.DstColorFactor=208;e.OneMinusDstColorFactor=209;e.SrcAlphaSaturateFactor=210;e.NeverDepth=0;e.AlwaysDepth=1;e.LessDepth=2;e.LessEqualDepth=3;e.EqualDepth=4;e.GreaterEqualDepth=5;e.GreaterDepth=6;e.NotEqualDepth=7;e.MultiplyOperation=0;e.MixOperation=1;e.AddOperation=2;e.NoToneMapping=0;e.LinearToneMapping=1;e.ReinhardToneMapping=2;e.Uncharted2ToneMapping=3;e.CineonToneMapping=4;e.UVMapping=300;e.CubeReflectionMapping=301;e.CubeRefractionMapping=302;e.EquirectangularReflectionMapping=303;e.EquirectangularRefractionMapping=304;e.SphericalReflectionMapping=305;e.CubeUVReflectionMapping=306;e.CubeUVRefractionMapping=307;e.RepeatWrapping=1e3;e.ClampToEdgeWrapping=1001;e.MirroredRepeatWrapping=1002;e.NearestFilter=1003;e.NearestMipMapNearestFilter=1004;e.NearestMipMapLinearFilter=1005;e.LinearFilter=1006;e.LinearMipMapNearestFilter=1007;e.LinearMipMapLinearFilter=1008;e.UnsignedByteType=1009;e.ByteType=1010;e.ShortType=1011;e.UnsignedShortType=1012;e.IntType=1013;e.UnsignedIntType=1014;e.FloatType=1015;e.HalfFloatType=1016;e.UnsignedShort4444Type=1017;e.UnsignedShort5551Type=1018;e.UnsignedShort565Type=1019;e.UnsignedInt248Type=1020;e.AlphaFormat=1021;e.RGBFormat=1022;e.RGBAFormat=1023;e.LuminanceFormat=1024;e.LuminanceAlphaFormat=1025;e.RGBEFormat=1023;e.DepthFormat=1026;e.DepthStencilFormat=1027;e.RGB_S3TC_DXT1_Format=2001;e.RGBA_S3TC_DXT1_Format=2002;e.RGBA_S3TC_DXT3_Format=2003;e.RGBA_S3TC_DXT5_Format=2004;e.RGB_PVRTC_4BPPV1_Format=2100;e.RGB_PVRTC_2BPPV1_Format=2101;e.RGBA_PVRTC_4BPPV1_Format=2102;e.RGBA_PVRTC_2BPPV1_Format=2103;e.RGB_ETC1_Format=2151;e.LoopOnce=2200;e.LoopRepeat=2201;e.LoopPingPong=2202;e.InterpolateDiscrete=2300;e.InterpolateLinear=2301;e.InterpolateSmooth=2302;e.ZeroCurvatureEnding=2400;e.ZeroSlopeEnding=2401;e.WrapAroundEnding=2402;e.TrianglesDrawMode=0;e.TriangleStripDrawMode=1;e.TriangleFanDrawMode=2;e.LinearEncoding=3e3;e.sRGBEncoding=3001;e.GammaEncoding=3007;e.RGBEEncoding=3002;e.LogLuvEncoding=3003;e.RGBM7Encoding=3004;e.RGBM16Encoding=3005;e.RGBDEncoding=3006;e.BasicDepthPacking=3200;e.RGBADepthPacking=3201;e.CubeGeometry=Te;e.Face4=function(e,t,i,n,r,o,a){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new ce(e,t,i,r,o,a)};e.LineStrip=0;e.LinePieces=1;e.MeshFaceMaterial=function(e){console.warn("THREE.MeshFaceMaterial has been renamed to THREE.MultiMaterial.");return new ci(e)};e.PointCloud=function(e,t){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new yt(e,t)};e.Particle=function(e){console.warn("THREE.Particle has been renamed to THREE.Sprite.");return new ht(e)};e.ParticleSystem=function(e,t){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new yt(e,t)};e.PointCloudMaterial=function(e){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new vt(e)};e.ParticleBasicMaterial=function(e){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new vt(e)};e.ParticleSystemMaterial=function(e){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new vt(e)};e.Vertex=function(e,t,i){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");return new c(e,t,i)};e.DynamicBufferAttribute=function(e,t){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.");return new le(e,t).setDynamic(!0)};e.Int8Attribute=function(e,t){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");return new ue(e,t)};e.Uint8Attribute=function(e,t){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new pe(e,t)};e.Uint8ClampedAttribute=function(e,t){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");return new de(e,t)};e.Int16Attribute=function(e,t){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");return new fe(e,t)};e.Uint16Attribute=function(e,t){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");return new me(e,t)};e.Int32Attribute=function(e,t){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");return new ge(e,t)};e.Uint32Attribute=function(e,t){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");return new ve(e,t)};e.Float32Attribute=function(e,t){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");return new ye(e,t)};e.Float64Attribute=function(e,t){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");return new xe(e,t)};e.ClosedSplineCurve3=ar;e.SplineCurve3=sr;e.Spline=cr;e.BoundingBoxHelper=function(e,t){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");return new Qn(e,t)};e.EdgesHelper=function(e,t){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");return new gt(new $t(e.geometry),new ft({color:void 0!==t?t:16777215}))};e.WireframeHelper=function(e,t){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");return new gt(new Et(e.geometry),new ft({color:void 0!==t?t:16777215}))};e.XHRLoader=function(e){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");return new vi(e)};e.BinaryTextureLoader=function(e){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");return new xi(e)};e.GeometryUtils={merge:function(e,t,i){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var n;t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),n=t.matrix,t=t.geometry);e.merge(t,n,i)},center:function(e){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return e.center()}};e.ImageUtils={crossOrigin:void 0,loadTexture:function(e,t,i,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new wi;r.setCrossOrigin(this.crossOrigin);e=r.load(e,i,void 0,n);t&&(e.mapping=t);return e},loadTextureCube:function(e,t,i,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new bi;r.setCrossOrigin(this.crossOrigin);e=r.load(e,i,void 0,n);t&&(e.mapping=t);return e},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};e.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project().");e.project(t)};this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");e.unproject(t)};this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}};e.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js");this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}};Object.defineProperty(e,"__esModule",{value:!0})});;
$(function(){var e=100,r=50,t=50;var i;var n,o,a;var s,l,c=0;var f=0,p=0;var u=window.innerWidth/2;var d=window.innerHeight/2;E();m();function E(){i=document.createElement("div");i.style.position="fixed";i.style.top="0px";i.style.left="0px";i.style.zIndex="-1";i.style.opacity="0.5";document.body.appendChild(i);n=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e4);n.position.z=1e3;o=new THREE.Scene;s=new Array;var c=Math.PI*2;var f=new THREE.SpriteCanvasMaterial({color:10263708,program:function(e){e.beginPath();e.arc(0,0,.5,0,c,true);e.fill()}});var p=0;for(var u=0;u<r;u++){for(var d=0;d<t;d++){l=s[p++]=new THREE.Sprite(f);l.position.x=u*e-r*e/2;l.position.z=d*e-t*e/2;o.add(l)}}a=new THREE.CanvasRenderer;a.setPixelRatio(window.devicePixelRatio);a.setSize(window.innerWidth,window.innerHeight);a.setClearColor(16119801,0);i.appendChild(a.domElement);document.addEventListener("mousemove",v,false);window.addEventListener("resize",h,false)}function h(){u=window.innerWidth/2;d=window.innerHeight/2;n.aspect=window.innerWidth/window.innerHeight;n.updateProjectionMatrix();a.setSize(window.innerWidth,window.innerHeight)}function v(e){f=e.clientX-u}function m(){requestAnimationFrame(m);x()}function x(){n.position.x+=(f-n.position.x)*.05;n.position.y=362.05;n.lookAt({x:o.position.x,y:window.innerHeight/3,z:o.position.z});var e=0;for(var i=0;i<r;i++){for(var p=0;p<t;p++){l=s[e++];l.position.y=Math.sin((i+c)*.3)*50+Math.sin((p+c)*.5)*50;l.scale.x=l.scale.y=(Math.sin((i+c)*.3)+1)*4+(Math.sin((p+c)*.5)+1)*4}}a.render(o,n);c+=.1}});THREE.RenderableObject=function(){this.id=0;this.object=null;this.z=0;this.renderOrder=0};THREE.RenderableFace=function(){this.id=0;this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.v3=new THREE.RenderableVertex;this.normalModel=new THREE.Vector3;this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];this.vertexNormalsLength=0;this.color=new THREE.Color;this.material=null;this.uvs=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2];this.z=0;this.renderOrder=0};THREE.RenderableVertex=function(){this.position=new THREE.Vector3;this.positionWorld=new THREE.Vector3;this.positionScreen=new THREE.Vector4;this.visible=true};THREE.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld);this.positionScreen.copy(e.positionScreen)};THREE.RenderableLine=function(){this.id=0;this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.vertexColors=[new THREE.Color,new THREE.Color];this.material=null;this.z=0;this.renderOrder=0};THREE.RenderableSprite=function(){this.id=0;this.object=null;this.x=0;this.y=0;this.z=0;this.rotation=0;this.scale=new THREE.Vector2;this.material=null;this.renderOrder=0};THREE.Projector=function(){var e,r,t=[],i=0,n,o,a=[],s=0,l,c,f=[],p=0,u,d,E=[],h=0,v,m,x=[],R=0,y={objects:[],lights:[],elements:[]},T=new THREE.Vector3,w=new THREE.Vector4,g=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),H=new THREE.Box3,S=new Array(3),M=new Array(4),C=new THREE.Matrix4,b=new THREE.Matrix4,z,V=new THREE.Matrix4,j=new THREE.Matrix3,L=new THREE.Frustum,O=new THREE.Vector4,B=new THREE.Vector4;this.projectVector=function(e,r){console.warn("THREE.Projector: .projectVector() is now vector.project().");e.project(r)};this.unprojectVector=function(e,r){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");e.unproject(r)};this.pickingRay=function(e,r){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")};var W=function(){var e=[];var r=[];var t=null;var i=null;var o=new THREE.Matrix3;function s(n){t=n;i=t.material;o.getNormalMatrix(t.matrixWorld);e.length=0;r.length=0}function c(e){var r=e.position;var t=e.positionWorld;var i=e.positionScreen;t.copy(r).applyMatrix4(z);i.copy(t).applyMatrix4(b);var n=1/i.w;i.x*=n;i.y*=n;i.z*=n;e.visible=i.x>=-1&&i.x<=1&&i.y>=-1&&i.y<=1&&i.z>=-1&&i.z<=1}function f(e,r,t){n=N();n.position.set(e,r,t);c(n)}function p(r,t,i){e.push(r,t,i)}function d(e,t){r.push(e,t)}function E(e,r,t){if(e.visible===true||r.visible===true||t.visible===true){return true}S[0]=e.positionScreen;S[1]=r.positionScreen;S[2]=t.positionScreen;return g.intersectsBox(H.setFromPoints(S))}function h(e,r,t){return(t.positionScreen.x-e.positionScreen.x)*(r.positionScreen.y-e.positionScreen.y)-(t.positionScreen.y-e.positionScreen.y)*(r.positionScreen.x-e.positionScreen.x)<0}function v(e,r){var i=a[e];var n=a[r];u=A();u.id=t.id;u.v1.copy(i);u.v2.copy(n);u.z=(i.positionScreen.z+n.positionScreen.z)/2;u.renderOrder=t.renderOrder;u.material=t.material;y.elements.push(u)}function m(n,s,c){var f=a[n];var p=a[s];var u=a[c];if(E(f,p,u)===false){return}if(i.side===THREE.DoubleSide||h(f,p,u)===true){l=F();l.id=t.id;l.v1.copy(f);l.v2.copy(p);l.v3.copy(u);l.z=(f.positionScreen.z+p.positionScreen.z+u.positionScreen.z)/3;l.renderOrder=t.renderOrder;l.normalModel.fromArray(e,n*3);l.normalModel.applyMatrix3(o).normalize();for(var d=0;d<3;d++){var v=l.vertexNormalsModel[d];v.fromArray(e,arguments[d]*3);v.applyMatrix3(o).normalize();var m=l.uvs[d];m.fromArray(r,arguments[d]*2)}l.vertexNormalsLength=3;l.material=t.material;y.elements.push(l)}}return{setObject:s,projectVertex:c,checkTriangleVisibility:E,checkBackfaceCulling:h,pushVertex:f,pushNormal:p,pushUv:d,pushLine:v,pushTriangle:m}};var P=new W;this.projectScene=function(t,i,n,s){c=0;d=0;m=0;y.elements.length=0;if(t.autoUpdate===true){t.updateMatrixWorld()}if(i.parent===null){i.updateMatrixWorld()}C.copy(i.matrixWorldInverse.getInverse(i.matrixWorld));b.multiplyMatrices(i.projectionMatrix,C);L.setFromMatrix(b);r=0;y.objects.length=0;y.lights.length=0;function f(r){e=k();e.id=r.id;e.object=r;T.setFromMatrixPosition(r.matrixWorld);T.applyMatrix4(b);e.z=T.z;e.renderOrder=r.renderOrder;y.objects.push(e)}t.traverseVisible(function(e){if(e instanceof THREE.Light){y.lights.push(e)}else{if(e instanceof THREE.Mesh||e instanceof THREE.Line){if(e.material.visible===false){return}if(e.frustumCulled===true&&L.intersectsObject(e)===false){return}f(e)}else{if(e instanceof THREE.Sprite){if(e.material.visible===false){return}if(e.frustumCulled===true&&L.intersectsSprite(e)===false){return}f(e)}}}});if(n===true){y.objects.sort(D)}for(var p=0,E=y.objects.length;p<E;p++){var h=y.objects[p].object;var x=h.geometry;P.setObject(h);z=h.matrixWorld;o=0;if(h instanceof THREE.Mesh){if(x instanceof THREE.BufferGeometry){var R=x.attributes;var g=x.groups;if(R.position===undefined){continue}var H=R.position.array;for(var S=0,M=H.length;S<M;S+=3){P.pushVertex(H[S],H[S+1],H[S+2])}if(R.normal!==undefined){var W=R.normal.array;for(var S=0,M=W.length;S<M;S+=3){P.pushNormal(W[S],W[S+1],W[S+2])}}if(R.uv!==undefined){var U=R.uv.array;for(var S=0,M=U.length;S<M;S+=2){P.pushUv(U[S],U[S+1])}}if(x.index!==null){var q=x.index.array;if(g.length>0){for(var J=0;J<g.length;J++){var X=g[J];for(var S=X.start,M=X.start+X.count;S<M;S+=3){P.pushTriangle(q[S],q[S+1],q[S+2])}}}else{for(var S=0,M=q.length;S<M;S+=3){P.pushTriangle(q[S],q[S+1],q[S+2])}}}else{for(var S=0,M=H.length/3;S<M;S+=3){P.pushTriangle(S,S+1,S+2)}}}else{if(x instanceof THREE.Geometry){var $=x.vertices;var K=x.faces;var Q=x.faceVertexUvs[0];j.getNormalMatrix(z);var Y=h.material;var Z=Y instanceof THREE.MultiMaterial;var _=Z===true?h.material:null;for(var ee=0,re=$.length;ee<re;ee++){var te=$[ee];T.copy(te);if(Y.morphTargets===true){var ie=x.morphTargets;var ne=h.morphTargetInfluences;for(var oe=0,ae=ie.length;oe<ae;oe++){var se=ne[oe];if(se===0){continue}var le=ie[oe];var ce=le.vertices[ee];T.x+=(ce.x-te.x)*se;T.y+=(ce.y-te.y)*se;T.z+=(ce.z-te.z)*se}}P.pushVertex(T.x,T.y,T.z)}for(var fe=0,pe=K.length;fe<pe;fe++){var ue=K[fe];Y=Z===true?_.materials[ue.materialIndex]:h.material;if(Y===undefined){continue}var de=Y.side;var Ee=a[ue.a];var he=a[ue.b];var ve=a[ue.c];if(P.checkTriangleVisibility(Ee,he,ve)===false){continue}var me=P.checkBackfaceCulling(Ee,he,ve);if(de!==THREE.DoubleSide){if(de===THREE.FrontSide&&me===false){continue}if(de===THREE.BackSide&&me===true){continue}}l=F();l.id=h.id;l.v1.copy(Ee);l.v2.copy(he);l.v3.copy(ve);l.normalModel.copy(ue.normal);if(me===false&&(de===THREE.BackSide||de===THREE.DoubleSide)){l.normalModel.negate()}l.normalModel.applyMatrix3(j).normalize();var xe=ue.vertexNormals;for(var Re=0,ye=Math.min(xe.length,3);Re<ye;Re++){var Te=l.vertexNormalsModel[Re];Te.copy(xe[Re]);if(me===false&&(de===THREE.BackSide||de===THREE.DoubleSide)){Te.negate()}Te.applyMatrix3(j).normalize()}l.vertexNormalsLength=xe.length;var we=Q[fe];if(we!==undefined){for(var ge=0;ge<3;ge++){l.uvs[ge].copy(we[ge])}}l.color=ue.color;l.material=Y;l.z=(Ee.positionScreen.z+he.positionScreen.z+ve.positionScreen.z)/3;l.renderOrder=h.renderOrder;y.elements.push(l)}}}}else{if(h instanceof THREE.Line){if(x instanceof THREE.BufferGeometry){var R=x.attributes;if(R.position!==undefined){var H=R.position.array;for(var S=0,M=H.length;S<M;S+=3){P.pushVertex(H[S],H[S+1],H[S+2])}if(x.index!==null){var q=x.index.array;for(var S=0,M=q.length;S<M;S+=2){P.pushLine(q[S],q[S+1])}}else{var He=h instanceof THREE.LineSegments?2:1;for(var S=0,M=H.length/3-1;S<M;S+=He){P.pushLine(S,S+1)}}}}else{if(x instanceof THREE.Geometry){V.multiplyMatrices(b,z);var $=h.geometry.vertices;if($.length===0){continue}Ee=N();Ee.positionScreen.copy($[0]).applyMatrix4(V);var He=h instanceof THREE.LineSegments?2:1;for(var ee=1,re=$.length;ee<re;ee++){Ee=N();Ee.positionScreen.copy($[ee]).applyMatrix4(V);if((ee+1)%He>0){continue}he=a[o-2];O.copy(Ee.positionScreen);B.copy(he.positionScreen);if(G(O,B)===true){O.multiplyScalar(1/O.w);B.multiplyScalar(1/B.w);u=A();u.id=h.id;u.v1.positionScreen.copy(O);u.v2.positionScreen.copy(B);u.z=Math.max(O.z,B.z);u.renderOrder=h.renderOrder;u.material=h.material;if(h.material.vertexColors===THREE.VertexColors){u.vertexColors[0].copy(h.geometry.colors[ee]);u.vertexColors[1].copy(h.geometry.colors[ee-1])}y.elements.push(u)}}}}}else{if(h instanceof THREE.Sprite){w.set(z.elements[12],z.elements[13],z.elements[14],1);w.applyMatrix4(b);var Se=1/w.w;w.z*=Se;if(w.z>=-1&&w.z<=1){v=I();v.id=h.id;v.x=w.x*Se;v.y=w.y*Se;v.z=w.z;v.renderOrder=h.renderOrder;v.object=h;v.rotation=h.rotation;v.scale.x=h.scale.x*Math.abs(v.x-(w.x+i.projectionMatrix.elements[0])/(w.w+i.projectionMatrix.elements[12]));v.scale.y=h.scale.y*Math.abs(v.y-(w.y+i.projectionMatrix.elements[5])/(w.w+i.projectionMatrix.elements[13]));v.material=h.material;y.elements.push(v)}}}}}if(s===true){y.elements.sort(D)}return y};function k(){if(r===i){var e=new THREE.RenderableObject;t.push(e);i++;r++;return e}return t[r++]}function N(){if(o===s){var e=new THREE.RenderableVertex;a.push(e);s++;o++;return e}return a[o++]}function F(){if(c===p){var e=new THREE.RenderableFace;f.push(e);p++;c++;return e}return f[c++]}function A(){if(d===h){var e=new THREE.RenderableLine;E.push(e);h++;d++;return e}return E[d++]}function I(){if(m===R){var e=new THREE.RenderableSprite;x.push(e);R++;m++;return e}return x[m++]}function D(e,r){if(e.renderOrder!==r.renderOrder){return e.renderOrder-r.renderOrder}else{if(e.z!==r.z){return r.z-e.z}else{if(e.id!==r.id){return e.id-r.id}else{return 0}}}}function G(e,r){var t=0,i=1,n=e.z+e.w,o=r.z+r.w,a=-e.z+e.w,s=-r.z+r.w;if(n>=0&&o>=0&&a>=0&&s>=0){return true}else{if(n<0&&o<0||a<0&&s<0){return false}else{if(n<0){t=Math.max(t,n/(n-o))}else{if(o<0){i=Math.min(i,n/(n-o))}}if(a<0){t=Math.max(t,a/(a-s))}else{if(s<0){i=Math.min(i,a/(a-s))}}if(i<t){return false}else{e.lerp(r,t);r.lerp(e,1-i);return true}}}}};THREE.SpriteCanvasMaterial=function(e){THREE.Material.call(this);this.type="SpriteCanvasMaterial";this.color=new THREE.Color(16777215);this.program=function(e,r){};this.setValues(e)};THREE.SpriteCanvasMaterial.prototype=Object.create(THREE.Material.prototype);THREE.SpriteCanvasMaterial.prototype.constructor=THREE.SpriteCanvasMaterial;THREE.SpriteCanvasMaterial.prototype.clone=function(){var e=new THREE.SpriteCanvasMaterial;e.copy(this);e.color.copy(this.color);e.program=this.program;return e};THREE.CanvasRenderer=function(e){console.log("THREE.CanvasRenderer",THREE.REVISION);e=e||{};var r=this,t,i,n,o=new THREE.Projector,a=e.canvas!==undefined?e.canvas:document.createElement("canvas"),s=a.width,l=a.height,c=Math.floor(s/2),f=Math.floor(l/2),p=0,u=0,d=s,E=l,h=1,v=a.getContext("2d",{alpha:e.alpha===true}),m=new THREE.Color(0),x=e.alpha===true?0:1,R=1,y=0,T=null,w=null,g=null,H=null,S=null,M=[],C,b,z,V,j,L=new THREE.RenderableVertex,O=new THREE.RenderableVertex,B,W,P,k,N,F,A,I,D,G,U,q,J=new THREE.Color,X=new THREE.Color,$=new THREE.Color,K=new THREE.Color,Q=new THREE.Color,Y=new THREE.Color,Z=new THREE.Color,_=new THREE.Color,ee={},re,te,ie,ne,oe,ae,se,le,ce=new THREE.Box2,fe=new THREE.Box2,pe=new THREE.Box2,ue=new THREE.Color,de=new THREE.Color,Ee=new THREE.Color,he=new THREE.Vector3,ve=new THREE.Vector3,me=new THREE.Vector3,xe=new THREE.Matrix3;if(v.setLineDash===undefined){v.setLineDash=function(){}}this.domElement=a;this.autoClear=true;this.sortObjects=true;this.sortElements=true;this.info={render:{vertices:0,faces:0}};this.supportsVertexTextures=function(){};this.setFaceCulling=function(){};this.getContext=function(){return v};this.getContextAttributes=function(){return v.getContextAttributes()};this.getPixelRatio=function(){return h};this.setPixelRatio=function(e){if(e!==undefined){h=e}};this.setSize=function(e,r,t){s=e*h;l=r*h;a.width=s;a.height=l;c=Math.floor(s/2);f=Math.floor(l/2);if(t!==false){a.style.width=e+"px";a.style.height=r+"px"}ce.min.set(-c,-f);ce.max.set(c,f);fe.min.set(-c,-f);fe.max.set(c,f);R=1;y=0;T=null;w=null;g=null;H=null;S=null;this.setViewport(0,0,e,r)};this.setViewport=function(e,r,t,i){p=e*h;u=r*h;d=t*h;E=i*h};this.setScissor=function(){};this.setScissorTest=function(){};this.setClearColor=function(e,r){m.set(e);x=r!==undefined?r:1;fe.min.set(-c,-f);fe.max.set(c,f)};this.setClearColorHex=function(e,r){console.warn("THREE.CanvasRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead.");this.setClearColor(e,r)};this.getClearColor=function(){return m};this.getClearAlpha=function(){return x};this.getMaxAnisotropy=function(){return 0};this.clear=function(){if(fe.isEmpty()===false){fe.intersect(ce);fe.expandByScalar(2);fe.min.x=fe.min.x+c;fe.min.y=-fe.min.y+f;fe.max.x=fe.max.x+c;fe.max.y=-fe.max.y+f;if(x<1){v.clearRect(fe.min.x|0,fe.max.y|0,fe.max.x-fe.min.x|0,fe.min.y-fe.max.y|0)}if(x>0){Le(THREE.NormalBlending);je(1);ke("rgba("+Math.floor(m.r*255)+","+Math.floor(m.g*255)+","+Math.floor(m.b*255)+","+x+")");v.fillRect(fe.min.x|0,fe.max.y|0,fe.max.x-fe.min.x|0,fe.min.y-fe.max.y|0)}fe.makeEmpty()}};this.clearColor=function(){};this.clearDepth=function(){};this.clearStencil=function(){};this.render=function(e,a){if(a instanceof THREE.Camera===false){console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.");return}var h=e.background;if(h&&h.isColor){ke("rgb("+Math.floor(h.r*255)+","+Math.floor(h.g*255)+","+Math.floor(h.b*255)+")");v.fillRect(0,0,s,l)}else{if(this.autoClear===true){this.clear()}}r.info.render.vertices=0;r.info.render.faces=0;v.setTransform(d/s,0,0,-E/l,p,l-u);v.translate(c,f);t=o.projectScene(e,a,this.sortObjects,this.sortElements);i=t.elements;n=t.lights;C=a;xe.getNormalMatrix(a.matrixWorldInverse);Re();for(var m=0,x=i.length;m<x;m++){var R=i[m];var y=R.material;if(y===undefined||y.opacity===0){continue}pe.makeEmpty();if(R instanceof THREE.RenderableSprite){b=R;b.x*=c;b.y*=f;Te(b,R,y)}else{if(R instanceof THREE.RenderableLine){b=R.v1;z=R.v2;b.positionScreen.x*=c;b.positionScreen.y*=f;z.positionScreen.x*=c;z.positionScreen.y*=f;pe.setFromPoints([b.positionScreen,z.positionScreen]);if(ce.intersectsBox(pe)===true){we(b,z,R,y)}}else{if(R instanceof THREE.RenderableFace){b=R.v1;z=R.v2;V=R.v3;if(b.positionScreen.z<-1||b.positionScreen.z>1){continue}if(z.positionScreen.z<-1||z.positionScreen.z>1){continue}if(V.positionScreen.z<-1||V.positionScreen.z>1){continue}b.positionScreen.x*=c;b.positionScreen.y*=f;z.positionScreen.x*=c;z.positionScreen.y*=f;V.positionScreen.x*=c;V.positionScreen.y*=f;if(y.overdraw>0){Ve(b.positionScreen,z.positionScreen,y.overdraw);Ve(z.positionScreen,V.positionScreen,y.overdraw);Ve(V.positionScreen,b.positionScreen,y.overdraw)}pe.setFromPoints([b.positionScreen,z.positionScreen,V.positionScreen]);if(ce.intersectsBox(pe)===true){ge(b,z,V,0,1,2,R,y)}}}}fe.union(pe)}v.setTransform(1,0,0,1,0,0)};function Re(){ue.setRGB(0,0,0);de.setRGB(0,0,0);Ee.setRGB(0,0,0);for(var e=0,r=n.length;e<r;e++){var t=n[e];var i=t.color;if(t instanceof THREE.AmbientLight){ue.add(i)}else{if(t instanceof THREE.DirectionalLight){de.add(i)}else{if(t instanceof THREE.PointLight){Ee.add(i)}}}}}function ye(e,r,t){for(var i=0,o=n.length;i<o;i++){var a=n[i];_.copy(a.color);if(a instanceof THREE.DirectionalLight){var s=he.setFromMatrixPosition(a.matrixWorld).normalize();var l=r.dot(s);if(l<=0){continue}l*=a.intensity;t.add(_.multiplyScalar(l))}else{if(a instanceof THREE.PointLight){var s=he.setFromMatrixPosition(a.matrixWorld);var l=r.dot(he.subVectors(s,e).normalize());if(l<=0){continue}l*=a.distance==0?1:1-Math.min(e.distanceTo(s)/a.distance,1);if(l==0){continue}l*=a.intensity;t.add(_.multiplyScalar(l))}}}}function Te(e,r,t){je(t.opacity);Le(t.blending);var i=r.scale.x*c;var n=r.scale.y*f;var o=.5*Math.sqrt(i*i+n*n);pe.min.set(e.x-o,e.y-o);pe.max.set(e.x+o,e.y+o);if(t instanceof THREE.SpriteMaterial){var a=t.map;if(a!==null){var s=ee[a.id];if(s===undefined||s.version!==a.version){s=Ce(a);ee[a.id]=s}if(s.canvas!==undefined){ke(s.canvas);var l=a.image;var p=l.width*a.offset.x;var u=l.height*a.offset.y;var d=l.width*a.repeat.x;var E=l.height*a.repeat.y;var h=i/d;var m=n/E;v.save();v.translate(e.x,e.y);if(t.rotation!==0){v.rotate(t.rotation)}v.translate(-i/2,-n/2);v.scale(h,m);v.translate(-p,-u);v.fillRect(p,u,d,E);v.restore()}}else{ke(t.color.getStyle());v.save();v.translate(e.x,e.y);if(t.rotation!==0){v.rotate(t.rotation)}v.scale(i,-n);v.fillRect(-.5,-.5,1,1);v.restore()}}else{if(t instanceof THREE.SpriteCanvasMaterial){Pe(t.color.getStyle());ke(t.color.getStyle());v.save();v.translate(e.x,e.y);if(t.rotation!==0){v.rotate(t.rotation)}v.scale(i,n);t.program(v);v.restore()}}}function we(e,r,t,i){je(i.opacity);Le(i.blending);v.beginPath();v.moveTo(e.positionScreen.x,e.positionScreen.y);v.lineTo(r.positionScreen.x,r.positionScreen.y);if(i instanceof THREE.LineBasicMaterial){Oe(i.linewidth);Be(i.linecap);We(i.linejoin);if(i.vertexColors!==THREE.VertexColors){Pe(i.color.getStyle())}else{var n=t.vertexColors[0].getStyle();var o=t.vertexColors[1].getStyle();if(n===o){Pe(n)}else{try{var a=v.createLinearGradient(e.positionScreen.x,e.positionScreen.y,r.positionScreen.x,r.positionScreen.y);a.addColorStop(0,n);a.addColorStop(1,o)}catch(s){a=n}Pe(a)}}v.stroke();pe.expandByScalar(i.linewidth*2)}else{if(i instanceof THREE.LineDashedMaterial){Oe(i.linewidth);Be(i.linecap);We(i.linejoin);Pe(i.color.getStyle());Ne([i.dashSize,i.gapSize]);v.stroke();pe.expandByScalar(i.linewidth*2);Ne([])}}}function ge(e,t,i,n,o,a,s,l){r.info.render.vertices+=3;r.info.render.faces++;je(l.opacity);Le(l.blending);B=e.positionScreen.x;W=e.positionScreen.y;P=t.positionScreen.x;k=t.positionScreen.y;N=i.positionScreen.x;F=i.positionScreen.y;He(B,W,P,k,N,F);if((l instanceof THREE.MeshLambertMaterial||l instanceof THREE.MeshPhongMaterial)&&l.map===null){Y.copy(l.color);Z.copy(l.emissive);if(l.vertexColors===THREE.FaceColors){Y.multiply(s.color)}J.copy(ue);ve.copy(e.positionWorld).add(t.positionWorld).add(i.positionWorld).divideScalar(3);ye(ve,s.normalModel,J);J.multiply(Y).add(Z);l.wireframe===true?Se(J,l.wireframeLinewidth,l.wireframeLinecap,l.wireframeLinejoin):Me(J)}else{if(l instanceof THREE.MeshBasicMaterial||l instanceof THREE.MeshLambertMaterial||l instanceof THREE.MeshPhongMaterial){if(l.map!==null){var c=l.map.mapping;if(c===THREE.UVMapping){te=s.uvs;be(B,W,P,k,N,F,te[n].x,te[n].y,te[o].x,te[o].y,te[a].x,te[a].y,l.map)}}else{if(l.envMap!==null){if(l.envMap.mapping===THREE.SphericalReflectionMapping){me.copy(s.vertexNormalsModel[n]).applyMatrix3(xe);ie=.5*me.x+.5;ne=.5*me.y+.5;me.copy(s.vertexNormalsModel[o]).applyMatrix3(xe);oe=.5*me.x+.5;ae=.5*me.y+.5;me.copy(s.vertexNormalsModel[a]).applyMatrix3(xe);se=.5*me.x+.5;le=.5*me.y+.5;be(B,W,P,k,N,F,ie,ne,oe,ae,se,le,l.envMap)}}else{J.copy(l.color);if(l.vertexColors===THREE.FaceColors){J.multiply(s.color)}l.wireframe===true?Se(J,l.wireframeLinewidth,l.wireframeLinecap,l.wireframeLinejoin):Me(J)}}}else{if(l instanceof THREE.MeshNormalMaterial){me.copy(s.normalModel).applyMatrix3(xe);J.setRGB(me.x,me.y,me.z).multiplyScalar(.5).addScalar(.5);l.wireframe===true?Se(J,l.wireframeLinewidth,l.wireframeLinecap,l.wireframeLinejoin):Me(J)}else{J.setRGB(1,1,1);l.wireframe===true?Se(J,l.wireframeLinewidth,l.wireframeLinecap,l.wireframeLinejoin):Me(J)}}}}function He(e,r,t,i,n,o){v.beginPath();v.moveTo(e,r);v.lineTo(t,i);v.lineTo(n,o);v.closePath()}function Se(e,r,t,i){Oe(r);Be(t);We(i);Pe(e.getStyle());v.stroke();pe.expandByScalar(r*2)}function Me(e){ke(e.getStyle());v.fill()}function Ce(e){if(e.version===0||e instanceof THREE.CompressedTexture||e instanceof THREE.DataTexture){return{canvas:undefined,version:e.version}}var r=e.image;if(r.complete===false){return{canvas:undefined,version:0}}var t=e.wrapS===THREE.RepeatWrapping||e.wrapS===THREE.MirroredRepeatWrapping;var i=e.wrapT===THREE.RepeatWrapping||e.wrapT===THREE.MirroredRepeatWrapping;var n=e.wrapS===THREE.MirroredRepeatWrapping;var o=e.wrapT===THREE.MirroredRepeatWrapping;var a=document.createElement("canvas");a.width=r.width*(n?2:1);a.height=r.height*(o?2:1);var s=a.getContext("2d");s.setTransform(1,0,0,-1,0,r.height);s.drawImage(r,0,0);if(n===true){s.setTransform(-1,0,0,-1,r.width,r.height);s.drawImage(r,-r.width,0)}if(o===true){s.setTransform(1,0,0,1,0,0);s.drawImage(r,0,r.height)}if(n===true&&o===true){s.setTransform(-1,0,0,1,r.width,0);s.drawImage(r,-r.width,r.height)}var l="no-repeat";if(t===true&&i===true){l="repeat"}else{if(t===true){l="repeat-x"}else{if(i===true){l="repeat-y"}}}var c=v.createPattern(a,l);if(e.onUpdate){e.onUpdate(e)}return{canvas:c,version:e.version}}function be(e,r,t,i,n,o,a,s,l,c,f,p,u){var d=ee[u.id];if(d===undefined||d.version!==u.version){d=Ce(u);ee[u.id]=d}if(d.canvas!==undefined){ke(d.canvas)}else{ke("rgba( 0, 0, 0, 1)");v.fill();return}var E,h,m,x,R,y,T,w,g=u.offset.x/u.repeat.x,H=u.offset.y/u.repeat.y,S=u.image.width*u.repeat.x,M=u.image.height*u.repeat.y;a=(a+g)*S;s=(s+H)*M;l=(l+g)*S;c=(c+H)*M;f=(f+g)*S;p=(p+H)*M;t-=e;i-=r;n-=e;o-=r;l-=a;c-=s;f-=a;p-=s;T=l*p-f*c;if(T===0){return}w=1/T;E=(p*t-c*n)*w;h=(p*i-c*o)*w;m=(l*n-f*t)*w;x=(l*o-f*i)*w;R=e-E*a-m*s;y=r-h*a-x*s;v.save();v.transform(E,h,m,x,R,y);v.fill();v.restore()}function ze(e,r,t,i,n,o,a,s,l,c,f,p,u){var d,E,h,m,x,R,y,T,w=u.width-1,g=u.height-1;a*=w;s*=g;l*=w;c*=g;f*=w;p*=g;t-=e;i-=r;n-=e;o-=r;l-=a;c-=s;f-=a;p-=s;y=l*p-f*c;T=1/y;d=(p*t-c*n)*T;E=(p*i-c*o)*T;h=(l*n-f*t)*T;m=(l*o-f*i)*T;x=e-d*a-h*s;R=r-E*a-m*s;v.save();v.transform(d,E,h,m,x,R);v.clip();v.drawImage(u,0,0);v.restore()}function Ve(e,r,t){var i=r.x-e.x,n=r.y-e.y,o=i*i+n*n,a;if(o===0){return}a=t/Math.sqrt(o);i*=a;n*=a;r.x+=i;r.y+=n;e.x-=i;e.y-=n}function je(e){if(R!==e){v.globalAlpha=e;R=e}}function Le(e){if(y!==e){if(e===THREE.NormalBlending){v.globalCompositeOperation="source-over"}else{if(e===THREE.AdditiveBlending){v.globalCompositeOperation="lighter"}else{if(e===THREE.SubtractiveBlending){v.globalCompositeOperation="darker"}else{if(e===THREE.MultiplyBlending){v.globalCompositeOperation="multiply"}}}}y=e}}function Oe(e){if(g!==e){v.lineWidth=e;g=e}}function Be(e){if(H!==e){v.lineCap=e;H=e}}function We(e){if(S!==e){v.lineJoin=e;S=e}}function Pe(e){if(T!==e){v.strokeStyle=e;T=e}}function ke(e){if(w!==e){v.fillStyle=e;w=e}}function Ne(e){if(M.length!==e.length){v.setLineDash(e);M=e}}};;
NexT.utils=NexT.$u={wrapImageWithFancyBox:function(){$(".content img").not("[hidden]").not(".group-picture img, .post-gallery img").each(function(){var e=$(this);var i=e.attr("title");var t=e.parent("a");if(t.size()<1){var a=e.attr("data-original")?this.getAttribute("data-original"):this.getAttribute("src");t=e.wrap('<a href="'+a+'"></a>').parent("a")}t.addClass("fancybox fancybox.image");t.attr("rel","group");if(i){t.append('<p class="image-caption">'+i+"</p>");t.attr("title",i)}});$(".fancybox").fancybox({helpers:{overlay:{locked:false}}})},lazyLoadPostsImages:function(){$("#posts").find("img").lazyload({effect:"fadeIn",threshold:0})},registerTabsTag:function(){var e=".tabs ul.nav-tabs ";$(function(){$(window).bind("hashchange",function(){var i=location.hash;if(i!==""){$(e+'li:has(a[href="'+i+'"])').addClass("active").siblings().removeClass("active");$(i).addClass("active").siblings().removeClass("active")}}).trigger("hashchange")});$(e+".tab").on("click",function(e){e.preventDefault();if(!$(this).hasClass("active")){$(this).addClass("active").siblings().removeClass("active");var i=$(this).find("a").attr("href");$(i).addClass("active").siblings().removeClass("active");if(location.hash!==""){history.pushState("",document.title,window.location.pathname+window.location.search)}}})},registerESCKeyEvent:function(){$(document).on("keyup",function(e){var i=e.which===27&&$(".search-popup").is(":visible");if(i){$(".search-popup").hide();$(".search-popup-overlay").remove();$("body").css("overflow","")}})},registerBackToTop:function(){var e=50;var i=$(".back-to-top");$(window).on("scroll",function(){i.toggleClass("back-to-top-on",window.pageYOffset>e);var t=$(window).scrollTop();var a=NexT.utils.getContentVisibilityHeight();var n=t/a;var s=Math.round(n*100);var o=s>100?100:s;$("#scrollpercent>span").html(o)});i.on("click",function(){$("body").velocity("scroll")})},embeddedVideoTransformer:function(){var e=$("iframe");var i=["www.youtube.com","player.vimeo.com","player.youku.com","music.163.com","www.tudou.com"];var t=new RegExp(i.join("|"));e.each(function(){var e=this;var i=$(this);var s=a(i);var o;if(this.src.search(t)>0){var r=n(s.width,s.height);i.width("100%").height("100%").css({position:"absolute",top:"0",left:"0"});var c=document.createElement("div");c.className="fluid-vids";c.style.position="relative";c.style.marginBottom="20px";c.style.width="100%";c.style.paddingTop=r+"%";c.style.paddingTop===""&&(c.style.paddingTop="50%");var d=e.parentNode;d.insertBefore(c,e);c.appendChild(e);if(this.src.search("music.163.com")>0){o=a(i);var h=o.width>s.width||o.height<s.height;if(h){c.style.paddingTop=n(o.width,s.height)+"%"}}}});function a(e){return{width:e.width(),height:e.height()}}function n(e,i){return i/e*100}},addActiveClassToMenuItem:function(){var e=window.location.pathname;e=e==="/"?e:e.substring(0,e.length-1);$('.menu-item a[href^="'+e+'"]:first').parent().addClass("menu-item-active")},hasMobileUA:function(){var e=window.navigator;var i=e.userAgent;var t=/iPad|iPhone|Android|Opera Mini|BlackBerry|webOS|UCWEB|Blazer|PSP|IEMobile|Symbian/g;return t.test(i)},isTablet:function(){return window.screen.width<992&&window.screen.width>767&&this.hasMobileUA()},isMobile:function(){return window.screen.width<767&&this.hasMobileUA()},isDesktop:function(){return!this.isTablet()&&!this.isMobile()},escapeSelector:function(e){return e.replace(/[!"$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$&")},displaySidebar:function(){if(!this.isDesktop()||this.isPisces()||this.isGemini()){return}$(".sidebar-toggle").trigger("click")},isMist:function(){return CONFIG.scheme==="Mist"},isPisces:function(){return CONFIG.scheme==="Pisces"},isGemini:function(){return CONFIG.scheme==="Gemini"},getScrollbarWidth:function(){var e=$("<div />").addClass("scrollbar-measure").prependTo("body");var i=e[0];var t=i.offsetWidth-i.clientWidth;e.remove();return t},getContentVisibilityHeight:function(){var e=$("#content").height(),i=$(window).height(),t=e>i?e-i:$(document).height()-i;return t},getSidebarb2tHeight:function(){var e=CONFIG.sidebar.b2t?$(".back-to-top").height():0;return e},getSidebarSchemePadding:function(){var e=$(".sidebar-nav").css("display")=="block"?$(".sidebar-nav").outerHeight(true):0,i=$(".sidebar-inner"),t=i.innerWidth()-i.width(),a=this.isPisces()||this.isGemini()?t*2+e+CONFIG.sidebar.offset*2+this.getSidebarb2tHeight():t*2+e/2;return a}};$(document).ready(function(){e();function e(){var e;$(window).on("resize",function(){e&&clearTimeout(e);e=setTimeout(function(){var e=document.body.clientHeight-NexT.utils.getSidebarSchemePadding();i(e)},0)});var t=NexT.utils.getScrollbarWidth();if($(".site-overview-wrap").height()>document.body.clientHeight-NexT.utils.getSidebarSchemePadding()){$(".site-overview").css("width","calc(100% + "+t+"px)")}if($(".post-toc-wrap").height()>document.body.clientHeight-NexT.utils.getSidebarSchemePadding()){$(".post-toc").css("width","calc(100% + "+t+"px)")}i(document.body.clientHeight-NexT.utils.getSidebarSchemePadding())}function i(e){e=e||"auto";$(".site-overview, .post-toc").css("max-height",e)}});;
$(document).ready(function(){NexT.motion={};var i={lines:[],push:function(i){this.lines.push(i)},init:function(){this.lines.forEach(function(i){i.init()})},arrow:function(){this.lines.forEach(function(i){i.arrow()})},close:function(){this.lines.forEach(function(i){i.close()})}};function t(i){this.el=$(i.el);this.status=$.extend({},{init:{width:"100%",opacity:1,left:0,rotateZ:0,top:0}},i.status)}t.prototype.init=function(){this.transform("init")};t.prototype.arrow=function(){this.transform("arrow")};t.prototype.close=function(){this.transform("close")};t.prototype.transform=function(i){this.el.velocity("stop").velocity(this.status[i])};var e=new t({el:".sidebar-toggle-line-first",status:{arrow:{width:"50%",rotateZ:"-45deg",top:"2px"},close:{width:"100%",rotateZ:"-45deg",top:"5px"}}});var o=new t({el:".sidebar-toggle-line-middle",status:{arrow:{width:"90%"},close:{opacity:0}}});var n=new t({el:".sidebar-toggle-line-last",status:{arrow:{width:"50%",rotateZ:"45deg",top:"-2px"},close:{width:"100%",rotateZ:"45deg",top:"-5px"}}});i.push(e);i.push(o);i.push(n);var s="320px";var r=200;var a,l;var c={toggleEl:$(".sidebar-toggle"),dimmerEl:$("#sidebar-dimmer"),sidebarEl:$(".sidebar"),isSidebarVisible:false,init:function(){this.toggleEl.on("click",this.clickHandler.bind(this));this.dimmerEl.on("click",this.clickHandler.bind(this));this.toggleEl.on("mouseenter",this.mouseEnterHandler.bind(this));this.toggleEl.on("mouseleave",this.mouseLeaveHandler.bind(this));this.sidebarEl.on("touchstart",this.touchstartHandler.bind(this));this.sidebarEl.on("touchend",this.touchendHandler.bind(this));this.sidebarEl.on("touchmove",function(i){i.preventDefault()});$(document).on("sidebar.isShowing",function(){NexT.utils.isDesktop()&&$("body").velocity("stop").velocity({paddingRight:s},r)}).on("sidebar.isHiding",function(){})},clickHandler:function(){this.isSidebarVisible?this.hideSidebar():this.showSidebar();this.isSidebarVisible=!this.isSidebarVisible},mouseEnterHandler:function(){if(this.isSidebarVisible){return}i.arrow()},mouseLeaveHandler:function(){if(this.isSidebarVisible){return}i.init()},touchstartHandler:function(i){a=i.originalEvent.touches[0].clientX;l=i.originalEvent.touches[0].clientY},touchendHandler:function(i){var t=i.originalEvent.changedTouches[0].clientX;var e=i.originalEvent.changedTouches[0].clientY;if(t-a>30&&Math.abs(e-l)<20){this.clickHandler()}},showSidebar:function(){var t=this;i.close();this.sidebarEl.velocity("stop").velocity({width:s},{display:"block",duration:r,begin:function(){$(".sidebar .motion-element").velocity("transition.slideRightIn",{stagger:50,drag:true,complete:function(){t.sidebarEl.trigger("sidebar.motion.complete")}})},complete:function(){t.sidebarEl.addClass("sidebar-active");t.sidebarEl.trigger("sidebar.didShow")}});this.sidebarEl.trigger("sidebar.isShowing")},hideSidebar:function(){NexT.utils.isDesktop()&&$("body").velocity("stop").velocity({paddingRight:0});this.sidebarEl.find(".motion-element").velocity("stop").css("display","none");this.sidebarEl.velocity("stop").velocity({width:0},{display:"none"});i.init();this.sidebarEl.removeClass("sidebar-active");this.sidebarEl.trigger("sidebar.isHiding");if(!!$(".post-toc-wrap")){if($(".site-overview-wrap").css("display")==="block"){$(".post-toc-wrap").removeClass("motion-element")}else{$(".post-toc-wrap").addClass("motion-element")}}}};c.init();NexT.motion.integrator={queue:[],cursor:-1,add:function(i){this.queue.push(i);return this},next:function(){this.cursor++;var i=this.queue[this.cursor];$.isFunction(i)&&i(NexT.motion.integrator)},bootstrap:function(){this.next()}};NexT.motion.middleWares={logo:function(i){var t=[];var e=$(".brand");var o=$(".site-title");var n=$(".site-subtitle");var s=$(".logo-line-before i");var r=$(".logo-line-after i");e.size()>0&&t.push({e:e,p:{opacity:1},o:{duration:200}});NexT.utils.isMist()&&l([s,r])&&t.push(a(s,"100%"),a(r,"-100%"));l(o)&&t.push({e:o,p:{opacity:1,top:0},o:{duration:200}});l(n)&&t.push({e:n,p:{opacity:1,top:0},o:{duration:200}});if(CONFIG.motion.async){i.next()}if(t.length>0){t[t.length-1].o.complete=function(){i.next()};$.Velocity.RunSequence(t)}else{i.next()}function a(i,t){return{e:$(i),p:{translateX:t},o:{duration:500,sequenceQueue:false}}}function l(i){i=Array.isArray(i)?i:[i];return i.every(function(i){return $.isFunction(i.size)&&i.size()>0})}},menu:function(i){if(CONFIG.motion.async){i.next()}$(".menu-item").velocity("transition.slideDownIn",{display:null,duration:200,complete:function(){i.next()}})},postList:function(i){var t=$(".post-block, .pagination, .comments");var e=CONFIG.motion.transition.post_block;var o=$(".post-header");var n=CONFIG.motion.transition.post_header;var s=$(".post-body");var r=CONFIG.motion.transition.post_body;var a=$(".collection-title, .archive-year");var l=CONFIG.motion.transition.coll_header;var c=$(".sidebar-inner");var d=CONFIG.motion.transition.sidebar;var u=t.size()>0;u?h():i.next();if(CONFIG.motion.async){i.next()}function h(){var u=window.postMotionOptions||{stagger:100,drag:true};u.complete=function(){if(CONFIG.motion.transition.sidebar&&(NexT.utils.isPisces()||NexT.utils.isGemini())){c.css({transform:"initial"})}i.next()};if(CONFIG.motion.transition.post_block){t.velocity("transition."+e,u)}if(CONFIG.motion.transition.post_header){o.velocity("transition."+n,u)}if(CONFIG.motion.transition.post_body){s.velocity("transition."+r,u)}if(CONFIG.motion.transition.coll_header){a.velocity("transition."+l,u)}if(CONFIG.motion.transition.sidebar&&(NexT.utils.isPisces()||NexT.utils.isGemini())){c.velocity("transition."+d,u)}}},sidebar:function(i){if(CONFIG.sidebar.display==="always"){NexT.utils.displaySidebar()}i.next()}}});;
+function(t){"use strict";function s(e,i){this.$body=t(document.body);this.$scrollElement=t(e).is(document.body)?t(window):t(e);this.options=t.extend({},s.DEFAULTS,i);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this));this.refresh();this.process()}s.VERSION="3.3.2";s.DEFAULTS={offset:10};s.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};s.prototype.refresh=function(){var s=this;var e="offset";var i=0;this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();if(!t.isWindow(this.$scrollElement[0])){e="position";i=this.$scrollElement.scrollTop()}this.$body.find(this.selector).map(function(){var s=t(this);var r=s.data("target")||s.attr("href");var o=/^#./.test(r)&&t(NexT.utils.escapeSelector(r));return o&&o.length&&o.is(":visible")&&[[o[e]().top+i,r]]||null}).sort(function(t,s){return t[0]-s[0]}).each(function(){s.offsets.push(this[0]);s.targets.push(this[1])})};s.prototype.process=function(){var s=this.$scrollElement.scrollTop()+this.options.offset;var e=this.getScrollHeight();var i=this.options.offset+e-this.$scrollElement.height();var r=this.offsets;var o=this.targets;var l=this.activeTarget;var a;if(this.scrollHeight!=e){this.refresh()}if(s>=i){return l!=(a=o[o.length-1])&&this.activate(a)}if(l&&s<r[0]){t(this.selector).trigger("clear.bs.scrollspy");this.activeTarget=null;return this.clear()}for(a=r.length;a--;){l!=o[a]&&s>=r[a]&&(!r[a+1]||s<=r[a+1])&&this.activate(o[a])}};s.prototype.activate=function(s){this.activeTarget=s;this.clear();var e=this.selector+'[data-target="'+s+'"],'+this.selector+'[href="'+s+'"]';var i=t(e).parents("li").addClass("active");if(i.parent(".dropdown-menu").length){i=i.closest("li.dropdown").addClass("active")}i.trigger("activate.bs.scrollspy")};s.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};function e(e){return this.each(function(){var i=t(this);var r=i.data("bs.scrollspy");var o=typeof e=="object"&&e;if(!r)i.data("bs.scrollspy",r=new s(this,o));if(typeof e=="string")r[e]()})}var i=t.fn.scrollspy;t.fn.scrollspy=e;t.fn.scrollspy.Constructor=s;t.fn.scrollspy.noConflict=function(){t.fn.scrollspy=i;return this};t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var s=t(this);e.call(s,s.data())})})}(jQuery);;
$(document).ready(function(){t();function t(){var t=".post-toc";var a=$(t);var s=".active-current";a.on("activate.bs.scrollspy",function(){var s=$(t+" .active").last();e();s.addClass("active-current");a.scrollTop(s.offset().top-a.offset().top+a.scrollTop()-a.height()/2)}).on("clear.bs.scrollspy",e);$("body").scrollspy({target:t});function e(){$(t+" "+s).removeClass(s.substring(1))}}});$(document).ready(function(){var t=$("html");var a=200;var s=$.isFunction(t.velocity);$(".sidebar-nav li").on("click",function(){var t=$(this);var e="sidebar-nav-active";var i="sidebar-panel-active";if(t.hasClass(e)){return}var o=$("."+i);var l=$("."+t.data("target"));s?o.velocity("transition.slideUpOut",a,function(){l.velocity("stop").velocity("transition.slideDownIn",a).addClass(i)}):o.animate({opacity:0},a,function(){o.hide();l.stop().css({opacity:0,display:"block"}).animate({opacity:1},a,function(){o.removeClass(i);l.addClass(i)})});t.siblings().removeClass(e);t.addClass(e)});$(".post-toc a").on("click",function(a){a.preventDefault();var e=NexT.utils.escapeSelector(this.getAttribute("href"));var i=$(e).offset().top;s?t.velocity("stop").velocity("scroll",{offset:i+"px",mobileHA:false}):$("html, body").stop().animate({scrollTop:i},500)});var e=$(".post-toc-content");var i=CONFIG.sidebar.display==="post"||CONFIG.sidebar.display==="always";var o=e.length>0&&e.html().trim().length>0;if(i&&o){CONFIG.motion.enable?NexT.motion.middleWares.sidebar=function(){NexT.utils.displaySidebar()}:NexT.utils.displaySidebar()}});;
$(document).ready(function(){$(document).trigger("bootstrap:before");NexT.utils.isMobile()&&window.FastClick.attach(document.body);NexT.utils.lazyLoadPostsImages();NexT.utils.registerESCKeyEvent();NexT.utils.registerBackToTop();$(".site-nav-toggle button").on("click",function(){var e=$(".site-nav");var t="site-nav-on";var o=e.hasClass(t);var a=o?"slideUp":"slideDown";var i=o?"removeClass":"addClass";e.stop()[a]("fast",function(){e[i](t)})});CONFIG.fancybox&&NexT.utils.wrapImageWithFancyBox();CONFIG.tabs&&NexT.utils.registerTabsTag();NexT.utils.embeddedVideoTransformer();NexT.utils.addActiveClassToMenuItem();NexT.motion.integrator.add(NexT.motion.middleWares.logo).add(NexT.motion.middleWares.menu).add(NexT.motion.middleWares.postList).add(NexT.motion.middleWares.sidebar);$(document).trigger("motion:before");CONFIG.motion.enable&&NexT.motion.integrator.bootstrap();$(document).trigger("bootstrap:after")});;
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ClipboardJS=e():t.ClipboardJS=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,n){var r,o,i;!function(a,u){o=[t,n(7)],r=u,void 0!==(i="function"==typeof r?r.apply(e,o):r)&&(t.exports=i)}(0,function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(t){return t&&t.__esModule?t:{"default":t}}(e),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(e){n(this,t),this.resolveOptions(e),this.initSelection()}return i(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,r.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,r.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":o(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=a})},function(t,e,n){function r(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!u.string(e))throw new TypeError("Second argument must be a String");if(!u.fn(n))throw new TypeError("Third argument must be a Function");if(u.node(t))return o(t,e,n);if(u.nodeList(t))return i(t,e,n);if(u.string(t))return a(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function o(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}function i(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}function a(t,e,n){return c(document.body,t,e,n)}var u=n(6),c=n(5);t.exports=r},function(t,e){function n(){}n.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function r(){o.off(t,r),e.apply(n,arguments)}var o=this;return r._=e,this.on(t,r,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,o=n.length;for(r;r<o;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],o=[];if(r&&e)for(var i=0,a=r.length;i<a;i++)r[i].fn!==e&&r[i].fn._!==e&&o.push(r[i]);return o.length?n[t]=o:delete n[t],this}},t.exports=n},function(t,e,n){var r,o,i;!function(a,u){o=[t,n(0),n(2),n(1)],r=u,void 0!==(i="function"==typeof r?r.apply(e,o):r)&&(t.exports=i)}(0,function(t,e,n,r){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}var s=o(e),l=o(n),f=o(r),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),p=function(t){function e(t,n){i(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.resolveOptions(n),r.listenClick(t),r}return u(e,t),h(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===d(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,f.default)(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new s.default({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return c("action",t)}},{key:"defaultTarget",value:function(t){var e=c("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return c("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach(function(t){n=n&&!!document.queryCommandSupported(t)}),n}}]),e}(l.default);t.exports=p})},function(t,e){function n(t,e){for(;t&&t.nodeType!==r;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}var r=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var o=Element.prototype;o.matches=o.matchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector||o.webkitMatchesSelector}t.exports=n},function(t,e,n){function r(t,e,n,r,o){var a=i.apply(this,arguments);return t.addEventListener(n,a,o),{destroy:function(){t.removeEventListener(n,a,o)}}}function o(t,e,n,o,i){return"function"==typeof t.addEventListener?r.apply(null,arguments):"function"==typeof n?r.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t){return r(t,e,n,o,i)}))}function i(t,e,n,r){return function(n){n.delegateTarget=a(n.target,e),n.delegateTarget&&r.call(t,n)}}var a=n(4);t.exports=o},function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var n=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},function(t,e){function n(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var r=window.getSelection(),o=document.createRange();o.selectNodeContents(t),r.removeAllRanges(),r.addRange(o),e=r.toString()}return e}t.exports=n}])});;
function createCopyBtns(){var t=$("figure table");if(t.length>0){function o(t){$imgOK=$("#copyBtn").find("#imgSuccess");if($imgOK.css("display")=="none"){$imgOK.css({opacity:0,display:"block"});$imgOK.animate({opacity:1},1e3);setTimeout(function(){$imgOK.animate({opacity:0},2e3)},2e3);setTimeout(function(){$imgOK.css("display","none")},4e3)}}$(".post-body").before('<div id="copyBtn" style="opacity: 0; position: absolute;top:0px;display: none;line-height: 1; font-size:1.5em"><span id="imgCopy" ><i class="fa fa-paste fa-fw"></i></span><span id="imgSuccess" style="display: none;"><i class="fa fa-check-circle fa-fw" aria-hidden="true"></i></span>');var n=new Clipboard("#copyBtn",{target:function(){return document.querySelector("[copyFlag]")},isSupported:function(){return document.querySelector("[copyFlag]")}});n.on("success",function(t){t.clearSelection();o(t)});n.on("error",function(t){console.error("Action:",t.action);console.error("Trigger:",t.trigger)});$("#copyBtn").hover(function(){$(this).stop();$(this).css("opacity",1)},function(){$(this).animate({opacity:0},2e3)})}}$("figure").hover(function(){$("[copyFlag]").removeAttr("copyFlag");$(this).find(".code").attr("copyFlag",1);$copyBtn=$("#copyBtn");if($copyBtn.lenght!=0){$copyBtn.stop();$copyBtn.css("opacity",.8);$copyBtn.css("display","block");$copyBtn.css("top",parseInt($copyBtn.css("top"))+$(this).offset().top-$copyBtn.offset().top+3);$copyBtn.css("left",-$copyBtn.width()-3)}},function(){$("#copyBtn").animate({opacity:0},2e3)});$(document).ready(function(){createCopyBtns()});;
"use strict";function updateCoords(e){pointerX=(e.clientX||e.touches[0].clientX)-canvasEl.getBoundingClientRect().left,pointerY=e.clientY||e.touches[0].clientY-canvasEl.getBoundingClientRect().top}function setParticuleDirection(e){var t=anime.random(0,360)*Math.PI/180,a=anime.random(50,180),n=[-1,1][anime.random(0,1)]*a;return{x:e.x+n*Math.cos(t),y:e.y+n*Math.sin(t)}}function createParticule(e,t){var a={};return a.x=e,a.y=t,a.color=colors[anime.random(0,colors.length-1)],a.radius=anime.random(16,32),a.endPos=setParticuleDirection(a),a.draw=function(){ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.fillStyle=a.color,ctx.fill()},a}function createCircle(e,t){var a={};return a.x=e,a.y=t,a.color="#F00",a.radius=.1,a.alpha=.5,a.lineWidth=6,a.draw=function(){ctx.globalAlpha=a.alpha,ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.lineWidth=a.lineWidth,ctx.strokeStyle=a.color,ctx.stroke(),ctx.globalAlpha=1},a}function renderParticule(e){for(var t=0;t<e.animatables.length;t++){e.animatables[t].target.draw()}}function animateParticules(e,t){for(var a=createCircle(e,t),n=[],i=0;i<numberOfParticules;i++){n.push(createParticule(e,t))}anime.timeline().add({targets:n,x:function(e){return e.endPos.x},y:function(e){return e.endPos.y},radius:.1,duration:anime.random(1200,1800),easing:"easeOutExpo",update:renderParticule}).add({targets:a,radius:anime.random(80,160),lineWidth:0,alpha:{value:0,easing:"linear",duration:anime.random(600,800)},duration:anime.random(1200,1800),easing:"easeOutExpo",update:renderParticule,offset:0})}function debounce(e,t){var a;return function(){var n=this,i=arguments;clearTimeout(a),a=setTimeout(function(){e.apply(n,i)},t)}}var canvasEl=document.querySelector(".fireworks");if(canvasEl){var ctx=canvasEl.getContext("2d"),numberOfParticules=30,pointerX=0,pointerY=0,tap="mousedown",colors=["#FF1461","#18FF92","#5A87FF","#FBF38C"],setCanvasSize=debounce(function(){canvasEl.width=2*window.innerWidth,canvasEl.height=2*window.innerHeight,canvasEl.style.width=window.innerWidth+"px",canvasEl.style.height=window.innerHeight+"px",canvasEl.getContext("2d").scale(2,2)},500),render=anime({duration:1/0,update:function(){ctx.clearRect(0,0,canvasEl.width,canvasEl.height)}});document.addEventListener(tap,function(e){"sidebar"!==e.target.id&&"toggle-sidebar"!==e.target.id&&"A"!==e.target.nodeName&&"IMG"!==e.target.nodeName&&(render.play(),updateCoords(e),animateParticules(pointerX,pointerY))},!1),setCanvasSize(),window.addEventListener("resize",setCanvasSize,!1)}"use strict";function updateCoords(e){pointerX=(e.clientX||e.touches[0].clientX)-canvasEl.getBoundingClientRect().left,pointerY=e.clientY||e.touches[0].clientY-canvasEl.getBoundingClientRect().top}function setParticuleDirection(e){var t=anime.random(0,360)*Math.PI/180,a=anime.random(50,180),n=[-1,1][anime.random(0,1)]*a;return{x:e.x+n*Math.cos(t),y:e.y+n*Math.sin(t)}}function createParticule(e,t){var a={};return a.x=e,a.y=t,a.color=colors[anime.random(0,colors.length-1)],a.radius=anime.random(16,32),a.endPos=setParticuleDirection(a),a.draw=function(){ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.fillStyle=a.color,ctx.fill()},a}function createCircle(e,t){var a={};return a.x=e,a.y=t,a.color="#F00",a.radius=.1,a.alpha=.5,a.lineWidth=6,a.draw=function(){ctx.globalAlpha=a.alpha,ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.lineWidth=a.lineWidth,ctx.strokeStyle=a.color,ctx.stroke(),ctx.globalAlpha=1},a}function renderParticule(e){for(var t=0;t<e.animatables.length;t++){e.animatables[t].target.draw()}}function animateParticules(e,t){for(var a=createCircle(e,t),n=[],i=0;i<numberOfParticules;i++){n.push(createParticule(e,t))}anime.timeline().add({targets:n,x:function(e){return e.endPos.x},y:function(e){return e.endPos.y},radius:.1,duration:anime.random(1200,1800),easing:"easeOutExpo",update:renderParticule}).add({targets:a,radius:anime.random(80,160),lineWidth:0,alpha:{value:0,easing:"linear",duration:anime.random(600,800)},duration:anime.random(1200,1800),easing:"easeOutExpo",update:renderParticule,offset:0})}function debounce(e,t){var a;return function(){var n=this,i=arguments;clearTimeout(a),a=setTimeout(function(){e.apply(n,i)},t)}}var canvasEl=document.querySelector(".fireworks");if(canvasEl){var ctx=canvasEl.getContext("2d"),numberOfParticules=30,pointerX=0,pointerY=0,tap="mousedown",colors=["#FF1461","#18FF92","#5A87FF","#FBF38C"],setCanvasSize=debounce(function(){canvasEl.width=2*window.innerWidth,canvasEl.height=2*window.innerHeight,canvasEl.style.width=window.innerWidth+"px",canvasEl.style.height=window.innerHeight+"px",canvasEl.getContext("2d").scale(2,2)},500),render=anime({duration:1/0,update:function(){ctx.clearRect(0,0,canvasEl.width,canvasEl.height)}});document.addEventListener(tap,function(e){"sidebar"!==e.target.id&&"toggle-sidebar"!==e.target.id&&"A"!==e.target.nodeName&&"IMG"!==e.target.nodeName&&(render.play(),updateCoords(e),animateParticules(pointerX,pointerY))},!1),setCanvasSize(),window.addEventListener("resize",setCanvasSize,!1)}